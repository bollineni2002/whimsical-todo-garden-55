const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-B23hldfl.js","assets/react-D2rgqh6b.js","assets/index.es-0pq0_1KS.js","assets/ui-D77HYuSG.js"])))=>i.map(i=>d[i]);
var SA=Object.defineProperty;var U1=t=>{throw TypeError(t)};var _A=(t,e,r)=>e in t?SA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Af=(t,e,r)=>_A(t,typeof e!="symbol"?e+"":e,r),Rg=(t,e,r)=>e.has(t)||U1("Cannot "+r);var Fe=(t,e,r)=>(Rg(t,e,"read from private field"),r?r.call(t):e.get(t)),nr=(t,e,r)=>e.has(t)?U1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Bt=(t,e,r,n)=>(Rg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),bn=(t,e,r)=>(Rg(t,e,"access private method"),r);var Pf=(t,e,r,n)=>({set _(s){Bt(t,e,s,r)},get _(){return Fe(t,e,n)}});import{j as o,V as v5,R as x5,A as b5,C as w5,T as S5,D as _5,P as jA,a as Ut,u as bs,b as Sr,c as ph,d as Ya,e as ht,f as So,g as Xp,S as j5,h as NA,i as ul,k as za,l as mh,m as N5,n as eu,o as u0,p as d0,F as h0,q as f0,I as p0,r as C5,s as m0,t as CA,v as g0,w as Qp,O as y0,x as v0,y as em,z as x0,B as b0,E as k5,G as A5,H as P5,L as E5,J as T5,K as L5,M as kA,N as AA,Q as D5,W as PA}from"./ui-D77HYuSG.js";import{a as tm,g as EA,c as Fs,r as w,R as Le,G as TA,u as Ss,d as LA,e as DA,L as RA,N as w0,B as OA,f as IA,h as Ks}from"./react-D2rgqh6b.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var R5,V1=tm;R5=V1.createRoot,V1.hydrateRoot;const MA="modulepreload",FA=function(t){return"/Trade-Book-Ledge/"+t},q1={},Un=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=FA(c),c in q1)return;q1[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":MA,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},BA=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Un(async()=>{const{default:n}=await Promise.resolve().then(()=>tu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class S0 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class $A extends S0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class UA extends S0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class VA extends S0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fy||(Fy={}));var qA=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class zA{constructor(e,{headers:r={},customFetch:n,region:s=Fy.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=BA(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return qA(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:i}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(g=>{throw new $A(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new UA(d);if(!d.ok)throw new VA(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield d.json():f==="application/octet-stream"?m=yield d.blob():f==="text/event-stream"?m=d:f==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var Qn={},_0={},rm={},gh={},nm={},sm={},WA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Uc=WA();const HA=Uc.fetch,O5=Uc.fetch.bind(Uc),I5=Uc.Headers,GA=Uc.Request,YA=Uc.Response,tu=Object.freeze(Object.defineProperty({__proto__:null,Headers:I5,Request:GA,Response:YA,default:O5,fetch:HA},Symbol.toStringTag,{value:"Module"})),KA=EA(tu);var am={};Object.defineProperty(am,"__esModule",{value:!0});let JA=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};am.default=JA;var M5=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sm,"__esModule",{value:!0});const ZA=M5(KA),XA=M5(am);let QA=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ZA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let u=null,d=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=_:d=JSON.parse(_))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await a.text();try{u=JSON.parse(v),Array.isArray(u)&&a.status===404&&(d=[],u=null,f=200,m="OK")}catch{a.status===404&&v===""?(f=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new XA.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};sm.default=QA;var eP=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nm,"__esModule",{value:!0});const tP=eP(sm);let rP=class extends tP.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nm.default=rP;var nP=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gh,"__esModule",{value:!0});const sP=nP(nm);let aP=class extends sP.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};gh.default=aP;var iP=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rm,"__esModule",{value:!0});const $u=iP(gh);let oP=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new $u.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new $u.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new $u.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new $u.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new $u.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rm.default=oP;var im={},om={};Object.defineProperty(om,"__esModule",{value:!0});om.version=void 0;om.version="0.0.0-automated";Object.defineProperty(im,"__esModule",{value:!0});im.DEFAULT_HEADERS=void 0;const lP=om;im.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${lP.version}`};var F5=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_0,"__esModule",{value:!0});const cP=F5(rm),uP=F5(gh),dP=im;let hP=class B5{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},dP.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new cP.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new B5(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(i="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new uP.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_0.default=hP;var ru=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const $5=ru(_0);Qn.PostgrestClient=$5.default;const U5=ru(rm);Qn.PostgrestQueryBuilder=U5.default;const V5=ru(gh);Qn.PostgrestFilterBuilder=V5.default;const q5=ru(nm);Qn.PostgrestTransformBuilder=q5.default;const z5=ru(sm);Qn.PostgrestBuilder=z5.default;const W5=ru(am);Qn.PostgrestError=W5.default;var fP=Qn.default={PostgrestClient:$5.default,PostgrestQueryBuilder:U5.default,PostgrestFilterBuilder:V5.default,PostgrestTransformBuilder:q5.default,PostgrestBuilder:z5.default,PostgrestError:W5.default};const{PostgrestClient:pP,PostgrestQueryBuilder:HH,PostgrestFilterBuilder:GH,PostgrestTransformBuilder:YH,PostgrestBuilder:KH,PostgrestError:JH}=fP,mP="2.11.2",gP={"X-Client-Info":`realtime-js/${mP}`},yP="1.0.0",H5=1e4,vP=1e3;var gc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gc||(gc={}));var ds;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ds||(ds={}));var aa;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(aa||(aa={}));var By;(function(t){t.websocket="websocket"})(By||(By={}));var Zo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zo||(Zo={}));class xP{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+a));i=i+a;const u=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class G5{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xr||(xr={}));const z1=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,i)=>(a[i]=bP(i,t,e,s),a),{})},bP=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,i=r[t];return a&&!n.includes(a)?Y5(a,i):$y(i)},Y5=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return jP(e,r)}switch(t){case xr.bool:return wP(e);case xr.float4:case xr.float8:case xr.int2:case xr.int4:case xr.int8:case xr.numeric:case xr.oid:return SP(e);case xr.json:case xr.jsonb:return _P(e);case xr.timestamp:return NP(e);case xr.abstime:case xr.date:case xr.daterange:case xr.int4range:case xr.int8range:case xr.money:case xr.reltime:case xr.text:case xr.time:case xr.timestamptz:case xr.timetz:case xr.tsrange:case xr.tstzrange:return $y(e);default:return $y(e)}},$y=t=>t,wP=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},SP=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},_P=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},jP=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const i=t.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Y5(e,l))}return t},NP=t=>typeof t=="string"?t.replace(" ","T"):t,K5=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Og{constructor(e,r,n={},s=H5){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var W1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(W1||(W1={}));class id{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=id.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=id.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=id.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),g=d.filter(b=>m.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(i,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(H1||(H1={}));var G1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(G1||(G1={}));var fi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class j0{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ds.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Og(this,aa.join,this.params,this.timeout),this.rejoinTimer=new G5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ds.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ds.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ds.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ds.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new id(this),this.broadcastEndpointURL=K5(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(d=>e==null?void 0:e(fi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(fi.CLOSED));const c={},u={broadcast:a,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(fi.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let v=0;v<m;v++){const b=f[v],{filter:{event:_,schema:S,table:N,filter:k}}=b,A=d&&d[v];if(A&&A.event===_&&A.schema===S&&A.table===N&&A.filter===k)g.push(Object.assign(Object.assign({},b),{id:A.id}));else{this.unsubscribe(),e==null||e(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(fi.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ds.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Og(this,aa.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Og(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=aa;if(n&&[l,c,u,d].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var g,v,b;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(m=>m.callback(f,n)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var g,v,b,_,S,N;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const k=m.id,A=(g=m.filter)===null||g===void 0?void 0:g.event;return k&&((v=r.ids)===null||v===void 0?void 0:v.includes(k))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(S=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return k==="*"||k===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:b,commit_timestamp:_,type:S,errors:N}=g;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:_,eventType:S,new:{},old:{},errors:N}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===ds.closed}_isJoined(){return this.state===ds.joined}_isJoining(){return this.state===ds.joining}_isLeaving(){return this.state===ds.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&j0.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(aa.close,{},e)}_onError(e){this._on(aa.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ds.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=z1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=z1(e.columns,e.old_record)),r}}const CP=()=>{},kP=typeof WebSocket<"u",AP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class PP{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gP,this.params={},this.timeout=H5,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=CP,this.conn=null,this.sendBuffer=[],this.serializer=new xP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>Un(async()=>{const{default:c}=await Promise.resolve().then(()=>tu);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${e}/${By.websocket}`,this.httpEndpoint=K5(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,i)=>i(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new G5(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(kP){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new EP(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Un(async()=>{const{default:e}=await import("./browser-B23hldfl.js").then(r=>r.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yP}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gc.connecting:return Zo.Connecting;case gc.open:return Zo.Open;case gc.closing:return Zo.Closing;default:return Zo.Closed}}isConnected(){return this.connectionState()===Zo.Open}channel(e,r={config:{}}){const n=new j0(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:s,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(aa.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(vP,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:a,ref:i}=r;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,a),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(aa.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([AP],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class EP{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class N0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function cn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class TP extends N0{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Uy extends N0{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var LP=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const J5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Un(async()=>{const{default:n}=await Promise.resolve().then(()=>tu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},DP=()=>LP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Un(()=>Promise.resolve().then(()=>tu),void 0)).Response:Response}),Vy=t=>{if(Array.isArray(t))return t.map(r=>Vy(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Vy(n)}),e};var gl=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Ig=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),RP=(t,e,r)=>gl(void 0,void 0,void 0,function*(){const n=yield DP();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new TP(Ig(s),t.status||500))}).catch(s=>{e(new Uy(Ig(s),s))}):e(new Uy(Ig(t),t))}),OP=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function yh(t,e,r,n,s,a){return gl(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,OP(e,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>RP(c,l,n))})})}function cp(t,e,r,n){return gl(this,void 0,void 0,function*(){return yh(t,"GET",e,r,n)})}function Zi(t,e,r,n,s){return gl(this,void 0,void 0,function*(){return yh(t,"POST",e,n,s,r)})}function IP(t,e,r,n,s){return gl(this,void 0,void 0,function*(){return yh(t,"PUT",e,n,s,r)})}function MP(t,e,r,n){return gl(this,void 0,void 0,function*(){return yh(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Z5(t,e,r,n,s){return gl(this,void 0,void 0,function*(){return yh(t,"DELETE",e,n,s,r)})}var Jn=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const FP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Y1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class BP{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=J5(s)}uploadOrUpdate(e,r,n,s){return Jn(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Y1),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(cn(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Jn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Y1.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(cn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Jn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Zi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new N0("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}})}update(e,r,n){return Jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Jn(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(cn(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Jn(this,void 0,void 0,function*(){try{return{data:{path:(yield Zi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(cn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Jn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Zi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(cn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Jn(this,void 0,void 0,function*(){try{const s=yield Zi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(cn(s))return{data:null,error:s};throw s}})}download(e,r){return Jn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield cp(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(cn(l))return{data:null,error:l};throw l}})}info(e){return Jn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield cp(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Vy(n),error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}})}exists(e){return Jn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield MP(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(cn(n)&&n instanceof Uy){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Jn(this,void 0,void 0,function*(){try{return{data:yield Z5(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}})}list(e,r,n){return Jn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},FP),r),{prefix:e||""});return{data:yield Zi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(cn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const $P="2.7.1",UP={"X-Client-Info":`storage-js/${$P}`};var Zl=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class VP{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},UP),r),this.fetch=J5(n)}listBuckets(){return Zl(this,void 0,void 0,function*(){try{return{data:yield cp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(cn(e))return{data:null,error:e};throw e}})}getBucket(e){return Zl(this,void 0,void 0,function*(){try{return{data:yield cp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Zl(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Zl(this,void 0,void 0,function*(){try{return{data:yield IP(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(cn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Zl(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Zl(this,void 0,void 0,function*(){try{return{data:yield Z5(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(cn(r))return{data:null,error:r};throw r}})}}class qP extends VP{constructor(e,r={},n){super(e,r,n)}from(e){return new BP(this.url,this.headers,e,this.fetch)}}const zP="2.49.3";let Xu="";typeof Deno<"u"?Xu="deno":typeof document<"u"?Xu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xu="react-native":Xu="node";const WP={"X-Client-Info":`supabase-js-${Xu}/${zP}`},HP={headers:WP},GP={schema:"public"},YP={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KP={};var JP=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const ZP=t=>{let e;return t?e=t:typeof fetch>"u"?e=O5:e=fetch,(...r)=>e(...r)},XP=()=>typeof Headers>"u"?I5:Headers,QP=(t,e,r)=>{const n=ZP(r),s=XP();return(a,i)=>JP(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:u}))})};var eE=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function tE(t){return t.replace(/\/$/,"")}function rE(t,e){const{db:r,auth:n,realtime:s,global:a}=t,{db:i,auth:l,realtime:c,global:u}=e,d={db:Object.assign(Object.assign({},i),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),a),accessToken:()=>eE(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const X5="2.69.1",sc=30*1e3,qy=3,Mg=qy*sc,nE="http://localhost:9999",sE="supabase.auth.token",aE={"X-Client-Info":`gotrue-js/${X5}`},zy="X-Supabase-Api-Version",Q5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oE=6e5;class C0 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ft(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class lE extends C0{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cE(t){return Ft(t)&&t.name==="AuthApiError"}class eS extends C0{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class _o extends C0{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Gi extends _o{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uE(t){return Ft(t)&&t.name==="AuthSessionMissingError"}class Fg extends _o{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ef extends _o{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tf extends _o{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dE(t){return Ft(t)&&t.name==="AuthImplicitGrantRedirectError"}class K1 extends _o{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wy extends _o{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Bg(t){return Ft(t)&&t.name==="AuthRetryableFetchError"}class J1 extends _o{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class od extends _o{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Z1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),X1=` 	
\r=`.split(""),hE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<X1.length;e+=1)t[X1[e].charCodeAt(0)]=-2;for(let e=0;e<Z1.length;e+=1)t[Z1[e].charCodeAt(0)]=e;return t})();function tS(t,e,r){const n=hE[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Q1(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{mE(i,n,r)};for(let i=0;i<t.length;i+=1)tS(t.charCodeAt(i),s,a);return e.join("")}function fE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function pE(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}fE(n,e)}}function mE(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function gE(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tS(t.charCodeAt(s),r,n);return new Uint8Array(e)}function yE(t){const e=[];return pE(t,r=>e.push(r)),new Uint8Array(e)}function vE(t){return Math.round(Date.now()/1e3)+t}function xE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ea=()=>typeof window<"u"&&typeof document<"u",Uo={tested:!1,writable:!1},ld=()=>{if(!Ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Uo.tested)return Uo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Uo.tested=!0,Uo.writable=!0}catch{Uo.tested=!0,Uo.writable=!1}return Uo.writable};function bE(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const rS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Un(async()=>{const{default:n}=await Promise.resolve().then(()=>tu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},wE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",nS=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Lf=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Df=async(t,e)=>{await t.removeItem(e)};class lm{constructor(){this.promise=new lm.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}lm.promiseConstructor=Promise;function $g(t){const e=t.split(".");if(e.length!==3)throw new od("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!iE.test(e[n]))throw new od("JWT not in base64url format");return{header:JSON.parse(Q1(e[0])),payload:JSON.parse(Q1(e[1])),signature:gE(e[2]),raw:{header:e[0],payload:e[1]}}}async function SE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _E(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){n(i);return}}catch(i){if(!e(a,i)){s(i);return}}})()})}function jE(t){return("0"+t.toString(16)).substr(-2)}function NE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,jE).join("")}async function CE(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function kE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await CE(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xl(t,e,r=!1){const n=NE();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await nS(t,`${e}-code-verifier`,s);const a=await kE(n);return[a,n===a?"plain":"s256"]}const AE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PE(t){const e=t.headers.get(zy);if(!e||!e.match(AE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function EE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function TE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var LE=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const zo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),DE=[502,503,504];async function eb(t){var e;if(!wE(t))throw new Wy(zo(t),0);if(DE.includes(t.status))throw new Wy(zo(t),t.status);let r;try{r=await t.json()}catch(a){throw new eS(zo(a),a)}let n;const s=PE(t);if(s&&s.getTime()>=Q5["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new J1(zo(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Gi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new J1(zo(r),t.status,r.weak_password.reasons);throw new lE(zo(r),t.status||500,n)}const RE=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function qt(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[zy]||(a[zy]=Q5["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await OE(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function OE(t,e,r,n,s,a){const i=RE(e,n,s,a);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new Wy(zo(c),0)}if(l.ok||await eb(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await eb(c)}}function Yi(t){var e;let r=null;BE(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=vE(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function tb(t){const e=Yi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IE(t){return{data:t,error:null}}function ME(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,i=LE(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function FE(t){return t}function BE(t){return t.access_token&&t.refresh_token&&t.expires_in}var $E=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class UE{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=rS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qi})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=$E(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ME,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ft(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qi})}catch(r){if(Ft(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:FE});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ft(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qi})}catch(r){if(Ft(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Qi})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qi})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await qt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}}}const VE={getItem:t=>ld()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ld()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ld()&&globalThis.localStorage.removeItem(t)}};function rb(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function qE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ql={debug:!!(globalThis&&ld()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zE extends sS{}async function WE(t,e,r){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ql.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}qE();const HE={url:nE,storageKey:sE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nb(t,e,r){return await r()}class wd{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wd.nextInstanceID,wd.nextInstanceID+=1,this.instanceID>0&&Ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},HE),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new UE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rS(s.fetch),this.lock=s.lock||nb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ea()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=WE:this.lock=nb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ld()?this.storage=VE:(this.memoryStorage={},this.storage=rb(this.memoryStorage)):(this.memoryStorage={},this.storage=rb(this.memoryStorage)),Ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${X5}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=bE(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ea()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dE(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ft(r)?{error:r}:{error:new eS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Yi}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ft(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Xl(this.storage,this.storageKey)),a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:Yi})}else if("phone"in e){const{phone:d,password:h,options:f}=e;a=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Yi})}else throw new Ef("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ft(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:i,options:l}=e;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tb})}else if("phone"in e){const{phone:a,password:i,options:l}=e;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tb})}else throw new Ef("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Fg}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ft(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await Lf(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Yi});if(await Df(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Fg}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(Ft(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=e,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Yi}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Fg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Ft(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,a,i;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xl(this.storage,this.storageKey));const{error:h}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ef("You must provide either an email or phone number.")}catch(l){if(Ft(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Yi});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ft(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await Xl(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:IE})}catch(a){if(Ft(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Gi;const{error:s}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ft(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:i}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:i,error:l}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Ef("You must provide either an email or phone number and a type")}catch(r){if(Ft(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Lf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Mg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qi}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gi}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Qi})})}catch(r){if(Ft(r))return uE(r)&&(await this._removeSession(),await Df(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Gi;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Xl(this.storage,this.storageKey));const{data:u,error:d}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Qi});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Ft(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gi;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=$g(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Ft(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Gi;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ft(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ea())throw new Tf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new K1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new K1("No code detected.");const{data:S,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!i||!u)throw new Tf("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=sc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:v,error:b}=await this._getUser(a);if(b)throw b;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:i,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(n){if(Ft(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Lf(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(cE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Df(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=xE(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Xl(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Ft(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ea()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ft(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await _E(async s=>(s>0&&await SE(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Yi})),(s,a)=>{const i=200*Math.pow(2,s);return a&&Bg(a)&&Date.now()+i-n<sc})}catch(n){if(this._debug(r,"error",n),Ft(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ea()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Lf(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Mg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Mg}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Bg(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Gi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new lm;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new Gi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Ft(a)){const i={session:null,error:a};return Bg(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Df(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ea()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/sc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${sc}ms, refresh threshold is ${qy} ticks`),s<=qy&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ea()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await Xl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await qt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:i,error:l}=await qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=$g(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(i=>i.kid===e);if(n||(n=this.jwks.keys.find(i=>i.kid===e),n&&this.jwks_cached_at+oE>Date.now()))return n;const{data:s,error:a}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new od("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(i=>i.kid===e),!n)throw new od("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=$g(n);if(EE(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:s,signature:i},error:null}}const u=TE(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,yE(`${l}.${c}`)))throw new od("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}}}wd.nextInstanceID=0;const GE=wd;class YE extends GE{constructor(e){super(e)}}var KE=function(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class JE{constructor(e,r,n){var s,a,i;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=tE(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:GP,realtime:KP,auth:Object.assign(Object.assign({},YP),{storageKey:c}),global:HP},d=rE(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=QP(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new pP(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new zA(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new qP(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return KE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:i,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YE({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new PP(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sb=(t,e,r)=>new JE(t,e,r),ab="https://unwisxczcoeoshwybktg.supabase.co",ib="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVud2lzeGN6Y29lb3Nod3lia3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI5MTE2MzEsImV4cCI6MjA1ODQ4NzYzMX0.CQWn7zkuEHAIPCNPB8nIGCaZE1hut2umQEMdRkq3IFk";let Kf;try{Kf=sb(ab,ib,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-application-name":"trade-book-ledger"}}}),Kf.storage?console.log("Supabase client initialized with storage support"):console.error("Supabase storage is not available in the client")}catch(t){console.error("Error initializing Supabase client:",t),Kf=sb(ab,ib)}const We=Kf,k0=Object.freeze(Object.defineProperty({__proto__:null,supabaseSimple:We},Symbol.toStringTag,{value:"Module"})),Ia={isStorageAvailable:()=>{try{return!!We&&!!We.storage}catch(t){return console.error("Error checking Supabase storage availability:",t),!1}},checkBucketExists:async t=>{try{if(!Ia.isStorageAvailable())return console.error("Supabase storage is not available"),!1;const{data:e,error:r}=await We.storage.getBucket(t);return r?r.message&&r.message.includes("does not exist")?(console.error(`Bucket '${t}' does not exist`),!1):(console.error(`Error checking bucket '${t}':`,r),!1):!!e}catch(e){return console.error(`Error checking bucket '${t}':`,e),!1}},ensureBucketExists:async(t,e=!1)=>{try{if(!Ia.isStorageAvailable())return console.error("Supabase storage is not available"),!1;if(await Ia.checkBucketExists(t))return console.log(`Bucket '${t}' already exists`),!0;const{data:n,error:s}=await We.storage.createBucket(t,{public:e});return s?(console.error(`Error creating bucket '${t}':`,s),!1):(console.log(`Bucket '${t}' created successfully`),!0)}catch(r){return console.error(`Error ensuring bucket '${t}' exists:`,r),!1}},initializeStorage:async()=>{try{return Ia.isStorageAvailable()?await Ia.ensureBucketExists("attachments",!0):(console.error("Supabase storage is not available"),!1)}catch(t){return console.error("Error initializing Supabase storage:",t),!1}}},ZE=async()=>{try{return console.log("Initializing Supabase storage..."),Ia.isStorageAvailable()?await Ia.ensureBucketExists("attachments",!0)?(console.log("Supabase storage initialized successfully"),!0):(console.error("Failed to create attachments bucket"),!1):(console.error("Supabase storage is not available"),!1)}catch(t){return console.error("Error initializing Supabase storage:",t),!1}},XE=1,QE=5e3;let Ug=0;function eT(){return Ug=(Ug+1)%Number.MAX_SAFE_INTEGER,Ug.toString()}const Vg=new Map,ob=t=>{if(Vg.has(t))return;const e=setTimeout(()=>{Vg.delete(t),cd({type:"REMOVE_TOAST",toastId:t})},QE);Vg.set(t,e)},tT=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,XE)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?ob(r):t.toasts.forEach(n=>{ob(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Jf=[];let Zf={toasts:[]};function cd(t){Zf=tT(Zf,t),Jf.forEach(e=>{e(Zf)})}function rT({...t}){const e=eT(),r=s=>cd({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>cd({type:"DISMISS_TOAST",toastId:e});return cd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function Xt(){const[t,e]=w.useState(Zf);return w.useEffect(()=>(Jf.push(e),()=>{const r=Jf.indexOf(e);r>-1&&Jf.splice(r,1)}),[t]),{...t,toast:rT,dismiss:r=>cd({type:"DISMISS_TOAST",toastId:r})}}function aS(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=aS(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function iS(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=aS(t))&&(n&&(n+=" "),n+=e);return n}const lb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cb=iS,vh=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return cb(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=e,i=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const f=lb(d)||lb(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(g=>{let[v,b]=g;return Array.isArray(b)?b.includes({...a,...l}[v]):{...a,...l}[v]===b})?[...u,h,f]:u},[]);return cb(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oS=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...l},c)=>w.createElement("svg",{ref:c,...sT,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:oS("lucide",s),...l},[...i.map(([u,d])=>w.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(t,e)=>{const r=w.forwardRef(({className:n,...s},a)=>w.createElement(aT,{ref:a,iconNode:e,className:oS(`lucide-${nT(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ct("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=ct("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=ct("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ct("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=ct("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=ct("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=ct("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=ct("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=ct("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ct("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=ct("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=ct("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=ct("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=ct("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=ct("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=ct("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=ct("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=ct("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=ct("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=ct("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=ct("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=ct("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ct("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=ct("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ct("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=ct("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ct("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ct("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=ct("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=ct("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=ct("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=ct("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=ct("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=ct("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=ct("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=ct("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ct("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ct("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=ct("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=ct("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=ct("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=ct("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=ct("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=ct("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ct("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ct("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ct("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=ct("Replace",[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=ct("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ct("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=ct("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ct("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ct("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=ct("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=ct("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ct("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=ct("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ct("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=ct("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ct("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),L0="-",MT=t=>{const e=BT(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(L0);return l[0]===""&&l.length!==1&&l.shift(),pS(l,e)||FT(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},pS=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?pS(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(L0);return(i=e.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},gb=/^\[(.+)\]$/,FT=t=>{if(gb.test(t)){const e=gb.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},BT=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return UT(Object.entries(t.classGroups),r).forEach(([a,i])=>{Zy(i,n,a,e)}),n},Zy=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:yb(e,s);a.classGroupId=r;return}if(typeof s=="function"){if($T(s)){Zy(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{Zy(i,yb(e,a),r,n)})})},yb=(t,e)=>{let r=t;return e.split(L0).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},$T=t=>t.isThemeGetter,UT=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[e+i,l])):a);return[r,s]}):t,VT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},mS="!",qT=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,i=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(n||l.slice(b,b+a)===e)){c.push(l.slice(d,b)),d=b+a;continue}if(_==="/"){h=b;continue}}_==="["?u++:_==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(mS),g=m?f.substring(1):f,v=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:i}):i},zT=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},WT=t=>({cache:VT(t.cacheSize),parseClassName:qT(t),...MT(t)}),HT=/\s+/,GT=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],i=t.trim().split(HT);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let g=!!m,v=n(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const b=zT(d).join(":"),_=h?b+mS:b,S=_+v;if(a.includes(S))continue;a.push(S);const N=s(v,g);for(let k=0;k<N.length;++k){const A=N[k];a.push(_+A)}l=u+(l.length>0?" "+l:l)}return l};function YT(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=gS(e))&&(n&&(n+=" "),n+=r);return n}const gS=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=gS(t[n]))&&(r&&(r+=" "),r+=e);return r};function KT(t,...e){let r,n,s,a=i;function i(c){const u=e.reduce((d,h)=>h(d),t());return r=WT(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=GT(c,r);return s(c,d),d}return function(){return a(YT.apply(null,arguments))}}const Nr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},yS=/^\[(?:([a-z-]+):)?(.+)\]$/i,JT=/^\d+\/\d+$/,ZT=new Set(["px","full","screen"]),XT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,QT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oi=t=>yc(t)||ZT.has(t)||JT.test(t),Vi=t=>nu(t,"length",uL),yc=t=>!!t&&!Number.isNaN(Number(t)),zg=t=>nu(t,"number",yc),Uu=t=>!!t&&Number.isInteger(Number(t)),nL=t=>t.endsWith("%")&&yc(t.slice(0,-1)),Mt=t=>yS.test(t),qi=t=>XT.test(t),sL=new Set(["length","size","percentage"]),aL=t=>nu(t,sL,vS),iL=t=>nu(t,"position",vS),oL=new Set(["image","url"]),lL=t=>nu(t,oL,hL),cL=t=>nu(t,"",dL),Vu=()=>!0,nu=(t,e,r)=>{const n=yS.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},uL=t=>QT.test(t)&&!eL.test(t),vS=()=>!1,dL=t=>tL.test(t),hL=t=>rL.test(t),fL=()=>{const t=Nr("colors"),e=Nr("spacing"),r=Nr("blur"),n=Nr("brightness"),s=Nr("borderColor"),a=Nr("borderRadius"),i=Nr("borderSpacing"),l=Nr("borderWidth"),c=Nr("contrast"),u=Nr("grayscale"),d=Nr("hueRotate"),h=Nr("invert"),f=Nr("gap"),m=Nr("gradientColorStops"),g=Nr("gradientColorStopPositions"),v=Nr("inset"),b=Nr("margin"),_=Nr("opacity"),S=Nr("padding"),N=Nr("saturate"),k=Nr("scale"),A=Nr("sepia"),W=Nr("skew"),I=Nr("space"),F=Nr("translate"),ee=()=>["auto","contain","none"],ae=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Mt,e],D=()=>[Mt,e],T=()=>["",oi,Vi],B=()=>["auto",yc,Mt],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",Mt],he=()=>["auto","avoid","all","avoid-page","page","left","right","column"],je=()=>[yc,Mt];return{cacheSize:500,separator:":",theme:{colors:[Vu],spacing:[oi,Vi],blur:["none","",qi,Mt],brightness:je(),borderColor:[t],borderRadius:["none","","full",qi,Mt],borderSpacing:D(),borderWidth:T(),contrast:je(),grayscale:X(),hueRotate:je(),invert:X(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[nL,Vi],inset:R(),margin:R(),opacity:je(),padding:D(),saturate:je(),scale:je(),sepia:X(),skew:je(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Mt]}],container:["container"],columns:[{columns:[qi]}],"break-after":[{"break-after":he()}],"break-before":[{"break-before":he()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Mt]}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Uu,Mt]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Mt]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",Uu,Mt]}],"grid-cols":[{"grid-cols":[Vu]}],"col-start-end":[{col:["auto",{span:["full",Uu,Mt]},Mt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Vu]}],"row-start-end":[{row:["auto",{span:[Uu,Mt]},Mt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Mt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Mt,e]}],"min-w":[{"min-w":[Mt,e,"min","max","fit"]}],"max-w":[{"max-w":[Mt,e,"none","full","min","max","fit","prose",{screen:[qi]},qi]}],h:[{h:[Mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qi,Vi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zg]}],"font-family":[{font:[Vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Mt]}],"line-clamp":[{"line-clamp":["none",yc,zg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oi,Mt]}],"list-image":[{"list-image":["none",Mt]}],"list-style-type":[{list:["none","disc","decimal",Mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oi,Vi]}],"underline-offset":[{"underline-offset":["auto",oi,Mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),iL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[oi,Mt]}],"outline-w":[{outline:[oi,Vi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[oi,Vi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qi,cL]}],"shadow-color":[{shadow:[Vu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qi,Mt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[N]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Mt]}],duration:[{duration:je()}],ease:[{ease:["linear","in","out","in-out",Mt]}],delay:[{delay:je()}],animate:[{animate:["none","spin","ping","pulse","bounce",Mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Uu,Mt]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[oi,Vi,zg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pL=KT(fL);function Ve(...t){return pL(iS(t))}function la(t){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t)}function mL(t="id"){return`${t}-${Date.now().toString(36)}${Math.random().toString(36).substring(2,5)}`}const gL=jA,xS=w.forwardRef(({className:t,...e},r)=>o.jsx(v5,{ref:r,className:Ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));xS.displayName=v5.displayName;const yL=vh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bS=w.forwardRef(({className:t,variant:e,...r},n)=>o.jsx(x5,{ref:n,className:Ve(yL({variant:e}),t),...r}));bS.displayName=x5.displayName;const vL=w.forwardRef(({className:t,...e},r)=>o.jsx(b5,{ref:r,className:Ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));vL.displayName=b5.displayName;const wS=w.forwardRef(({className:t,...e},r)=>o.jsx(w5,{ref:r,className:Ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(cm,{className:"h-4 w-4"})}));wS.displayName=w5.displayName;const SS=w.forwardRef(({className:t,...e},r)=>o.jsx(S5,{ref:r,className:Ve("text-sm font-semibold",t),...e}));SS.displayName=S5.displayName;const _S=w.forwardRef(({className:t,...e},r)=>o.jsx(_5,{ref:r,className:Ve("text-sm opacity-90",t),...e}));_S.displayName=_5.displayName;function xL(){const{toasts:t}=Xt();return o.jsxs(gL,{children:[t.map(function({id:e,title:r,description:n,action:s,...a}){return o.jsxs(bS,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(SS,{children:r}),n&&o.jsx(_S,{children:n})]}),s,o.jsx(wS,{})]},e)}),o.jsx(xS,{})]})}var vb=["light","dark"],bL="(prefers-color-scheme: dark)",wL=w.createContext(void 0),SL={setTheme:t=>{},themes:[]},_L=()=>{var t;return(t=w.useContext(wL))!=null?t:SL};w.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let u=a==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?vb.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,v=!1,b=!0)=>{let _=i?i[g]:g,S=v?g+"|| ''":`'${_}'`,N="";return s&&b&&!v&&vb.includes(g)&&(N+=`d.style.colorScheme = '${g}';`),r==="class"?v||_?N+=`c.add(${S})`:N+="null":_&&(N+=`d[s](n,${S})`),N},m=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${bL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var jL=t=>{switch(t){case"success":return kL;case"info":return PL;case"warning":return AL;case"error":return EL;default:return null}},NL=Array(12).fill(0),CL=({visible:t})=>Le.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},Le.createElement("div",{className:"sonner-spinner"},NL.map((e,r)=>Le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),kL=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),AL=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),PL=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EL=Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),TL=()=>{let[t,e]=Le.useState(document.hidden);return Le.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Xy=1,LL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:Xy++,i=this.toasts.find(c=>c.id===a),l=e.dismissible===void 0?!0:e.dismissible;return i?this.toasts=this.toasts.map(c=>c.id===a?(this.publish({...c,...e,id:a,title:n}),{...c,...e,id:a,dismissible:l,title:n}):c):this.addToast({title:n,...s,dismissible:l,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let s=e instanceof Promise?e:e(),a=n!==void 0;return s.then(async i=>{if(RL(i)&&!i.ok){a=!1;let l=typeof r.error=="function"?await r.error(`HTTP error! status: ${i.status}`):r.error,c=typeof r.description=="function"?await r.description(`HTTP error! status: ${i.status}`):r.description;this.create({id:n,type:"error",message:l,description:c})}else if(r.success!==void 0){a=!1;let l=typeof r.success=="function"?await r.success(i):r.success,c=typeof r.description=="function"?await r.description(i):r.description;this.create({id:n,type:"success",message:l,description:c})}}).catch(async i=>{if(r.error!==void 0){a=!1;let l=typeof r.error=="function"?await r.error(i):r.error,c=typeof r.description=="function"?await r.description(i):r.description;this.create({id:n,type:"error",message:l,description:c})}}).finally(()=>{var i;a&&(this.dismiss(n),n=void 0),(i=r.finally)==null||i.call(r)}),n},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||Xy++;return this.create({jsx:e(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},fs=new LL,DL=(t,e)=>{let r=(e==null?void 0:e.id)||Xy++;return fs.addToast({title:t,...e,id:r}),r},RL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",OL=DL,IL=()=>fs.toasts;Object.assign(OL,{success:fs.success,info:fs.info,warning:fs.warning,error:fs.error,custom:fs.custom,message:fs.message,promise:fs.promise,dismiss:fs.dismiss,loading:fs.loading},{getHistory:IL});function ML(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}ML(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rf(t){return t.label!==void 0}var FL=3,BL="32px",$L=4e3,UL=356,VL=14,qL=20,zL=200;function WL(...t){return t.filter(Boolean).join(" ")}var HL=t=>{var e,r,n,s,a,i,l,c,u,d;let{invert:h,toast:f,unstyled:m,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:S,toasts:N,expanded:k,removeToast:A,defaultRichColors:W,closeButton:I,style:F,cancelButtonStyle:ee,actionButtonStyle:ae,className:R="",descriptionClassName:D="",duration:T,position:B,gap:z,loadingIcon:re,expandByDefault:$,classNames:V,icons:X,closeButtonAriaLabel:he="Close toast",pauseWhenPageIsHidden:je,cn:L}=t,[G,Z]=Le.useState(!1),[se,H]=Le.useState(!1),[ne,oe]=Le.useState(!1),[ce,ve]=Le.useState(!1),[Ae,we]=Le.useState(0),[ke,Ke]=Le.useState(0),Ce=Le.useRef(null),Q=Le.useRef(null),Ye=S===0,Y=S+1<=b,J=f.type,ie=f.dismissible!==!1,_e=f.className||"",ye=f.descriptionClassName||"",Se=Le.useMemo(()=>_.findIndex(Je=>Je.toastId===f.id)||0,[_,f.id]),Be=Le.useMemo(()=>{var Je;return(Je=f.closeButton)!=null?Je:I},[f.closeButton,I]),qe=Le.useMemo(()=>f.duration||T||$L,[f.duration,T]),at=Le.useRef(0),ot=Le.useRef(0),Lt=Le.useRef(0),ut=Le.useRef(null),[_t,He]=B.split("-"),De=Le.useMemo(()=>_.reduce((Je,It,dt)=>dt>=Se?Je:Je+It.height,0),[_,Se]),rt=TL(),At=f.invert||h,jt=J==="loading";ot.current=Le.useMemo(()=>Se*z+De,[Se,De]),Le.useEffect(()=>{Z(!0)},[]),Le.useLayoutEffect(()=>{if(!G)return;let Je=Q.current,It=Je.style.height;Je.style.height="auto";let dt=Je.getBoundingClientRect().height;Je.style.height=It,Ke(dt),v(gr=>gr.find(Ar=>Ar.toastId===f.id)?gr.map(Ar=>Ar.toastId===f.id?{...Ar,height:dt}:Ar):[{toastId:f.id,height:dt,position:f.position},...gr])},[G,f.title,f.description,v,f.id]);let it=Le.useCallback(()=>{H(!0),we(ot.current),v(Je=>Je.filter(It=>It.toastId!==f.id)),setTimeout(()=>{A(f)},zL)},[f,A,v,ot]);Le.useEffect(()=>{if(f.promise&&J==="loading"||f.duration===1/0||f.type==="loading")return;let Je,It=qe;return k||g||je&&rt?(()=>{if(Lt.current<at.current){let dt=new Date().getTime()-at.current;It=It-dt}Lt.current=new Date().getTime()})():It!==1/0&&(at.current=new Date().getTime(),Je=setTimeout(()=>{var dt;(dt=f.onAutoClose)==null||dt.call(f,f),it()},It)),()=>clearTimeout(Je)},[k,g,$,f,qe,it,f.promise,J,je,rt]),Le.useEffect(()=>{let Je=Q.current;if(Je){let It=Je.getBoundingClientRect().height;return Ke(It),v(dt=>[{toastId:f.id,height:It,position:f.position},...dt]),()=>v(dt=>dt.filter(gr=>gr.toastId!==f.id))}},[v,f.id]),Le.useEffect(()=>{f.delete&&it()},[it,f.delete]);function Qr(){return X!=null&&X.loading?Le.createElement("div",{className:"sonner-loader","data-visible":J==="loading"},X.loading):re?Le.createElement("div",{className:"sonner-loader","data-visible":J==="loading"},re):Le.createElement(CL,{visible:J==="loading"})}return Le.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Q,className:L(R,_e,V==null?void 0:V.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[J],(r=f==null?void 0:f.classNames)==null?void 0:r[J]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:W,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":G,"data-promise":!!f.promise,"data-removed":se,"data-visible":Y,"data-y-position":_t,"data-x-position":He,"data-index":S,"data-front":Ye,"data-swiping":ne,"data-dismissible":ie,"data-type":J,"data-invert":At,"data-swipe-out":ce,"data-expanded":!!(k||$&&G),style:{"--index":S,"--toasts-before":S,"--z-index":N.length-S,"--offset":`${se?Ae:ot.current}px`,"--initial-height":$?"auto":`${ke}px`,...F,...f.style},onPointerDown:Je=>{jt||!ie||(Ce.current=new Date,we(ot.current),Je.target.setPointerCapture(Je.pointerId),Je.target.tagName!=="BUTTON"&&(oe(!0),ut.current={x:Je.clientX,y:Je.clientY}))},onPointerUp:()=>{var Je,It,dt,gr;if(ce||!ie)return;ut.current=null;let Ar=Number(((Je=Q.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount").replace("px",""))||0),fr=new Date().getTime()-((It=Ce.current)==null?void 0:It.getTime()),kt=Math.abs(Ar)/fr;if(Math.abs(Ar)>=qL||kt>.11){we(ot.current),(dt=f.onDismiss)==null||dt.call(f,f),it(),ve(!0);return}(gr=Q.current)==null||gr.style.setProperty("--swipe-amount","0px"),oe(!1)},onPointerMove:Je=>{var It;if(!ut.current||!ie)return;let dt=Je.clientY-ut.current.y,gr=Je.clientX-ut.current.x,Ar=(_t==="top"?Math.min:Math.max)(0,dt),fr=Je.pointerType==="touch"?10:2;Math.abs(Ar)>fr?(It=Q.current)==null||It.style.setProperty("--swipe-amount",`${dt}px`):Math.abs(gr)>fr&&(ut.current=null)}},Be&&!f.jsx?Le.createElement("button",{"aria-label":he,"data-disabled":jt,"data-close-button":!0,onClick:jt||!ie?()=>{}:()=>{var Je;it(),(Je=f.onDismiss)==null||Je.call(f,f)},className:L(V==null?void 0:V.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},Le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||Le.isValidElement(f.title)?f.jsx||f.title:Le.createElement(Le.Fragment,null,J||f.icon||f.promise?Le.createElement("div",{"data-icon":"",className:L(V==null?void 0:V.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Qr():null,f.type!=="loading"?f.icon||(X==null?void 0:X[J])||jL(J):null):null,Le.createElement("div",{"data-content":"",className:L(V==null?void 0:V.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},Le.createElement("div",{"data-title":"",className:L(V==null?void 0:V.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?Le.createElement("div",{"data-description":"",className:L(D,ye,V==null?void 0:V.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),Le.isValidElement(f.cancel)?f.cancel:f.cancel&&Rf(f.cancel)?Le.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||ee,onClick:Je=>{var It,dt;Rf(f.cancel)&&ie&&((dt=(It=f.cancel).onClick)==null||dt.call(It,Je),it())},className:L(V==null?void 0:V.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,Le.isValidElement(f.action)?f.action:f.action&&Rf(f.action)?Le.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||ae,onClick:Je=>{var It,dt;Rf(f.action)&&(Je.defaultPrevented||((dt=(It=f.action).onClick)==null||dt.call(It,Je),it()))},className:L(V==null?void 0:V.actionButton,(d=f==null?void 0:f.classNames)==null?void 0:d.actionButton)},f.action.label):null))};function xb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var GL=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:a,className:i,offset:l,theme:c="light",richColors:u,duration:d,style:h,visibleToasts:f=FL,toastOptions:m,dir:g=xb(),gap:v=VL,loadingIcon:b,icons:_,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:N,cn:k=WL}=t,[A,W]=Le.useState([]),I=Le.useMemo(()=>Array.from(new Set([r].concat(A.filter(je=>je.position).map(je=>je.position)))),[A,r]),[F,ee]=Le.useState([]),[ae,R]=Le.useState(!1),[D,T]=Le.useState(!1),[B,z]=Le.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=Le.useRef(null),$=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Le.useRef(null),X=Le.useRef(!1),he=Le.useCallback(je=>{var L;(L=A.find(G=>G.id===je.id))!=null&&L.delete||fs.dismiss(je.id),W(G=>G.filter(({id:Z})=>Z!==je.id))},[A]);return Le.useEffect(()=>fs.subscribe(je=>{if(je.dismiss){W(L=>L.map(G=>G.id===je.id?{...G,delete:!0}:G));return}setTimeout(()=>{TA.flushSync(()=>{W(L=>{let G=L.findIndex(Z=>Z.id===je.id);return G!==-1?[...L.slice(0,G),{...L[G],...je},...L.slice(G+1)]:[je,...L]})})})}),[]),Le.useEffect(()=>{if(c!=="system"){z(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:je})=>{z(je?"dark":"light")})},[c]),Le.useEffect(()=>{A.length<=1&&R(!1)},[A]),Le.useEffect(()=>{let je=L=>{var G,Z;n.every(se=>L[se]||L.code===se)&&(R(!0),(G=re.current)==null||G.focus()),L.code==="Escape"&&(document.activeElement===re.current||(Z=re.current)!=null&&Z.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",je),()=>document.removeEventListener("keydown",je)},[n]),Le.useEffect(()=>{if(re.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,X.current=!1)}},[re.current]),A.length?Le.createElement("section",{"aria-label":`${S} ${$}`,tabIndex:-1},I.map((je,L)=>{var G;let[Z,se]=je.split("-");return Le.createElement("ol",{key:je,dir:g==="auto"?xb():g,tabIndex:-1,ref:re,className:i,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Z,"data-x-position":se,style:{"--front-toast-height":`${((G=F[0])==null?void 0:G.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||BL,"--width":`${UL}px`,"--gap":`${v}px`,...h},onBlur:H=>{X.current&&!H.currentTarget.contains(H.relatedTarget)&&(X.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||X.current||(X.current=!0,V.current=H.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{D||R(!1)},onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||T(!0)},onPointerUp:()=>T(!1)},A.filter(H=>!H.position&&L===0||H.position===je).map((H,ne)=>{var oe,ce;return Le.createElement(HL,{key:H.id,icons:_,index:ne,toast:H,defaultRichColors:u,duration:(oe=m==null?void 0:m.duration)!=null?oe:d,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:f,closeButton:(ce=m==null?void 0:m.closeButton)!=null?ce:a,interacting:D,position:je,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:he,toasts:A.filter(ve=>ve.position==H.position),heights:F.filter(ve=>ve.position==H.position),setHeights:ee,expandByDefault:s,gap:v,loadingIcon:b,expanded:ae,pauseWhenPageIsHidden:N,cn:k})}))})):null};const YL=({...t})=>{const{theme:e="system"}=_L();return o.jsx(GL,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},KL=["top","right","bottom","left"],co=Math.min,ps=Math.max,fp=Math.round,Of=Math.floor,uo=t=>({x:t,y:t}),JL={left:"right",right:"left",bottom:"top",top:"bottom"},ZL={start:"end",end:"start"};function Qy(t,e,r){return ps(t,co(e,r))}function bi(t,e){return typeof t=="function"?t(e):t}function wi(t){return t.split("-")[0]}function su(t){return t.split("-")[1]}function D0(t){return t==="x"?"y":"x"}function R0(t){return t==="y"?"height":"width"}function ho(t){return["top","bottom"].includes(wi(t))?"y":"x"}function O0(t){return D0(ho(t))}function XL(t,e,r){r===void 0&&(r=!1);const n=su(t),s=O0(t),a=R0(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=pp(i)),[i,pp(i)]}function QL(t){const e=pp(t);return[ev(t),e,ev(e)]}function ev(t){return t.replace(/start|end/g,e=>ZL[e])}function eD(t,e,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?a:i;default:return[]}}function tD(t,e,r,n){const s=su(t);let a=eD(wi(t),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),e&&(a=a.concat(a.map(ev)))),a}function pp(t){return t.replace(/left|right|bottom|top/g,e=>JL[e])}function rD(t){return{top:0,right:0,bottom:0,left:0,...t}}function jS(t){return typeof t!="number"?rD(t):{top:t,right:t,bottom:t,left:t}}function mp(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function bb(t,e,r){let{reference:n,floating:s}=t;const a=ho(e),i=O0(e),l=R0(i),c=wi(e),u=a==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(su(e)){case"start":m[i]-=f*(r&&u?-1:1);break;case"end":m[i]+=f*(r&&u?-1:1);break}return m}const nD=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=bb(u,n,c),f=n,m={},g=0;for(let v=0;v<l.length;v++){const{name:b,fn:_}=l[v],{x:S,y:N,data:k,reset:A}=await _({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:t,floating:e}});d=S??d,h=N??h,m={...m,[b]:{...m[b],...k}},A&&g<=50&&(g++,typeof A=="object"&&(A.placement&&(f=A.placement),A.rects&&(u=A.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:d,y:h}=bb(u,f,c)),v=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Sd(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=bi(e,t),g=jS(m),b=l[f?h==="floating"?"reference":"floating":h],_=mp(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(b)))==null||r?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),S=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},A=mp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:N,strategy:c}):S);return{top:(_.top-A.top+g.top)/k.y,bottom:(A.bottom-_.bottom+g.bottom)/k.y,left:(_.left-A.left+g.left)/k.x,right:(A.right-_.right+g.right)/k.x}}const sD=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=bi(t,e)||{};if(u==null)return{};const h=jS(d),f={x:r,y:n},m=O0(s),g=R0(m),v=await i.getDimensions(u),b=m==="y",_=b?"top":"left",S=b?"bottom":"right",N=b?"clientHeight":"clientWidth",k=a.reference[g]+a.reference[m]-f[m]-a.floating[g],A=f[m]-a.reference[m],W=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let I=W?W[N]:0;(!I||!await(i.isElement==null?void 0:i.isElement(W)))&&(I=l.floating[N]||a.floating[g]);const F=k/2-A/2,ee=I/2-v[g]/2-1,ae=co(h[_],ee),R=co(h[S],ee),D=ae,T=I-v[g]-R,B=I/2-v[g]/2+F,z=Qy(D,B,T),re=!c.arrow&&su(s)!=null&&B!==z&&a.reference[g]/2-(B<D?ae:R)-v[g]/2<0,$=re?B<D?B-D:B-T:0;return{[m]:f[m]+$,data:{[m]:z,centerOffset:B-z-$,...re&&{alignmentOffset:$}},reset:re}}}),aD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...b}=bi(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const _=wi(s),S=ho(l),N=wi(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=f||(N||!v?[pp(l)]:QL(l)),W=g!=="none";!f&&W&&A.push(...tD(l,v,g,k));const I=[l,...A],F=await Sd(e,b),ee=[];let ae=((n=a.flip)==null?void 0:n.overflows)||[];if(d&&ee.push(F[_]),h){const B=XL(s,i,k);ee.push(F[B[0]],F[B[1]])}if(ae=[...ae,{placement:s,overflows:ee}],!ee.every(B=>B<=0)){var R,D;const B=(((R=a.flip)==null?void 0:R.index)||0)+1,z=I[B];if(z)return{data:{index:B,overflows:ae},reset:{placement:z}};let re=(D=ae.filter($=>$.overflows[0]<=0).sort(($,V)=>$.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!re)switch(m){case"bestFit":{var T;const $=(T=ae.filter(V=>{if(W){const X=ho(V.placement);return X===S||X==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(X=>X>0).reduce((X,he)=>X+he,0)]).sort((V,X)=>V[1]-X[1])[0])==null?void 0:T[0];$&&(re=$);break}case"initialPlacement":re=l;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function wb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Sb(t){return KL.some(e=>t[e]>=0)}const iD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=bi(t,e);switch(n){case"referenceHidden":{const a=await Sd(e,{...s,elementContext:"reference"}),i=wb(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Sb(i)}}}case"escaped":{const a=await Sd(e,{...s,altBoundary:!0}),i=wb(a,r.floating);return{data:{escapedOffsets:i,escaped:Sb(i)}}}default:return{}}}}};async function oD(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=wi(r),l=su(r),c=ho(r)==="y",u=["left","top"].includes(i)?-1:1,d=a&&c?-1:1,h=bi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const lD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=e,c=await oD(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},cD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:b=>{let{x:_,y:S}=b;return{x:_,y:S}}},...c}=bi(t,e),u={x:r,y:n},d=await Sd(e,c),h=ho(wi(s)),f=D0(h);let m=u[f],g=u[h];if(a){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",S=m+d[b],N=m-d[_];m=Qy(S,m,N)}if(i){const b=h==="y"?"top":"left",_=h==="y"?"bottom":"right",S=g+d[b],N=g-d[_];g=Qy(S,g,N)}const v=l.fn({...e,[f]:m,[h]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[f]:a,[h]:i}}}}}},uD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=bi(t,e),d={x:r,y:n},h=ho(s),f=D0(h);let m=d[f],g=d[h];const v=bi(l,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const N=f==="y"?"height":"width",k=a.reference[f]-a.floating[N]+b.mainAxis,A=a.reference[f]+a.reference[N]-b.mainAxis;m<k?m=k:m>A&&(m=A)}if(u){var _,S;const N=f==="y"?"width":"height",k=["top","left"].includes(wi(s)),A=a.reference[h]-a.floating[N]+(k&&((_=i.offset)==null?void 0:_[h])||0)+(k?0:b.crossAxis),W=a.reference[h]+a.reference[N]+(k?0:((S=i.offset)==null?void 0:S[h])||0)-(k?b.crossAxis:0);g<A?g=A:g>W&&(g=W)}return{[f]:m,[h]:g}}}},dD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:i,elements:l}=e,{apply:c=()=>{},...u}=bi(t,e),d=await Sd(e,u),h=wi(s),f=su(s),m=ho(s)==="y",{width:g,height:v}=a.floating;let b,_;h==="top"||h==="bottom"?(b=h,_=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(_=h,b=f==="end"?"top":"bottom");const S=v-d.top-d.bottom,N=g-d.left-d.right,k=co(v-d[b],S),A=co(g-d[_],N),W=!e.middlewareData.shift;let I=k,F=A;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(F=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=S),W&&!f){const ae=ps(d.left,0),R=ps(d.right,0),D=ps(d.top,0),T=ps(d.bottom,0);m?F=g-2*(ae!==0||R!==0?ae+R:ps(d.left,d.right)):I=v-2*(D!==0||T!==0?D+T:ps(d.top,d.bottom))}await c({...e,availableWidth:F,availableHeight:I});const ee=await i.getDimensions(l.floating);return g!==ee.width||v!==ee.height?{reset:{rects:!0}}:{}}}};function um(){return typeof window<"u"}function au(t){return NS(t)?(t.nodeName||"").toLowerCase():"#document"}function ys(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ka(t){var e;return(e=(NS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NS(t){return um()?t instanceof Node||t instanceof ys(t).Node:!1}function ha(t){return um()?t instanceof Element||t instanceof ys(t).Element:!1}function Wa(t){return um()?t instanceof HTMLElement||t instanceof ys(t).HTMLElement:!1}function _b(t){return!um()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ys(t).ShadowRoot}function xh(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=fa(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function hD(t){return["table","td","th"].includes(au(t))}function dm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function I0(t){const e=M0(),r=ha(t)?fa(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function fD(t){let e=fo(t);for(;Wa(e)&&!Vc(e);){if(I0(e))return e;if(dm(e))return null;e=fo(e)}return null}function M0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vc(t){return["html","body","#document"].includes(au(t))}function fa(t){return ys(t).getComputedStyle(t)}function hm(t){return ha(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fo(t){if(au(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_b(t)&&t.host||Ka(t);return _b(e)?e.host:e}function CS(t){const e=fo(t);return Vc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wa(e)&&xh(e)?e:CS(e)}function _d(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=CS(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),i=ys(s);if(a){const l=tv(i);return e.concat(i,i.visualViewport||[],xh(s)?s:[],l&&r?_d(l):[])}return e.concat(s,_d(s,[],r))}function tv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kS(t){const e=fa(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Wa(t),a=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=fp(r)!==a||fp(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function F0(t){return ha(t)?t:t.contextElement}function vc(t){const e=F0(t);if(!Wa(e))return uo(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=kS(e);let i=(a?fp(r.width):r.width)/n,l=(a?fp(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const pD=uo(0);function AS(t){const e=ys(t);return!M0()||!e.visualViewport?pD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mD(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==ys(t)?!1:e}function dl(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=F0(t);let i=uo(1);e&&(n?ha(n)&&(i=vc(n)):i=vc(t));const l=mD(a,r,n)?AS(a):uo(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(a){const f=ys(a),m=n&&ha(n)?ys(n):n;let g=f,v=tv(g);for(;v&&n&&m!==g;){const b=vc(v),_=v.getBoundingClientRect(),S=fa(v),N=_.left+(v.clientLeft+parseFloat(S.paddingLeft))*b.x,k=_.top+(v.clientTop+parseFloat(S.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=N,u+=k,g=ys(v),v=tv(g)}}return mp({width:d,height:h,x:c,y:u})}function gD(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",i=Ka(n),l=e?dm(e.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=uo(1);const d=uo(0),h=Wa(n);if((h||!h&&!a)&&((au(n)!=="body"||xh(i))&&(c=hm(n)),Wa(n))){const f=dl(n);u=vc(n),d.x=f.x+n.clientLeft,d.y=f.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x,y:r.y*u.y-c.scrollTop*u.y+d.y}}function yD(t){return Array.from(t.getClientRects())}function rv(t,e){const r=hm(t).scrollLeft;return e?e.left+r:dl(Ka(t)).left+r}function vD(t){const e=Ka(t),r=hm(t),n=t.ownerDocument.body,s=ps(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=ps(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+rv(t);const l=-r.scrollTop;return fa(n).direction==="rtl"&&(i+=ps(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}function xD(t,e){const r=ys(t),n=Ka(t),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=M0();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}function bD(t,e){const r=dl(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=Wa(t)?vc(t):uo(1),i=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:i,height:l,x:c,y:u}}function jb(t,e,r){let n;if(e==="viewport")n=xD(t,r);else if(e==="document")n=vD(Ka(t));else if(ha(e))n=bD(e,r);else{const s=AS(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return mp(n)}function PS(t,e){const r=fo(t);return r===e||!ha(r)||Vc(r)?!1:fa(r).position==="fixed"||PS(r,e)}function wD(t,e){const r=e.get(t);if(r)return r;let n=_d(t,[],!1).filter(l=>ha(l)&&au(l)!=="body"),s=null;const a=fa(t).position==="fixed";let i=a?fo(t):t;for(;ha(i)&&!Vc(i);){const l=fa(i),c=I0(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xh(i)&&!c&&PS(t,i))?n=n.filter(d=>d!==i):s=l,i=fo(i)}return e.set(t,n),n}function SD(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?dm(e)?[]:wD(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const h=jb(e,d,s);return u.top=ps(h.top,u.top),u.right=co(h.right,u.right),u.bottom=co(h.bottom,u.bottom),u.left=ps(h.left,u.left),u},jb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _D(t){const{width:e,height:r}=kS(t);return{width:e,height:r}}function jD(t,e,r){const n=Wa(e),s=Ka(e),a=r==="fixed",i=dl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=uo(0);if(n||!n&&!a)if((au(e)!=="body"||xh(s))&&(l=hm(e)),n){const m=dl(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=rv(s));let u=0,d=0;if(s&&!n&&!a){const m=s.getBoundingClientRect();d=m.top+l.scrollTop,u=m.left+l.scrollLeft-rv(s,m)}const h=i.left+l.scrollLeft-c.x-u,f=i.top+l.scrollTop-c.y-d;return{x:h,y:f,width:i.width,height:i.height}}function Wg(t){return fa(t).position==="static"}function Nb(t,e){if(!Wa(t)||fa(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ka(t)===r&&(r=r.ownerDocument.body),r}function ES(t,e){const r=ys(t);if(dm(t))return r;if(!Wa(t)){let s=fo(t);for(;s&&!Vc(s);){if(ha(s)&&!Wg(s))return s;s=fo(s)}return r}let n=Nb(t,e);for(;n&&hD(n)&&Wg(n);)n=Nb(n,e);return n&&Vc(n)&&Wg(n)&&!I0(n)?r:n||fD(t)||r}const ND=async function(t){const e=this.getOffsetParent||ES,r=this.getDimensions,n=await r(t.floating);return{reference:jD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function CD(t){return fa(t).direction==="rtl"}const kD={convertOffsetParentRelativeRectToViewportRelativeRect:gD,getDocumentElement:Ka,getClippingRect:SD,getOffsetParent:ES,getElementRects:ND,getClientRects:yD,getDimensions:_D,getScale:vc,isElement:ha,isRTL:CD};function AD(t,e){let r=null,n;const s=Ka(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:f}=t.getBoundingClientRect();if(l||e(),!h||!f)return;const m=Of(d),g=Of(s.clientWidth-(u+h)),v=Of(s.clientHeight-(d+f)),b=Of(u),S={rootMargin:-m+"px "+-g+"px "+-v+"px "+-b+"px",threshold:ps(0,co(1,c))||1};let N=!0;function k(A){const W=A[0].intersectionRatio;if(W!==c){if(!N)return i();W?i(!1,W):n=setTimeout(()=>{i(!1,1e-7)},1e3)}N=!1}try{r=new IntersectionObserver(k,{...S,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,S)}r.observe(t)}return i(!0),a}function PD(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=F0(t),d=s||a?[...u?_d(u):[],..._d(e)]:[];d.forEach(_=>{s&&_.addEventListener("scroll",r,{passive:!0}),a&&_.addEventListener("resize",r)});const h=u&&l?AD(u,r):null;let f=-1,m=null;i&&(m=new ResizeObserver(_=>{let[S]=_;S&&S.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var N;(N=m)==null||N.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let g,v=c?dl(t):null;c&&b();function b(){const _=dl(t);v&&(_.x!==v.x||_.y!==v.y||_.width!==v.width||_.height!==v.height)&&r(),v=_,g=requestAnimationFrame(b)}return r(),()=>{var _;d.forEach(S=>{s&&S.removeEventListener("scroll",r),a&&S.removeEventListener("resize",r)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const ED=lD,TD=cD,LD=aD,DD=dD,RD=iD,Cb=sD,OD=uD,ID=(t,e,r)=>{const n=new Map,s={platform:kD,...r},a={...s.platform,_c:n};return nD(t,e,{...s,platform:a})};var Xf=typeof document<"u"?w.useLayoutEffect:w.useEffect;function gp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!gp(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!gp(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function TS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kb(t,e){const r=TS(t);return Math.round(e*r)/r}function Hg(t){const e=w.useRef(t);return Xf(()=>{e.current=t}),e}function MD(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=w.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=w.useState(n);gp(f,n)||m(n);const[g,v]=w.useState(null),[b,_]=w.useState(null),S=w.useCallback(V=>{V!==W.current&&(W.current=V,v(V))},[]),N=w.useCallback(V=>{V!==I.current&&(I.current=V,_(V))},[]),k=a||g,A=i||b,W=w.useRef(null),I=w.useRef(null),F=w.useRef(d),ee=c!=null,ae=Hg(c),R=Hg(s),D=Hg(u),T=w.useCallback(()=>{if(!W.current||!I.current)return;const V={placement:e,strategy:r,middleware:f};R.current&&(V.platform=R.current),ID(W.current,I.current,V).then(X=>{const he={...X,isPositioned:D.current!==!1};B.current&&!gp(F.current,he)&&(F.current=he,tm.flushSync(()=>{h(he)}))})},[f,e,r,R,D]);Xf(()=>{u===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h(V=>({...V,isPositioned:!1})))},[u]);const B=w.useRef(!1);Xf(()=>(B.current=!0,()=>{B.current=!1}),[]),Xf(()=>{if(k&&(W.current=k),A&&(I.current=A),k&&A){if(ae.current)return ae.current(k,A,T);T()}},[k,A,T,ae,ee]);const z=w.useMemo(()=>({reference:W,floating:I,setReference:S,setFloating:N}),[S,N]),re=w.useMemo(()=>({reference:k,floating:A}),[k,A]),$=w.useMemo(()=>{const V={position:r,left:0,top:0};if(!re.floating)return V;const X=kb(re.floating,d.x),he=kb(re.floating,d.y);return l?{...V,transform:"translate("+X+"px, "+he+"px)",...TS(re.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:X,top:he}},[r,l,re.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:T,refs:z,elements:re,floatingStyles:$}),[d,T,z,re,$])}const FD=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Cb({element:n.current,padding:s}).fn(r):{}:n?Cb({element:n,padding:s}).fn(r):{}}}},BD=(t,e)=>({...ED(t),options:[t,e]}),$D=(t,e)=>({...TD(t),options:[t,e]}),UD=(t,e)=>({...OD(t),options:[t,e]}),VD=(t,e)=>({...LD(t),options:[t,e]}),qD=(t,e)=>({...DD(t),options:[t,e]}),zD=(t,e)=>({...RD(t),options:[t,e]}),WD=(t,e)=>({...FD(t),options:[t,e]});var HD="Arrow",LS=w.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...a}=t;return o.jsx(Ut.svg,{...a,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});LS.displayName=HD;var GD=LS;function YD(t,e=[]){let r=[];function n(a,i){const l=w.createContext(i),c=r.length;r=[...r,i];function u(h){const{scope:f,children:m,...g}=h,v=(f==null?void 0:f[t][c])||l,b=w.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:b,children:m})}function d(h,f){const m=(f==null?void 0:f[t][c])||l,g=w.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(i=>w.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return w.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,KD(s,...e)]}function KD(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function B0(t){const[e,r]=w.useState(void 0);return bs(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var $0="Popper",[DS,jo]=YD($0),[JD,RS]=DS($0),OS=t=>{const{__scopePopper:e,children:r}=t,[n,s]=w.useState(null);return o.jsx(JD,{scope:e,anchor:n,onAnchorChange:s,children:r})};OS.displayName=$0;var IS="PopperAnchor",MS=w.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,a=RS(IS,r),i=w.useRef(null),l=Sr(e,i);return w.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:o.jsx(Ut.div,{...s,ref:l})});MS.displayName=IS;var U0="PopperContent",[ZD,XD]=DS(U0),FS=w.forwardRef((t,e)=>{var ne,oe,ce,ve,Ae,we;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,b=RS(U0,r),[_,S]=w.useState(null),N=Sr(e,ke=>S(ke)),[k,A]=w.useState(null),W=B0(k),I=(W==null?void 0:W.width)??0,F=(W==null?void 0:W.height)??0,ee=n+(a!=="center"?"-"+a:""),ae=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],D=R.length>0,T={padding:ae,boundary:R.filter(e6),altBoundary:D},{refs:B,floatingStyles:z,placement:re,isPositioned:$,middlewareData:V}=MD({strategy:"fixed",placement:ee,whileElementsMounted:(...ke)=>PD(...ke,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[BD({mainAxis:s+F,alignmentAxis:i}),c&&$D({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?UD():void 0,...T}),c&&VD({...T}),qD({...T,apply:({elements:ke,rects:Ke,availableWidth:Ce,availableHeight:Q})=>{const{width:Ye,height:Y}=Ke.reference,J=ke.floating.style;J.setProperty("--radix-popper-available-width",`${Ce}px`),J.setProperty("--radix-popper-available-height",`${Q}px`),J.setProperty("--radix-popper-anchor-width",`${Ye}px`),J.setProperty("--radix-popper-anchor-height",`${Y}px`)}}),k&&WD({element:k,padding:l}),t6({arrowWidth:I,arrowHeight:F}),f&&zD({strategy:"referenceHidden",...T})]}),[X,he]=US(re),je=ph(g);bs(()=>{$&&(je==null||je())},[$,je]);const L=(ne=V.arrow)==null?void 0:ne.x,G=(oe=V.arrow)==null?void 0:oe.y,Z=((ce=V.arrow)==null?void 0:ce.centerOffset)!==0,[se,H]=w.useState();return bs(()=>{_&&H(window.getComputedStyle(_).zIndex)},[_]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:$?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ve=V.transformOrigin)==null?void 0:ve.x,(Ae=V.transformOrigin)==null?void 0:Ae.y].join(" "),...((we=V.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(ZD,{scope:r,placedSide:X,onArrowChange:A,arrowX:L,arrowY:G,shouldHideArrow:Z,children:o.jsx(Ut.div,{"data-side":X,"data-align":he,...v,ref:N,style:{...v.style,animation:$?void 0:"none"}})})})});FS.displayName=U0;var BS="PopperArrow",QD={top:"bottom",right:"left",bottom:"top",left:"right"},$S=w.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,a=XD(BS,n),i=QD[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(GD,{...s,ref:r,style:{...s.style,display:"block"}})})});$S.displayName=BS;function e6(t){return t!==null}var t6=t=>({name:"transformOrigin",options:t,fn(e){var b,_,S;const{placement:r,rects:n,middlewareData:s}=e,i=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=US(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,m=(((S=s.arrow)==null?void 0:S.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=i?h:`${f}px`,v=`${-c}px`):u==="top"?(g=i?h:`${f}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=i?h:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=i?h:`${m}px`),{data:{x:g,y:v}}}});function US(t){const[e,r="center"]=t.split("-");return[e,r]}var fm=OS,bh=MS,pm=FS,mm=$S,[gm,XH]=Ya("Tooltip",[jo]),ym=jo(),VS="TooltipProvider",r6=700,nv="tooltip.open",[n6,V0]=gm(VS),qS=t=>{const{__scopeTooltip:e,delayDuration:r=r6,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=t,[i,l]=w.useState(!0),c=w.useRef(!1),u=w.useRef(0);return w.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(n6,{scope:e,isOpenDelayed:i,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:w.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:w.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:a})};qS.displayName=VS;var vm="Tooltip",[s6,xm]=gm(vm),zS=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=t,c=V0(vm,t.__scopeTooltip),u=ym(e),[d,h]=w.useState(null),f=ul(),m=w.useRef(0),g=i??c.disableHoverableContent,v=l??c.delayDuration,b=w.useRef(!1),[_=!1,S]=za({prop:n,defaultProp:s,onChange:I=>{I?(c.onOpen(),document.dispatchEvent(new CustomEvent(nv))):c.onClose(),a==null||a(I)}}),N=w.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),k=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b.current=!1,S(!0)},[S]),A=w.useCallback(()=>{window.clearTimeout(m.current),m.current=0,S(!1)},[S]),W=w.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b.current=!0,S(!0),m.current=0},v)},[v,S]);return w.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),o.jsx(fm,{...u,children:o.jsx(s6,{scope:e,contentId:f,open:_,stateAttribute:N,trigger:d,onTriggerChange:h,onTriggerEnter:w.useCallback(()=>{c.isOpenDelayed?W():k()},[c.isOpenDelayed,W,k]),onTriggerLeave:w.useCallback(()=>{g?A():(window.clearTimeout(m.current),m.current=0)},[A,g]),onOpen:k,onClose:A,disableHoverableContent:g,children:r})})};zS.displayName=vm;var sv="TooltipTrigger",WS=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=xm(sv,r),a=V0(sv,r),i=ym(r),l=w.useRef(null),c=Sr(e,l,s.onTriggerChange),u=w.useRef(!1),d=w.useRef(!1),h=w.useCallback(()=>u.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(bh,{asChild:!0,...i,children:o.jsx(Ut.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:ht(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ht(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ht(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ht(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ht(t.onBlur,s.onClose),onClick:ht(t.onClick,s.onClose)})})});WS.displayName=sv;var a6="TooltipPortal",[QH,i6]=gm(a6,{forceMount:void 0}),qc="TooltipContent",HS=w.forwardRef((t,e)=>{const r=i6(qc,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=t,i=xm(qc,t.__scopeTooltip);return o.jsx(So,{present:n||i.open,children:i.disableHoverableContent?o.jsx(GS,{side:s,...a,ref:e}):o.jsx(o6,{side:s,...a,ref:e})})}),o6=w.forwardRef((t,e)=>{const r=xm(qc,t.__scopeTooltip),n=V0(qc,t.__scopeTooltip),s=w.useRef(null),a=Sr(e,s),[i,l]=w.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,f=w.useCallback(()=>{l(null),h(!1)},[h]),m=w.useCallback((g,v)=>{const b=g.currentTarget,_={x:g.clientX,y:g.clientY},S=d6(_,b.getBoundingClientRect()),N=h6(_,S),k=f6(v.getBoundingClientRect()),A=m6([...N,...k]);l(A),h(!0)},[h]);return w.useEffect(()=>()=>f(),[f]),w.useEffect(()=>{if(c&&d){const g=b=>m(b,d),v=b=>m(b,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[c,d,m,f]),w.useEffect(()=>{if(i){const g=v=>{const b=v.target,_={x:v.clientX,y:v.clientY},S=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),N=!p6(_,i);S?f():N&&(f(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,i,u,f]),o.jsx(GS,{...t,ref:a})}),[l6,c6]=gm(vm,{isInside:!1}),GS=w.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=t,c=xm(qc,r),u=ym(r),{onClose:d}=c;return w.useEffect(()=>(document.addEventListener(nv,d),()=>document.removeEventListener(nv,d)),[d]),w.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),o.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(pm,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(j5,{children:n}),o.jsx(l6,{scope:r,isInside:!0,children:o.jsx(NA,{id:c.contentId,role:"tooltip",children:s||n})})]})})});HS.displayName=qc;var YS="TooltipArrow",u6=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=ym(r);return c6(YS,r).isInside?null:o.jsx(mm,{...s,...n,ref:e})});u6.displayName=YS;function d6(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function h6(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function f6(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function p6(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const l=e[a].x,c=e[a].y,u=e[i].x,d=e[i].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function m6(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),g6(e)}function g6(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const a=r[r.length-1],i=r[r.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var y6=qS,v6=zS,x6=WS,KS=HS;const av=y6,Ab=v6,Pb=x6,iv=w.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(KS,{ref:n,sideOffset:e,className:Ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));iv.displayName=KS.displayName;var bm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wm=typeof window>"u"||"Deno"in globalThis;function ra(){}function b6(t,e){return typeof t=="function"?t(e):t}function w6(t){return typeof t=="number"&&t>=0&&t!==1/0}function S6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Eb(t,e){return typeof t=="function"?t(e):t}function _6(t,e){return typeof t=="function"?t(e):t}function Tb(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==q0(i,e.options))return!1}else if(!Nd(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function Lb(t,e){const{exact:r,status:n,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(jd(e.options.mutationKey)!==jd(a))return!1}else if(!Nd(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function q0(t,e){return((e==null?void 0:e.queryKeyHashFn)||jd)(t)}function jd(t){return JSON.stringify(t,(e,r)=>ov(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Nd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Nd(t[r],e[r])):!1}function JS(t,e){if(t===e)return t;const r=Db(t)&&Db(e);if(r||ov(t)&&ov(e)){const n=r?t:Object.keys(t),s=n.length,a=r?e:Object.keys(e),i=a.length,l=r?[]:{};let c=0;for(let u=0;u<i;u++){const d=r?u:a[u];(!r&&n.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=JS(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===i&&c===s?t:l}return e}function Db(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ov(t){if(!Rb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Rb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Rb(t){return Object.prototype.toString.call(t)==="[object Object]"}function j6(t){return new Promise(e=>{setTimeout(e,t)})}function N6(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?JS(t,e):e}function C6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function k6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var z0=Symbol();function ZS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===z0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var rl,ro,Lc,u5,A6=(u5=class extends bm{constructor(){super();nr(this,rl);nr(this,ro);nr(this,Lc);Bt(this,Lc,e=>{if(!wm&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Fe(this,ro)||this.setEventListener(Fe(this,Lc))}onUnsubscribe(){var e;this.hasListeners()||((e=Fe(this,ro))==null||e.call(this),Bt(this,ro,void 0))}setEventListener(e){var r;Bt(this,Lc,e),(r=Fe(this,ro))==null||r.call(this),Bt(this,ro,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){Fe(this,rl)!==e&&(Bt(this,rl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof Fe(this,rl)=="boolean"?Fe(this,rl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},rl=new WeakMap,ro=new WeakMap,Lc=new WeakMap,u5),XS=new A6,Dc,no,Rc,d5,P6=(d5=class extends bm{constructor(){super();nr(this,Dc,!0);nr(this,no);nr(this,Rc);Bt(this,Rc,e=>{if(!wm&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Fe(this,no)||this.setEventListener(Fe(this,Rc))}onUnsubscribe(){var e;this.hasListeners()||((e=Fe(this,no))==null||e.call(this),Bt(this,no,void 0))}setEventListener(e){var r;Bt(this,Rc,e),(r=Fe(this,no))==null||r.call(this),Bt(this,no,e(this.setOnline.bind(this)))}setOnline(e){Fe(this,Dc)!==e&&(Bt(this,Dc,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return Fe(this,Dc)}},Dc=new WeakMap,no=new WeakMap,Rc=new WeakMap,d5),yp=new P6;function E6(){let t,e;const r=new Promise((s,a)=>{t=s,e=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function T6(t){return Math.min(1e3*2**t,3e4)}function QS(t){return(t??"online")==="online"?yp.isOnline():!0}var e_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gg(t){return t instanceof e_}function t_(t){let e=!1,r=0,n=!1,s;const a=E6(),i=v=>{var b;n||(f(new e_(v)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>XS.isFocused()&&(t.networkMode==="always"||yp.isOnline())&&t.canRun(),d=()=>QS(t.networkMode)&&t.canRun(),h=v=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,v),s==null||s(),a.resolve(v))},f=v=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,v),s==null||s(),a.reject(v))},m=()=>new Promise(v=>{var b;s=_=>{(n||u())&&v(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var v;s=void 0,n||(v=t.onContinue)==null||v.call(t)}),g=()=>{if(n)return;let v;const b=r===0?t.initialPromise:void 0;try{v=b??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(h).catch(_=>{var W;if(n)return;const S=t.retry??(wm?0:3),N=t.retryDelay??T6,k=typeof N=="function"?N(r,_):N,A=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,_);if(e||!A){f(_);return}r++,(W=t.onFail)==null||W.call(t,r,_),j6(k).then(()=>u()?void 0:m()).then(()=>{e?f(_):g()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),a)}}function L6(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Bn=L6(),nl,h5,r_=(h5=class{constructor(){nr(this,nl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),w6(this.gcTime)&&Bt(this,nl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wm?1/0:5*60*1e3))}clearGcTimeout(){Fe(this,nl)&&(clearTimeout(Fe(this,nl)),Bt(this,nl,void 0))}},nl=new WeakMap,h5),Oc,Ic,Rs,Nn,hh,sl,sa,di,f5,D6=(f5=class extends r_{constructor(e){super();nr(this,sa);nr(this,Oc);nr(this,Ic);nr(this,Rs);nr(this,Nn);nr(this,hh);nr(this,sl);Bt(this,sl,!1),Bt(this,hh,e.defaultOptions),this.setOptions(e.options),this.observers=[],Bt(this,Rs,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Bt(this,Oc,O6(this.options)),this.state=e.state??Fe(this,Oc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Fe(this,Nn))==null?void 0:e.promise}setOptions(e){this.options={...Fe(this,hh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Fe(this,Rs).remove(this)}setData(e,r){const n=N6(this.state.data,e,this.options);return bn(this,sa,di).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){bn(this,sa,di).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=Fe(this,Nn))==null?void 0:n.promise;return(s=Fe(this,Nn))==null||s.cancel(e),r?r.then(ra).catch(ra):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Fe(this,Oc))}isActive(){return this.observers.some(e=>_6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===z0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!S6(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=Fe(this,Nn))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=Fe(this,Nn))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Fe(this,Rs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(Fe(this,Nn)&&(Fe(this,sl)?Fe(this,Nn).cancel({revert:!0}):Fe(this,Nn).cancelRetry()),this.scheduleGc()),Fe(this,Rs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bn(this,sa,di).call(this,{type:"invalidate"})}fetch(e,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Fe(this,Nn))return Fe(this,Nn).continueRetry(),Fe(this,Nn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Bt(this,sl,!0),n.signal)})},a=()=>{const h=ZS(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return s(f),Bt(this,sl,!1),this.options.persister?this.options.persister(h,f,this):h(f)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(i),(c=this.options.behavior)==null||c.onFetch(i,this),Bt(this,Ic,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=i.fetchOptions)==null?void 0:u.meta))&&bn(this,sa,di).call(this,{type:"fetch",meta:(d=i.fetchOptions)==null?void 0:d.meta});const l=h=>{var f,m,g,v;Gg(h)&&h.silent||bn(this,sa,di).call(this,{type:"error",error:h}),Gg(h)||((m=(f=Fe(this,Rs).config).onError)==null||m.call(f,h,this),(v=(g=Fe(this,Rs).config).onSettled)==null||v.call(g,this.state.data,h,this)),this.scheduleGc()};return Bt(this,Nn,t_({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var f,m,g,v;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){l(b);return}(m=(f=Fe(this,Rs).config).onSuccess)==null||m.call(f,h,this),(v=(g=Fe(this,Rs).config).onSettled)==null||v.call(g,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{bn(this,sa,di).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{bn(this,sa,di).call(this,{type:"pause"})},onContinue:()=>{bn(this,sa,di).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),Fe(this,Nn).start()}},Oc=new WeakMap,Ic=new WeakMap,Rs=new WeakMap,Nn=new WeakMap,hh=new WeakMap,sl=new WeakMap,sa=new WeakSet,di=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...R6(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Gg(s)&&s.revert&&Fe(this,Ic)?{...Fe(this,Ic),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Bn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Fe(this,Rs).notify({query:this,type:"updated",action:e})})},f5);function R6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function O6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Da,p5,I6=(p5=class extends bm{constructor(e={}){super();nr(this,Da);this.config=e,Bt(this,Da,new Map)}build(e,r,n){const s=r.queryKey,a=r.queryHash??q0(s,r);let i=this.get(a);return i||(i=new D6({cache:this,queryKey:s,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){Fe(this,Da).has(e.queryHash)||(Fe(this,Da).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=Fe(this,Da).get(e.queryHash);r&&(e.destroy(),r===e&&Fe(this,Da).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Fe(this,Da).get(e)}getAll(){return[...Fe(this,Da).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Tb(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Tb(e,n)):r}notify(e){Bn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Bn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Da=new WeakMap,p5),Ra,In,al,Oa,Ki,m5,M6=(m5=class extends r_{constructor(e){super();nr(this,Oa);nr(this,Ra);nr(this,In);nr(this,al);this.mutationId=e.mutationId,Bt(this,In,e.mutationCache),Bt(this,Ra,[]),this.state=e.state||F6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Fe(this,Ra).includes(e)||(Fe(this,Ra).push(e),this.clearGcTimeout(),Fe(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Bt(this,Ra,Fe(this,Ra).filter(r=>r!==e)),this.scheduleGc(),Fe(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Fe(this,Ra).length||(this.state.status==="pending"?this.scheduleGc():Fe(this,In).remove(this))}continue(){var e;return((e=Fe(this,al))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,a,i,l,c,u,d,h,f,m,g,v,b,_,S,N,k,A,W,I;Bt(this,al,t_({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(F,ee)=>{bn(this,Oa,Ki).call(this,{type:"failed",failureCount:F,error:ee})},onPause:()=>{bn(this,Oa,Ki).call(this,{type:"pause"})},onContinue:()=>{bn(this,Oa,Ki).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Fe(this,In).canRun(this)}));const r=this.state.status==="pending",n=!Fe(this,al).canStart();try{if(!r){bn(this,Oa,Ki).call(this,{type:"pending",variables:e,isPaused:n}),await((a=(s=Fe(this,In).config).onMutate)==null?void 0:a.call(s,e,this));const ee=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,e));ee!==this.state.context&&bn(this,Oa,Ki).call(this,{type:"pending",context:ee,variables:e,isPaused:n})}const F=await Fe(this,al).start();return await((u=(c=Fe(this,In).config).onSuccess)==null?void 0:u.call(c,F,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,F,e,this.state.context)),await((m=(f=Fe(this,In).config).onSettled)==null?void 0:m.call(f,F,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,F,null,e,this.state.context)),bn(this,Oa,Ki).call(this,{type:"success",data:F}),F}catch(F){try{throw await((_=(b=Fe(this,In).config).onError)==null?void 0:_.call(b,F,e,this.state.context,this)),await((N=(S=this.options).onError)==null?void 0:N.call(S,F,e,this.state.context)),await((A=(k=Fe(this,In).config).onSettled)==null?void 0:A.call(k,void 0,F,this.state.variables,this.state.context,this)),await((I=(W=this.options).onSettled)==null?void 0:I.call(W,void 0,F,e,this.state.context)),F}finally{bn(this,Oa,Ki).call(this,{type:"error",error:F})}}finally{Fe(this,In).runNext(this)}}},Ra=new WeakMap,In=new WeakMap,al=new WeakMap,Oa=new WeakSet,Ki=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Bn.batch(()=>{Fe(this,Ra).forEach(n=>{n.onMutationUpdate(e)}),Fe(this,In).notify({mutation:this,type:"updated",action:e})})},m5);function F6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hs,fh,g5,B6=(g5=class extends bm{constructor(e={}){super();nr(this,hs);nr(this,fh);this.config=e,Bt(this,hs,new Map),Bt(this,fh,Date.now())}build(e,r,n){const s=new M6({mutationCache:this,mutationId:++Pf(this,fh)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=If(e),n=Fe(this,hs).get(r)??[];n.push(e),Fe(this,hs).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=If(e);if(Fe(this,hs).has(r)){const s=(n=Fe(this,hs).get(r))==null?void 0:n.filter(a=>a!==e);s&&(s.length===0?Fe(this,hs).delete(r):Fe(this,hs).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=Fe(this,hs).get(If(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=Fe(this,hs).get(If(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Bn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Fe(this,hs).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Lb(r,n))}findAll(e={}){return this.getAll().filter(r=>Lb(e,r))}notify(e){Bn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Bn.batch(()=>Promise.all(e.map(r=>r.continue().catch(ra))))}},hs=new WeakMap,fh=new WeakMap,g5);function If(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Ob(t){return{onFetch:(e,r)=>{var d,h,f,m,g;const n=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],i=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const b=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=ZS(e.options,e.fetchOptions),S=async(N,k,A)=>{if(v)return Promise.reject();if(k==null&&N.pages.length)return Promise.resolve(N);const W={queryKey:e.queryKey,pageParam:k,direction:A?"backward":"forward",meta:e.options.meta};b(W);const I=await _(W),{maxPages:F}=e.options,ee=A?k6:C6;return{pages:ee(N.pages,I,F),pageParams:ee(N.pageParams,k,F)}};if(s&&a.length){const N=s==="backward",k=N?$6:Ib,A={pages:a,pageParams:i},W=k(n,A);l=await S(A,W,N)}else{const N=t??a.length;do{const k=c===0?i[0]??n.initialPageParam:Ib(n,l);if(c>0&&k==null)break;l=await S(l,k),c++}while(c<N)}return l};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Ib(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function $6(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Rr,so,ao,Mc,Fc,io,Bc,$c,y5,U6=(y5=class{constructor(t={}){nr(this,Rr);nr(this,so);nr(this,ao);nr(this,Mc);nr(this,Fc);nr(this,io);nr(this,Bc);nr(this,$c);Bt(this,Rr,t.queryCache||new I6),Bt(this,so,t.mutationCache||new B6),Bt(this,ao,t.defaultOptions||{}),Bt(this,Mc,new Map),Bt(this,Fc,new Map),Bt(this,io,0)}mount(){Pf(this,io)._++,Fe(this,io)===1&&(Bt(this,Bc,XS.subscribe(async t=>{t&&(await this.resumePausedMutations(),Fe(this,Rr).onFocus())})),Bt(this,$c,yp.subscribe(async t=>{t&&(await this.resumePausedMutations(),Fe(this,Rr).onOnline())})))}unmount(){var t,e;Pf(this,io)._--,Fe(this,io)===0&&((t=Fe(this,Bc))==null||t.call(this),Bt(this,Bc,void 0),(e=Fe(this,$c))==null||e.call(this),Bt(this,$c,void 0))}isFetching(t){return Fe(this,Rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Fe(this,so).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=Fe(this,Rr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=Fe(this,Rr).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(Eb(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return Fe(this,Rr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=Fe(this,Rr).get(n.queryHash),a=s==null?void 0:s.state.data,i=b6(e,a);if(i!==void 0)return Fe(this,Rr).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return Bn.batch(()=>Fe(this,Rr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=Fe(this,Rr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=Fe(this,Rr);Bn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=Fe(this,Rr),n={type:"active",...t};return Bn.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Bn.batch(()=>Fe(this,Rr).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(ra).catch(ra)}invalidateQueries(t={},e={}){return Bn.batch(()=>{if(Fe(this,Rr).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Bn.batch(()=>Fe(this,Rr).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(ra)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(ra)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=Fe(this,Rr).build(this,e);return r.isStaleByTime(Eb(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ra).catch(ra)}fetchInfiniteQuery(t){return t.behavior=Ob(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ra).catch(ra)}ensureInfiniteQueryData(t){return t.behavior=Ob(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yp.isOnline()?Fe(this,so).resumePausedMutations():Promise.resolve()}getQueryCache(){return Fe(this,Rr)}getMutationCache(){return Fe(this,so)}getDefaultOptions(){return Fe(this,ao)}setDefaultOptions(t){Bt(this,ao,t)}setQueryDefaults(t,e){Fe(this,Mc).set(jd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Fe(this,Mc).values()];let r={};return e.forEach(n=>{Nd(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){Fe(this,Fc).set(jd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Fe(this,Fc).values()];let r={};return e.forEach(n=>{Nd(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Fe(this,ao).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=q0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===z0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Fe(this,ao).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Fe(this,Rr).clear(),Fe(this,so).clear()}},Rr=new WeakMap,so=new WeakMap,ao=new WeakMap,Mc=new WeakMap,Fc=new WeakMap,io=new WeakMap,Bc=new WeakMap,$c=new WeakMap,y5),V6=w.createContext(void 0),q6=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(V6.Provider,{value:t,children:e}));const W0=w.createContext({});function H0(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const G0=typeof window<"u",n_=G0?w.useLayoutEffect:w.useEffect,Sm=w.createContext(null),Y0=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class z6 extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=n instanceof HTMLElement&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W6({children:t,isPresent:e,anchorX:r}){const n=w.useId(),s=w.useRef(null),a=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=w.useContext(Y0);return w.useInsertionEffect(()=>{const{width:l,height:c,top:u,left:d,right:h}=a.current;if(e||!s.current||!l||!c)return;const f=r==="left"?`left: ${d}`:`right: ${h}`;s.current.dataset.motionPopId=n;const m=document.createElement("style");return i&&(m.nonce=i),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${f}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),o.jsx(z6,{isPresent:e,childRef:s,sizeRef:a,children:w.cloneElement(t,{ref:s})})}const H6=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:l})=>{const c=H0(G6),u=w.useId(),d=w.useCallback(f=>{c.set(f,!0);for(const m of c.values())if(!m)return;n&&n()},[c,n]),h=w.useMemo(()=>({id:u,initial:e,isPresent:r,custom:s,onExitComplete:d,register:f=>(c.set(f,!1),()=>c.delete(f))}),a?[Math.random(),d]:[r,d]);return w.useMemo(()=>{c.forEach((f,m)=>c.set(m,!1))},[r]),w.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),i==="popLayout"&&(t=o.jsx(W6,{isPresent:r,anchorX:l,children:t})),o.jsx(Sm.Provider,{value:h,children:t})};function G6(){return new Map}function s_(t=!0){const e=w.useContext(Sm);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,a=w.useId();w.useEffect(()=>{if(t)return s(a)},[t]);const i=w.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,i]:[!0]}const Mf=t=>t.key||"";function Mb(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const K0=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:l="left"})=>{const[c,u]=s_(i),d=w.useMemo(()=>Mb(t),[t]),h=i&&!c?[]:d.map(Mf),f=w.useRef(!0),m=w.useRef(d),g=H0(()=>new Map),[v,b]=w.useState(d),[_,S]=w.useState(d);n_(()=>{f.current=!1,m.current=d;for(let A=0;A<_.length;A++){const W=Mf(_[A]);h.includes(W)?g.delete(W):g.get(W)!==!0&&g.set(W,!1)}},[_,h.length,h.join("-")]);const N=[];if(d!==v){let A=[...d];for(let W=0;W<_.length;W++){const I=_[W],F=Mf(I);h.includes(F)||(A.splice(W,0,I),N.push(I))}return a==="wait"&&N.length&&(A=N),S(Mb(A)),b(d),null}const{forceRender:k}=w.useContext(W0);return o.jsx(o.Fragment,{children:_.map(A=>{const W=Mf(A),I=i&&!c?!1:d===_||h.includes(W),F=()=>{if(g.has(W))g.set(W,!0);else return;let ee=!0;g.forEach(ae=>{ae||(ee=!1)}),ee&&(k==null||k(),S(m.current),i&&(u==null||u()),n&&n())};return o.jsx(H6,{isPresent:I,initial:!f.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,onExitComplete:I?void 0:F,anchorX:l,children:A},W)})})};function J0(t,e){t.indexOf(e)===-1&&t.push(e)}function Z0(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const vs=t=>t;let lv=vs;const Y6={skipAnimations:!1,useManualTiming:!1};function X0(t){let e;return()=>(e===void 0&&(e=t()),e)}const zc=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class Q0{constructor(){this.subscriptions=[]}add(e){return J0(this.subscriptions,e),()=>Z0(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yi=t=>t*1e3,vi=t=>t/1e3;function a_(t,e){return e?t*(1e3/e):0}const K6=X0(()=>window.ScrollTimeline!==void 0);class J6{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(K6()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Z6 extends J6{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function ex(t,e){return t?t[e]||t.default||t:void 0}const cv=2e4;function i_(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<cv;)e+=r,n=t.next(e);return e>=cv?1/0:e}function tx(t){return typeof t=="function"}function Fb(t,e){t.timeline=e,t.onfinish=null}const rx=t=>Array.isArray(t)&&typeof t[0]=="number",X6={linearEasing:void 0};function Q6(t,e){const r=X0(t);return()=>{var n;return(n=X6[e])!==null&&n!==void 0?n:r()}}const vp=Q6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),o_=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let a=0;a<s;a++)n+=t(zc(0,s-1,a))+", ";return`linear(${n.substring(0,n.length-2)})`};function l_(t){return!!(typeof t=="function"&&vp()||!t||typeof t=="string"&&(t in uv||vp())||rx(t)||Array.isArray(t)&&t.every(l_))}const Qu=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,uv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qu([0,.65,.55,1]),circOut:Qu([.55,0,1,.45]),backIn:Qu([.31,.01,.66,-.59]),backOut:Qu([.33,1.53,.69,.99])};function c_(t,e){if(t)return typeof t=="function"&&vp()?o_(t,e):rx(t)?Qu(t):Array.isArray(t)?t.map(r=>c_(r,e)||uv.easeOut):uv[t]}const Ff=["read","resolveKeyframes","update","preRender","render","postRender"],Bb={value:null,addProjectionMetrics:null};function eR(t,e){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){i.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const v=m&&s?r:n;return f&&i.add(h),v.has(h)||v.add(h),h},cancel:h=>{n.delete(h),i.delete(h)},process:h=>{if(l=h,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(u),e&&Bb.value&&Bb.value.frameloop[e].push(c),c=0,r.clear(),s=!1,a&&(a=!1,d.process(h))}};return d}const tR=40;function u_(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=Ff.reduce((_,S)=>(_[S]=eR(a,e?S:void 0),_),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:f}=i,m=()=>{const _=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(_-s.timestamp,tR),1),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(m))},g=()=>{r=!0,n=!0,s.isProcessing||t(m)};return{schedule:Ff.reduce((_,S)=>{const N=i[S];return _[S]=(k,A=!1,W=!1)=>(r||g(),N.schedule(k,A,W)),_},{}),cancel:_=>{for(let S=0;S<Ff.length;S++)i[Ff[S]].cancel(_)},state:s,steps:i}}const{schedule:wr,cancel:po,state:yn,steps:Yg}=u_(typeof requestAnimationFrame<"u"?requestAnimationFrame:vs,!0),{schedule:nx,cancel:eG}=u_(queueMicrotask,!1);let Qf;function rR(){Qf=void 0}const $a={now:()=>(Qf===void 0&&$a.set(yn.isProcessing||Y6.useManualTiming?yn.timestamp:performance.now()),Qf),set:t=>{Qf=t,queueMicrotask(rR)}},ea={x:!1,y:!1};function d_(){return ea.x||ea.y}function nR(t){return t==="x"||t==="y"?ea[t]?null:(ea[t]=!0,()=>{ea[t]=!1}):ea.x||ea.y?null:(ea.x=ea.y=!0,()=>{ea.x=ea.y=!1})}function sR(t,e,r){var n;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function h_(t,e){const r=sR(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function $b(t){return!(t.pointerType==="touch"||d_())}function aR(t,e,r={}){const[n,s,a]=h_(t,r),i=l=>{if(!$b(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{$b(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",i,s)}),a}function Ub(t,e){const r=`${e}PointerCapture`;if(t.target instanceof Element&&r in t.target&&t.pointerId!==void 0)try{t.target[r](t.pointerId)}catch{}}const f_=(t,e)=>e?t===e?!0:f_(t,e.parentElement):!1,sx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oR(t){return iR.has(t.tagName)||t.tabIndex!==-1}const ed=new WeakSet;function Vb(t){return e=>{e.key==="Enter"&&t(e)}}function Kg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const lR=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Vb(()=>{if(ed.has(r))return;Kg(r,"down");const s=Vb(()=>{Kg(r,"up")}),a=()=>Kg(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function qb(t){return sx(t)&&!d_()}function cR(t,e,r={}){const[n,s,a]=h_(t,r),i=l=>{const c=l.currentTarget;if(!c||!qb(l)||ed.has(c))return;ed.add(c),Ub(l,"set");const u=e(c,l),d=(m,g)=>{c.removeEventListener("pointerup",h),c.removeEventListener("pointercancel",f),Ub(m,"release"),!(!qb(m)||!ed.has(c))&&(ed.delete(c),typeof u=="function"&&u(m,{success:g}))},h=m=>{(m.isTrusted?uR(m,c instanceof Element?c.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?d(m,!1):d(m,!(c instanceof Element)||f_(c,m.target))},f=m=>{d(m,!1)};c.addEventListener("pointerup",h,s),c.addEventListener("pointercancel",f,s),c.addEventListener("lostpointercapture",f,s)};return n.forEach(l=>{l=r.useGlobalTarget?window:l;let c=!1;l instanceof HTMLElement&&(c=!0,!oR(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0)),l.addEventListener("pointerdown",i,s),c&&l.addEventListener("focus",u=>lR(u,s),s)}),a}function uR(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}const zb=30,dR=t=>!isNaN(parseFloat(t));class hR{constructor(e,r={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const a=$a.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=$a.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=dR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Q0);const n=this.events[e].add(r);return e==="change"?()=>{n(),wr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$a.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zb)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,zb);return a_(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cd(t,e){return new hR(t,e)}const p_=w.createContext({strict:!1}),Wb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wc={};for(const t in Wb)Wc[t]={isEnabled:e=>Wb[t].some(r=>!!e[r])};function fR(t){for(const e in t)Wc[e]={...Wc[e],...t[e]}}const pR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pR.has(t)}let m_=t=>!xp(t);function mR(t){t&&(m_=e=>e.startsWith("on")?!xp(e):t(e))}try{mR(require("@emotion/is-prop-valid").default)}catch{}function gR(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(m_(s)||r===!0&&xp(s)||!e&&!xp(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function yR(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const _m=w.createContext({});function jm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function kd(t){return typeof t=="string"||Array.isArray(t)}const ax=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ix=["initial",...ax];function Nm(t){return jm(t.animate)||ix.some(e=>kd(t[e]))}function g_(t){return!!(Nm(t)||t.variants)}function vR(t,e){if(Nm(t)){const{initial:r,animate:n}=t;return{initial:r===!1||kd(r)?r:void 0,animate:kd(n)?n:void 0}}return t.inherit!==!1?e:{}}function xR(t){const{initial:e,animate:r}=vR(t,w.useContext(_m));return w.useMemo(()=>({initial:e,animate:r}),[Hb(e),Hb(r)])}function Hb(t){return Array.isArray(t)?t.join(" "):t}const bR=Symbol.for("motionComponentSymbol");function cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function wR(t,e,r){return w.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):cc(r)&&(r.current=n))},[e])}const ox=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SR="framerAppearId",y_="data-"+ox(SR),v_=w.createContext({});function _R(t,e,r,n,s){var a,i;const{visualElement:l}=w.useContext(_m),c=w.useContext(p_),u=w.useContext(Sm),d=w.useContext(Y0).reducedMotion,h=w.useRef(null);n=n||c.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:l,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=w.useContext(v_);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&jR(h.current,r,s,m);const g=w.useRef(!1);w.useInsertionEffect(()=>{f&&g.current&&f.update(r,u)});const v=r[y_],b=w.useRef(!!v&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,v))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,v)));return n_(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),nx.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),w.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,v)}),b.current=!1))}),f}function jR(t,e,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:x_(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||l&&cc(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function x_(t){if(t)return t.options.allowProjection!==!1?t.projection:x_(t.parent)}function NR({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var a,i;t&&fR(t);function l(u,d){let h;const f={...w.useContext(Y0),...u,layoutId:CR(u)},{isStatic:m}=f,g=xR(u),v=n(u,m);if(!m&&G0){kR();const b=AR(f);h=b.MeasureLayout,g.visualElement=_R(s,v,f,e,b.ProjectionNode)}return o.jsxs(_m.Provider,{value:g,children:[h&&g.visualElement?o.jsx(h,{visualElement:g.visualElement,...f}):null,r(s,u,wR(v,g.visualElement,d),v,m,g.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(i=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&i!==void 0?i:""})`}`;const c=w.forwardRef(l);return c[bR]=s,c}function CR({layoutId:t}){const e=w.useContext(W0).id;return e&&t!==void 0?e+"-"+t:t}function kR(t,e){w.useContext(p_).strict}function AR(t){const{drag:e,layout:r}=Wc;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const b_=t=>e=>typeof e=="string"&&e.startsWith(t),lx=b_("--"),PR=b_("var(--"),cx=t=>PR(t)?ER.test(t.split("/*")[0].trim()):!1,ER=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ad={};function TR(t){for(const e in t)Ad[e]=t[e],lx(e)&&(Ad[e].isCSSVariable=!0)}const iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yl=new Set(iu);function w_(t,{layout:e,layoutId:r}){return yl.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Ad[t]||t==="opacity")}const An=t=>!!(t&&t.getVelocity),S_=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Si=(t,e,r)=>r>e?e:r<t?t:r,ou={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pd={...ou,transform:t=>Si(0,1,t)},Bf={...ou,default:1},wh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ji=wh("deg"),Ua=wh("%"),vt=wh("px"),LR=wh("vh"),DR=wh("vw"),Gb={...Ua,parse:t=>Ua.parse(t)/100,transform:t=>Ua.transform(t*100)},RR={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt},OR={rotate:Ji,rotateX:Ji,rotateY:Ji,rotateZ:Ji,scale:Bf,scaleX:Bf,scaleY:Bf,scaleZ:Bf,skew:Ji,skewX:Ji,skewY:Ji,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Pd,originX:Gb,originY:Gb,originZ:vt},Yb={...ou,transform:Math.round},ux={...RR,...OR,zIndex:Yb,size:vt,fillOpacity:Pd,strokeOpacity:Pd,numOctaves:Yb},IR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},MR=iu.length;function FR(t,e,r){let n="",s=!0;for(let a=0;a<MR;a++){const i=iu[a],l=t[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=S_(l,ux[i]);if(!c){s=!1;const d=IR[i]||i;n+=`${d}(${u}) `}r&&(e[i]=u)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function dx(t,e,r){const{style:n,vars:s,transformOrigin:a}=t;let i=!1,l=!1;for(const c in e){const u=e[c];if(yl.has(c)){i=!0;continue}else if(lx(c)){s[c]=u;continue}else{const d=S_(u,ux[c]);c.startsWith("origin")?(l=!0,a[c]=d):n[c]=d}}if(e.transform||(i||r?n.transform=FR(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const hx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function __(t,e,r){for(const n in e)!An(e[n])&&!w_(n,r)&&(t[n]=e[n])}function BR({transformTemplate:t},e){return w.useMemo(()=>{const r=hx();return dx(r,e,t),Object.assign({},r.vars,r.style)},[e])}function $R(t,e){const r=t.style||{},n={};return __(n,r,t),Object.assign(n,BR(t,e)),n}function UR(t,e){const r={},n=$R(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const VR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fx(t){return typeof t!="string"||t.includes("-")?!1:!!(VR.indexOf(t)>-1||/[A-Z]/u.test(t))}const qR={offset:"stroke-dashoffset",array:"stroke-dasharray"},zR={offset:"strokeDashoffset",array:"strokeDasharray"};function WR(t,e,r=1,n=0,s=!0){t.pathLength=1;const a=s?qR:zR;t[a.offset]=vt.transform(-n);const i=vt.transform(e),l=vt.transform(r);t[a.array]=`${i} ${l}`}function Kb(t,e,r){return typeof t=="string"?t:vt.transform(e+r*t)}function HR(t,e,r){const n=Kb(e,t.x,t.width),s=Kb(r,t.y,t.height);return`${n} ${s}`}function px(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:a,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...u},d,h){if(dx(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m,dimensions:g}=t;f.transform&&(g&&(m.transform=f.transform),delete f.transform),g&&(s!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=HR(g,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&WR(f,i,l,c,!1)}const j_=()=>({...hx(),attrs:{}}),mx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GR(t,e,r,n){const s=w.useMemo(()=>{const a=j_();return px(a,e,mx(n),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};__(a,t.style,t),s.style={...a,...s.style}}return s}function YR(t=!1){return(r,n,s,{latestValues:a},i)=>{const c=(fx(r)?GR:UR)(n,a,i,r),u=gR(n,typeof r=="string",t),d=r!==w.Fragment?{...u,...c,ref:s}:{},{children:h}=n,f=w.useMemo(()=>An(h)?h.get():h,[h]);return w.createElement(r,{...d,children:f})}}function Jb(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function gx(t,e,r,n){if(typeof e=="function"){const[s,a]=Jb(n);e=e(r!==void 0?r:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=Jb(n);e=e(r!==void 0?r:t.custom,s,a)}return e}const dv=t=>Array.isArray(t),KR=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),JR=t=>dv(t)?t[t.length-1]||0:t;function ep(t){const e=An(t)?t.get():t;return KR(e)?e.toValue():e}function ZR({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,a){const i={latestValues:XR(n,s,a,t),renderState:e()};return r&&(i.onMount=l=>r({props:n,current:l,...i}),i.onUpdate=l=>r(l)),i}const N_=t=>(e,r)=>{const n=w.useContext(_m),s=w.useContext(Sm),a=()=>ZR(t,e,n,s);return r?a():H0(a)};function XR(t,e,r,n){const s={},a=n(t,{});for(const f in a)s[f]=ep(a[f]);let{initial:i,animate:l}=t;const c=Nm(t),u=g_(t);e&&u&&!c&&t.inherit!==!1&&(i===void 0&&(i=e.initial),l===void 0&&(l=e.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const h=d?l:i;if(h&&typeof h!="boolean"&&!jm(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const g=gx(t,f[m]);if(g){const{transitionEnd:v,transition:b,..._}=g;for(const S in _){let N=_[S];if(Array.isArray(N)){const k=d?N.length-1:0;N=N[k]}N!==null&&(s[S]=N)}for(const S in v)s[S]=v[S]}}}return s}function yx(t,e,r){var n;const{style:s}=t,a={};for(const i in s)(An(s[i])||e.style&&An(e.style[i])||w_(i,t)||((n=r==null?void 0:r.getValue(i))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[i]=s[i]);return a}const QR={useVisualState:N_({scrapeMotionValuesFromProps:yx,createRenderState:hx})};function C_(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function k_(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const a in r)t.style.setProperty(a,r[a])}const A_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function P_(t,e,r,n){k_(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(A_.has(s)?s:ox(s),e.attrs[s])}function E_(t,e,r){const n=yx(t,e,r);for(const s in t)if(An(t[s])||An(e[s])){const a=iu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=t[s]}return n}const Zb=["x","y","width","height","cx","cy","r"],eO={useVisualState:N_({scrapeMotionValuesFromProps:E_,createRenderState:j_,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let a=!!t.drag;if(!a){for(const l in s)if(yl.has(l)){a=!0;break}}if(!a)return;let i=!e;if(e)for(let l=0;l<Zb.length;l++){const c=Zb[l];t[c]!==e[c]&&(i=!0)}i&&wr.read(()=>{C_(r,n),wr.render(()=>{px(n,s,mx(r.tagName),t.transformTemplate),P_(r,n)})})}})};function tO(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const i={...fx(n)?eO:QR,preloadedFeatures:t,useRender:YR(s),createVisualElement:e,Component:n};return NR(i)}}function Ed(t,e,r){const n=t.getProps();return gx(n,e,r!==void 0?r:n.custom,t)}const T_=new Set(["width","height","top","left","right","bottom",...iu]);function rO(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Cd(r))}function nO(t,e){const r=Ed(t,e);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const l=JR(a[i]);rO(t,i,l)}}function sO(t){return!!(An(t)&&t.add)}function hv(t,e){const r=t.getValue("willChange");if(sO(r))return r.add(e)}function L_(t){return t.props[y_]}const D_=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,aO=1e-7,iO=12;function oO(t,e,r,n,s){let a,i,l=0;do i=e+(r-e)/2,a=D_(i,n,s)-t,a>0?r=i:e=i;while(Math.abs(a)>aO&&++l<iO);return i}function Sh(t,e,r,n){if(t===e&&r===n)return vs;const s=a=>oO(a,0,1,t,r);return a=>a===0||a===1?a:D_(s(a),e,n)}const R_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,O_=t=>e=>1-t(1-e),I_=Sh(.33,1.53,.69,.99),vx=O_(I_),M_=R_(vx),F_=t=>(t*=2)<1?.5*vx(t):.5*(2-Math.pow(2,-10*(t-1))),xx=t=>1-Math.sin(Math.acos(t)),B_=O_(xx),$_=R_(xx),U_=t=>/^0[^.\s]+$/u.test(t);function lO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||U_(t):!0}const ud=t=>Math.round(t*1e5)/1e5,bx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cO(t){return t==null}const uO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wx=(t,e)=>r=>!!(typeof r=="string"&&uO.test(r)&&r.startsWith(t)||e&&!cO(r)&&Object.prototype.hasOwnProperty.call(r,e)),V_=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,l]=n.match(bx);return{[t]:parseFloat(s),[e]:parseFloat(a),[r]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},dO=t=>Si(0,255,t),Jg={...ou,transform:t=>Math.round(dO(t))},Qo={test:wx("rgb","red"),parse:V_("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Jg.transform(t)+", "+Jg.transform(e)+", "+Jg.transform(r)+", "+ud(Pd.transform(n))+")"};function hO(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const fv={test:wx("#"),parse:hO,transform:Qo.transform},uc={test:wx("hsl","hue"),parse:V_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ua.transform(ud(e))+", "+Ua.transform(ud(r))+", "+ud(Pd.transform(n))+")"},Cn={test:t=>Qo.test(t)||fv.test(t)||uc.test(t),parse:t=>Qo.test(t)?Qo.parse(t):uc.test(t)?uc.parse(t):fv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qo.transform(t):uc.transform(t)},fO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pO(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bx))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(fO))===null||r===void 0?void 0:r.length)||0)>0}const q_="number",z_="color",mO="var",gO="var(",Xb="${}",yO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Td(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(yO,c=>(Cn.test(c)?(n.color.push(a),s.push(z_),r.push(Cn.parse(c))):c.startsWith(gO)?(n.var.push(a),s.push(mO),r.push(c)):(n.number.push(a),s.push(q_),r.push(parseFloat(c))),++a,Xb)).split(Xb);return{values:r,split:l,indexes:n,types:s}}function W_(t){return Td(t).values}function H_(t){const{split:e,types:r}=Td(t),n=e.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=e[i],s[i]!==void 0){const l=r[i];l===q_?a+=ud(s[i]):l===z_?a+=Cn.transform(s[i]):a+=s[i]}return a}}const vO=t=>typeof t=="number"?0:t;function xO(t){const e=W_(t);return H_(t)(e.map(vO))}const mo={test:pO,parse:W_,createTransformer:H_,getAnimatableNone:xO},bO=new Set(["brightness","contrast","saturate","opacity"]);function wO(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(bx)||[];if(!n)return t;const s=r.replace(n,"");let a=bO.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+s+")"}const SO=/\b([a-z-]*)\(.*?\)/gu,pv={...mo,getAnimatableNone:t=>{const e=t.match(SO);return e?e.map(wO).join(" "):t}},_O={...ux,color:Cn,backgroundColor:Cn,outlineColor:Cn,fill:Cn,stroke:Cn,borderColor:Cn,borderTopColor:Cn,borderRightColor:Cn,borderBottomColor:Cn,borderLeftColor:Cn,filter:pv,WebkitFilter:pv},G_=t=>_O[t];function Y_(t,e){let r=G_(t);return r!==pv&&(r=mo),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const jO=new Set(["auto","none","0"]);function NO(t,e,r){let n=0,s;for(;n<t.length&&!s;){const a=t[n];typeof a=="string"&&!jO.has(a)&&Td(a).values.length&&(s=t[n]),n++}if(s&&r)for(const a of e)t[a]=Y_(r,s)}const el=t=>t*180/Math.PI,mv=t=>{const e=el(Math.atan2(t[1],t[0]));return gv(e)},CO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:mv,rotateZ:mv,skewX:t=>el(Math.atan(t[1])),skewY:t=>el(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},gv=t=>(t=t%360,t<0&&(t+=360),t),Qb=mv,e2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),t2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:e2,scaleY:t2,scale:t=>(e2(t)+t2(t))/2,rotateX:t=>gv(el(Math.atan2(t[6],t[5]))),rotateY:t=>gv(el(Math.atan2(-t[2],t[0]))),rotateZ:Qb,rotate:Qb,skewX:t=>el(Math.atan(t[4])),skewY:t=>el(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function r2(t){return t.includes("scale")?1:0}function yv(t,e){if(!t||t==="none")return r2(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=kO,s=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=CO,s=l}if(!s)return r2(e);const a=n[e],i=s[1].split(",").map(PO);return typeof a=="function"?a(i):i[a]}const AO=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return yv(r,e)};function PO(t){return parseFloat(t.trim())}const n2=t=>t===ou||t===vt,EO=new Set(["x","y","z"]),TO=iu.filter(t=>!EO.has(t));function LO(t){const e=[];return TO.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Hc={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>yv(e,"x"),y:(t,{transform:e})=>yv(e,"y")};Hc.translateX=Hc.x;Hc.translateY=Hc.y;const il=new Set;let vv=!1,xv=!1;function K_(){if(xv){const t=Array.from(il).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=LO(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{var l;(l=n.getValue(a))===null||l===void 0||l.set(i)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}xv=!1,vv=!1,il.forEach(t=>t.complete()),il.clear()}function J_(){il.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xv=!0)})}function DO(){J_(),K_()}class Sx{constructor(e,r,n,s,a,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(il.add(this),vv||(vv=!0,wr.read(J_),wr.resolveKeyframes(K_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const i=s==null?void 0:s.get(),l=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&r){const c=n.readValue(r,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&i===void 0&&s.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),il.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,il.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Z_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),RO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function OO(t){const e=RO.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function X_(t,e,r=1){const[n,s]=OO(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const i=a.trim();return Z_(i)?parseFloat(i):i}return cx(s)?X_(s,e,r+1):s}const Q_=t=>e=>e.test(t),IO={test:t=>t==="auto",parse:t=>t},ej=[ou,vt,Ua,Ji,DR,LR,IO],s2=t=>ej.find(Q_(t));class tj extends Sx{constructor(e,r,n,s,a){super(e,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),cx(u))){const d=X_(u,r.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!T_.has(n)||e.length!==2)return;const[s,a]=e,i=s2(s),l=s2(a);if(i!==l)if(n2(i)&&n2(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)lO(e[s])&&n.push(s);n.length&&NO(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const a=r.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=Hc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{r.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const a2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mo.test(t)||t==="0")&&!t.startsWith("url("));function MO(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function FO(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],i=a2(s,e),l=a2(a,e);return!i||!l?!1:MO(t)||(r==="spring"||tx(r))&&n}const BO=t=>t!==null;function Cm(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(BO),a=e&&r!=="loop"&&e%2===1?0:s.length-1;return!a||n===void 0?s[a]:n}const $O=40;class rj{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$a.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$O?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&DO(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=$a.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:a,delay:i,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!FO(e,n,s,a))if(i)this.options.duration=0;else{c&&c(Cm(e,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,r);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tr=(t,e,r)=>t+(e-t)*r;function Zg(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function UO({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,a=0,i=0;if(!e)s=a=i=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;s=Zg(c,l,t+1/3),a=Zg(c,l,t),i=Zg(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function bp(t,e){return r=>r>0?e:t}const Xg=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},VO=[fv,Qo,uc],qO=t=>VO.find(e=>e.test(t));function i2(t){const e=qO(t);if(!e)return!1;let r=e.parse(t);return e===uc&&(r=UO(r)),r}const o2=(t,e)=>{const r=i2(t),n=i2(e);if(!r||!n)return bp(t,e);const s={...r};return a=>(s.red=Xg(r.red,n.red,a),s.green=Xg(r.green,n.green,a),s.blue=Xg(r.blue,n.blue,a),s.alpha=Tr(r.alpha,n.alpha,a),Qo.transform(s))},zO=(t,e)=>r=>e(t(r)),_h=(...t)=>t.reduce(zO),bv=new Set(["none","hidden"]);function WO(t,e){return bv.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function HO(t,e){return r=>Tr(t,e,r)}function _x(t){return typeof t=="number"?HO:typeof t=="string"?cx(t)?bp:Cn.test(t)?o2:KO:Array.isArray(t)?nj:typeof t=="object"?Cn.test(t)?o2:GO:bp}function nj(t,e){const r=[...t],n=r.length,s=t.map((a,i)=>_x(a)(a,e[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function GO(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=_x(t[s])(t[s],e[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function YO(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],l=t.indexes[i][s[i]],c=(r=t.values[l])!==null&&r!==void 0?r:0;n[a]=c,s[i]++}return n}const KO=(t,e)=>{const r=mo.createTransformer(e),n=Td(t),s=Td(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?bv.has(t)&&!s.values.length||bv.has(e)&&!n.values.length?WO(t,e):_h(nj(YO(n,s),s.values),r):bp(t,e)};function sj(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Tr(t,e,r):_x(t)(t,e)}const JO=5;function aj(t,e,r){const n=Math.max(e-JO,0);return a_(r-t(n),e-n)}const Ir={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qg=.001;function ZO({duration:t=Ir.duration,bounce:e=Ir.bounce,velocity:r=Ir.velocity,mass:n=Ir.mass}){let s,a,i=1-e;i=Si(Ir.minDamping,Ir.maxDamping,i),t=Si(Ir.minDuration,Ir.maxDuration,vi(t)),i<1?(s=u=>{const d=u*i,h=d*t,f=d-r,m=wv(u,i),g=Math.exp(-h);return Qg-f/m*g},a=u=>{const h=u*i*t,f=h*r+r,m=Math.pow(i,2)*Math.pow(u,2)*t,g=Math.exp(-h),v=wv(Math.pow(u,2),i);return(-s(u)+Qg>0?-1:1)*((f-m)*g)/v}):(s=u=>{const d=Math.exp(-u*t),h=(u-r)*t+1;return-Qg+d*h},a=u=>{const d=Math.exp(-u*t),h=(r-u)*(t*t);return d*h});const l=5/t,c=QO(s,a,l);if(t=yi(t),isNaN(c))return{stiffness:Ir.stiffness,damping:Ir.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:t}}}const XO=12;function QO(t,e,r){let n=r;for(let s=1;s<XO;s++)n=n-t(n)/e(n);return n}function wv(t,e){return t*Math.sqrt(1-e*e)}const e8=["duration","bounce"],t8=["stiffness","damping","mass"];function l2(t,e){return e.some(r=>t[r]!==void 0)}function r8(t){let e={velocity:Ir.velocity,stiffness:Ir.stiffness,damping:Ir.damping,mass:Ir.mass,isResolvedFromDuration:!1,...t};if(!l2(t,t8)&&l2(t,e8))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*Si(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ir.mass,stiffness:s,damping:a}}else{const r=ZO(t);e={...e,...r,mass:Ir.mass},e.isResolvedFromDuration=!0}return e}function ij(t=Ir.visualDuration,e=Ir.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=r8({...r,velocity:-vi(r.velocity||0)}),g=f||0,v=u/(2*Math.sqrt(c*d)),b=i-a,_=vi(Math.sqrt(c/d)),S=Math.abs(b)<5;n||(n=S?Ir.restSpeed.granular:Ir.restSpeed.default),s||(s=S?Ir.restDelta.granular:Ir.restDelta.default);let N;if(v<1){const A=wv(_,v);N=W=>{const I=Math.exp(-v*_*W);return i-I*((g+v*_*b)/A*Math.sin(A*W)+b*Math.cos(A*W))}}else if(v===1)N=A=>i-Math.exp(-_*A)*(b+(g+_*b)*A);else{const A=_*Math.sqrt(v*v-1);N=W=>{const I=Math.exp(-v*_*W),F=Math.min(A*W,300);return i-I*((g+v*_*b)*Math.sinh(F)+A*b*Math.cosh(F))/A}}const k={calculatedDuration:m&&h||null,next:A=>{const W=N(A);if(m)l.done=A>=h;else{let I=0;v<1&&(I=A===0?yi(g):aj(N,A,W));const F=Math.abs(I)<=n,ee=Math.abs(i-W)<=s;l.done=F&&ee}return l.value=l.done?i:W,l},toString:()=>{const A=Math.min(i_(k),cv),W=o_(I=>k.next(A*I).value,A,30);return A+"ms "+W}};return k}function c2({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=F=>l!==void 0&&F<l||c!==void 0&&F>c,g=F=>l===void 0?c:c===void 0||Math.abs(l-F)<Math.abs(c-F)?l:c;let v=r*e;const b=h+v,_=i===void 0?b:i(b);_!==b&&(v=_-h);const S=F=>-v*Math.exp(-F/n),N=F=>_+S(F),k=F=>{const ee=S(F),ae=N(F);f.done=Math.abs(ee)<=u,f.value=f.done?_:ae};let A,W;const I=F=>{m(f.value)&&(A=F,W=ij({keyframes:[f.value,g(f.value)],velocity:aj(N,F,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return I(0),{calculatedDuration:null,next:F=>{let ee=!1;return!W&&A===void 0&&(ee=!0,k(F),I(F)),A!==void 0&&F>=A?W.next(F-A):(!ee&&k(F),f)}}}const n8=Sh(.42,0,1,1),s8=Sh(0,0,.58,1),oj=Sh(.42,0,.58,1),a8=t=>Array.isArray(t)&&typeof t[0]!="number",u2={linear:vs,easeIn:n8,easeInOut:oj,easeOut:s8,circIn:xx,circInOut:$_,circOut:B_,backIn:vx,backInOut:M_,backOut:I_,anticipate:F_},d2=t=>{if(rx(t)){lv(t.length===4);const[e,r,n,s]=t;return Sh(e,r,n,s)}else if(typeof t=="string")return lv(u2[t]!==void 0),u2[t];return t};function i8(t,e,r){const n=[],s=r||sj,a=t.length-1;for(let i=0;i<a;i++){let l=s(t[i],t[i+1]);if(e){const c=Array.isArray(e)?e[i]||vs:e;l=_h(c,l)}n.push(l)}return n}function o8(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const a=t.length;if(lv(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=i8(e,n,s),c=l.length,u=d=>{if(i&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=zc(t[h],t[h+1],d);return l[h](f)};return r?d=>u(Si(t[0],t[a-1],d)):u}function l8(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=zc(0,e,n);t.push(Tr(r,1,s))}}function c8(t){const e=[0];return l8(e,t.length-1),e}function u8(t,e){return t.map(r=>r*e)}function d8(t,e){return t.map(()=>e||oj).splice(0,t.length-1)}function wp({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=a8(n)?n.map(d2):d2(n),a={done:!1,value:e[0]},i=u8(r&&r.length===e.length?r:c8(e),t),l=o8(i,e,{ease:Array.isArray(s)?s:d8(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const h8=t=>{const e=({timestamp:r})=>t(r);return{start:()=>wr.update(e,!0),stop:()=>po(e),now:()=>yn.isProcessing?yn.timestamp:$a.now()}},f8={decay:c2,inertia:c2,tween:wp,keyframes:wp,spring:ij},p8=t=>t/100;class jx extends rj{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:s,keyframes:a}=this.options,i=(s==null?void 0:s.KeyframeResolver)||Sx,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new i(a,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=this.options,l=tx(r)?r:f8[r]||wp;let c,u;l!==wp&&typeof e[0]!="number"&&(c=_h(p8,sj(e[0],e[1])),e=[0,100]);const d=l({...this.options,keyframes:e});a==="mirror"&&(u=l({...this.options,keyframes:[...e].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=i_(d));const{calculatedDuration:h}=d,f=h+s,m=f*(n+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:i,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=n;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:g,repeatDelay:v,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-f*(this.speed>=0?1:-1),S=this.speed>=0?_<0:_>d;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let N=this.currentTime,k=a;if(m){const F=Math.min(this.currentTime,d)/h;let ee=Math.floor(F),ae=F%1;!ae&&F>=1&&(ae=1),ae===1&&ee--,ee=Math.min(ee,m+1),!!(ee%2)&&(g==="reverse"?(ae=1-ae,v&&(ae-=v/h)):g==="mirror"&&(k=i)),N=Si(0,1,ae)*h}const A=S?{done:!1,value:c[0]}:k.next(N);l&&(A.value=l(A.value));let{done:W}=A;!S&&u!==null&&(W=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return I&&s!==void 0&&(A.value=Cm(c,this.options,s)),b&&b(A.value),I&&this.finish(),A}get duration(){const{resolved:e}=this;return e?vi(e.calculatedDuration):0}get time(){return vi(this.currentTime)}set time(e){e=yi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=vi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=h8,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const m8=new Set(["opacity","clipPath","filter","transform"]);function g8(t,e,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:l="easeInOut",times:c}={}){const u={[e]:r};c&&(u.offset=c);const d=c_(l,s);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"})}const y8=X0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Sp=10,v8=2e4;function x8(t){return tx(t.type)||t.type==="spring"||!l_(t.ease)}function b8(t,e){const r=new jx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let a=0;for(;!n.done&&a<v8;)n=r.sample(a),s.push(n.value),a+=Sp;return{times:void 0,keyframes:s,duration:a-Sp,ease:"linear"}}const lj={anticipate:F_,backInOut:M_,circInOut:$_};function w8(t){return t in lj}class h2 extends rj{constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:a}=this.options;this.resolver=new tj(a,(i,l)=>this.onKeyframesResolved(i,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:a,type:i,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof a=="string"&&vp()&&w8(a)&&(a=lj[a]),x8(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:g,...v}=this.options,b=b8(e,v);e=b.keyframes,e.length===1&&(e[1]=e[0]),n=b.duration,s=b.times,a=b.ease,i="keyframes"}const d=g8(l.owner.current,c,e,{...this.options,duration:n,times:s,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(Fb(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;l.set(Cm(e,this.options,r)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:s,type:i,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return vi(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return vi(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=yi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return vs;const{animation:n}=r;Fb(n,e)}return vs}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:a,ease:i,times:l}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...m}=this.options,g=new jx({...m,keyframes:n,duration:s,type:a,ease:i,times:l,isGenerator:!0}),v=yi(this.time);u.setWithVelocity(g.sample(v-Sp).value,g.sample(v).value,Sp)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:a,damping:i,type:l}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=r.owner.getProps();return y8()&&n&&m8.has(n)&&!c&&!u&&!s&&a!=="mirror"&&i!==0&&l!=="inertia"}}const S8={type:"spring",stiffness:500,damping:25,restSpeed:10},_8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j8={type:"keyframes",duration:.8},N8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C8=(t,{keyframes:e})=>e.length>2?j8:yl.has(t)?t.startsWith("scale")?_8(e[1]):S8:N8;function k8({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Nx=(t,e,r,n={},s,a)=>i=>{const l=ex(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-yi(c);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};k8(l)||(d={...d,...C8(t,d)}),d.duration&&(d.duration=yi(d.duration)),d.repeatDelay&&(d.repeatDelay=yi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),d.allowFlatten=!l.type&&!l.ease,h&&!a&&e.get()!==void 0){const f=Cm(d.keyframes,l);if(f!==void 0)return wr.update(()=>{d.onUpdate(f),d.onComplete()}),new Z6([])}return!a&&h2.supports(d)?new h2(d):new jx(d)};function A8({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function cj(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var a;let{transition:i=t.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(i=n);const u=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in c){const f=t.getValue(h,(a=t.latestValues[h])!==null&&a!==void 0?a:null),m=c[h];if(m===void 0||d&&A8(d,h))continue;const g={delay:r,...ex(i||{},h)};let v=!1;if(window.MotionHandoffAnimation){const _=L_(t);if(_){const S=window.MotionHandoffAnimation(_,h,wr);S!==null&&(g.startTime=S,v=!0)}}hv(t,h),f.start(Nx(h,f,m,t.shouldReduceMotion&&T_.has(h)?{type:!1}:g,t,v));const b=f.animation;b&&u.push(b)}return l&&Promise.all(u).then(()=>{wr.update(()=>{l&&nO(t,l)})}),u}function Sv(t,e,r={}){var n;const s=Ed(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(a=r.transitionOverride);const i=s?()=>Promise.all(cj(t,s,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=a;return P8(t,e,d+u,h,f,r)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[i,l]:[l,i];return u().then(()=>d())}else return Promise.all([i(),l(r.delay)])}function P8(t,e,r=0,n=0,s=1,a){const i=[],l=(t.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(t.variantChildren).sort(E8).forEach((u,d)=>{u.notify("AnimationStart",e),i.push(Sv(u,e,{...a,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(i)}function E8(t,e){return t.sortNodePosition(e)}function T8(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(a=>Sv(t,a,r));n=Promise.all(s)}else if(typeof e=="string")n=Sv(t,e,r);else{const s=typeof e=="function"?Ed(t,e,r.custom):e;n=Promise.all(cj(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function uj(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const L8=ix.length;function dj(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?dj(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<L8;r++){const n=ix[r],s=t.props[n];(kd(s)||s===!1)&&(e[n]=s)}return e}const D8=[...ax].reverse(),R8=ax.length;function O8(t){return e=>Promise.all(e.map(({animation:r,options:n})=>T8(t,r,n)))}function I8(t){let e=O8(t),r=f2(),n=!0;const s=c=>(u,d)=>{var h;const f=Ed(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:g,...v}=f;u={...u,...v,...g}}return u};function a(c){e=c(t)}function i(c){const{props:u}=t,d=dj(t.parent)||{},h=[],f=new Set;let m={},g=1/0;for(let b=0;b<R8;b++){const _=D8[b],S=r[_],N=u[_]!==void 0?u[_]:d[_],k=kd(N),A=_===c?S.isActive:null;A===!1&&(g=b);let W=N===d[_]&&N!==u[_]&&k;if(W&&n&&t.manuallyAnimateOnMount&&(W=!1),S.protectedKeys={...m},!S.isActive&&A===null||!N&&!S.prevProp||jm(N)||typeof N=="boolean")continue;const I=M8(S.prevProp,N);let F=I||_===c&&S.isActive&&!W&&k||b>g&&k,ee=!1;const ae=Array.isArray(N)?N:[N];let R=ae.reduce(s(_),{});A===!1&&(R={});const{prevResolvedValues:D={}}=S,T={...D,...R},B=$=>{F=!0,f.has($)&&(ee=!0,f.delete($)),S.needsAnimating[$]=!0;const V=t.getValue($);V&&(V.liveStyle=!1)};for(const $ in T){const V=R[$],X=D[$];if(m.hasOwnProperty($))continue;let he=!1;dv(V)&&dv(X)?he=!uj(V,X):he=V!==X,he?V!=null?B($):f.add($):V!==void 0&&f.has($)?B($):S.protectedKeys[$]=!0}S.prevProp=N,S.prevResolvedValues=R,S.isActive&&(m={...m,...R}),n&&t.blockInitialAnimation&&(F=!1),F&&(!(W&&I)||ee)&&h.push(...ae.map($=>({animation:$,options:{type:_}})))}if(f.size){const b={};if(typeof u.initial!="boolean"){const _=Ed(t,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(b.transition=_.transition)}f.forEach(_=>{const S=t.getBaseTarget(_),N=t.getValue(_);N&&(N.liveStyle=!0),b[_]=S??null}),h.push({animation:b})}let v=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),n=!1,v?e(h):Promise.resolve()}function l(c,u){var d;if(r[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),r[c].isActive=u;const h=i(c);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>r,reset:()=>{r=f2(),n=!0}}}function M8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uj(e,t):!1}function Vo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function f2(){return{animate:Vo(!0),whileInView:Vo(),whileHover:Vo(),whileTap:Vo(),whileDrag:Vo(),whileFocus:Vo(),exit:Vo()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class F8 extends No{constructor(e){super(e),e.animationState||(e.animationState=I8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let B8=0;class $8 extends No{constructor(){super(...arguments),this.id=B8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const U8={animation:{Feature:F8},exit:{Feature:$8}};function Ld(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function jh(t){return{point:{x:t.pageX,y:t.pageY}}}const V8=t=>e=>sx(e)&&t(e,jh(e));function dd(t,e,r,n){return Ld(t,e,V8(r),n)}function hj({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function q8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function z8(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const fj=1e-4,W8=1-fj,H8=1+fj,pj=.01,G8=0-pj,Y8=0+pj;function $n(t){return t.max-t.min}function K8(t,e,r){return Math.abs(t-e)<=r}function p2(t,e,r,n=.5){t.origin=n,t.originPoint=Tr(e.min,e.max,t.origin),t.scale=$n(r)/$n(e),t.translate=Tr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=W8&&t.scale<=H8||isNaN(t.scale))&&(t.scale=1),(t.translate>=G8&&t.translate<=Y8||isNaN(t.translate))&&(t.translate=0)}function hd(t,e,r,n){p2(t.x,e.x,r.x,n?n.originX:void 0),p2(t.y,e.y,r.y,n?n.originY:void 0)}function m2(t,e,r){t.min=r.min+e.min,t.max=t.min+$n(e)}function J8(t,e,r){m2(t.x,e.x,r.x),m2(t.y,e.y,r.y)}function g2(t,e,r){t.min=e.min-r.min,t.max=t.min+$n(e)}function fd(t,e,r){g2(t.x,e.x,r.x),g2(t.y,e.y,r.y)}const y2=()=>({translate:0,scale:1,origin:0,originPoint:0}),dc=()=>({x:y2(),y:y2()}),v2=()=>({min:0,max:0}),qr=()=>({x:v2(),y:v2()});function Ds(t){return[t("x"),t("y")]}function ey(t){return t===void 0||t===1}function _v({scale:t,scaleX:e,scaleY:r}){return!ey(t)||!ey(e)||!ey(r)}function Wo(t){return _v(t)||mj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mj(t){return x2(t.x)||x2(t.y)}function x2(t){return t&&t!=="0%"}function _p(t,e,r){const n=t-r,s=e*n;return r+s}function b2(t,e,r,n,s){return s!==void 0&&(t=_p(t,s,n)),_p(t,r,n)+e}function jv(t,e=0,r=1,n,s){t.min=b2(t.min,e,r,n,s),t.max=b2(t.max,e,r,n,s)}function gj(t,{x:e,y:r}){jv(t.x,e.translate,e.scale,e.originPoint),jv(t.y,r.translate,r.scale,r.originPoint)}const w2=.999999999999,S2=1.0000000000001;function Z8(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let a,i;for(let l=0;l<s;l++){a=r[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&fc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,gj(t,i)),n&&Wo(a.latestValues)&&fc(t,a.latestValues))}e.x<S2&&e.x>w2&&(e.x=1),e.y<S2&&e.y>w2&&(e.y=1)}function hc(t,e){t.min=t.min+e,t.max=t.max+e}function _2(t,e,r,n,s=.5){const a=Tr(t.min,t.max,s);jv(t,e,r,a,n)}function fc(t,e){_2(t.x,e.x,e.scaleX,e.scale,e.originX),_2(t.y,e.y,e.scaleY,e.scale,e.originY)}function yj(t,e){return hj(z8(t.getBoundingClientRect(),e))}function X8(t,e,r){const n=yj(t,r),{scroll:s}=e;return s&&(hc(n.x,s.offset.x),hc(n.y,s.offset.y)),n}const vj=({current:t})=>t?t.ownerDocument.defaultView:null,j2=(t,e)=>Math.abs(t-e);function Q8(t,e){const r=j2(t.x,e.x),n=j2(t.y,e.y);return Math.sqrt(r**2+n**2)}class xj{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ry(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Q8(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:g}=h,{timestamp:v}=yn;this.history.push({...g,timestamp:v});const{onStart:b,onMove:_}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ty(f,this.transformPagePoint),wr.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=ry(h.type==="pointercancel"?this.lastMoveEventInfo:ty(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,b),g&&g(h,b)},!sx(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const i=jh(e),l=ty(i,this.transformPagePoint),{point:c}=l,{timestamp:u}=yn;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(e,ry(l,this.history)),this.removeListeners=_h(dd(this.contextWindow,"pointermove",this.handlePointerMove),dd(this.contextWindow,"pointerup",this.handlePointerUp),dd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),po(this.updatePoint)}}function ty(t,e){return e?{point:e(t.point)}:t}function N2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ry({point:t},e){return{point:t,delta:N2(t,bj(e)),offset:N2(t,eI(e)),velocity:tI(e,.1)}}function eI(t){return t[0]}function bj(t){return t[t.length-1]}function tI(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=bj(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>yi(e)));)r--;if(!n)return{x:0,y:0};const a=vi(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function rI(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Tr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Tr(r,t,n.max):Math.min(t,r)),t}function C2(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function nI(t,{top:e,left:r,bottom:n,right:s}){return{x:C2(t.x,r,s),y:C2(t.y,e,n)}}function k2(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function sI(t,e){return{x:k2(t.x,e.x),y:k2(t.y,e.y)}}function aI(t,e){let r=.5;const n=$n(t),s=$n(e);return s>n?r=zc(e.min,e.max-n,t.min):n>s&&(r=zc(t.min,t.max-s,e.min)),Si(0,1,r)}function iI(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Nv=.35;function oI(t=Nv){return t===!1?t=0:t===!0&&(t=Nv),{x:A2(t,"left","right"),y:A2(t,"top","bottom")}}function A2(t,e,r){return{min:P2(t,e),max:P2(t,r)}}function P2(t,e){return typeof t=="number"?t:t[e]||0}const lI=new WeakMap;class cI{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qr(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jh(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nR(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ds(b=>{let _=this.getAxisMotionValue(b).get()||0;if(Ua.test(_)){const{projection:S}=this.visualElement;if(S&&S.layout){const N=S.layout.layoutBox[b];N&&(_=$n(N)*(parseFloat(_)/100))}}this.originPoint[b]=_}),g&&wr.postRender(()=>g(d,h)),hv(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},i=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(m&&this.currentDirection===null){this.currentDirection=uI(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),v&&v(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Ds(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new xj(e,{onSessionStart:s,onStart:a,onMove:i,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:vj(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&wr.postRender(()=>a(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!$f(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=rI(i,this.constraints[e],this.elastic[e])),a.set(i)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;r&&cc(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=nI(s.layoutBox,r):this.constraints=!1,this.elastic=oI(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ds(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=iI(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!cc(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=X8(n,s.root,this.visualElement.getTransformPagePoint());let i=sI(s.layout.layoutBox,a);if(r){const l=r(q8(i));this.hasMutatedConstraints=!!l,l&&(i=hj(l))}return i}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ds(d=>{if(!$f(d,r,this.currentDirection))return;let h=c&&c[d]||{};i&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,g={type:"inertia",velocity:n?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return hv(this.visualElement,e),n.start(Nx(e,n,0,r,this.visualElement,!1))}stopAnimation(){Ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ds(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ds(r=>{const{drag:n}=this.getProps();if(!$f(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:l}=s.layout.layoutBox[r];a.set(e[r]-Tr(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!cc(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ds(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();s[i]=aI({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ds(i=>{if(!$f(i,e,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(Tr(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;lI.set(this.visualElement,this);const e=this.visualElement.current,r=dd(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();cc(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wr.read(n);const i=Ld(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ds(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),r(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Nv,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function $f(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function uI(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class dI extends No{constructor(e){super(e),this.removeGroupControls=vs,this.removeListeners=vs,this.controls=new cI(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vs}unmount(){this.removeGroupControls(),this.removeListeners()}}const E2=t=>(e,r)=>{t&&wr.postRender(()=>t(e,r))};class hI extends No{constructor(){super(...arguments),this.removePointerDownListener=vs}onPointerDown(e){this.session=new xj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:E2(e),onStart:E2(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&wr.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=dd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function T2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(vt.test(t))t=parseFloat(t);else return t;const r=T2(t,e.target.x),n=T2(t,e.target.y);return`${r}% ${n}%`}},fI={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=mo.parse(t);if(s.length>5)return n;const a=mo.createTransformer(t),i=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;s[0+i]/=l,s[1+i]/=c;const u=Tr(l,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};class pI extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=e;TR(mI),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,i=n.projection;return i&&(i.isPresent=a,s||e.layoutDependency!==r||r===void 0||e.isPresent!==a?i.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?i.promote():i.relegate()||wr.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wj(t){const[e,r]=s_(),n=w.useContext(W0);return o.jsx(pI,{...t,layoutGroup:n,switchLayoutGroup:w.useContext(v_),isPresent:e,safeToRemove:r})}const mI={borderRadius:{...qu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qu,borderTopRightRadius:qu,borderBottomLeftRadius:qu,borderBottomRightRadius:qu,boxShadow:fI};function gI(t,e,r){const n=An(t)?t:Cd(t);return n.start(Nx("",n,e,r)),n.animation}function yI(t){return t instanceof SVGElement&&t.tagName!=="svg"}const vI=(t,e)=>t.depth-e.depth;class xI{constructor(){this.children=[],this.isDirty=!1}add(e){J0(this.children,e),this.isDirty=!0}remove(e){Z0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vI),this.isDirty=!1,this.children.forEach(e)}}function bI(t,e){const r=$a.now(),n=({timestamp:s})=>{const a=s-r;a>=e&&(po(n),t(a-e))};return wr.read(n,!0),()=>po(n)}const Sj=["TopLeft","TopRight","BottomLeft","BottomRight"],wI=Sj.length,L2=t=>typeof t=="string"?parseFloat(t):t,D2=t=>typeof t=="number"||vt.test(t);function SI(t,e,r,n,s,a){s?(t.opacity=Tr(0,r.opacity!==void 0?r.opacity:1,_I(n)),t.opacityExit=Tr(e.opacity!==void 0?e.opacity:1,0,jI(n))):a&&(t.opacity=Tr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let i=0;i<wI;i++){const l=`border${Sj[i]}Radius`;let c=R2(e,l),u=R2(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||D2(c)===D2(u)?(t[l]=Math.max(Tr(L2(c),L2(u),n),0),(Ua.test(u)||Ua.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=Tr(e.rotate||0,r.rotate||0,n))}function R2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _I=_j(0,.5,B_),jI=_j(.5,.95,vs);function _j(t,e,r){return n=>n<t?0:n>e?1:r(zc(t,e,n))}function O2(t,e){t.min=e.min,t.max=e.max}function Ts(t,e){O2(t.x,e.x),O2(t.y,e.y)}function I2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function M2(t,e,r,n,s){return t-=e,t=_p(t,1/r,n),s!==void 0&&(t=_p(t,1/s,n)),t}function NI(t,e=0,r=1,n=.5,s,a=t,i=t){if(Ua.test(e)&&(e=parseFloat(e),e=Tr(i.min,i.max,e/100)-i.min),typeof e!="number")return;let l=Tr(a.min,a.max,n);t===a&&(l-=e),t.min=M2(t.min,e,r,l,s),t.max=M2(t.max,e,r,l,s)}function F2(t,e,[r,n,s],a,i){NI(t,e[r],e[n],e[s],e.scale,a,i)}const CI=["x","scaleX","originX"],kI=["y","scaleY","originY"];function B2(t,e,r,n){F2(t.x,e,CI,r?r.x:void 0,n?n.x:void 0),F2(t.y,e,kI,r?r.y:void 0,n?n.y:void 0)}function $2(t){return t.translate===0&&t.scale===1}function jj(t){return $2(t.x)&&$2(t.y)}function U2(t,e){return t.min===e.min&&t.max===e.max}function AI(t,e){return U2(t.x,e.x)&&U2(t.y,e.y)}function V2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Nj(t,e){return V2(t.x,e.x)&&V2(t.y,e.y)}function q2(t){return $n(t.x)/$n(t.y)}function z2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PI{constructor(){this.members=[]}add(e){J0(this.members,e),e.scheduleRender()}remove(e){if(Z0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function EI(t,e,r){let n="";const s=t.x.translate/e.x,a=t.y.translate/e.y,i=(r==null?void 0:r.z)||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:g}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const ny=["","X","Y","Z"],TI={visibility:"hidden"},W2=1e3;let LI=0;function sy(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Cj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=L_(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",wr,!(s||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Cj(n)}function kj({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},l=e==null?void 0:e()){this.id=LI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(OI),this.nodes.forEach($I),this.nodes.forEach(UI),this.nodes.forEach(II)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new xI)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Q0),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yI(i),this.instance=i;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=bI(f,250),tp.hasAnimatedSinceResize&&(tp.hasAnimatedSinceResize=!1,this.nodes.forEach(G2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||HI,{onLayoutAnimationStart:b,onLayoutAnimationComplete:_}=d.getProps(),S=!this.targetLayout||!Nj(this.targetLayout,g),N=!f&&m;if(this.options.layoutRoot||this.resumeFrom||N||f&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,N);const k={...ex(v,"layout"),onPlay:b,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else f||G2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VI),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H2);return}this.isUpdating||this.nodes.forEach(FI),this.isUpdating=!1,this.nodes.forEach(BI),this.nodes.forEach(DI),this.nodes.forEach(RI),this.clearAllSnapshots();const l=$a.now();yn.delta=Si(0,1e3/60,l-yn.timestamp),yn.timestamp=l,yn.isProcessing=!0,Yg.update.process(yn),Yg.preRender.process(yn),Yg.render.process(yn),yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MI),this.sharedNodes.forEach(qI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$n(this.snapshot.measuredBox.x)&&!$n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!jj(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&(l||Wo(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),GI(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:l}=this.options;if(!l)return qr();const c=l.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(YI))){const{scroll:d}=this.root;d&&(hc(c.x,d.offset.x),hc(c.y,d.offset.y))}return c}removeElementScroll(i){var l;const c=qr();if(Ts(c,i),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ts(c,i),hc(c.x,h.offset.x),hc(c.y,h.offset.y))}return c}applyTransform(i,l=!1){const c=qr();Ts(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fc(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wo(d.latestValues)&&fc(c,d.latestValues)}return Wo(this.latestValues)&&fc(c,this.latestValues),c}removeTransform(i){const l=qr();Ts(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Wo(u.latestValues))continue;_v(u.latestValues)&&u.updateSnapshot();const d=qr(),h=u.measurePageBox();Ts(d,h),B2(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Wo(this.latestValues)&&B2(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=yn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qr(),this.relativeTargetOrigin=qr(),fd(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qr(),this.targetWithTransforms=qr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),J8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ts(this.target,this.layout.layoutBox),gj(this.target,this.targetDelta)):Ts(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qr(),this.relativeTargetOrigin=qr(),fd(this.relativeTargetOrigin,this.target,m.target),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_v(this.parent.latestValues)||mj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ts(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Z8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=qr());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(I2(this.prevProjectionDelta.x,this.projectionDelta.x),I2(this.prevProjectionDelta.y,this.projectionDelta.y)),hd(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!z2(this.projectionDelta.x,this.prevProjectionDelta.x)||!z2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dc(),this.projectionDelta=dc(),this.projectionDeltaWithTransform=dc()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=dc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=qr(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=m!==g,b=this.getStack(),_=!b||b.members.length<=1,S=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(WI));this.animationProgress=0;let N;this.mixTargetDelta=k=>{const A=k/1e3;Y2(h.x,i.x,A),Y2(h.y,i.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fd(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zI(this.relativeTarget,this.relativeTargetOrigin,f,A),N&&AI(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=qr()),Ts(N,this.relativeTarget)),v&&(this.animationValues=d,SI(d,u,this.latestValues,A,S,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wr.update(()=>{tp.hasAnimatedSinceResize=!0,this.currentAnimation=gI(0,W2,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(W2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&Aj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qr();const h=$n(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+h;const f=$n(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+f}Ts(l,c),fc(l,d),hd(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new PI),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&sy("z",i,u,this.animationValues);for(let d=0;d<ny.length;d++)sy(`rotate${ny[d]}`,i,u,this.animationValues),sy(`skew${ny[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}getProjectionStyles(i){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return TI;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ep(i==null?void 0:i.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=ep(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Wo(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=EI(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Ad){if(f[v]===void 0)continue;const{correct:b,applyTo:_,isCSSVariable:S}=Ad[v],N=u.transform==="none"?f[v]:b(f[v],h);if(_){const k=_.length;for(let A=0;A<k;A++)u[_[A]]=N}else S?this.options.visualElement.renderState.vars[v]=N:u[v]=N}return this.options.layoutId&&(u.pointerEvents=h===this?ep(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(H2),this.root.sharedNodes.clear()}}}function DI(t){t.updateLayout()}function RI(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,i=r.source!==t.layout.source;a==="size"?Ds(h=>{const f=i?r.measuredBox[h]:r.layoutBox[h],m=$n(f);f.min=n[h].min,f.max=f.min+m}):Aj(a,r.layoutBox,n)&&Ds(h=>{const f=i?r.measuredBox[h]:r.layoutBox[h],m=$n(n[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=dc();hd(l,n,r.layoutBox);const c=dc();i?hd(c,t.applyTransform(s,!0),r.measuredBox):hd(c,n,r.layoutBox);const u=!jj(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const g=qr();fd(g,r.layoutBox,f.layoutBox);const v=qr();fd(v,n,m.layoutBox),Nj(g,v)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function OI(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function II(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MI(t){t.clearSnapshot()}function H2(t){t.clearMeasurements()}function FI(t){t.isLayoutDirty=!1}function BI(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function G2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $I(t){t.resolveTargetDelta()}function UI(t){t.calcProjection()}function VI(t){t.resetSkewAndRotation()}function qI(t){t.removeLeadSnapshot()}function Y2(t,e,r){t.translate=Tr(e.translate,0,r),t.scale=Tr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function K2(t,e,r,n){t.min=Tr(e.min,r.min,n),t.max=Tr(e.max,r.max,n)}function zI(t,e,r,n){K2(t.x,e.x,r.x,n),K2(t.y,e.y,r.y,n)}function WI(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HI={duration:.45,ease:[.4,0,.1,1]},J2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Z2=J2("applewebkit/")&&!J2("chrome/")?Math.round:vs;function X2(t){t.min=Z2(t.min),t.max=Z2(t.max)}function GI(t){X2(t.x),X2(t.y)}function Aj(t,e,r){return t==="position"||t==="preserve-aspect"&&!K8(q2(e),q2(r),.2)}function YI(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const KI=kj({attachResizeListener:(t,e)=>Ld(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ay={current:void 0},Pj=kj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ay.current){const t=new KI({});t.mount(window),t.setOptions({layoutScroll:!0}),ay.current=t}return ay.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JI={pan:{Feature:hI},drag:{Feature:dI,ProjectionNode:Pj,MeasureLayout:wj}};function Q2(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&wr.postRender(()=>a(e,jh(e)))}class ZI extends No{mount(){const{current:e}=this.node;e&&(this.unmount=aR(e,(r,n)=>(Q2(this.node,n,"Start"),s=>Q2(this.node,s,"End"))))}unmount(){}}class XI extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_h(Ld(this.node.current,"focus",()=>this.onFocus()),Ld(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ew(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&wr.postRender(()=>a(e,jh(e)))}class QI extends No{mount(){const{current:e}=this.node;e&&(this.unmount=cR(e,(r,n)=>(ew(this.node,n,"Start"),(s,{success:a})=>ew(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Cv=new WeakMap,iy=new WeakMap,eM=t=>{const e=Cv.get(t.target);e&&e(t)},tM=t=>{t.forEach(eM)};function rM({root:t,...e}){const r=t||document;iy.has(r)||iy.set(r,{});const n=iy.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(tM,{root:t,...e})),n[s]}function nM(t,e,r){const n=rM(e);return Cv.set(t,r),n.observe(t),()=>{Cv.delete(t),n.unobserve(t)}}const sM={some:0,all:1};class aM extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=e,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:sM[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return nM(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(iM(e,r))&&this.startObserver()}unmount(){}}function iM({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const oM={inView:{Feature:aM},tap:{Feature:QI},focus:{Feature:XI},hover:{Feature:ZI}},lM={layout:{ProjectionNode:Pj,MeasureLayout:wj}},kv={current:null},Ej={current:!1};function cM(){if(Ej.current=!0,!!G0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kv.current=t.matches;t.addListener(e),e()}else kv.current=!1}const uM=[...ej,Cn,mo],dM=t=>uM.find(Q_(t)),hM=new WeakMap;function fM(t,e,r){for(const n in e){const s=e[n],a=r[n];if(An(s))t.addValue(n,s);else if(An(a))t.addValue(n,Cd(s,{owner:t}));else if(a!==s)if(t.hasValue(n)){const i=t.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(n);t.addValue(n,Cd(i!==void 0?i:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const tw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pM{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=$a.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,wr.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=i;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Nm(r),this.isVariantNode=g_(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in f){const g=f[m];c[m]!==void 0&&An(g)&&g.set(c[m],!1)}}mount(e){this.current=e,hM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Ej.current||cM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),po(this.notifyUpdate),po(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=yl.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),a(),i&&i(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wc){const r=Wc[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<tw.length;n++){const s=tw[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=e[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=fM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Cd(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Z_(s)||U_(s))?s=parseFloat(s):!dM(s)&&mo.test(r)&&(s=Y_(e,r)),this.setBaseTarget(e,An(s)?s.get():s)),An(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=gx(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);i&&(s=i[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!An(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Q0),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class Tj extends pM{constructor(){super(...arguments),this.KeyframeResolver=tj}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;An(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function mM(t){return window.getComputedStyle(t)}class gM extends Tj{constructor(){super(...arguments),this.type="html",this.renderInstance=k_}readValueFromInstance(e,r){if(yl.has(r))return AO(e,r);{const n=mM(e),s=(lx(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return yj(e,r)}build(e,r,n){dx(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return yx(e,r,n)}}class yM extends Tj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qr,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&C_(this.current,this.renderState)}}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(yl.has(r)){const n=G_(r);return n&&n.default||0}return r=A_.has(r)?r:ox(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return E_(e,r,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&wr.postRender(this.updateDimensions)}build(e,r,n){px(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){P_(e,r,n,s)}mount(e){this.isSVGTag=mx(e.tagName),super.mount(e)}}const vM=(t,e)=>fx(t)?new yM(e):new gM(e,{allowProjection:t!==w.Fragment}),xM=tO({...U8,...oM,...JI,...lM},vM),ns=yR(xM),bM=({message:t="Loading application...",timeout:e=15e3})=>{const[r,n]=w.useState(0),[s,a]=w.useState(!1),[i,l]=w.useState("");return w.useEffect(()=>{const c=setInterval(()=>{n(u=>{const d=Math.max(1,10-Math.floor(u/10));return Math.min(99,u+d)})},300);return()=>clearInterval(c)},[]),w.useEffect(()=>{const c=setInterval(()=>{l(u=>u.length>=3?"":u+".")},500);return()=>clearInterval(c)},[]),w.useEffect(()=>{const c=setTimeout(()=>{a(!0),n(100)},e);return()=>clearTimeout(c)},[e]),o.jsx(ns.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 flex flex-col items-center justify-center bg-background z-50",children:o.jsxs("div",{className:"w-full max-w-md px-4 flex flex-col items-center",children:[o.jsx(pi,{className:"h-12 w-12 text-primary animate-spin mb-4"}),o.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mb-4 overflow-hidden",children:o.jsx(ns.div,{className:"bg-primary h-2.5 rounded-full",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.3}})}),o.jsxs("p",{className:"text-center text-muted-foreground mb-2",children:[t,i]}),s&&o.jsxs("div",{className:"mt-4 text-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"This is taking longer than expected. You can:"}),o.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:[o.jsx("li",{children:"Check your internet connection"}),o.jsx("li",{children:"Refresh the page"}),o.jsx("li",{children:"Try again later"})]})]})]})})},Dd=vh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 sm:h-9",lg:"h-10 rounded-md px-6 sm:h-11 sm:px-8",icon:"h-9 w-9 sm:h-10 sm:w-10"},hasIcon:{true:"",false:""}},compoundVariants:[{hasIcon:!0,size:"default",className:"gap-2"},{hasIcon:!0,size:"sm",className:"gap-1.5"},{hasIcon:!0,size:"lg",className:"gap-2.5"}],defaultVariants:{variant:"default",size:"default",hasIcon:!1}}),me=w.forwardRef(({className:t,variant:e,size:r,hasIcon:n,asChild:s=!1,...a},i)=>{const l=w.useRef(null),[c,u]=w.useState(!1);w.useEffect(()=>{if(l.current){const h=l.current.querySelector("svg")!==null;u(h)}},[a.children]);const d=s?mh:"button";return o.jsx(d,{className:Ve(Dd({variant:e,size:r,hasIcon:n!==void 0?n:c,className:t})),ref:h=>{typeof i=="function"?i(h):i&&(i.current=h),l.current=h},...a})});me.displayName="Button";const Wt=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Wt.displayName="Card";const Jt=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("flex flex-col space-y-1.5 p-6",t),...e}));Jt.displayName="CardHeader";const er=w.forwardRef(({className:t,...e},r)=>o.jsx("h3",{ref:r,className:Ve("text-2xl font-semibold leading-none tracking-tight",t),...e}));er.displayName="CardTitle";const Fr=w.forwardRef(({className:t,...e},r)=>o.jsx("p",{ref:r,className:Ve("text-sm text-muted-foreground",t),...e}));Fr.displayName="CardDescription";const zt=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("p-6 pt-0",t),...e}));zt.displayName="CardContent";const _i=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("flex items-center p-6 pt-0",t),...e}));_i.displayName="CardFooter";const Lj={async checkConnection(){try{const{data:t,error:e}=await We.auth.getSession();if(e)return console.error("Session error:",e),{success:!1,message:`Session error: ${e.message}`};if(!t.session)return console.warn("No active session found"),{success:!1,message:"No active session found. Please log in again."};const r=t.session.expires_at,n=Math.floor(Date.now()/1e3);if(r&&r<n){console.warn("Session expired, attempting to refresh");const{data:a,error:i}=await We.auth.refreshSession();if(i)return console.error("Failed to refresh session:",i),{success:!1,message:`Session expired and refresh failed: ${i.message}`};if(!a.session)return console.error("Session refresh did not return a new session"),{success:!1,message:"Session expired and could not be refreshed. Please log in again."};console.log("Session refreshed successfully")}const{error:s}=await We.from("profiles").select("id").limit(1);return s?(console.error("Test query error:",s),s.code==="PGRST301"||s.message.includes("permission denied")?(console.warn("Permission error detected, might be an RLS issue"),{success:!1,message:"Database permission error. This might be due to Row Level Security settings."}):{success:!1,message:`Database connection error: ${s.message}`}):{success:!0,message:"Supabase connection is valid"}}catch(t){return console.error("Unexpected error checking Supabase connection:",t),{success:!1,message:`Unexpected error: ${t instanceof Error?t.message:String(t)}`}}},async fixConnectionIssues(){try{const t=await this.checkConnection();if(t.success)return t;const{data:e,error:r}=await We.auth.refreshSession();if(r){console.error("Failed to refresh session:",r);const{data:a,error:i}=await We.auth.getUser();if(i||!a.user)return console.error("Failed to get user:",i),{success:!1,message:"Authentication issues detected. Please log out and log in again."}}const{data:n}=await We.auth.getSession();return n.session?await this.checkConnection():{success:!1,message:"Could not establish a valid session. Please log out and log in again."}}catch(t){return console.error("Error fixing Supabase connection:",t),{success:!1,message:`Error fixing connection: ${t instanceof Error?t.message:String(t)}`}}},getErrorMessage(t){if(!t)return"Unknown error";const e=t.message||t.error_description||String(t);return e.includes("JWT expired")?"Your session has expired. Please log in again.":e.includes("permission denied")?"You do not have permission to perform this action.":e.includes("does not exist")?"The requested resource does not exist.":e.includes("duplicate key")?"This record already exists.":e.includes("network error")?"Network error. Please check your internet connection.":e}};window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason),t.reason&&(t.reason.error_description||t.reason.message&&t.reason.message.includes("supabase"))&&console.error("Supabase error detected:",Lj.getErrorMessage(t.reason))});class wM extends w.Component{constructor(r){super(r);Af(this,"handleTryAgain",()=>{this.setState({hasError:!1,error:null,errorInfo:null,fixResult:null})});Af(this,"handleFixIssues",async()=>{this.setState({isFixing:!0});try{const r=await Lj.fixConnectionIssues();this.setState({isFixing:!1,fixResult:r.message}),r.success&&setTimeout(()=>{this.handleTryAgain()},1500)}catch(r){console.error("Error fixing issues:",r),this.setState({isFixing:!1,fixResult:`Failed to fix issues: ${r instanceof Error?r.message:String(r)}`})}});this.state={hasError:!1,error:null,errorInfo:null,isFixing:!1,fixResult:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null,isFixing:!1,fixResult:null}}componentDidCatch(r,n){console.error("Error caught by ErrorBoundary:",r,n),this.setState({error:r,errorInfo:n}),(r.message.includes("supabase")||r.message.includes("auth")||r.message.includes("database"))&&console.log("Supabase-related error detected")}render(){const{hasError:r,error:n,errorInfo:s,isFixing:a,fixResult:i}=this.state,{children:l,fallback:c}=this.props;return r?c||o.jsx("div",{className:"flex items-center justify-center min-h-[300px] p-4",children:o.jsxs(Wt,{className:"w-full max-w-md",children:[o.jsx(Jt,{className:"bg-red-50 dark:bg-red-900/20",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fS,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),o.jsx(er,{className:"text-red-600 dark:text-red-400",children:"Something went wrong"})]})}),o.jsx(zt,{className:"pt-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm font-medium",children:"Error details:"}),o.jsx("div",{className:"bg-muted p-2 rounded-md overflow-auto max-h-[200px]",children:o.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:n==null?void 0:n.toString()})}),s&&o.jsxs("div",{className:"mt-2",children:[o.jsx("p",{className:"text-sm font-medium",children:"Component stack:"}),o.jsx("div",{className:"bg-muted p-2 rounded-md overflow-auto max-h-[200px]",children:o.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:s.componentStack})})]}),i&&o.jsx("div",{className:`mt-2 p-2 rounded-md ${i.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-yellow-50 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400"}`,children:o.jsx("p",{className:"text-xs",children:i})})]})}),o.jsxs(_i,{className:"flex justify-between gap-2",children:[o.jsx(me,{variant:"outline",onClick:this.handleTryAgain,disabled:a,children:"Try again"}),o.jsx(me,{onClick:this.handleFixIssues,disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx(ua,{className:"mr-2 h-4 w-4 animate-spin"}),"Fixing..."]}):"Fix Issues"})]})]})}):l}}class SM extends w.Component{constructor(r){super(r);Af(this,"handleRefresh",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Error caught by SimpleErrorBoundary:",r,n)}render(){const{hasError:r,error:n}=this.state,{children:s}=this.props;return r?o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:o.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[o.jsx("h1",{className:"text-xl font-bold text-center mb-4",children:"Something went wrong"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"We encountered an error while loading the application. This might be due to recent changes or database issues."}),o.jsx("div",{className:"p-3 bg-red-50 text-red-700 rounded-md mb-4 text-sm overflow-auto max-h-[200px]",children:o.jsx("pre",{className:"whitespace-pre-wrap",children:n==null?void 0:n.toString()})}),o.jsx(me,{onClick:this.handleRefresh,className:"w-full",children:"Refresh Page"}),o.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[o.jsx("p",{children:"If the issue persists, please try:"}),o.jsxs("ul",{className:"list-disc pl-5 mt-2",children:[o.jsx("li",{children:"Clearing your browser cache"}),o.jsx("li",{children:"Checking your internet connection"}),o.jsx("li",{children:"Logging out and logging back in"})]})]})]})}):s}}const Av=(t,e)=>e.some(r=>t instanceof r);let rw,nw;function _M(){return rw||(rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return nw||(nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pv=new WeakMap,oy=new WeakMap,km=new WeakMap;function NM(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{r(ol(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return km.set(e,t),e}function CM(t){if(Pv.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});Pv.set(t,e)}let Ev={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Pv.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ol(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dj(t){Ev=t(Ev)}function kM(t){return jM().includes(t)?function(...e){return t.apply(Tv(this),e),ol(this.request)}:function(...e){return ol(t.apply(Tv(this),e))}}function AM(t){return typeof t=="function"?kM(t):(t instanceof IDBTransaction&&CM(t),Av(t,_M())?new Proxy(t,Ev):t)}function ol(t){if(t instanceof IDBRequest)return NM(t);if(oy.has(t))return oy.get(t);const e=AM(t);return e!==t&&(oy.set(t,e),km.set(e,t)),e}const Tv=t=>km.get(t);function Am(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),l=ol(i);return n&&i.addEventListener("upgradeneeded",c=>{n(ol(i.result),c.oldVersion,c.newVersion,ol(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const PM=["get","getKey","getAll","getAllKeys","count"],EM=["put","add","delete","clear"],ly=new Map;function sw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=EM.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||PM.includes(r)))return;const a=async function(i,...l){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return ly.set(e,a),a}Dj(t=>({...t,get:(e,r,n)=>sw(e,r)||t.get(e,r,n),has:(e,r)=>!!sw(e,r)||t.has(e,r)}));const TM=["continue","continuePrimaryKey","advance"],aw={},Lv=new WeakMap,Rj=new WeakMap,LM={get(t,e){if(!TM.includes(e))return t[e];let r=aw[e];return r||(r=aw[e]=function(...n){Lv.set(this,Rj.get(this)[e](...n))}),r}};async function*DM(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,LM);for(Rj.set(r,e),km.set(r,Tv(e));e;)yield r,e=await(Lv.get(r)||e.continue()),Lv.delete(r)}function iw(t,e){return e===Symbol.asyncIterator&&Av(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Av(t,[IDBIndex,IDBObjectStore])}Dj(t=>({...t,get(e,r,n){return iw(e,r)?DM:t.get(e,r,n)},has(e,r){return iw(e,r)||t.has(e,r)}}));const gn=[];for(let t=0;t<256;++t)gn.push((t+256).toString(16).slice(1));function RM(t,e=0){return(gn[t[e+0]]+gn[t[e+1]]+gn[t[e+2]]+gn[t[e+3]]+"-"+gn[t[e+4]]+gn[t[e+5]]+"-"+gn[t[e+6]]+gn[t[e+7]]+"-"+gn[t[e+8]]+gn[t[e+9]]+"-"+gn[t[e+10]]+gn[t[e+11]]+gn[t[e+12]]+gn[t[e+13]]+gn[t[e+14]]+gn[t[e+15]]).toLowerCase()}let cy;const OM=new Uint8Array(16);function IM(){if(!cy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cy=crypto.getRandomValues.bind(crypto)}return cy(OM)}const MM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ow={randomUUID:MM};function vl(t,e,r){var s;if(ow.randomUUID&&!e&&!t)return ow.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??IM();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,RM(n)}const FM="business-sales-db",BM=1,Ci=async()=>Am(FM,BM,{upgrade(t){t.objectStoreNames.contains("users")||t.createObjectStore("users",{keyPath:"id"}).createIndex("by-email","email"),t.objectStoreNames.contains("transactions")||t.createObjectStore("transactions",{keyPath:"id"}).createIndex("by-user-id","user_id"),t.objectStoreNames.contains("purchases")||t.createObjectStore("purchases",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("transportation")||t.createObjectStore("transportation",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("sales")||t.createObjectStore("sales",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("payments")||t.createObjectStore("payments",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("transaction_notes")||t.createObjectStore("transaction_notes",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("attachments")||t.createObjectStore("attachments",{keyPath:"id"}).createIndex("by-transaction-id","transaction_id"),t.objectStoreNames.contains("daily_logs")||t.createObjectStore("daily_logs",{keyPath:"id"}).createIndex("by-user-id","user_id"),t.objectStoreNames.contains("buyers")||t.createObjectStore("buyers",{keyPath:"id"}).createIndex("by-user-id","user_id"),t.objectStoreNames.contains("sellers")||t.createObjectStore("sellers",{keyPath:"id"}).createIndex("by-user-id","user_id"),t.objectStoreNames.contains("sync_status")||t.createObjectStore("sync_status",{keyPath:"table"})}}),Js=async(t,e)=>{console.log(`DB-SERVICE: Adding item to ${t} store:`,e);try{const r=await Ci(),n=r.transaction(t,"readwrite");return await n.objectStore(t).add(e),await n.done,r.close(),console.log(`DB-SERVICE: Successfully added item to ${t} store`),e}catch(r){throw console.error(`DB-SERVICE: Error adding item to ${t} store:`,r),r}},Ls=async(t,e)=>{const r=await Ci(),a=await r.transaction(t,"readonly").objectStore(t).get(e);return r.close(),a||null},$M=async t=>{const e=await Ci(),s=await e.transaction(t,"readonly").objectStore(t).getAll();return e.close(),s},Zs=async(t,e)=>{const r=await Ci(),n=r.transaction(t,"readwrite");return await n.objectStore(t).put(e),await n.done,r.close(),e},Xr=async(t,e)=>{const r=await Ci(),n=r.transaction(t,"readwrite");await n.objectStore(t).delete(e),await n.done,r.close()},br=async(t,e,r)=>{console.log(`DB-SERVICE: Getting items from ${t} store by index ${e} with value ${r}`);try{const n=await Ci(),l=await n.transaction(t,"readonly").objectStore(t).index(e).getAll(r);return n.close(),console.log(`DB-SERVICE: Found ${l.length} items in ${t} store`),l}catch(n){return console.error(`DB-SERVICE: Error getting items from ${t} store by index:`,n),[]}},UM=async t=>{const e=await Ci(),r=e.transaction("sync_status","readwrite");await r.objectStore("sync_status").put({table:t,lastSyncTime:Date.now()}),await r.done,e.close()},VM=async t=>{const e=await Ci(),s=await e.transaction("sync_status","readonly").objectStore("sync_status").get(t);return e.close(),s?s.lastSyncTime:null},Pa=()=>vl(),qM=async t=>{try{console.log("Starting local duplicate transaction cleanup for user:",t);const e=await br("transactions","by-user-id",t);console.log(`Retrieved ${e.length} transactions from local database`);const r=new Map;e.forEach(s=>{var l;const a=s.created_at?new Date(s.created_at).toDateString():"unknown",i=`${s.name}-${a}`;r.has(i)||r.set(i,[]),(l=r.get(i))==null||l.push(s)});let n=0;for(const[s,a]of r.entries())if(a.length>1){console.log(`Found ${a.length} duplicate transactions for key: ${s}`),a.sort((l,c)=>l.id.localeCompare(c.id));const i=a[0];console.log(`Keeping transaction ${i.id}`);for(let l=1;l<a.length;l++){const c=a[l];console.log(`Deleting duplicate transaction ${c.id}`);try{await Xr("transactions",c.id),n++}catch(u){console.error(`Error deleting duplicate transaction ${c.id}:`,u)}}}return console.log(`Local transaction cleanup complete. Removed ${n} duplicates`),n}catch(e){return console.error("Error cleaning up local duplicate transactions:",e),0}},zM=async t=>{try{console.log("Starting local duplicate daily log cleanup for user:",t);const e=await br("daily_logs","by-user-id",t);console.log(`Retrieved ${e.length} daily logs from local database`);const r=new Map;e.forEach(s=>{var l;const a=s.date?new Date(s.date).toDateString():"unknown",i=`${s.recipient_name}-${s.amount}-${a}-${s.direction}-${s.payment_type}`;r.has(i)||r.set(i,[]),(l=r.get(i))==null||l.push(s)});let n=0;for(const[s,a]of r.entries())if(a.length>1){console.log(`Found ${a.length} duplicate daily logs for key: ${s}`),a.sort((l,c)=>l.id.localeCompare(c.id));const i=a[0];console.log(`Keeping daily log ${i.id}`);for(let l=1;l<a.length;l++){const c=a[l];console.log(`Deleting duplicate daily log ${c.id}`);try{await Xr("daily_logs",c.id),n++}catch(u){console.error(`Error deleting duplicate daily log ${c.id}:`,u)}}}return console.log(`Local daily log cleanup complete. Removed ${n} duplicates`),n}catch(e){return console.error("Error cleaning up local duplicate daily logs:",e),0}},Ee={getUser:async t=>{try{return await Ls("users",t)}catch(e){return console.error("Error getting user:",e),null}},getUserByEmail:async t=>{try{const e=await Ci(),a=await e.transaction("users","readonly").objectStore("users").index("by-email").getAll(t);return e.close(),a.length>0?a[0]:null}catch(e){return console.error("Error getting user by email:",e),null}},addUser:async t=>{try{return await Js("users",t)}catch(e){throw console.error("Error adding user:",e),e}},updateUser:async t=>{try{return await Zs("users",t)}catch(e){throw console.error("Error updating user:",e),e}},getTransaction:async t=>{try{return await Ls("transactions",t)}catch(e){return console.error("Error getting transaction:",e),null}},getAllTransactions:async t=>{try{return t?await br("transactions","by-user-id",t):await $M("transactions")}catch(e){return console.error("Error getting all transactions:",e),[]}},addTransaction:async t=>{try{const e={...t,id:Pa()};return await Js("transactions",e)}catch(e){throw console.error("Error adding transaction:",e),e}},updateTransaction:async t=>{try{return await Zs("transactions",t)}catch(e){throw console.error("Error updating transaction:",e),e}},deleteTransaction:async t=>{try{const e=await br("purchases","by-transaction-id",t),r=await br("transportation","by-transaction-id",t),n=await br("sales","by-transaction-id",t),s=await br("payments","by-transaction-id",t),a=await br("transaction_notes","by-transaction-id",t),i=await br("attachments","by-transaction-id",t);for(const l of e)await Xr("purchases",l.id);for(const l of r)await Xr("transportation",l.id);for(const l of n)await Xr("sales",l.id);for(const l of s)await Xr("payments",l.id);for(const l of a)await Xr("transaction_notes",l.id);for(const l of i)await Xr("attachments",l.id);await Xr("transactions",t)}catch(e){throw console.error("Error deleting transaction:",e),e}},getCompleteTransaction:async t=>{try{const e=await Ls("transactions",t);if(!e)return null;const r=await br("purchases","by-transaction-id",t),n=await br("transportation","by-transaction-id",t),s=await br("sales","by-transaction-id",t),a=await br("payments","by-transaction-id",t),i=await br("transaction_notes","by-transaction-id",t),l=await br("attachments","by-transaction-id",t);return{transaction:e,purchases:r,transportation:n.length>0?n[0]:void 0,sales:s,payments:a,notes:i,attachments:l}}catch(e){return console.error("Error getting complete transaction:",e),null}},getPurchase:async t=>{try{return await Ls("purchases",t)}catch(e){return console.error("Error getting purchase:",e),null}},getPurchasesByTransaction:async t=>{try{return await br("purchases","by-transaction-id",t)}catch(e){return console.error("Error getting purchases by transaction:",e),[]}},addPurchase:async t=>{try{const e={...t,id:Pa()};return await Js("purchases",e)}catch(e){throw console.error("Error adding purchase:",e),e}},updatePurchase:async t=>{try{return await Zs("purchases",t)}catch(e){throw console.error("Error updating purchase:",e),e}},deletePurchase:async t=>{try{await Xr("purchases",t)}catch(e){throw console.error("Error deleting purchase:",e),e}},getTransportation:async t=>{try{return await Ls("transportation",t)}catch(e){return console.error("Error getting transportation:",e),null}},getTransportationByTransaction:async t=>{try{const e=await br("transportation","by-transaction-id",t);return e.length>0?e[0]:null}catch(e){return console.error("Error getting transportation by transaction:",e),null}},addTransportation:async t=>{try{const e={...t,id:Pa()};return await Js("transportation",e)}catch(e){throw console.error("Error adding transportation:",e),e}},updateTransportation:async t=>{try{return await Zs("transportation",t)}catch(e){throw console.error("Error updating transportation:",e),e}},deleteTransportation:async t=>{try{await Xr("transportation",t)}catch(e){throw console.error("Error deleting transportation:",e),e}},getSale:async t=>{try{return await Ls("sales",t)}catch(e){return console.error("Error getting sale:",e),null}},getSalesByTransaction:async t=>{try{return await br("sales","by-transaction-id",t)}catch(e){return console.error("Error getting sales by transaction:",e),[]}},addSale:async t=>{try{const e={...t,id:Pa()};return await Js("sales",e)}catch(e){throw console.error("Error adding sale:",e),e}},updateSale:async t=>{try{return await Zs("sales",t)}catch(e){throw console.error("Error updating sale:",e),e}},deleteSale:async t=>{try{await Xr("sales",t)}catch(e){throw console.error("Error deleting sale:",e),e}},getPayment:async t=>{try{return await Ls("payments",t)}catch(e){return console.error("Error getting payment:",e),null}},getPaymentsByTransaction:async t=>{try{return await br("payments","by-transaction-id",t)}catch(e){return console.error("Error getting payments by transaction:",e),[]}},addPayment:async t=>{try{const e={...t,id:Pa()};return await Js("payments",e)}catch(e){throw console.error("Error adding payment:",e),e}},updatePayment:async t=>{try{return await Zs("payments",t)}catch(e){throw console.error("Error updating payment:",e),e}},deletePayment:async t=>{try{await Xr("payments",t)}catch(e){throw console.error("Error deleting payment:",e),e}},getTransactionNote:async t=>{try{return await Ls("transaction_notes",t)}catch(e){return console.error("Error getting transaction note:",e),null}},getNotesByTransaction:async t=>{try{return await br("transaction_notes","by-transaction-id",t)}catch(e){return console.error("Error getting notes by transaction:",e),[]}},addTransactionNote:async t=>{try{const e={...t,id:Pa(),created_at:new Date().toISOString()};return await Js("transaction_notes",e)}catch(e){throw console.error("Error adding transaction note:",e),e}},updateTransactionNote:async t=>{try{return await Zs("transaction_notes",t)}catch(e){throw console.error("Error updating transaction note:",e),e}},deleteTransactionNote:async t=>{try{await Xr("transaction_notes",t)}catch(e){throw console.error("Error deleting transaction note:",e),e}},getAttachment:async t=>{try{return await Ls("attachments",t)}catch(e){return console.error("Error getting attachment:",e),null}},getAttachmentsByTransaction:async t=>{try{return await br("attachments","by-transaction-id",t)}catch(e){return console.error("Error getting attachments by transaction:",e),[]}},addAttachment:async t=>{try{const e={...t,id:Pa(),created_at:new Date().toISOString()};return await Js("attachments",e)}catch(e){throw console.error("Error adding attachment:",e),e}},updateAttachment:async t=>{try{return await Zs("attachments",t)}catch(e){throw console.error("Error updating attachment:",e),e}},deleteAttachment:async t=>{try{await Xr("attachments",t)}catch(e){throw console.error("Error deleting attachment:",e),e}},getDailyLog:async t=>{try{return await Ls("daily_logs",t)}catch(e){return console.error("Error getting daily log:",e),null}},getDailyLogsByUser:async t=>{try{return await br("daily_logs","by-user-id",t)}catch(e){return console.error("Error getting daily logs by user:",e),[]}},addDailyLog:async t=>{try{const e={...t,id:Pa(),created_at:new Date().toISOString()};return await Js("daily_logs",e)}catch(e){throw console.error("Error adding daily log:",e),e}},updateDailyLog:async t=>{try{return await Zs("daily_logs",t)}catch(e){throw console.error("Error updating daily log:",e),e}},deleteDailyLog:async t=>{try{await Xr("daily_logs",t)}catch(e){throw console.error("Error deleting daily log:",e),e}},getBuyer:async t=>{try{return await Ls("buyers",t)}catch(e){return console.error("Error getting buyer:",e),null}},getBuyersByUser:async t=>{try{console.log("DB-SERVICE: Getting buyers for user:",t);const e=await br("buyers","by-user-id",t);return console.log("DB-SERVICE: Found buyers:",e.length),e}catch(e){return console.error("DB-SERVICE: Error getting buyers by user:",e),[]}},addBuyer:async t=>{try{console.log("DB-SERVICE: Adding buyer:",t);const e={...t,id:Pa()};console.log("DB-SERVICE: Generated buyer with ID:",e.id);const r=await Js("buyers",e);return console.log("DB-SERVICE: Successfully added buyer:",r),r}catch(e){throw console.error("DB-SERVICE: Error adding buyer:",e),e}},updateBuyer:async t=>{try{return await Zs("buyers",t)}catch(e){throw console.error("Error updating buyer:",e),e}},deleteBuyer:async t=>{try{await Xr("buyers",t)}catch(e){throw console.error("Error deleting buyer:",e),e}},getSeller:async t=>{try{return await Ls("sellers",t)}catch(e){return console.error("Error getting seller:",e),null}},getSellersByUser:async t=>{try{return await br("sellers","by-user-id",t)}catch(e){return console.error("Error getting sellers by user:",e),[]}},addSeller:async t=>{try{const e={...t,id:Pa()};return await Js("sellers",e)}catch(e){throw console.error("Error adding seller:",e),e}},updateSeller:async t=>{try{return await Zs("sellers",t)}catch(e){throw console.error("Error updating seller:",e),e}},deleteSeller:async t=>{try{await Xr("sellers",t)}catch(e){throw console.error("Error deleting seller:",e),e}},cleanupDuplicateBuyers:async t=>{try{console.log("Starting cleanup of duplicate buyers for user:",t);const e=await br("buyers","by-user-id",t);console.log(`Retrieved ${e.length} buyers from local database`);const r=new Map;e.forEach(l=>{r.set(l.id,l)});const n=[],s=new Set,a=[];Array.from(r.values()).forEach(l=>{const c=l.name.toLowerCase().trim(),u=(l.email||"").toLowerCase().trim(),d=(l.phone||"").toLowerCase().trim(),h=`${c}-${u}-${d}`;s.has(h)?(console.log(`Found duplicate buyer: ${l.name} (${l.id})`),a.push(l)):(s.add(h),n.push(l))});let i=0;for(const l of a)try{console.log(`Deleting duplicate buyer: ${l.name} (${l.id})`),await Xr("buyers",l.id),i++}catch(c){console.error(`Error deleting duplicate buyer ${l.id}:`,c)}return console.log(`Removed ${i} duplicate buyers`),i}catch(e){return console.error("Error cleaning up duplicate buyers:",e),0}},cleanupDuplicateSellers:async t=>{try{console.log("Starting cleanup of duplicate sellers for user:",t);const e=await br("sellers","by-user-id",t);console.log(`Retrieved ${e.length} sellers from local database`);const r=new Map;e.forEach(l=>{r.set(l.id,l)});const n=[],s=new Set,a=[];Array.from(r.values()).forEach(l=>{const c=l.name.toLowerCase().trim(),u=(l.email||"").toLowerCase().trim(),d=(l.phone||"").toLowerCase().trim(),h=`${c}-${u}-${d}`;s.has(h)?(console.log(`Found duplicate seller: ${l.name} (${l.id})`),a.push(l)):(s.add(h),n.push(l))});let i=0;for(const l of a)try{console.log(`Deleting duplicate seller: ${l.name} (${l.id})`),await Xr("sellers",l.id),i++}catch(c){console.error(`Error deleting duplicate seller ${l.id}:`,c)}return console.log(`Removed ${i} duplicate sellers`),i}catch(e){return console.error("Error cleaning up duplicate sellers:",e),0}},updateSyncStatus:UM,getSyncStatus:VM,cleanupDuplicateTransactions:async t=>{try{return await qM(t)}catch(e){return console.error("Error cleaning up duplicate transactions:",e),0}},cleanupDuplicateDailyLogs:async t=>{try{return await zM(t)}catch(e){return console.error("Error cleaning up duplicate daily logs:",e),0}}},WM=Object.freeze(Object.defineProperty({__proto__:null,dbService:Ee},Symbol.toStringTag,{value:"Module"})),Ge={getCurrentUser:async()=>{try{const{data:{user:t}}=await We.auth.getUser();if(!t)return null;const{data:e,error:r}=await We.from("users").select("*").eq("id",t.id).single();return r?(console.error("Error fetching user:",r),null):e}catch(t){return console.error("Error getting current user:",t),null}},createUserProfile:async t=>{try{const{data:e,error:r}=await We.from("users").insert(t).select().single();return r?(console.error("Error creating user profile:",r),null):e}catch(e){return console.error("Error creating user profile:",e),null}},updateUserProfile:async t=>{try{const{data:e,error:r}=await We.from("users").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating user profile:",r),null):e}catch(e){return console.error("Error updating user profile:",e),null}},getTransactions:async t=>{try{const{data:e,error:r}=await We.from("transactions").select("*").eq("user_id",t);return r?(console.error("Error fetching transactions:",r),[]):e}catch(e){return console.error("Error getting transactions:",e),[]}},getTransaction:async t=>{try{const{data:e,error:r}=await We.from("transactions").select("*").eq("id",t).single();return r?(console.error("Error fetching transaction:",r),null):e}catch(e){return console.error("Error getting transaction:",e),null}},createTransaction:async t=>{try{const{data:e,error:r}=await We.from("transactions").insert(t).select().single();return r?(console.error("Error creating transaction:",r),null):e}catch(e){return console.error("Error creating transaction:",e),null}},updateTransaction:async t=>{try{const{data:e,error:r}=await We.from("transactions").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating transaction:",r),null):e}catch(e){return console.error("Error updating transaction:",e),null}},deleteTransaction:async t=>{try{const{error:e}=await We.from("transactions").delete().eq("id",t);return e?(console.error("Error deleting transaction:",e),!1):!0}catch(e){return console.error("Error deleting transaction:",e),!1}},getPurchases:async t=>{try{const{data:e,error:r}=await We.from("purchases").select("*").eq("transaction_id",t);return r?(console.error("Error fetching purchases:",r),[]):e}catch(e){return console.error("Error getting purchases:",e),[]}},createPurchase:async t=>{try{const{data:e,error:r}=await We.from("purchases").insert(t).select().single();return r?(console.error("Error creating purchase:",r),null):e}catch(e){return console.error("Error creating purchase:",e),null}},updatePurchase:async t=>{try{const{data:e,error:r}=await We.from("purchases").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating purchase:",r),null):e}catch(e){return console.error("Error updating purchase:",e),null}},deletePurchase:async t=>{try{const{error:e}=await We.from("purchases").delete().eq("id",t);return e?(console.error("Error deleting purchase:",e),!1):!0}catch(e){return console.error("Error deleting purchase:",e),!1}},getTransportation:async t=>{try{const{data:e,error:r}=await We.from("transportation").select("*").eq("transaction_id",t).single();return r&&r.code!=="PGRST116"?(console.error("Error fetching transportation:",r),null):e}catch(e){return console.error("Error getting transportation:",e),null}},createTransportation:async t=>{try{console.log("Creating transportation in Supabase:",t);const e=await Ge.getTransportation(t.transaction_id);if(e)return console.log("Transportation already exists, updating instead:",e),await Ge.updateTransportation({...e,...t,id:e.id});const r={...t};r.departure_date===""&&(r.departure_date=null),r.expected_arrival_date===""&&(r.expected_arrival_date=null),r.departure_time===""&&(r.departure_time=null),r.expected_arrival_time===""&&(r.expected_arrival_time=null),console.log("No existing transportation found, creating new record with cleaned data:",r);const{data:n,error:s}=await We.from("transportation").insert(r).select().single();if(s){if(console.error("Error creating transportation:",s),console.error("Error details:",JSON.stringify(s,null,2)),console.error("Transportation data:",JSON.stringify(r,null,2)),s.code==="23505"){console.log("Duplicate key error, trying to update instead");const a=await Ge.getTransportation(t.transaction_id);if(a)return await Ge.updateTransportation({...a,...r,id:a.id})}return null}return console.log("Transportation created successfully:",n),n}catch(e){return console.error("Error creating transportation:",e),null}},updateTransportation:async t=>{try{console.log("Updating transportation in Supabase:",t);const e={...t};e.departure_date===""&&(e.departure_date=null),e.expected_arrival_date===""&&(e.expected_arrival_date=null),e.departure_time===""&&(e.departure_time=null),e.expected_arrival_time===""&&(e.expected_arrival_time=null),console.log("Updating with cleaned data:",e);const{data:r,error:n}=await We.from("transportation").update(e).eq("id",e.id).select().single();return n?(console.error("Error updating transportation:",n),console.error("Error details:",JSON.stringify(n,null,2)),console.error("Transportation data:",JSON.stringify(e,null,2)),null):(console.log("Transportation updated successfully:",r),r)}catch(e){return console.error("Error updating transportation:",e),null}},deleteTransportation:async t=>{try{const{error:e}=await We.from("transportation").delete().eq("id",t);return e?(console.error("Error deleting transportation:",e),!1):!0}catch(e){return console.error("Error deleting transportation:",e),!1}},getSales:async t=>{try{const{data:e,error:r}=await We.from("sales").select("*").eq("transaction_id",t);return r?(console.error("Error fetching sales:",r),[]):e}catch(e){return console.error("Error getting sales:",e),[]}},createSale:async t=>{try{const{data:e,error:r}=await We.from("sales").insert(t).select().single();return r?(console.error("Error creating sale:",r),null):e}catch(e){return console.error("Error creating sale:",e),null}},updateSale:async t=>{try{const{data:e,error:r}=await We.from("sales").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating sale:",r),null):e}catch(e){return console.error("Error updating sale:",e),null}},deleteSale:async t=>{try{const{error:e}=await We.from("sales").delete().eq("id",t);return e?(console.error("Error deleting sale:",e),!1):!0}catch(e){return console.error("Error deleting sale:",e),!1}},getPayments:async t=>{try{const{data:e,error:r}=await We.from("payments").select("*").eq("transaction_id",t);return r?(console.error("Error fetching payments:",r),[]):e}catch(e){return console.error("Error getting payments:",e),[]}},createPayment:async t=>{try{const{data:e,error:r}=await We.from("payments").insert(t).select().single();return r?(console.error("Error creating payment:",r),null):e}catch(e){return console.error("Error creating payment:",e),null}},updatePayment:async t=>{try{const{data:e,error:r}=await We.from("payments").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating payment:",r),null):e}catch(e){return console.error("Error updating payment:",e),null}},deletePayment:async t=>{try{const{error:e}=await We.from("payments").delete().eq("id",t);return e?(console.error("Error deleting payment:",e),!1):!0}catch(e){return console.error("Error deleting payment:",e),!1}},getNotes:async t=>{try{const{data:e,error:r}=await We.from("transaction_notes").select("*").eq("transaction_id",t);return r?(console.error("Error fetching notes:",r),[]):e}catch(e){return console.error("Error getting notes:",e),[]}},createNote:async t=>{try{const{data:e,error:r}=await We.from("transaction_notes").insert(t).select().single();return r?(console.error("Error creating note:",r),null):e}catch(e){return console.error("Error creating note:",e),null}},updateNote:async t=>{try{const{data:e,error:r}=await We.from("transaction_notes").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating note:",r),null):e}catch(e){return console.error("Error updating note:",e),null}},deleteNote:async t=>{try{const{error:e}=await We.from("transaction_notes").delete().eq("id",t);return e?(console.error("Error deleting note:",e),!1):!0}catch(e){return console.error("Error deleting note:",e),!1}},getAttachments:async t=>{try{const{data:e,error:r}=await We.from("attachments").select("*").eq("transaction_id",t);return r?(console.error("Error fetching attachments:",r),[]):e}catch(e){return console.error("Error getting attachments:",e),[]}},createAttachment:async t=>{try{const{data:e,error:r}=await We.from("attachments").insert(t).select().single();return r?(console.error("Error creating attachment:",r),null):e}catch(e){return console.error("Error creating attachment:",e),null}},updateAttachment:async t=>{try{const{data:e,error:r}=await We.from("attachments").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating attachment:",r),null):e}catch(e){return console.error("Error updating attachment:",e),null}},deleteAttachment:async t=>{try{const{error:e}=await We.from("attachments").delete().eq("id",t);return e?(console.error("Error deleting attachment:",e),!1):!0}catch(e){return console.error("Error deleting attachment:",e),!1}},checkStorageBucket:async t=>await Ia.checkBucketExists(t),uploadAttachmentFile:async(t,e,r)=>{try{if(!Ia.isStorageAvailable())return console.error("Supabase storage is not available"),URL.createObjectURL(e);await Ia.ensureBucketExists("attachments",!0);const n=`${t}/${r}`,s=We.storage.from("attachments");if(!s)return console.error("Failed to get storage client for 'attachments' bucket"),URL.createObjectURL(e);console.log(`Uploading file to path: ${n}`);const{data:a,error:i}=await s.upload(n,e,{cacheControl:"3600",upsert:!0});if(i)return console.error("Error uploading file:",i),URL.createObjectURL(e);if(!a||!a.path)return console.error("Upload succeeded but no data or path returned"),URL.createObjectURL(e);console.log(`File uploaded successfully to: ${a.path}`);try{const{data:l}=s.getPublicUrl(a.path);return!l||!l.publicUrl?(console.error("Failed to get public URL"),URL.createObjectURL(e)):(console.log(`Got public URL: ${l.publicUrl}`),l.publicUrl)}catch(l){return console.error("Error getting public URL:",l),URL.createObjectURL(e)}}catch(n){return console.error("Error uploading attachment file:",n),URL.createObjectURL(e)}},getDailyLogs:async t=>{try{console.log(`Fetching daily logs for user ${t}`);const{data:e,error:r}=await We.from("daily_logs").select("*").eq("user_id",t);return r?(console.error("Error fetching daily logs:",r),console.error("Error details:",JSON.stringify(r,null,2)),[]):(console.log(`Successfully fetched ${(e==null?void 0:e.length)||0} daily logs`),e)}catch(e){return console.error("Error getting daily logs:",e),[]}},createDailyLog:async t=>{try{console.log("Creating daily log in Supabase:",t);const{error:e}=await We.from("daily_logs").select("id").limit(1);if(e)return console.error("Error checking daily_logs table:",e),console.error("The daily_logs table might not exist in Supabase"),null;const{data:r,error:n}=await We.from("daily_logs").insert(t).select().single();return n?(console.error("Error creating daily log:",n),console.error("Error details:",JSON.stringify(n,null,2)),console.error("Log data:",JSON.stringify(t,null,2)),null):(console.log("Daily log created successfully:",r),r)}catch(e){return console.error("Error creating daily log:",e),null}},updateDailyLog:async t=>{try{console.log("Updating daily log in Supabase:",t);const{data:e,error:r}=await We.from("daily_logs").update(t).eq("id",t.id).select().single();return r?(console.error("Error updating daily log:",r),console.error("Error details:",JSON.stringify(r,null,2)),console.error("Log data:",JSON.stringify(t,null,2)),null):(console.log("Daily log updated successfully:",e),e)}catch(e){return console.error("Error updating daily log:",e),null}},deleteDailyLog:async t=>{try{console.log(`Deleting daily log with ID ${t} from Supabase`);const{error:e}=await We.from("daily_logs").delete().eq("id",t);return e?(console.error("Error deleting daily log:",e),console.error("Error details:",JSON.stringify(e,null,2)),!1):(console.log("Daily log deleted successfully"),!0)}catch(e){return console.error("Error deleting daily log:",e),!1}},getBuyers:async t=>{try{console.log(`Fetching buyers for user ${t}`);const{error:e}=await We.from("buyers").select("id").limit(1);if(e)return console.error("Error checking buyers table:",e),console.error("The buyers table might not exist in Supabase"),[];const{data:r,error:n}=await We.from("buyers").select("*").eq("user_id",t);return n?(console.error("Error fetching buyers:",n),console.error("Error details:",JSON.stringify(n,null,2)),[]):(console.log(`Successfully fetched ${(r==null?void 0:r.length)||0} buyers`),r)}catch(e){return console.error("Error getting buyers:",e),[]}},createBuyer:async t=>{try{if(console.log("SUPABASE-SERVICE: Creating buyer in Supabase:",t),console.log("SUPABASE-SERVICE: Buyer ID:",t.id),console.log("SUPABASE-SERVICE: User ID:",t.user_id),!t.user_id)return console.error("Cannot create buyer: Missing user_id"),null;const{data:e,error:r}=await We.from("buyers").select("*").eq("id",t.id).maybeSingle();if(r)return r.message.includes("does not exist")?(console.error("The buyers table does not exist in Supabase!"),console.error("Please run the SQL migration script to create the table"),null):(console.error("Error checking if buyer exists:",r),null);if(e)return console.log("Buyer already exists, updating instead:",e),await Ge.updateBuyer(t);const{date:n,...s}=t,a={...s,created_at:t.created_at||new Date().toISOString()};console.log("Inserting buyer into Supabase (without date):",a);const{data:i,error:l}=await We.from("buyers").insert(a).select().single();if(l){console.error("Error creating buyer:",l),console.error("Error details:",JSON.stringify(l,null,2)),console.error("Buyer data:",JSON.stringify(a,null,2));try{console.log("Trying fallback method with RPC call...");const{data:c,error:u}=await We.rpc("insert_buyer",{buyer_id:a.id,buyer_user_id:a.user_id,buyer_name:a.name,buyer_email:a.email||null,buyer_phone:a.phone||null});return u?(console.error("RPC fallback also failed:",u),null):(console.log("RPC call successful:",c),a)}catch(c){return console.error("Error in RPC fallback:",c),null}}return console.log("Buyer created successfully:",i),i}catch(e){return console.error("Error creating buyer:",e),null}},updateBuyer:async t=>{try{if(console.log("Updating buyer in Supabase:",t),!t.id||!t.user_id)return console.error("Cannot update buyer: Missing id or user_id"),null;const{date:e,...r}=t;console.log("Sending buyer data to Supabase (without date):",r);const{data:n,error:s}=await We.from("buyers").select("id").eq("id",t.id).maybeSingle();if(s&&console.error("Error checking if buyer exists:",s),!n){console.log("Buyer does not exist in Supabase, inserting instead of updating");const{data:l,error:c}=await We.from("buyers").insert({...r,created_at:new Date().toISOString()}).select();return c?(console.error("Error inserting buyer:",c),console.error("Error details:",JSON.stringify(c,null,2)),console.error("Buyer data:",JSON.stringify(r,null,2)),null):(console.log("Buyer inserted successfully:",l),(l==null?void 0:l[0])||null)}const{data:a,error:i}=await We.from("buyers").update(r).eq("id",t.id).select();return i?(console.error("Error updating buyer:",i),console.error("Error details:",JSON.stringify(i,null,2)),console.error("Buyer data:",JSON.stringify(r,null,2)),null):(console.log("Buyer updated successfully:",a),(a==null?void 0:a[0])||null)}catch(e){return console.error("Error updating buyer:",e),null}},deleteBuyer:async t=>{try{console.log(`Deleting buyer with ID ${t} from Supabase`);const{error:e}=await We.from("buyers").delete().eq("id",t);return e?(console.error("Error deleting buyer:",e),console.error("Error details:",JSON.stringify(e,null,2)),!1):(console.log("Buyer deleted successfully"),!0)}catch(e){return console.error("Error deleting buyer:",e),!1}},getSellers:async t=>{try{console.log(`Fetching sellers for user ${t}`);const{error:e}=await We.from("sellers").select("id").limit(1);if(e)return console.error("Error checking sellers table:",e),console.error("The sellers table might not exist in Supabase"),[];const{data:r,error:n}=await We.from("sellers").select("*").eq("user_id",t);return n?(console.error("Error fetching sellers:",n),console.error("Error details:",JSON.stringify(n,null,2)),[]):(console.log(`Successfully fetched ${(r==null?void 0:r.length)||0} sellers`),r)}catch(e){return console.error("Error getting sellers:",e),[]}},createSeller:async t=>{try{if(console.log("Creating seller in Supabase:",t),!t.user_id)return console.error("Cannot create seller: Missing user_id"),null;const{data:e,error:r}=await We.from("sellers").select("*").eq("id",t.id).maybeSingle();if(r)return r.message.includes("does not exist")?(console.error("The sellers table does not exist in Supabase!"),console.error("Please run the SQL migration script to create the table"),null):(console.error("Error checking if seller exists:",r),null);if(e)return console.log("Seller already exists, updating instead:",e),await Ge.updateSeller(t);const{date:n,...s}=t,a={...s,created_at:t.created_at||new Date().toISOString()};console.log("Inserting seller into Supabase (without date):",a);const{data:i,error:l}=await We.from("sellers").insert(a).select().single();if(l){console.error("Error creating seller:",l),console.error("Error details:",JSON.stringify(l,null,2)),console.error("Seller data:",JSON.stringify(a,null,2));try{console.log("Trying fallback method with RPC call...");const{data:c,error:u}=await We.rpc("insert_seller",{seller_id:a.id,seller_user_id:a.user_id,seller_name:a.name,seller_email:a.email||null,seller_phone:a.phone||null});return u?(console.error("RPC fallback also failed:",u),null):(console.log("RPC call successful:",c),a)}catch(c){return console.error("Error in RPC fallback:",c),null}}return console.log("Seller created successfully:",i),i}catch(e){return console.error("Error creating seller:",e),null}},updateSeller:async t=>{try{if(console.log("Updating seller in Supabase:",t),!t.id||!t.user_id)return console.error("Cannot update seller: Missing id or user_id"),null;const{date:e,...r}=t;console.log("Sending seller data to Supabase (without date):",r);const{data:n,error:s}=await We.from("sellers").select("id").eq("id",t.id).maybeSingle();if(s&&console.error("Error checking if seller exists:",s),!n){console.log("Seller does not exist in Supabase, inserting instead of updating");const{data:l,error:c}=await We.from("sellers").insert({...r,created_at:new Date().toISOString()}).select();return c?(console.error("Error inserting seller:",c),console.error("Error details:",JSON.stringify(c,null,2)),console.error("Seller data:",JSON.stringify(r,null,2)),null):(console.log("Seller inserted successfully:",l),(l==null?void 0:l[0])||null)}const{data:a,error:i}=await We.from("sellers").update(r).eq("id",t.id).select();return i?(console.error("Error updating seller:",i),console.error("Error details:",JSON.stringify(i,null,2)),console.error("Seller data:",JSON.stringify(r,null,2)),null):(console.log("Seller updated successfully:",a),(a==null?void 0:a[0])||null)}catch(e){return console.error("Error updating seller:",e),null}},deleteSeller:async t=>{try{console.log(`Deleting seller with ID ${t} from Supabase`);const{error:e}=await We.from("sellers").delete().eq("id",t);return e?(console.error("Error deleting seller:",e),console.error("Error details:",JSON.stringify(e,null,2)),!1):(console.log("Seller deleted successfully"),!0)}catch(e){return console.error("Error deleting seller:",e),!1}},getCompleteTransaction:async t=>{try{const e=await Ge.getTransaction(t);if(!e)return null;const r=await Ge.getPurchases(t),n=await Ge.getTransportation(t),s=await Ge.getSales(t),a=await Ge.getPayments(t),i=await Ge.getNotes(t),l=await Ge.getAttachments(t);return{transaction:e,purchases:r,transportation:n,sales:s,payments:a,notes:i,attachments:l}}catch(e){return console.error("Error getting complete transaction:",e),null}}},On=()=>navigator.onLine,mt={getSyncStatus:async()=>{try{const t=["transactions","purchases","transportation","sales","payments","transaction_notes","attachments","daily_logs","buyers","sellers"],e=await Promise.all(t.map(async s=>{const a=await Ee.getSyncStatus(s);return{table:s,lastSyncTime:a}})),r=e.every(s=>s.lastSyncTime!==null);return{lastSyncTime:e.reduce((s,a)=>a.lastSyncTime===null?null:s===null?a.lastSyncTime:Math.min(s,a.lastSyncTime),null),isAllSynced:r}}catch(t){return console.error("Error getting sync status:",t),{lastSyncTime:null,isAllSynced:!1}}},syncUserData:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;const e=await Ge.getCurrentUser();return e&&(await Ee.getUser(t)?await Ee.updateUser(e):await Ee.addUser(e)),!0}catch(e){return console.error("Error syncing user data:",e),!1}},syncTransactions:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;console.log("Starting transaction sync for user:",t);const e=await Ge.getTransactions(t);console.log(`Retrieved ${e.length} transactions from Supabase`);const r=await Ee.getAllTransactions(t);console.log(`Retrieved ${r.length} transactions from local database`);const n=new Map;r.forEach(l=>{n.set(l.id,l)});const s=new Map;e.forEach(l=>{s.set(l.id,l)});const a=new Map;r.forEach(l=>{var d;const c=l.created_at?new Date(l.created_at).toDateString():"unknown",u=`${l.name}-${c}`;a.has(u)||a.set(u,[]),(d=a.get(u))==null||d.push(l)});const i=new Map;e.forEach(l=>{var d;const c=l.created_at?new Date(l.created_at).toDateString():"unknown",u=`${l.name}-${c}`;i.has(u)||i.set(u,[]),(d=i.get(u))==null||d.push(l)}),console.log("Syncing transactions from Supabase to local...");for(const l of e)if(n.get(l.id))console.log(`Updating local transaction ${l.id} with Supabase data`),await Ee.updateTransaction(l);else{const u=l.created_at?new Date(l.created_at).toDateString():"unknown",d=`${l.name}-${u}`,h=a.get(d)||[];if(h.length>0){console.log(`Found potential duplicate for Supabase transaction ${l.id} (${l.name}) in local database`);const f=h[0];console.log(`Using local transaction ${f.id} as canonical version`);continue}console.log(`Adding Supabase transaction ${l.id} to local database`),await Ee.addTransaction(l)}console.log("Syncing transactions from local to Supabase...");for(const l of r)if(!s.get(l.id)){const u=l.created_at?new Date(l.created_at).toDateString():"unknown",d=`${l.name}-${u}`,h=i.get(d)||[];if(h.length>0){console.log(`Found potential duplicate for local transaction ${l.id} (${l.name}) in Supabase`);const f=h[0];console.log(`Using Supabase transaction ${f.id} as canonical version`);continue}console.log(`Adding local transaction ${l.id} to Supabase`),await Ge.createTransaction(l)}return await Ee.updateSyncStatus("transactions"),console.log("Transaction sync status updated"),!0}catch(e){return console.error("Error syncing transactions:",e),!1}},syncPurchases:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;const e=await Ge.getPurchases(t),r=await Ee.getPurchasesByTransaction(t),n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)});for(const a of e)n.get(a.id)?await Ee.updatePurchase(a):await Ee.addPurchase(a);for(const a of r)s.get(a.id)||await Ge.createPurchase(a);return await Ee.updateSyncStatus("purchases"),!0}catch(e){return console.error("Error syncing purchases:",e),!1}},syncTransportation:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;console.log(`Syncing transportation for transaction ${t}`);const e=await Ge.getTransportation(t);console.log("Supabase transportation:",e);const r=await Ee.getTransportationByTransaction(t);if(console.log("Local transportation:",r),e&&r){console.log("Both Supabase and local have transportation, comparing data..."),console.log("Updating Supabase with local transportation data");const n=await Ge.updateTransportation({...e,...r,id:e.id});console.log("Result of updating transportation in Supabase:",n),n&&(await Ee.updateTransportation(n),console.log("Local transportation updated with merged data"))}else if(e&&!r)console.log("Only Supabase has transportation, adding to local"),await Ee.addTransportation(e),console.log("Added Supabase transportation to local database");else if(!e&&r){console.log("Only local has transportation, adding to Supabase");const n=await Ge.createTransportation(r);console.log("Result of adding transportation to Supabase:",n),n&&(await Ee.updateTransportation(n),console.log("Updated local transportation with Supabase data"))}else console.log("Neither Supabase nor local have transportation for this transaction");return await Ee.updateSyncStatus("transportation"),console.log("Transportation sync status updated"),!0}catch(e){return console.error("Error syncing transportation:",e),!1}},syncSales:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;const e=await Ge.getSales(t),r=await Ee.getSalesByTransaction(t),n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)});for(const a of e)n.get(a.id)?await Ee.updateSale(a):await Ee.addSale(a);for(const a of r)s.get(a.id)||await Ge.createSale(a);return await Ee.updateSyncStatus("sales"),!0}catch(e){return console.error("Error syncing sales:",e),!1}},syncPayments:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;const e=await Ge.getPayments(t),r=await Ee.getPaymentsByTransaction(t),n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)});for(const a of e)n.get(a.id)?await Ee.updatePayment(a):await Ee.addPayment(a);for(const a of r)s.get(a.id)||await Ge.createPayment(a);return await Ee.updateSyncStatus("payments"),!0}catch(e){return console.error("Error syncing payments:",e),!1}},syncNotes:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;const e=await Ge.getNotes(t),r=await Ee.getNotesByTransaction(t),n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)});for(const a of e)n.get(a.id)?await Ee.updateTransactionNote(a):await Ee.addTransactionNote({id:a.id,transaction_id:a.transaction_id,note:a.note});for(const a of r)s.get(a.id)||await Ge.createNote({id:a.id,transaction_id:a.transaction_id,note:a.note});return await Ee.updateSyncStatus("transaction_notes"),!0}catch(e){return console.error("Error syncing notes:",e),!1}},syncAttachments:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;console.log(`Syncing attachments for transaction ${t}`);let e=[];try{e=await Ge.getAttachments(t),console.log(`Retrieved ${e.length} attachments from Supabase`)}catch(a){console.error("Error fetching attachments from Supabase:",a)}let r=[];try{r=await Ee.getAttachmentsByTransaction(t),console.log(`Retrieved ${r.length} attachments from local DB`)}catch(a){console.error("Error fetching attachments from local DB:",a)}const n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)});for(const a of e)try{n.get(a.id)?(console.log(`Updating local attachment ${a.id} with Supabase data`),await Ee.updateAttachment(a)):(console.log(`Adding Supabase attachment ${a.id} to local DB`),await Ee.addAttachment({id:a.id,transaction_id:a.transaction_id,name:a.name,file_type:a.file_type,uri:a.uri}))}catch(i){console.error(`Error syncing Supabase attachment ${a.id} to local:`,i)}for(const a of r)try{s.get(a.id)||(console.log(`Adding local attachment ${a.id} to Supabase`),await Ge.createAttachment({id:a.id,transaction_id:a.transaction_id,name:a.name,file_type:a.file_type,uri:a.uri}))}catch(i){console.error(`Error syncing local attachment ${a.id} to Supabase:`,i)}try{await Ee.updateSyncStatus("attachments"),console.log("Attachment sync status updated")}catch(a){console.error("Error updating attachment sync status:",a)}return console.log("Attachment synchronization completed"),!0}catch(e){return console.error("Error syncing attachments:",e),!1}},syncDailyLogs:async t=>{try{if(!On())return console.log("Offline, skipping daily logs sync"),!1;console.log(`Starting daily logs sync for user ${t}`);const e=await Ge.getDailyLogs(t);console.log(`Retrieved ${e.length} daily logs from Supabase`);const r=await Ee.getDailyLogsByUser(t);console.log(`Retrieved ${r.length} daily logs from local database`);const n=new Map;r.forEach(l=>{n.set(l.id,l)});const s=new Map;e.forEach(l=>{s.set(l.id,l)});const a=new Map;r.forEach(l=>{var d;const c=l.date?new Date(l.date).toDateString():"unknown",u=`${l.recipient_name}-${l.amount}-${c}-${l.direction}-${l.payment_type}`;a.has(u)||a.set(u,[]),(d=a.get(u))==null||d.push(l)});const i=new Map;e.forEach(l=>{var d;const c=l.date?new Date(l.date).toDateString():"unknown",u=`${l.recipient_name}-${l.amount}-${c}-${l.direction}-${l.payment_type}`;i.has(u)||i.set(u,[]),(d=i.get(u))==null||d.push(l)}),console.log("Syncing logs from Supabase to local...");for(const l of e)if(n.get(l.id)){console.log(`Updating local log ${l.id} with Supabase data`);try{await Ee.updateDailyLog(l),console.log(`Successfully updated log ${l.id} in local database`)}catch(u){console.error(`Error updating log ${l.id} in local database:`,u)}}else{const u=l.date?new Date(l.date).toDateString():"unknown",d=`${l.recipient_name}-${l.amount}-${u}-${l.direction}-${l.payment_type}`,h=a.get(d)||[];if(h.length>0){console.log(`Found potential duplicate for Supabase log ${l.id} in local database`);const f=h[0];console.log(`Using local log ${f.id} as canonical version`);continue}console.log(`Adding Supabase log ${l.id} to local database`);try{await Ee.addDailyLog({id:l.id,user_id:l.user_id,direction:l.direction,payment_type:l.payment_type,date:l.date,recipient_name:l.recipient_name,amount:l.amount,is_third_party:l.is_third_party,third_party_name:l.third_party_name,notes:l.notes,attachment_url:l.attachment_url}),console.log(`Successfully added log ${l.id} to local database`)}catch(f){console.error(`Error adding log ${l.id} to local database:`,f)}}console.log("Syncing logs from local to Supabase...");for(const l of r)if(!s.get(l.id)){const u=l.date?new Date(l.date).toDateString():"unknown",d=`${l.recipient_name}-${l.amount}-${u}-${l.direction}-${l.payment_type}`,h=i.get(d)||[];if(h.length>0){console.log(`Found potential duplicate for local log ${l.id} in Supabase`);const f=h[0];console.log(`Using Supabase log ${f.id} as canonical version`);continue}console.log(`Adding local log ${l.id} to Supabase`);try{await Ge.createDailyLog({id:l.id,user_id:l.user_id,direction:l.direction,payment_type:l.payment_type,date:l.date,recipient_name:l.recipient_name,amount:l.amount,is_third_party:l.is_third_party,third_party_name:l.third_party_name,notes:l.notes,attachment_url:l.attachment_url})?console.log(`Successfully added log ${l.id} to Supabase`):console.error(`Failed to add log ${l.id} to Supabase, result was null`)}catch(f){console.error(`Error adding log ${l.id} to Supabase:`,f)}}return await Ee.updateSyncStatus("daily_logs"),console.log("Daily logs sync status updated"),!0}catch(e){return console.error("Error syncing daily logs:",e),!1}},syncBuyers:async t=>{try{if(console.log("SYNC-SERVICE: syncBuyers called for user:",t),!On())return console.log("SYNC-SERVICE: Offline, skipping buyers sync"),!1;console.log(`SYNC-SERVICE: Starting buyers sync for user ${t}`);const e=await Ge.getBuyers(t);console.log(`Retrieved ${e.length} buyers from Supabase`);const r=await Ee.getBuyersByUser(t);console.log(`Retrieved ${r.length} buyers from local database`);const n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)}),console.log("Syncing buyers from Supabase to local...");for(const a of e)if(n.get(a.id)){console.log(`Updating local buyer ${a.id} with Supabase data`);try{await Ee.updateBuyer(a),console.log(`Successfully updated buyer ${a.id} in local database`)}catch(l){console.error(`Error updating buyer ${a.id} in local database:`,l)}}else{console.log(`Adding Supabase buyer ${a.id} to local database`);try{await Ee.addBuyer(a),console.log(`Successfully added buyer ${a.id} to local database`)}catch(l){console.error(`Error adding buyer ${a.id} to local database:`,l)}}console.log("Syncing buyers from local to Supabase...");for(const a of r)if(!s.get(a.id)){const l=e.filter(c=>c.name.toLowerCase()===a.name.toLowerCase()&&(c.phone===a.phone||!c.phone&&!a.phone)&&(c.email===a.email||!c.email&&!a.email));if(l.length>0){console.log(`Found potential duplicate for buyer ${a.id} in Supabase:`,l[0]);const c={...a,syncedAt:new Date().toISOString()};await Ee.updateBuyer(c),console.log(`Updated local buyer ${a.id} with synced status`);continue}console.log(`Adding local buyer ${a.id} to Supabase`);try{await Ge.createBuyer(a)?console.log(`Successfully added buyer ${a.id} to Supabase`):console.error(`Failed to add buyer ${a.id} to Supabase, result was null`)}catch(c){console.error(`Error adding buyer ${a.id} to Supabase:`,c)}}return await Ee.updateSyncStatus("buyers"),console.log("Buyers sync status updated"),!0}catch(e){return console.error("Error syncing buyers:",e),!1}},syncSellers:async t=>{try{if(!On())return console.log("Offline, skipping sellers sync"),!1;console.log(`Starting sellers sync for user ${t}`);const e=await Ge.getSellers(t);console.log(`Retrieved ${e.length} sellers from Supabase`);const r=await Ee.getSellersByUser(t);console.log(`Retrieved ${r.length} sellers from local database`);const n=new Map;r.forEach(a=>{n.set(a.id,a)});const s=new Map;e.forEach(a=>{s.set(a.id,a)}),console.log("Syncing sellers from Supabase to local...");for(const a of e)if(n.get(a.id)){console.log(`Updating local seller ${a.id} with Supabase data`);try{await Ee.updateSeller(a),console.log(`Successfully updated seller ${a.id} in local database`)}catch(l){console.error(`Error updating seller ${a.id} in local database:`,l)}}else{console.log(`Adding Supabase seller ${a.id} to local database`);try{await Ee.addSeller(a),console.log(`Successfully added seller ${a.id} to local database`)}catch(l){console.error(`Error adding seller ${a.id} to local database:`,l)}}console.log("Syncing sellers from local to Supabase...");for(const a of r)if(!s.get(a.id)){const l=e.filter(c=>c.name.toLowerCase()===a.name.toLowerCase()&&(c.phone===a.phone||!c.phone&&!a.phone)&&(c.email===a.email||!c.email&&!a.email));if(l.length>0){console.log(`Found potential duplicate for seller ${a.id} in Supabase:`,l[0]);const c={...a,syncedAt:new Date().toISOString()};await Ee.updateSeller(c),console.log(`Updated local seller ${a.id} with synced status`);continue}console.log(`Adding local seller ${a.id} to Supabase`);try{await Ge.createSeller(a)?console.log(`Successfully added seller ${a.id} to Supabase`):console.error(`Failed to add seller ${a.id} to Supabase, result was null`)}catch(c){console.error(`Error adding seller ${a.id} to Supabase:`,c)}}return await Ee.updateSyncStatus("sellers"),console.log("Sellers sync status updated"),!0}catch(e){return console.error("Error syncing sellers:",e),!1}},forceSyncContacts:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;console.log("Force syncing contacts..."),console.log("Force syncing buyers...");const e=await Ee.getBuyersByUser(t);console.log(`Found ${e.length} local buyers to sync`);try{console.log("Checking if buyers table exists...");const{error:c}=await We.from("buyers").select("id").limit(1);c&&c.message.includes("does not exist")?(console.log("Buyers table does not exist in Supabase"),console.log("Please create the buyers table in Supabase using the SQL editor"),console.log(`
            CREATE TABLE IF NOT EXISTS public.buyers (
              id TEXT PRIMARY KEY,
              user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
              name TEXT NOT NULL,
              email TEXT,
              phone TEXT,
              created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
            );

            ALTER TABLE public.buyers ENABLE ROW LEVEL SECURITY;

            CREATE POLICY "Users can manage their own buyers"
              ON public.buyers
              USING (user_id = auth.uid());

            GRANT SELECT, INSERT, UPDATE, DELETE ON public.buyers TO authenticated;
          `)):console.log("Buyers table exists in Supabase")}catch(c){console.error("Error checking buyers table:",c)}let r=0,n=0;for(const c of e)try{console.log(`Processing buyer ${c.id} (${c.name})`),console.log(`Trying direct upsert for buyer ${c.id}...`);const{data:u,error:d}=await We.from("buyers").select("id").eq("id",c.id).maybeSingle();let h=null;if(d)console.error(`Error checking if buyer ${c.id} exists:`,d),h=d;else if(u){const{error:f}=await We.from("buyers").update({name:c.name,email:c.email,phone:c.phone}).eq("id",c.id);f?(console.error(`Error updating buyer ${c.id}:`,f),h=f):(console.log(`Successfully updated buyer ${c.id} directly`),r++)}else{const{error:f}=await We.from("buyers").insert({id:c.id,user_id:t,name:c.name,email:c.email,phone:c.phone,created_at:c.created_at||new Date().toISOString()});f?(console.error(`Error inserting buyer ${c.id}:`,f),h=f):(console.log(`Successfully inserted buyer ${c.id} directly`),r++)}if(h){console.error(`Error upserting buyer ${c.id} via SQL:`,h);try{await Ge.createBuyer(c)?(console.log(`Successfully synced buyer ${c.id} via API`),r++):(console.error(`Failed to sync buyer ${c.id} via API`),n++)}catch(f){console.error(`Error syncing buyer ${c.id} via API:`,f),n++}}else console.log(`Successfully upserted buyer ${c.id} via SQL`),r++}catch(u){console.error(`Error syncing buyer ${c.id} to Supabase:`,u),n++}console.log(`Buyer sync summary: ${r} succeeded, ${n} failed`),console.log("Force syncing sellers...");const s=await Ee.getSellersByUser(t);console.log(`Found ${s.length} local sellers to sync`);try{console.log("Checking if sellers table exists...");const{error:c}=await We.from("sellers").select("id").limit(1);c&&c.message.includes("does not exist")?(console.log("Sellers table does not exist in Supabase"),console.log("Please create the sellers table in Supabase using the SQL editor"),console.log(`
            CREATE TABLE IF NOT EXISTS public.sellers (
              id TEXT PRIMARY KEY,
              user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
              name TEXT NOT NULL,
              email TEXT,
              phone TEXT,
              created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
            );

            ALTER TABLE public.sellers ENABLE ROW LEVEL SECURITY;

            CREATE POLICY "Users can manage their own sellers"
              ON public.sellers
              USING (user_id = auth.uid());

            GRANT SELECT, INSERT, UPDATE, DELETE ON public.sellers TO authenticated;
          `)):console.log("Sellers table exists in Supabase")}catch(c){console.error("Error checking sellers table:",c)}let a=0,i=0;for(const c of s)try{console.log(`Processing seller ${c.id} (${c.name})`),console.log(`Trying direct insert for seller ${c.id}...`);const{data:u,error:d}=await We.from("sellers").select("id").eq("id",c.id).maybeSingle();let h=null;if(d)console.error(`Error checking if seller ${c.id} exists:`,d),h=d;else if(u){const{error:f}=await We.from("sellers").update({name:c.name,email:c.email,phone:c.phone}).eq("id",c.id);f?(console.error(`Error updating seller ${c.id}:`,f),h=f):(console.log(`Successfully updated seller ${c.id} directly`),a++)}else{const{error:f}=await We.from("sellers").insert({id:c.id,user_id:t,name:c.name,email:c.email,phone:c.phone,created_at:c.created_at||new Date().toISOString()});f?(console.error(`Error inserting seller ${c.id}:`,f),h=f):(console.log(`Successfully inserted seller ${c.id} directly`),a++)}if(h){console.error(`Error upserting seller ${c.id} via SQL:`,h);try{await Ge.createSeller(c)?(console.log(`Successfully synced seller ${c.id} via API`),a++):(console.error(`Failed to sync seller ${c.id} via API`),i++)}catch(f){console.error(`Error syncing seller ${c.id} via API:`,f),i++}}else console.log(`Successfully upserted seller ${c.id} via SQL`),a++}catch(u){console.error(`Error syncing seller ${c.id} to Supabase:`,u),i++}console.log(`Seller sync summary: ${a} succeeded, ${i} failed`),console.log("Force syncing daily logs...");const l=await Ee.getDailyLogsByUser(t);console.log(`Found ${l.length} local daily logs to sync`);for(const c of l)try{console.log(`Processing daily log ${c.id}`),(await Ge.getDailyLogs(t)).some(h=>h.id===c.id)?(console.log(`Daily log ${c.id} exists in Supabase, updating...`),await Ge.updateDailyLog(c)?console.log(`Successfully updated daily log ${c.id} in Supabase`):console.error(`Failed to update daily log ${c.id} in Supabase`)):(console.log(`Daily log ${c.id} does not exist in Supabase, creating...`),await Ge.createDailyLog(c)?console.log(`Successfully created daily log ${c.id} in Supabase`):console.error(`Failed to create daily log ${c.id} in Supabase`))}catch(u){console.error(`Error syncing daily log ${c.id} to Supabase:`,u)}return!0}catch(e){return console.error("Error force syncing contacts and logs:",e),!1}},cleanupDuplicateTransactions:async t=>{try{console.log("Starting duplicate data cleanup for user:",t),console.log("Cleaning up local transaction duplicates...");const e=await Ee.cleanupDuplicateTransactions(t);console.log(`Removed ${e} local duplicate transactions`),console.log("Cleaning up local daily log duplicates...");const r=await Ee.cleanupDuplicateDailyLogs(t);if(console.log(`Removed ${r} local duplicate daily logs`),!On())return console.log("Offline, skipping Supabase cleanup"),e>0||r>0;console.log("Cleaning up Supabase duplicates...");const n=await Ge.getTransactions(t);console.log(`Retrieved ${n.length} transactions from Supabase`);const s=new Map;n.forEach(h=>{var g;const f=h.created_at?new Date(h.created_at).toDateString():"unknown",m=`${h.name}-${f}`;s.has(m)||s.set(m,[]),(g=s.get(m))==null||g.push(h)});let a=0,i=0;for(const[h,f]of s.entries())if(f.length>1){console.log(`Found ${f.length} duplicate transactions for key: ${h}`),a+=f.length-1,f.sort((g,v)=>g.id.localeCompare(v.id));const m=f[0];console.log(`Keeping transaction ${m.id}`);for(let g=1;g<f.length;g++){const v=f[g];console.log(`Deleting duplicate transaction ${v.id}`);try{await Ge.deleteTransaction(v.id),i++}catch(b){console.error(`Error deleting duplicate transaction ${v.id}:`,b)}}}console.log(`Supabase transaction cleanup complete. Found ${a} duplicates, removed ${i}`),console.log("Cleaning up duplicate daily logs in Supabase...");const l=await Ge.getDailyLogs(t);console.log(`Retrieved ${l.length} daily logs from Supabase`);const c=new Map;l.forEach(h=>{var g;const f=h.date?new Date(h.date).toDateString():"unknown",m=`${h.recipient_name}-${h.amount}-${f}-${h.direction}-${h.payment_type}`;c.has(m)||c.set(m,[]),(g=c.get(m))==null||g.push(h)});let u=0,d=0;for(const[h,f]of c.entries())if(f.length>1){console.log(`Found ${f.length} duplicate daily logs for key: ${h}`),u+=f.length-1,f.sort((g,v)=>g.id.localeCompare(v.id));const m=f[0];console.log(`Keeping daily log ${m.id}`);for(let g=1;g<f.length;g++){const v=f[g];console.log(`Deleting duplicate daily log ${v.id}`);try{await Ge.deleteDailyLog(v.id),d++}catch(b){console.error(`Error deleting duplicate daily log ${v.id}:`,b)}}}return console.log(`Supabase daily log cleanup complete. Found ${u} duplicates, removed ${d}`),e>0||r>0||i>0||d>0}catch(e){return console.error("Error cleaning up duplicate transactions:",e),!1}},syncAll:async t=>{try{if(!On())return console.log("Offline, skipping sync"),!1;await mt.cleanupDuplicateTransactions(t),await mt.syncUserData(t),await mt.syncTransactions(t);const e=await Ee.getAllTransactions(t);for(const r of e)await mt.syncPurchases(r.id),await mt.syncTransportation(r.id),await mt.syncSales(r.id),await mt.syncPayments(r.id),await mt.syncNotes(r.id),await mt.syncAttachments(r.id);return await mt.syncDailyLogs(t),await mt.syncBuyers(t),await mt.syncSellers(t),!0}catch(e){return console.error("Error syncing all data:",e),!1}},syncCompleteTransaction:async t=>{try{return On()?await Ee.getTransaction(t)?(await mt.syncPurchases(t),await mt.syncTransportation(t),await mt.syncSales(t),await mt.syncPayments(t),await mt.syncNotes(t),await mt.syncAttachments(t),!0):(console.error("Transaction not found:",t),!1):(console.log("Offline, skipping sync"),!1)}catch(e){return console.error("Error syncing complete transaction:",e),!1}}},lw=Object.freeze(Object.defineProperty({__proto__:null,syncService:mt},Symbol.toStringTag,{value:"Module"})),HM=async t=>{try{console.log("Starting data migration...");const r=await(await Am("transactly-db",1)).getAll("transactions");console.log(`Found ${r.length} transactions to migrate`);for(const n of r)await GM(n,t);return console.log("Data migration completed successfully"),!0}catch(e){return console.error("Error migrating data:",e),!1}},GM=async(t,e)=>{try{console.log(`Migrating transaction: ${t.id}`);const r={id:t.id,user_id:e,name:t.name,status:t.status,created_at:t.updatedAt||new Date().toISOString()};if(await Ee.updateTransaction(r),t.loadBuy&&await YM(t.id,t.loadBuy),t.suppliers&&t.suppliers.length>0)for(const n of t.suppliers)await KM(t.id,n);if(t.transportation&&await JM(t.id,t.transportation),t.loadSold&&await ZM(t.id,t.loadSold),t.buyers&&t.buyers.length>0)for(const n of t.buyers)await XM(t.id,n);if(t.payments&&t.payments.length>0)for(const n of t.payments)await QM(t.id,n);if(t.notes&&t.notes.length>0)for(const n of t.notes)await eF(t.id,n);if(t.attachments&&t.attachments.length>0)for(const n of t.attachments)await tF(t.id,n);console.log(`Transaction ${t.id} migrated successfully`)}catch(r){throw console.error(`Error migrating transaction ${t.id}:`,r),r}},YM=async(t,e)=>{try{const r={id:vl(),transaction_id:t,supplier_name:e.supplierName,contact_number:e.supplierContact,goods_name:e.goodsName,quantity:e.quantity,rate:e.purchaseRate,total_cost:e.totalCost,amount_paid:e.amountPaid,balance_due:e.balance,payment_due_date:e.paymentDueDate,payment_frequency:e.paymentFrequency};await Ee.addPurchase(r)}catch(r){throw console.error(`Error migrating purchase for transaction ${t}:`,r),r}},KM=async(t,e)=>{try{const r={id:vl(),transaction_id:t,supplier_name:e.name,contact_number:e.contact,goods_name:e.goodsName,quantity:e.quantity,rate:e.purchaseRate,total_cost:e.totalCost,amount_paid:e.amountPaid,balance_due:e.balance,payment_due_date:e.paymentDueDate,payment_frequency:e.paymentFrequency};await Ee.addPurchase(r)}catch(r){throw console.error(`Error migrating supplier for transaction ${t}:`,r),r}},JM=async(t,e)=>{try{const r={id:vl(),transaction_id:t,vehicle_type:e.vehicleType,number_plate:e.vehicleNumber,empty_weight:e.emptyWeight,loaded_weight:e.loadedWeight,origin:e.origin,distance:0,departure_date:e.departureDate,departure_time:e.departureTime,expected_arrival_date:e.arrivalDate,expected_arrival_time:e.arrivalTime,transportation_charges:e.charges,notes:e.notes};await Ee.addTransportation(r)}catch(r){throw console.error(`Error migrating transportation for transaction ${t}:`,r),r}},ZM=async(t,e)=>{try{const r={id:vl(),transaction_id:t,buyer_name:e.buyerName,contact_number:e.buyerContact,quantity:e.quantitySold,rate:e.saleRate,total_amount:e.totalSaleAmount,amount_received:e.amountReceived,balance_due:e.pendingBalance,payment_due_date:e.paymentDueDate,payment_frequency:e.paymentFrequency};await Ee.addSale(r)}catch(r){throw console.error(`Error migrating sale for transaction ${t}:`,r),r}},XM=async(t,e)=>{try{const r={id:vl(),transaction_id:t,buyer_name:e.name,contact_number:e.contact,quantity:e.quantitySold,rate:e.saleRate,total_amount:e.totalSaleAmount,amount_received:e.amountReceived,balance_due:e.pendingBalance,payment_due_date:e.paymentDueDate,payment_frequency:e.paymentFrequency};await Ee.addSale(r)}catch(r){throw console.error(`Error migrating buyer for transaction ${t}:`,r),r}},QM=async(t,e)=>{try{const r={id:e.id,transaction_id:t,amount:e.amount,payment_mode:e.mode,counterparty:e.counterparty,direction:e.isIncoming?"incoming":"outgoing",payment_date:e.date,notes:e.notes,installment_number:e.installmentNumber,total_installments:e.totalInstallments};await Ee.addPayment(r)}catch(r){throw console.error(`Error migrating payment for transaction ${t}:`,r),r}},eF=async(t,e)=>{try{const r={id:e.id,transaction_id:t,note:e.content,created_at:e.date};await Ee.addTransactionNote(r)}catch(r){throw console.error(`Error migrating note for transaction ${t}:`,r),r}},tF=async(t,e)=>{try{const r={id:e.id,transaction_id:t,name:e.name,file_type:e.type,uri:e.uri,created_at:e.date};await Ee.addAttachment(r)}catch(r){throw console.error(`Error migrating attachment for transaction ${t}:`,r),r}},rF=async()=>{try{return(await Am("transactly-db",1,{upgrade(e){}})).close(),!0}catch{return!1}},Uf=async(t,e=!1)=>{try{console.log("Initializing database..."),await rF()&&(console.log("Old database found, migrating data..."),await HM(t),console.log("Data migration completed")),navigator.onLine?e?(console.log("Online, performing minimal sync with Supabase..."),await mt.syncUserData(t),setTimeout(()=>{console.log("Performing full background sync..."),mt.syncAll(t).then(()=>console.log("Background sync completed")).catch(n=>console.error("Background sync error:",n))},5e3),console.log("Minimal sync completed")):(console.log("Online, syncing with Supabase..."),await mt.syncAll(t),console.log("Full sync completed")):console.log("Offline, skipping sync"),console.log("Database initialization completed")}catch(r){throw console.error("Error initializing database:",r),r}},Vf=async(t,e,r,n,s)=>{try{await Ee.getUser(t)||(console.log("User not found in local database, creating..."),await Ee.addUser({id:t,full_name:r||e.split("@")[0],email:e,phone:n||"",business_name:s||""}),navigator.onLine&&(console.log("Online, creating user in Supabase..."),await Ge.getCurrentUser()||await Ge.createUserProfile({id:t,full_name:r||e.split("@")[0],email:e,phone:n||"",business_name:s||""})))}catch(a){throw console.error("Error ensuring user profile:",a),a}},Oj=w.createContext(void 0),Ij=({children:t})=>{const[e,r]=w.useState(null),[n,s]=w.useState(null),[a,i]=w.useState(!0),{toast:l}=Xt();w.useEffect(()=>{(async()=>{try{const{data:{subscription:S}}=We.auth.onAuthStateChange(async(W,I)=>{s(I),r((I==null?void 0:I.user)||null)}),N=setTimeout(()=>{console.log("Auth initialization timed out after 10 seconds"),i(!1)},1e4),{data:{session:k},error:A}=await We.auth.getSession();if(A)console.error("Error retrieving session:",A);else if(s(k),r((k==null?void 0:k.user)||null),k!=null&&k.user)try{const W=k.user.user_metadata||{};await Vf(k.user.id,k.user.email||"",W.full_name,W.phone,W.business_name),await Uf(k.user.id,!0)}catch(W){console.error("Error initializing database:",W)}return clearTimeout(N),()=>{S.unsubscribe(),clearTimeout(N)}}catch(S){console.error("Auth initialization error:",S)}finally{i(!1)}})()},[]);const c=async(_,S)=>{try{if(i(!0),_==="admin@gmail.com"&&S==="123456"){console.log("Using demo login credentials");const A={id:"demo-user-id",email:"admin@gmail.com",app_metadata:{},user_metadata:{full_name:"Demo Admin",phone:"+1234567890",business_name:"Demo Business"},aud:"authenticated",created_at:new Date().toISOString(),role:"authenticated",updated_at:new Date().toISOString()};r(A);const W={access_token:"demo-access-token",refresh_token:"demo-refresh-token",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer",user:A};s(W);try{await Vf(A.id,A.email,A.user_metadata.full_name,A.user_metadata.phone,A.user_metadata.business_name),await Uf(A.id,!0)}catch(I){console.error("Error initializing database for demo user:",I)}l({title:"Demo Login Successful!",description:"You are now logged in with demo credentials."});return}const{data:N,error:k}=await We.auth.signInWithPassword({email:_,password:S});if(k)throw k;if(N.user)try{const A=N.user.user_metadata||{};await Vf(N.user.id,N.user.email||"",A.full_name,A.phone,A.business_name),await Uf(N.user.id,!0)}catch(A){console.error("Error initializing database:",A)}l({title:"Welcome back!",description:"You have successfully signed in."})}catch(N){throw console.error("Sign in error:",N),l({title:"Sign in failed",description:N.message||"Could not sign in. Please try again.",variant:"destructive"}),N}finally{i(!1)}},u=async(_,S,N,k)=>{try{i(!0);const A={email:_,password:S,options:{data:{full_name:N||"",phone:k||""}}},{data:W,error:I}=await We.auth.signUp(A);if(I)throw I;if(W.user)try{await Vf(W.user.id,_,N,k),await Uf(W.user.id,!0)}catch(F){console.error("Error initializing database:",F)}l({title:"Account created",description:"Please check your email to confirm your account."})}catch(A){throw console.error("Sign up error:",A),l({title:"Sign up failed",description:A.message||"Could not create account. Please try again.",variant:"destructive"}),A}finally{i(!1)}},d=async()=>{try{i(!0),await We.auth.signOut(),l({title:"Signed out",description:"You have been successfully signed out."})}catch(_){throw console.error("Sign out error:",_),l({title:"Sign out failed",description:_.message||"Could not sign out. Please try again.",variant:"destructive"}),_}finally{i(!1)}},h=async _=>{try{i(!0);const S=window.location.origin,{error:N}=await We.auth.resetPasswordForEmail(_,{redirectTo:`${S}/reset-password`});if(N)throw N;l({title:"Password reset email sent",description:"Check your inbox for a password reset link."})}catch(S){throw console.error("Password reset error:",S),l({title:"Password reset failed",description:S.message||"Could not send reset email. Please try again.",variant:"destructive"}),S}finally{i(!1)}},f=async _=>{try{i(!0);const{error:S}=await We.auth.updateUser({password:_});if(S)throw S;l({title:"Password updated",description:"Your password has been successfully updated."})}catch(S){throw console.error("Password update error:",S),l({title:"Password update failed",description:S.message||"Could not update password. Please try again.",variant:"destructive"}),S}finally{i(!1)}},m=async _=>{try{i(!0);const S={},N={};if(_.name&&(N.full_name=_.name),_.phone&&(N.phone=_.phone),_.business_name&&(N.business_name=_.business_name),Object.keys(N).length>0){const k=(e==null?void 0:e.user_metadata)||{};S.data={...k,...N}}if(_.email&&(S.email=_.email),Object.keys(S).length>0){const{error:k}=await We.auth.updateUser(S);if(k)throw k;l({title:"Profile updated",description:"Your profile has been successfully updated."})}}catch(S){throw console.error("Profile update error:",S),l({title:"Profile update failed",description:S.message||"Could not update profile. Please try again.",variant:"destructive"}),S}finally{i(!1)}},g=async _=>{try{return console.log(`Sending OTP to ${_}`),i(!0),setTimeout(()=>{l({title:"OTP Sent",description:"A verification code has been sent to your phone."})},1e3),Promise.resolve()}catch(S){throw console.error("Phone sign in error:",S),l({title:"Sign in failed",description:S.message||"Could not send verification code. Please try again.",variant:"destructive"}),S}finally{i(!1)}},v=async(_,S)=>{try{if(i(!0),S.length===6){const N=`${_.replace(/\D/g,"")}@example.com`;return await c(N,"phone-auth-password"),Promise.resolve()}else throw new Error("Invalid verification code")}catch(N){throw console.error("OTP verification error:",N),l({title:"Verification failed",description:N.message||"Could not verify code. Please try again.",variant:"destructive"}),N}finally{i(!1)}},b=async _=>{try{return console.log(`Resending OTP to ${_}`),i(!0),setTimeout(()=>{l({title:"OTP Resent",description:"A new verification code has been sent to your phone."})},1e3),Promise.resolve()}catch(S){throw console.error("Resend OTP error:",S),l({title:"Failed to resend code",description:S.message||"Could not resend verification code. Please try again.",variant:"destructive"}),S}finally{i(!1)}};return o.jsx(Oj.Provider,{value:{user:e,session:n,isLoading:a,signIn:c,signUp:u,signOut:d,resetPassword:h,updatePassword:f,updateProfile:m,signInWithPhone:g,verifyOTP:v,resendOTP:b},children:t})},_r=()=>{const t=w.useContext(Oj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},nF=()=>{const{user:t,signOut:e}=_r(),[r,n]=w.useState(!1),[s,a]=w.useState(!1),[i,l]=w.useState([]),c=v=>{l(b=>[...b,v]),console.log(v)},u=async()=>{n(!0),c("Starting to fix application issues...");try{c("Clearing localStorage..."),localStorage.clear(),c("Clearing sessionStorage..."),sessionStorage.clear(),c("Clearing IndexedDB..."),await d(),c("Clearing service worker caches..."),await h(),c("Unregistering service workers..."),await f(),c("All issues fixed successfully!"),a(!0)}catch(v){c(`Error fixing issues: ${v instanceof Error?v.message:String(v)}`)}finally{n(!1)}},d=async()=>new Promise((v,b)=>{try{const _=["app-db","buyers-db","sellers-db","transactions-db","daily-logs-db"];let S=0,N=!1;_.forEach(k=>{try{const A=indexedDB.deleteDatabase(k);A.onsuccess=function(){c(`Database ${k} deleted successfully`),S++,S===_.length&&!N&&v()},A.onerror=function(W){c(`Error deleting database ${k}`),N=!0,b(new Error(`Error deleting database ${k}`))}}catch(A){c(`Error attempting to delete database ${k}`),N=!0,b(A)}}),_.length===0&&v()}catch(_){b(_)}}),h=async()=>{if("caches"in window)try{const v=await caches.keys();await Promise.all(v.map(b=>(c(`Deleting cache ${b}`),caches.delete(b))))}catch(v){c(`Error clearing caches: ${v instanceof Error?v.message:String(v)}`)}},f=async()=>{if("serviceWorker"in navigator)try{const v=await navigator.serviceWorker.getRegistrations();await Promise.all(v.map(b=>(c("Unregistering service worker"),b.unregister())))}catch(v){c(`Error unregistering service workers: ${v instanceof Error?v.message:String(v)}`)}},m=()=>{window.location.href="/"},g=async()=>{try{await e(),window.location.href="/auth"}catch(v){c(`Error signing out: ${v instanceof Error?v.message:String(v)}`)}};return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:o.jsxs(Wt,{className:"w-full max-w-md",children:[o.jsx(Jt,{className:"bg-yellow-50 border-b border-yellow-100",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fS,{className:"h-6 w-6 text-yellow-500"}),o.jsx(er,{children:"Safe Mode"})]})}),o.jsxs(zt,{className:"pt-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"The application is running in safe mode due to an error. This mode provides limited functionality to help recover from issues."}),t?o.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Logged in as: ",t.email]}):o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Not logged in"}),o.jsxs("div",{className:"space-y-4",children:[s?o.jsxs("div",{className:"p-3 bg-green-50 text-green-700 rounded-md flex items-center gap-2",children:[o.jsx(dp,{className:"h-5 w-5"}),o.jsx("span",{children:"Issues fixed successfully!"})]}):o.jsx(me,{className:"w-full",onClick:u,disabled:r,children:r?o.jsxs(o.Fragment,{children:[o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}),"Fixing Issues..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ua,{className:"mr-2 h-4 w-4"}),"Fix Application Issues"]})}),o.jsxs(me,{variant:"outline",className:"w-full",onClick:m,children:[o.jsx(vT,{className:"mr-2 h-4 w-4"}),"Return to Application"]}),o.jsx(me,{variant:"ghost",className:"w-full",onClick:g,children:"Sign Out"})]}),i.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("h3",{className:"text-sm font-medium mb-2",children:"Logs:"}),o.jsx("div",{className:"bg-gray-100 p-2 rounded-md max-h-40 overflow-y-auto text-xs font-mono",children:i.map((v,b)=>o.jsx("div",{className:"py-1",children:v},b))})]})]})]})})},sF=()=>{const[t,e]=w.useState(null),[r,n]=w.useState([]),[s,a]=w.useState(!1),[i,l]=w.useState(null),c=g=>{console.log(g),n(v=>[...v,g])};w.useEffect(()=>{new URLSearchParams(window.location.search).get("fallback")},[]);const u=()=>{try{localStorage.clear(),c("Local storage cleared successfully")}catch(g){const v=g instanceof Error?g.message:String(g);c(`Error clearing local storage: ${v}`)}},d=async()=>{try{c("Attempting to clear IndexedDB...");const g=await window.indexedDB.databases();if(g.length===0){c("No IndexedDB databases found");return}let v=0,b=0;for(const _ of g)try{await new Promise((S,N)=>{const k=window.indexedDB.deleteDatabase(_.name||"");k.onsuccess=()=>S(),k.onerror=()=>N(new Error(`Failed to delete database ${_.name}`))}),c(`Deleted database: ${_.name}`),v++}catch(S){const N=S instanceof Error?S.message:String(S);c(`Error deleting database ${_.name}: ${N}`),b++}c(`IndexedDB cleanup: ${v} databases deleted, ${b} failed`)}catch(g){const v=g instanceof Error?g.message:String(g);c(`Error clearing IndexedDB: ${v}`)}},h=async()=>{if(!i){c("Not authenticated, cannot fix tables");return}a(!0);try{c("Fixing buyers and sellers tables..."),c("Checking buyers table...");try{const{error:g}=await We.from("buyers").select("id").limit(1);if(g&&g.message.includes("does not exist")){c("Buyers table does not exist, creating it...");const v=`
            CREATE TABLE IF NOT EXISTS public.buyers (
              id TEXT PRIMARY KEY,
              user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
              name TEXT NOT NULL,
              email TEXT,
              phone TEXT,
              created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
            );

            ALTER TABLE public.buyers ENABLE ROW LEVEL SECURITY;

            CREATE POLICY "Users can manage their own buyers"
              ON public.buyers
              USING (user_id = auth.uid());

            GRANT SELECT, INSERT, UPDATE, DELETE ON public.buyers TO authenticated;
          `,{error:b}=await We.rpc("execute_sql",{sql_query:v});c(b?`Error creating buyers table: ${b.message}`:"Successfully created buyers table")}else if(g)c(`Error checking buyers table: ${g.message}`);else{c("Buyers table exists, checking for created_at column...");const v=`
            DO $$
            BEGIN
              BEGIN
                ALTER TABLE public.buyers ADD COLUMN created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL;
              EXCEPTION
                WHEN duplicate_column THEN
                  -- Column already exists, do nothing
                WHEN others THEN
                  RAISE;
              END;
            END
            $$;
          `,{error:b}=await We.rpc("execute_sql",{sql_query:v});c(b?`Error adding created_at column to buyers table: ${b.message}`:"Successfully ensured created_at column exists in buyers table")}}catch(g){const v=g instanceof Error?g.message:String(g);c(`Unexpected error checking buyers table: ${v}`)}c("Checking sellers table...");try{const{error:g}=await We.from("sellers").select("id").limit(1);if(g&&g.message.includes("does not exist")){c("Sellers table does not exist, creating it...");const v=`
            CREATE TABLE IF NOT EXISTS public.sellers (
              id TEXT PRIMARY KEY,
              user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
              name TEXT NOT NULL,
              email TEXT,
              phone TEXT,
              created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
            );

            ALTER TABLE public.sellers ENABLE ROW LEVEL SECURITY;

            CREATE POLICY "Users can manage their own sellers"
              ON public.sellers
              USING (user_id = auth.uid());

            GRANT SELECT, INSERT, UPDATE, DELETE ON public.sellers TO authenticated;
          `,{error:b}=await We.rpc("execute_sql",{sql_query:v});c(b?`Error creating sellers table: ${b.message}`:"Successfully created sellers table")}else if(g)c(`Error checking sellers table: ${g.message}`);else{c("Sellers table exists, checking for created_at column...");const v=`
            DO $$
            BEGIN
              BEGIN
                ALTER TABLE public.sellers ADD COLUMN created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL;
              EXCEPTION
                WHEN duplicate_column THEN
                  -- Column already exists, do nothing
                WHEN others THEN
                  RAISE;
              END;
            END
            $$;
          `,{error:b}=await We.rpc("execute_sql",{sql_query:v});c(b?`Error adding created_at column to sellers table: ${b.message}`:"Successfully ensured created_at column exists in sellers table")}}catch(g){const v=g instanceof Error?g.message:String(g);c(`Unexpected error checking sellers table: ${v}`)}c("Table fixes completed")}catch(g){const v=g instanceof Error?g.message:String(g);c(`Error fixing tables: ${v}`)}finally{a(!1)}};return new URLSearchParams(window.location.search).get("fallback")==="true"?o.jsx("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif',maxWidth:"800px",margin:"0 auto",padding:"20px"},children:o.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[o.jsx("h1",{style:{marginTop:0},children:"Application Recovery"}),t&&o.jsxs("div",{style:{backgroundColor:"#fee2e2",color:"#ef4444",padding:"10px",borderRadius:"4px",marginBottom:"20px"},children:[o.jsx("strong",{children:"Error:"})," ",t]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h2",{children:"1. Authentication Status"}),i?o.jsxs("p",{style:{color:"#10b981"},children:["✅ Authenticated as ",i.email]}):o.jsx("p",{style:{color:"#ef4444"},children:"❌ Not authenticated"})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h2",{children:"2. Recovery Actions"}),o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"10px"},children:[o.jsx("button",{onClick:u,style:{backgroundColor:"#4f46e5",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer"},children:"Clear Local Storage"}),o.jsx("button",{onClick:d,style:{backgroundColor:"#4f46e5",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer"},children:"Clear IndexedDB"}),o.jsx("button",{onClick:h,disabled:s||!i,style:{backgroundColor:i?"#10b981":"#d1d5db",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:i?"pointer":"not-allowed"},children:s?"Fixing Tables...":"Fix Database Tables"})]})]}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("h2",{children:"3. Return to Application"}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsx("a",{href:"/",style:{backgroundColor:"#4f46e5",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer",textDecoration:"none",display:"inline-block"},children:"Return to App"}),o.jsx("a",{href:"/login",style:{backgroundColor:"#4f46e5",color:"white",border:"none",padding:"10px 15px",borderRadius:"4px",cursor:"pointer",textDecoration:"none",display:"inline-block"},children:"Go to Login"})]})]}),o.jsxs("div",{children:[o.jsx("h2",{children:"4. Logs"}),o.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"10px",borderRadius:"4px",maxHeight:"300px",overflowY:"auto",fontFamily:"monospace",fontSize:"14px",whiteSpace:"pre-wrap"},children:r.map((g,v)=>o.jsx("div",{children:g},v))})]})]})}):null},Cr=()=>navigator.onLine,Br={getAllTransactions:async t=>{try{const e=await Ee.getAllTransactions(t);if(Cr())try{return console.log("Syncing transactions with Supabase..."),await mt.syncTransactions(t)?(console.log("Sync successful, fetching updated transactions"),await Ee.getAllTransactions(t)):(console.log("Sync was not successful, using local transactions"),e)}catch(r){return console.error("Error syncing transactions:",r),e}return e}catch(e){return console.error("Error getting all transactions:",e),[]}},getTransaction:async t=>{try{const e=await Ee.getTransaction(t);if(Cr()&&e)try{return await mt.syncCompleteTransaction(t),await Ee.getTransaction(t)}catch(r){return console.error("Error syncing transaction:",r),e}return e}catch(e){return console.error("Error getting transaction:",e),null}},getCompleteTransaction:async t=>{try{const e=await Ee.getCompleteTransaction(t);if(Cr()&&e)try{return await mt.syncCompleteTransaction(t),await Ee.getCompleteTransaction(t)}catch(r){return console.error("Error syncing complete transaction:",r),e}return e}catch(e){return console.error("Error getting complete transaction:",e),null}},createTransaction:async(t,e)=>{try{console.log(`Creating new transaction for user ${t} with name: ${e}`);const r={user_id:t,name:e,status:"pending",created_at:new Date().toISOString()},s=(await Ee.getAllTransactions(t)).find(i=>i.name===e&&new Date(i.created_at||"").toDateString()===new Date().toDateString());if(s)return console.log(`Found duplicate transaction with name ${e}, returning existing transaction`),s;const a=await Ee.addTransaction(r);if(console.log(`Created new transaction with ID: ${a.id}`),Cr())try{console.log(`Syncing new transaction ${a.id} to Supabase`),await Ge.createTransaction(a),console.log(`Successfully synced transaction ${a.id} to Supabase`)}catch(i){console.error("Error syncing new transaction to Supabase:",i)}return a}catch(r){return console.error("Error creating transaction:",r),null}},updateTransaction:async t=>{try{const e=await Ee.updateTransaction(t);if(Cr())try{await Ge.updateTransaction(t)}catch(r){console.error("Error syncing updated transaction to Supabase:",r)}return e}catch(e){return console.error("Error updating transaction:",e),null}},deleteTransaction:async t=>{try{if(await Ee.deleteTransaction(t),Cr())try{await Ge.deleteTransaction(t)}catch(e){console.error("Error syncing deleted transaction to Supabase:",e)}return!0}catch(e){return console.error("Error deleting transaction:",e),!1}},addPurchase:async t=>{try{const e=await Ee.addPurchase(t);if(Cr())try{await Ge.createPurchase(e)}catch(r){console.error("Error syncing new purchase to Supabase:",r)}return e}catch(e){return console.error("Error adding purchase:",e),null}},updatePurchase:async t=>{try{const e=await Ee.updatePurchase(t);if(Cr())try{await Ge.updatePurchase(t)}catch(r){console.error("Error syncing updated purchase to Supabase:",r)}return e}catch(e){return console.error("Error updating purchase:",e),null}},deletePurchase:async t=>{try{if(await Ee.deletePurchase(t),Cr())try{await Ge.deletePurchase(t)}catch(e){console.error("Error syncing deleted purchase to Supabase:",e)}return!0}catch(e){return console.error("Error deleting purchase:",e),!1}},saveTransportation:async t=>{try{let e;console.log("Saving transportation:",t);const r={...t};if("id"in r){if(console.log("Updating existing transportation with ID:",r.id),e=await Ee.updateTransportation(r),console.log("Transportation updated in local database:",e),Cr())try{console.log("Syncing updated transportation to Supabase...");const n=await Ge.updateTransportation(r);console.log("Supabase update result:",n),await mt.syncTransportation(r.transaction_id)}catch(n){console.error("Error syncing updated transportation to Supabase:",n)}}else{console.log("Adding new transportation for transaction:",r.transaction_id);const n={...r,id:vl()};if(e=await Ee.addTransportation(n),console.log("Transportation added to local database:",e),Cr())try{console.log("Syncing new transportation to Supabase...");const s=await Ge.createTransportation(n);console.log("Supabase create result:",s),s?(await Ee.updateTransportation(s),console.log("Updated local transportation with Supabase data"),e=s):await mt.syncTransportation(r.transaction_id)}catch(s){console.error("Error syncing new transportation to Supabase:",s)}}return e}catch(e){return console.error("Error saving transportation:",e),null}},deleteTransportation:async t=>{try{if(await Ee.deleteTransportation(t),Cr())try{await Ge.deleteTransportation(t)}catch(e){console.error("Error syncing deleted transportation to Supabase:",e)}return!0}catch(e){return console.error("Error deleting transportation:",e),!1}},addSale:async t=>{try{const e=await Ee.addSale(t);if(Cr())try{await Ge.createSale(e)}catch(r){console.error("Error syncing new sale to Supabase:",r)}return e}catch(e){return console.error("Error adding sale:",e),null}},updateSale:async t=>{try{const e=await Ee.updateSale(t);if(Cr())try{await Ge.updateSale(t)}catch(r){console.error("Error syncing updated sale to Supabase:",r)}return e}catch(e){return console.error("Error updating sale:",e),null}},deleteSale:async t=>{try{if(await Ee.deleteSale(t),Cr())try{await Ge.deleteSale(t)}catch(e){console.error("Error syncing deleted sale to Supabase:",e)}return!0}catch(e){return console.error("Error deleting sale:",e),!1}},addPayment:async t=>{try{const e=await Ee.addPayment(t);if(Cr())try{await Ge.createPayment(e)}catch(r){console.error("Error syncing new payment to Supabase:",r)}return e}catch(e){return console.error("Error adding payment:",e),null}},updatePayment:async t=>{try{const e=await Ee.updatePayment(t);if(Cr())try{await Ge.updatePayment(t)}catch(r){console.error("Error syncing updated payment to Supabase:",r)}return e}catch(e){return console.error("Error updating payment:",e),null}},deletePayment:async t=>{try{if(await Ee.deletePayment(t),Cr())try{await Ge.deletePayment(t)}catch(e){console.error("Error syncing deleted payment to Supabase:",e)}return!0}catch(e){return console.error("Error deleting payment:",e),!1}},addNote:async(t,e)=>{try{const r={transaction_id:t,note:e},n=await Ee.addTransactionNote(r);if(Cr())try{await Ge.createNote(n)}catch(s){console.error("Error syncing new note to Supabase:",s)}return n}catch(r){return console.error("Error adding note:",r),null}},updateNote:async t=>{try{const e=await Ee.updateTransactionNote(t);if(Cr())try{await Ge.updateNote(t)}catch(r){console.error("Error syncing updated note to Supabase:",r)}return e}catch(e){return console.error("Error updating note:",e),null}},deleteNote:async t=>{try{if(await Ee.deleteTransactionNote(t),Cr())try{await Ge.deleteNote(t)}catch(e){console.error("Error syncing deleted note to Supabase:",e)}return!0}catch(e){return console.error("Error deleting note:",e),!1}},addAttachment:async(t,e,r,n,s)=>{try{console.log(`Adding attachment for transaction ${t}, user ${e}`);let a=URL.createObjectURL(r),i=!1;if(Cr())try{console.log(`Uploading file to Supabase storage: ${n}`);const u=await Ge.uploadAttachmentFile(e,r,`${Date.now()}_${n}`);u?(console.log(`File uploaded successfully, got URL: ${u}`),a=u,i=!0):console.warn("Upload returned null URL, using local URL as fallback")}catch(u){console.error("Error uploading attachment to Supabase storage:",u),console.log("Using local URL as fallback")}else console.log("Offline, using local URL for attachment");const l={transaction_id:t,name:n,file_type:s,uri:a};console.log("Saving attachment to local database:",l);const c=await Ee.addAttachment(l);if(console.log("Attachment saved to local database:",c),Cr())try{console.log("Syncing attachment metadata to Supabase"),await Ge.createAttachment(c),console.log("Attachment metadata synced to Supabase"),i||(console.log("Attempting to sync attachment specifically"),await mt.syncAttachments(t))}catch(u){console.error("Error syncing new attachment to Supabase:",u)}return c}catch(a){return console.error("Error adding attachment:",a),null}},deleteAttachment:async t=>{try{const e=await Ee.getAttachment(t);if(await Ee.deleteAttachment(t),Cr())try{await Ge.deleteAttachment(t)}catch(r){console.error("Error syncing deleted attachment to Supabase:",r)}return!0}catch(e){return console.error("Error deleting attachment:",e),!1}},syncTransaction:async t=>{try{return Cr()?await mt.syncCompleteTransaction(t):(console.log("Offline, skipping sync"),!1)}catch(e){return console.error("Error syncing transaction:",e),!1}},getSyncStatus:async()=>{try{return(await mt.getSyncStatus()).isAllSynced}catch(t){return console.error("Error getting sync status:",t),!1}}},aF=()=>{const[t,e]=w.useState([]),[r,n]=w.useState([]),[s,a]=w.useState(!0),[i,l]=w.useState(""),[c,u]=w.useState(null),{toast:d}=Xt(),{user:h}=_r(),f=async()=>{try{if(!(h!=null&&h.id))return;a(!0),console.log("Loading transactions for user:",h.id);const g=await Br.getAllTransactions(h.id);console.log(`Loaded ${g.length} transactions:`,g.map(b=>({id:b.id,name:b.name})));const v=m(g);v.length!==g.length&&console.log(`Removed ${g.length-v.length} duplicate transactions`),e(v),n(v)}catch(g){console.error("Failed to load transactions:",g),d({title:"Error",description:"Failed to load transactions",variant:"destructive"})}finally{a(!1)}},m=g=>{const v=new Set;return g.filter(b=>v.has(b.id)?!1:(v.add(b.id),!0))};return w.useEffect(()=>{let g=t;if(c&&(g=g.filter(v=>v.status===c)),i.trim()){const v=i.toLowerCase();v==="pending"||v==="pending transaction"?g=g.filter(b=>b.status==="pending"):v==="completed"||v==="success"||v==="successful"||v==="successful transaction"?g=g.filter(b=>b.status==="completed"):v==="cancelled"||v==="canceled"||v==="cancelled transaction"?g=g.filter(b=>b.status==="cancelled"):g=g.filter(b=>{var _;return((_=b.name)==null?void 0:_.toLowerCase().includes(v))||b.id.toLowerCase().includes(v)})}n(g)},[i,c,t]),w.useEffect(()=>{h&&f()},[h]),{transactions:t,filteredTransactions:r,loading:s,searchQuery:i,setSearchQuery:l,statusFilter:c,setStatusFilter:u,loadTransactions:f}};var Cx="Avatar",[iF,rG]=Ya(Cx),[oF,Mj]=iF(Cx),Fj=w.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,a]=w.useState("idle");return o.jsx(oF,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(Ut.span,{...n,ref:e})})});Fj.displayName=Cx;var Bj="AvatarImage",$j=w.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=t,i=Mj(Bj,r),l=lF(n,a.referrerPolicy),c=ph(u=>{s(u),i.onImageLoadingStatusChange(u)});return bs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Ut.img,{...a,ref:e,src:n}):null});$j.displayName=Bj;var Uj="AvatarFallback",Vj=w.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,a=Mj(Uj,r),[i,l]=w.useState(n===void 0);return w.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&a.imageLoadingStatus!=="loaded"?o.jsx(Ut.span,{...s,ref:e}):null});Vj.displayName=Uj;function lF(t,e){const[r,n]=w.useState("idle");return bs(()=>{if(!t){n("error");return}let s=!0;const a=new window.Image,i=l=>()=>{s&&n(l)};return n("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{s=!1}},[t,e]),r}var qj=Fj,zj=$j,Wj=Vj;const Rd=w.forwardRef(({className:t,...e},r)=>o.jsx(qj,{ref:r,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Rd.displayName=qj.displayName;const jp=w.forwardRef(({className:t,...e},r)=>o.jsx(zj,{ref:r,className:Ve("aspect-square h-full w-full",t),...e}));jp.displayName=zj.displayName;const Od=w.forwardRef(({className:t,...e},r)=>o.jsx(Wj,{ref:r,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Od.displayName=Wj.displayName;var Dv=["Enter"," "],cF=["ArrowDown","PageUp","Home"],Hj=["ArrowUp","PageDown","End"],uF=[...cF,...Hj],dF={ltr:[...Dv,"ArrowRight"],rtl:[...Dv,"ArrowLeft"]},hF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Nh="Menu",[Id,fF,pF]=N5(Nh),[xl,Gj]=Ya(Nh,[pF,jo,eu]),Pm=jo(),Yj=eu(),[mF,bl]=xl(Nh),[gF,Ch]=xl(Nh),Kj=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:a,modal:i=!0}=t,l=Pm(e),[c,u]=w.useState(null),d=w.useRef(!1),h=ph(a),f=Qp(s);return w.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(fm,{...l,children:o.jsx(mF,{scope:e,open:r,onOpenChange:h,content:c,onContentChange:u,children:o.jsx(gF,{scope:e,onClose:w.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:i,children:n})})})};Kj.displayName=Nh;var yF="MenuAnchor",kx=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Pm(r);return o.jsx(bh,{...s,...n,ref:e})});kx.displayName=yF;var Ax="MenuPortal",[vF,Jj]=xl(Ax,{forceMount:void 0}),Zj=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,a=bl(Ax,e);return o.jsx(vF,{scope:e,forceMount:r,children:o.jsx(So,{present:r||a.open,children:o.jsx(g0,{asChild:!0,container:s,children:n})})})};Zj.displayName=Ax;var Ms="MenuContent",[xF,Px]=xl(Ms),Xj=w.forwardRef((t,e)=>{const r=Jj(Ms,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=bl(Ms,t.__scopeMenu),i=Ch(Ms,t.__scopeMenu);return o.jsx(Id.Provider,{scope:t.__scopeMenu,children:o.jsx(So,{present:n||a.open,children:o.jsx(Id.Slot,{scope:t.__scopeMenu,children:i.modal?o.jsx(bF,{...s,ref:e}):o.jsx(wF,{...s,ref:e})})})})}),bF=w.forwardRef((t,e)=>{const r=bl(Ms,t.__scopeMenu),n=w.useRef(null),s=Sr(e,n);return w.useEffect(()=>{const a=n.current;if(a)return u0(a)},[]),o.jsx(Ex,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ht(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),wF=w.forwardRef((t,e)=>{const r=bl(Ms,t.__scopeMenu);return o.jsx(Ex,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Ex=w.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:g,...v}=t,b=bl(Ms,r),_=Ch(Ms,r),S=Pm(r),N=Yj(r),k=fF(r),[A,W]=w.useState(null),I=w.useRef(null),F=Sr(e,I,b.onContentChange),ee=w.useRef(0),ae=w.useRef(""),R=w.useRef(0),D=w.useRef(null),T=w.useRef("right"),B=w.useRef(0),z=g?m0:w.Fragment,re=g?{as:mh,allowPinchZoom:!0}:void 0,$=X=>{var ne,oe;const he=ae.current+X,je=k().filter(ce=>!ce.disabled),L=document.activeElement,G=(ne=je.find(ce=>ce.ref.current===L))==null?void 0:ne.textValue,Z=je.map(ce=>ce.textValue),se=DF(Z,he,G),H=(oe=je.find(ce=>ce.textValue===se))==null?void 0:oe.ref.current;(function ce(ve){ae.current=ve,window.clearTimeout(ee.current),ve!==""&&(ee.current=window.setTimeout(()=>ce(""),1e3))})(he),H&&setTimeout(()=>H.focus())};w.useEffect(()=>()=>window.clearTimeout(ee.current),[]),d0();const V=w.useCallback(X=>{var je,L;return T.current===((je=D.current)==null?void 0:je.side)&&OF(X,(L=D.current)==null?void 0:L.area)},[]);return o.jsx(xF,{scope:r,searchRef:ae,onItemEnter:w.useCallback(X=>{V(X)&&X.preventDefault()},[V]),onItemLeave:w.useCallback(X=>{var he;V(X)||((he=I.current)==null||he.focus(),W(null))},[V]),onTriggerLeave:w.useCallback(X=>{V(X)&&X.preventDefault()},[V]),pointerGraceTimerRef:R,onPointerGraceIntentChange:w.useCallback(X=>{D.current=X},[]),children:o.jsx(z,{...re,children:o.jsx(h0,{asChild:!0,trapped:s,onMountAutoFocus:ht(a,X=>{var he;X.preventDefault(),(he=I.current)==null||he.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:o.jsx(f0,{asChild:!0,...N,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:A,onCurrentTabStopIdChange:W,onEntryFocus:ht(c,X=>{_.isUsingKeyboardRef.current||X.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(pm,{role:"menu","aria-orientation":"vertical","data-state":pN(b.open),"data-radix-menu-content":"",dir:_.dir,...S,...v,ref:F,style:{outline:"none",...v.style},onKeyDown:ht(v.onKeyDown,X=>{const je=X.target.closest("[data-radix-menu-content]")===X.currentTarget,L=X.ctrlKey||X.altKey||X.metaKey,G=X.key.length===1;je&&(X.key==="Tab"&&X.preventDefault(),!L&&G&&$(X.key));const Z=I.current;if(X.target!==Z||!uF.includes(X.key))return;X.preventDefault();const H=k().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);Hj.includes(X.key)&&H.reverse(),TF(H)}),onBlur:ht(t.onBlur,X=>{X.currentTarget.contains(X.target)||(window.clearTimeout(ee.current),ae.current="")}),onPointerMove:ht(t.onPointerMove,Md(X=>{const he=X.target,je=B.current!==X.clientX;if(X.currentTarget.contains(he)&&je){const L=X.clientX>B.current?"right":"left";T.current=L,B.current=X.clientX}}))})})})})})})});Xj.displayName=Ms;var SF="MenuGroup",Tx=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ut.div,{role:"group",...n,ref:e})});Tx.displayName=SF;var _F="MenuLabel",Qj=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ut.div,{...n,ref:e})});Qj.displayName=_F;var Np="MenuItem",cw="menu.itemSelect",Em=w.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,a=w.useRef(null),i=Ch(Np,t.__scopeMenu),l=Px(Np,t.__scopeMenu),c=Sr(e,a),u=w.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const f=new CustomEvent(cw,{bubbles:!0,cancelable:!0});h.addEventListener(cw,m=>n==null?void 0:n(m),{once:!0}),CA(h,f),f.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(eN,{...s,ref:c,disabled:r,onClick:ht(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:ht(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:ht(t.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||Dv.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Em.displayName=Np;var eN=w.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=t,i=Px(Np,r),l=Yj(r),c=w.useRef(null),u=Sr(e,c),[d,h]=w.useState(!1),[f,m]=w.useState("");return w.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[a.children]),o.jsx(Id.ItemSlot,{scope:r,disabled:n,textValue:s??f,children:o.jsx(p0,{asChild:!0,...l,focusable:!n,children:o.jsx(Ut.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:ht(t.onPointerMove,Md(g=>{n?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ht(t.onPointerLeave,Md(g=>i.onItemLeave(g))),onFocus:ht(t.onFocus,()=>h(!0)),onBlur:ht(t.onBlur,()=>h(!1))})})})}),jF="MenuCheckboxItem",tN=w.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(iN,{scope:t.__scopeMenu,checked:r,children:o.jsx(Em,{role:"menuitemcheckbox","aria-checked":Cp(r)?"mixed":r,...s,ref:e,"data-state":Dx(r),onSelect:ht(s.onSelect,()=>n==null?void 0:n(Cp(r)?!0:!r),{checkForDefaultPrevented:!1})})})});tN.displayName=jF;var rN="MenuRadioGroup",[NF,CF]=xl(rN,{value:void 0,onValueChange:()=>{}}),nN=w.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,a=ph(n);return o.jsx(NF,{scope:t.__scopeMenu,value:r,onValueChange:a,children:o.jsx(Tx,{...s,ref:e})})});nN.displayName=rN;var sN="MenuRadioItem",aN=w.forwardRef((t,e)=>{const{value:r,...n}=t,s=CF(sN,t.__scopeMenu),a=r===s.value;return o.jsx(iN,{scope:t.__scopeMenu,checked:a,children:o.jsx(Em,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":Dx(a),onSelect:ht(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});aN.displayName=sN;var Lx="MenuItemIndicator",[iN,kF]=xl(Lx,{checked:!1}),oN=w.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,a=kF(Lx,r);return o.jsx(So,{present:n||Cp(a.checked)||a.checked===!0,children:o.jsx(Ut.span,{...s,ref:e,"data-state":Dx(a.checked)})})});oN.displayName=Lx;var AF="MenuSeparator",lN=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ut.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});lN.displayName=AF;var PF="MenuArrow",cN=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Pm(r);return o.jsx(mm,{...s,...n,ref:e})});cN.displayName=PF;var EF="MenuSub",[nG,uN]=xl(EF),td="MenuSubTrigger",dN=w.forwardRef((t,e)=>{const r=bl(td,t.__scopeMenu),n=Ch(td,t.__scopeMenu),s=uN(td,t.__scopeMenu),a=Px(td,t.__scopeMenu),i=w.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=w.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return w.useEffect(()=>d,[d]),w.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),o.jsx(kx,{asChild:!0,...u,children:o.jsx(eN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":pN(r.open),...t,ref:C5(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ht(t.onPointerMove,Md(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ht(t.onPointerLeave,Md(h=>{var m,g;d();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const v=(g=r.content)==null?void 0:g.dataset.side,b=v==="right",_=b?-5:5,S=f[b?"left":"right"],N=f[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+_,y:h.clientY},{x:S,y:f.top},{x:N,y:f.top},{x:N,y:f.bottom},{x:S,y:f.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ht(t.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";t.disabled||f&&h.key===" "||dF[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});dN.displayName=td;var hN="MenuSubContent",fN=w.forwardRef((t,e)=>{const r=Jj(Ms,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,a=bl(Ms,t.__scopeMenu),i=Ch(Ms,t.__scopeMenu),l=uN(hN,t.__scopeMenu),c=w.useRef(null),u=Sr(e,c);return o.jsx(Id.Provider,{scope:t.__scopeMenu,children:o.jsx(So,{present:n||a.open,children:o.jsx(Id.Slot,{scope:t.__scopeMenu,children:o.jsx(Ex,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ht(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ht(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:ht(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=hF[i.dir].includes(d.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});fN.displayName=hN;function pN(t){return t?"open":"closed"}function Cp(t){return t==="indeterminate"}function Dx(t){return Cp(t)?"indeterminate":t?"checked":"unchecked"}function TF(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function LF(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function DF(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let i=LF(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function RF(t,e){const{x:r,y:n}=t;let s=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const l=e[a].x,c=e[a].y,u=e[i].x,d=e[i].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function OF(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return RF(r,e)}function Md(t){return e=>e.pointerType==="mouse"?t(e):void 0}var IF=Kj,MF=kx,FF=Zj,BF=Xj,$F=Tx,UF=Qj,VF=Em,qF=tN,zF=nN,WF=aN,HF=oN,GF=lN,YF=cN,KF=dN,JF=fN,Rx="DropdownMenu",[ZF,sG]=Ya(Rx,[Gj]),qn=Gj(),[XF,mN]=ZF(Rx),gN=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,c=qn(e),u=w.useRef(null),[d=!1,h]=za({prop:s,defaultProp:a,onChange:i});return o.jsx(XF,{scope:e,triggerId:ul(),triggerRef:u,contentId:ul(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(f=>!f),[h]),modal:l,children:o.jsx(IF,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};gN.displayName=Rx;var yN="DropdownMenuTrigger",vN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,a=mN(yN,r),i=qn(r);return o.jsx(MF,{asChild:!0,...i,children:o.jsx(Ut.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:C5(e,a.triggerRef),onPointerDown:ht(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ht(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});vN.displayName=yN;var QF="DropdownMenuPortal",xN=t=>{const{__scopeDropdownMenu:e,...r}=t,n=qn(e);return o.jsx(FF,{...n,...r})};xN.displayName=QF;var bN="DropdownMenuContent",wN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mN(bN,r),a=qn(r),i=w.useRef(!1);return o.jsx(BF,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:e,onCloseAutoFocus:ht(t.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ht(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wN.displayName=bN;var e7="DropdownMenuGroup",t7=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx($F,{...s,...n,ref:e})});t7.displayName=e7;var r7="DropdownMenuLabel",SN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(UF,{...s,...n,ref:e})});SN.displayName=r7;var n7="DropdownMenuItem",_N=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(VF,{...s,...n,ref:e})});_N.displayName=n7;var s7="DropdownMenuCheckboxItem",jN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(qF,{...s,...n,ref:e})});jN.displayName=s7;var a7="DropdownMenuRadioGroup",i7=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(zF,{...s,...n,ref:e})});i7.displayName=a7;var o7="DropdownMenuRadioItem",NN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(WF,{...s,...n,ref:e})});NN.displayName=o7;var l7="DropdownMenuItemIndicator",CN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(HF,{...s,...n,ref:e})});CN.displayName=l7;var c7="DropdownMenuSeparator",kN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(GF,{...s,...n,ref:e})});kN.displayName=c7;var u7="DropdownMenuArrow",d7=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(YF,{...s,...n,ref:e})});d7.displayName=u7;var h7="DropdownMenuSubTrigger",AN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(KF,{...s,...n,ref:e})});AN.displayName=h7;var f7="DropdownMenuSubContent",PN=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=qn(r);return o.jsx(JF,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PN.displayName=f7;var p7=gN,m7=vN,g7=xN,EN=wN,TN=SN,LN=_N,DN=jN,RN=NN,ON=CN,IN=kN,MN=AN,FN=PN;const Fd=p7,Bd=m7,y7=w.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(MN,{ref:s,className:Ve("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,o.jsx(uS,{className:"ml-auto h-4 w-4"})]}));y7.displayName=MN.displayName;const v7=w.forwardRef(({className:t,...e},r)=>o.jsx(FN,{ref:r,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));v7.displayName=FN.displayName;const Gc=w.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(g7,{children:o.jsx(EN,{ref:n,sideOffset:e,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Gc.displayName=EN.displayName;const ia=w.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(LN,{ref:n,className:Ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));ia.displayName=LN.displayName;const x7=w.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(DN,{ref:s,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ON,{children:o.jsx(A0,{className:"h-4 w-4"})})}),e]}));x7.displayName=DN.displayName;const b7=w.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(RN,{ref:n,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ON,{children:o.jsx(dS,{className:"h-2 w-2 fill-current"})})}),e]}));b7.displayName=RN.displayName;const Rv=w.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(TN,{ref:n,className:Ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));Rv.displayName=TN.displayName;const xc=w.forwardRef(({className:t,...e},r)=>o.jsx(IN,{ref:r,className:Ve("-mx-1 my-1 h-px bg-muted",t),...e}));xc.displayName=IN.displayName;const BN=({children:t,variant:e="default",size:r="md",className:n,...s})=>{const a={default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground"},i={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"};return o.jsx("button",{className:Ve("inline-flex items-center justify-center rounded-full text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:opacity-50 disabled:pointer-events-none",a[e],i[r],n),...s,children:t})},$d=()=>{const[t,e]=w.useState(()=>{const n=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;return n||(s?"dark":"light")});w.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const r=()=>{e(n=>n==="light"?"dark":"light")};return o.jsx(BN,{variant:"ghost",size:"md",onClick:r,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,className:"relative",children:o.jsxs("div",{className:"relative w-5 h-5",children:[o.jsxs(ns.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"absolute inset-0 w-full h-full",initial:{opacity:t==="dark"?0:1,rotate:t==="dark"?-45:0},animate:{opacity:t==="dark"?0:1,rotate:t==="dark"?-45:0},transition:{duration:.3},children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),o.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),o.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),o.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),o.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),o.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),o.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),o.jsx(ns.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"absolute inset-0 w-full h-full",initial:{opacity:t==="light"?0:1,rotate:t==="light"?45:0},animate:{opacity:t==="light"?0:1,rotate:t==="light"?45:0},transition:{duration:.3},children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})]})})},$N=({className:t=""})=>{const[e,r]=w.useState(navigator.onLine),[n,s]=w.useState(!1),[a,i]=w.useState(!1),[l,c]=w.useState(null),{user:u}=_r(),{toast:d}=Xt();w.useEffect(()=>{const m=()=>r(!0),g=()=>r(!1);return window.addEventListener("online",m),window.addEventListener("offline",g),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",g)}},[]),w.useEffect(()=>{const m=async()=>{try{const v=await mt.getSyncStatus();s(v.isAllSynced);const b=localStorage.getItem("lastSyncTime");b&&c(new Date(b))}catch(v){console.error("Error checking sync status:",v),s(!1)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[]),w.useEffect(()=>{(async()=>{if(e&&(u!=null&&u.id)&&!n)try{i(!0),console.log("Automatically syncing all data after coming online...");const g=await mt.syncAll(u.id);await mt.syncBuyers(u.id),await mt.syncSellers(u.id),s(!0);const v=new Date;c(v),localStorage.setItem("lastSyncTime",v.toISOString()),console.log("Automatic sync completed")}catch(g){console.error("Error syncing data:",g)}finally{i(!1)}})()},[e,u,n]);const h=async()=>{if(!(!e||!(u!=null&&u.id)||a))try{i(!0),console.log("Manually syncing all data...");const m=await mt.syncAll(u.id);await mt.syncBuyers(u.id),await mt.syncSellers(u.id),s(!0);const g=new Date;c(g),localStorage.setItem("lastSyncTime",g.toISOString()),d({title:"Sync Complete",description:"All data has been synchronized with the cloud"}),console.log("Manual sync completed")}catch(m){console.error("Error syncing data:",m),d({title:"Sync Failed",description:"There was an error syncing your data",variant:"destructive"})}finally{i(!1)}},f=async()=>{if(!(!e||!(u!=null&&u.id)||a))try{if(i(!0),d({title:"Cleaning up duplicates",description:"This may take a moment..."}),await mt.cleanupDuplicateTransactions(u.id)){d({title:"Cleanup Complete",description:"Duplicate transactions have been removed"}),await mt.syncTransactions(u.id),s(!0);const g=new Date;c(g),localStorage.setItem("lastSyncTime",g.toISOString())}else d({title:"Cleanup Failed",description:"Failed to clean up duplicate transactions",variant:"destructive"})}catch(m){console.error("Error cleaning up duplicates:",m),d({title:"Cleanup Failed",description:"There was an error cleaning up duplicate transactions",variant:"destructive"})}finally{i(!1)}};return o.jsx("div",{className:`flex items-center gap-2 ${t}`,children:e?o.jsxs(Fd,{children:[o.jsx(av,{children:o.jsxs(Ab,{children:[o.jsx(Pb,{asChild:!0,children:o.jsx(Bd,{asChild:!0,children:a?o.jsxs(me,{variant:"ghost",size:"sm",className:"h-8 px-2 text-yellow-500",disabled:!0,children:[o.jsx(ua,{className:"h-4 w-4 mr-1 animate-spin"}),o.jsx("span",{className:"text-xs",children:"Syncing..."})]}):n?o.jsxs(me,{variant:"ghost",size:"sm",className:"h-8 px-2 text-green-500",children:[o.jsx(dp,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"text-xs",children:"Synced"})]}):o.jsxs(me,{variant:"ghost",size:"sm",className:"h-8 px-2 text-blue-500",children:[o.jsx(ua,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"text-xs",children:"Sync Now"})]})})}),o.jsx(iv,{children:o.jsxs("div",{className:"text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Sync Status:"})," ",e?a?"Syncing...":n?"Synced":"Not synced":"Offline"]}),l&&o.jsxs("p",{children:[o.jsx("strong",{children:"Last Synced:"})," ",l.toLocaleString()]}),o.jsx("p",{className:"text-xs mt-1",children:"Click for sync options"})]})})]})}),o.jsxs(Gc,{align:"end",children:[o.jsxs(ia,{onClick:h,disabled:a,children:[o.jsx(ua,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:"Sync All Data"})]}),o.jsxs(ia,{onClick:f,disabled:a,children:[o.jsx(En,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:"Clean Up Duplicates"})]})]})]}):o.jsx(av,{children:o.jsxs(Ab,{children:[o.jsx(Pb,{asChild:!0,children:o.jsxs(me,{variant:"ghost",size:"sm",className:"h-8 px-2 text-gray-500",disabled:!0,children:[o.jsx(IT,{className:"h-4 w-4 mr-1"}),o.jsx("span",{className:"text-xs",children:"Offline"})]})}),o.jsx(iv,{children:o.jsxs("div",{className:"text-sm",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Sync Status:"})," Offline"]}),l&&o.jsxs("p",{children:[o.jsx("strong",{children:"Last Synced:"})," ",l.toLocaleString()]}),o.jsx("p",{className:"text-xs mt-1",children:"Connect to internet to sync"})]})})]})})})},w7=({onExport:t,businessName:e})=>{const r=Ss(),{toast:n}=Xt(),{user:s,signOut:a}=_r(),[i,l]=w.useState(!1),c=()=>{var f;return s&&(((f=s.user_metadata)==null?void 0:f.full_name)||s.email)||"User"},u=()=>{var m;return s?(((m=s.user_metadata)==null?void 0:m.full_name)||s.email||"").charAt(0).toUpperCase():"U"},d=()=>{var f;return((f=s==null?void 0:s.user_metadata)==null?void 0:f.avatar_url)||""},h=async()=>{try{await a(),n({title:"Logged Out",description:"You have been logged out successfully."}),r("/auth")}catch{n({title:"Error",description:"Failed to log out. Please try again.",variant:"destructive"})}};return o.jsx("header",{className:"glass border-b sticky top-0 z-10",children:o.jsxs("div",{className:"container mx-auto px-4 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("h1",{className:"text-2xl font-bold",children:e})}),o.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[o.jsxs(Fd,{children:[o.jsx(Bd,{asChild:!0,children:o.jsxs(me,{variant:"outline",size:"sm",children:[o.jsx(E0,{className:"h-4 w-4 mr-2"}),"Export",o.jsx(P0,{className:"h-4 w-4 ml-2"})]})}),o.jsxs(Gc,{align:"end",children:[o.jsx(Rv,{children:"Export Options"}),o.jsx(xc,{}),o.jsxs(ia,{onClick:()=>t("csv"),children:[o.jsx(lc,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),o.jsxs(ia,{onClick:()=>t("json"),children:[o.jsx(lc,{className:"h-4 w-4 mr-2"}),"Export as JSON"]})]})]}),o.jsx($N,{className:"mr-2"}),o.jsx($d,{}),o.jsx("div",{className:"mx-1"}),o.jsxs(Fd,{children:[o.jsx(Bd,{asChild:!0,children:o.jsx(me,{variant:"ghost",size:"sm",className:"relative h-8 w-8 rounded-full",children:o.jsxs(Rd,{className:"h-8 w-8",children:[o.jsx(jp,{src:d(),alt:c()}),o.jsx(Od,{children:u()})]})})}),o.jsxs(Gc,{align:"end",children:[o.jsx(Rv,{children:c()}),o.jsx(xc,{}),o.jsxs(ia,{onClick:()=>r("/profile"),children:[o.jsx(Jy,{className:"h-4 w-4 mr-2"}),"Profile"]}),o.jsxs(ia,{onClick:()=>r("/settings"),children:[o.jsx(mb,{className:"h-4 w-4 mr-2"}),"Settings"]}),o.jsx(xc,{}),o.jsxs(ia,{onClick:h,children:[o.jsx(Ky,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})]}),o.jsx("div",{className:"md:hidden",children:o.jsx(me,{variant:"ghost",size:"sm",onClick:()=>l(!i),children:i?o.jsx(cm,{className:"h-6 w-6"}):o.jsx(_T,{className:"h-6 w-6"})})})]}),i&&o.jsxs("div",{className:"md:hidden mt-4 pb-2 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs(Rd,{className:"h-8 w-8 mr-2",children:[o.jsx(jp,{src:d(),alt:c()}),o.jsx(Od,{children:u()})]}),o.jsx("span",{className:"text-sm font-medium",children:c()})]}),o.jsx($d,{})]}),o.jsxs("div",{className:"space-y-1 pt-2",children:[o.jsxs(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>r("/profile"),children:[o.jsx(Jy,{className:"h-4 w-4 mr-2"}),"Profile"]}),o.jsxs(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>r("/settings"),children:[o.jsx(mb,{className:"h-4 w-4 mr-2"}),"Settings"]}),o.jsxs(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{l(!1),t("csv")},children:[o.jsx(lc,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),o.jsxs(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{l(!1),t("json")},children:[o.jsx(lc,{className:"h-4 w-4 mr-2"}),"Export as JSON"]}),o.jsxs(me,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-500 hover:text-red-600 hover:bg-red-50",onClick:h,children:[o.jsx(Ky,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})]})})},Ie=w.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Ie.displayName="Input";const S7=({searchQuery:t,setSearchQuery:e})=>o.jsx("div",{className:"w-full md:w-80",children:o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{type:"text",placeholder:"Search transactions...",value:t,onChange:r=>e(r.target.value),className:"pr-8"}),o.jsxs("svg",{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})]})}),Kt=A5,xi=P5,_7=k5,j7=em,UN=w.forwardRef(({className:t,...e},r)=>o.jsx(y0,{ref:r,className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));UN.displayName=y0.displayName;const tr=w.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(_7,{children:[o.jsx(UN,{}),o.jsxs(v0,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,o.jsxs(em,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(cm,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tr.displayName=v0.displayName;const ar=({className:t,...e})=>o.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ar.displayName="DialogHeader";const ur=({className:t,...e})=>o.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ur.displayName="DialogFooter";const ir=w.forwardRef(({className:t,...e},r)=>o.jsx(x0,{ref:r,className:Ve("text-lg font-semibold leading-none tracking-tight",t),...e}));ir.displayName=x0.displayName;const Xi=w.forwardRef(({className:t,...e},r)=>o.jsx(b0,{ref:r,className:Ve("text-sm text-muted-foreground",t),...e}));Xi.displayName=b0.displayName;var N7="Label",VN=w.forwardRef((t,e)=>o.jsx(Ut.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));VN.displayName=N7;var qN=VN;const C7=vh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=w.forwardRef(({className:t,...e},r)=>o.jsx(qN,{ref:r,className:Ve(C7(),t),...e}));Ne.displayName=qN.displayName;const zN=({onTransactionCreated:t})=>{const[e,r]=w.useState(""),{toast:n}=Xt(),s=Ss(),{user:a}=_r(),i=async()=>{try{if(!(a!=null&&a.id))throw new Error("User not authenticated");const l=e.trim()||`Transaction ${new Date().toLocaleDateString()}`;console.log(`Attempting to create transaction with name: ${l}`);const c=await Br.createTransaction(a.id,l);if(!c)throw new Error("Failed to create transaction");console.log(`Transaction created/retrieved with ID: ${c.id}`),r(""),n({title:"Success",description:"Transaction created successfully"}),t&&(console.log("Calling onTransactionCreated callback to refresh transaction list"),t()),console.log(`Navigating to transaction details: /transaction/${c.id}`),s(`/transaction/${c.id}`)}catch(l){console.error("Failed to create transaction:",l),n({title:"Error",description:"Failed to create transaction",variant:"destructive"})}};return o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Create New Transaction"})}),o.jsx("div",{className:"space-y-4 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"transactionName",children:"Transaction Name"}),o.jsx(Ie,{id:"transactionName",placeholder:"Enter a name for this transaction",value:e,onChange:l=>r(l.target.value)})]})}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>t(),children:"Cancel"}),o.jsx(me,{onClick:i,children:"Create"})]})]})},k7=({hasSearchQuery:t,onCreateTransaction:e})=>o.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-muted-foreground mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Results Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"No transactions match your search criteria"}),o.jsxs(me,{onClick:e,className:"inline-flex items-center justify-center px-4 py-2 rounded-md",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Transaction"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-muted-foreground mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),o.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"})]}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Transactions Yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first transaction to get started"})]})}),A7=()=>o.jsx(ns.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-pulse-subtle",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),o.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),o.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),o.jsx("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),o.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),o.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),o.jsx("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})})}),WN=w.createContext(void 0),P7=()=>{try{return localStorage.getItem("currency")||"USD"}catch(t){return console.error("Failed to read currency from localStorage:",t),"USD"}},HN=({children:t})=>{const[e,r]=w.useState(P7);w.useEffect(()=>{try{localStorage.setItem("currency",e)}catch(a){console.error("Failed to save currency to localStorage:",a)}},[e]);const n=a=>{r(a)},s=w.useCallback(a=>{if(isNaN(a))return"";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(a)}catch(i){return console.error(`Failed to format currency ${e}:`,i),`${e} ${a.toFixed(2)}`}},[e]);return o.jsx(WN.Provider,{value:{currency:e,setCurrency:n,formatCurrency:s},children:t})},Ox=()=>{const t=w.useContext(WN);if(t===void 0)throw new Error("useCurrency must be used within a CurrencyProvider");return t},E7=({status:t})=>{const r={completed:{bg:"bg-success/10",text:"text-success",label:"Completed"},pending:{bg:"bg-amber-500/10",text:"text-amber-500",label:"Pending"},cancelled:{bg:"bg-destructive/10",text:"text-destructive",label:"Cancelled"}}[t];return o.jsx("span",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded-full ${r.bg} ${r.text}`,children:r.label})},T7=({transaction:t,index:e})=>{var c,u;const r=Ss(),{formatCurrency:n}=Ox(),s=new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=()=>{r(`/transaction/${t.id}`)},i=t.loadBuy&&!t.loadSold,l=!t.loadBuy&&t.loadSold;return o.jsxs(ns.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:e*.03},whileHover:{y:-2,transition:{duration:.2}},className:"bg-card/50 border border-border/30 shadow-sm rounded-lg p-2 cursor-pointer hover:bg-muted/10 transition-colors",onClick:a,children:[o.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-wider text-muted-foreground font-medium",children:s}),o.jsx(E7,{status:t.status})]}),o.jsx("h3",{className:"text-xs font-medium truncate mb-0.5",children:t.name||`Transaction ${t.id.slice(0,5)}`}),o.jsxs("div",{className:"flex items-center gap-1 mt-1 mb-0.5 text-[10px] text-muted-foreground",children:[i&&o.jsx(Gy,{className:"h-3 w-3 flex-shrink-0 text-red-500"}),l&&o.jsx(Hy,{className:"h-3 w-3 flex-shrink-0 text-green-500"}),o.jsx("span",{className:"truncate",children:t.loadBuy?`From: ${t.loadBuy.supplierName||"N/A"}`:t.loadSold?`To: ${t.loadSold.buyerName||"N/A"}`:"No supplier/buyer info"})]}),o.jsxs("div",{className:"flex justify-between items-center mt-1 pt-0.5 border-t border-border/20",children:[o.jsx("div",{className:"text-[10px] text-muted-foreground truncate max-w-[60%]",children:((c=t.loadBuy)==null?void 0:c.goodsName)||((u=t.loadSold)==null?void 0:u.buyerName)||""}),o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"text-xs font-medium",children:n(t.totalAmount)})})]})]})},L7=({onTransactionCreated:t})=>{const[e,r]=Le.useState(!1);return o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"bg-muted/30 p-8 rounded-full mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("h3",{className:"text-xl font-medium mb-2",children:"No transactions yet"}),o.jsx("p",{className:"text-muted-foreground max-w-md mb-6",children:"Create your first transaction to start tracking your business deals efficiently."}),o.jsxs(Kt,{open:e,onOpenChange:r,children:[o.jsx(xi,{asChild:!0,children:o.jsxs(me,{className:"gap-2",children:[o.jsx(fT,{className:"h-4 w-4"}),"Create Your First Transaction"]})}),o.jsx(zN,{onTransactionCreated:()=>{t(),r(!1)}})]})]})},D7=({transactions:t,loading:e,onRefresh:r,onCreateTransaction:n})=>e?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx(pi,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.length===0?o.jsx(L7,{onTransactionCreated:r}):o.jsx(ns.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:t.map((s,a)=>o.jsx(T7,{transaction:s,index:a},s.id))});function dr(t){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(t)}var kn=Uint8Array,ms=Uint16Array,Ix=Int32Array,Tm=new kn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lm=new kn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ov=new kn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GN=function(t,e){for(var r=new ms(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new Ix(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},YN=GN(Tm,2),KN=YN.b,Iv=YN.r;KN[28]=258,Iv[258]=28;var JN=GN(Lm,0),R7=JN.b,uw=JN.r,Mv=new ms(32768);for(var kr=0;kr<32768;++kr){var zi=(kr&43690)>>1|(kr&21845)<<1;zi=(zi&52428)>>2|(zi&13107)<<2,zi=(zi&61680)>>4|(zi&3855)<<4,Mv[kr]=((zi&65280)>>8|(zi&255)<<8)>>1}var Va=function(t,e,r){for(var n=t.length,s=0,a=new ms(e);s<n;++s)t[s]&&++a[t[s]-1];var i=new ms(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var l;if(r){l=new ms(1<<e);var c=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)l[Mv[h]>>c]=u}else for(l=new ms(n),s=0;s<n;++s)t[s]&&(l[s]=Mv[i[t[s]-1]++]>>15-t[s]);return l},go=new kn(288);for(var kr=0;kr<144;++kr)go[kr]=8;for(var kr=144;kr<256;++kr)go[kr]=9;for(var kr=256;kr<280;++kr)go[kr]=7;for(var kr=280;kr<288;++kr)go[kr]=8;var Ud=new kn(32);for(var kr=0;kr<32;++kr)Ud[kr]=5;var O7=Va(go,9,0),I7=Va(go,9,1),M7=Va(Ud,5,0),F7=Va(Ud,5,1),uy=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Xs=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},dy=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Mx=function(t){return(t+7)/8|0},ZN=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new kn(t.subarray(e,r))},B7=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],na=function(t,e,r){var n=new Error(e||B7[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,na),!r)throw n;return n},$7=function(t,e,r,n){var s=t.length,a=0;if(!s||e.f&&!e.l)return r||new kn(0);var i=!r,l=i||e.i!=2,c=e.i;i&&(r=new kn(s*3));var u=function(Ae){var we=r.length;if(Ae>we){var ke=new kn(Math.max(we*2,Ae));ke.set(r),r=ke}},d=e.f||0,h=e.p||0,f=e.b||0,m=e.l,g=e.d,v=e.m,b=e.n,_=s*8;do{if(!m){d=Xs(t,h,1);var S=Xs(t,h+1,3);if(h+=3,S)if(S==1)m=I7,g=F7,v=9,b=5;else if(S==2){var W=Xs(t,h,31)+257,I=Xs(t,h+10,15)+4,F=W+Xs(t,h+5,31)+1;h+=14;for(var ee=new kn(F),ae=new kn(19),R=0;R<I;++R)ae[Ov[R]]=Xs(t,h+R*3,7);h+=I*3;for(var D=uy(ae),T=(1<<D)-1,B=Va(ae,D,1),R=0;R<F;){var z=B[Xs(t,h,T)];h+=z&15;var N=z>>4;if(N<16)ee[R++]=N;else{var re=0,$=0;for(N==16?($=3+Xs(t,h,3),h+=2,re=ee[R-1]):N==17?($=3+Xs(t,h,7),h+=3):N==18&&($=11+Xs(t,h,127),h+=7);$--;)ee[R++]=re}}var V=ee.subarray(0,W),X=ee.subarray(W);v=uy(V),b=uy(X),m=Va(V,v,1),g=Va(X,b,1)}else na(1);else{var N=Mx(h)+4,k=t[N-4]|t[N-3]<<8,A=N+k;if(A>s){c&&na(0);break}l&&u(f+k),r.set(t.subarray(N,A),f),e.b=f+=k,e.p=h=A*8,e.f=d;continue}if(h>_){c&&na(0);break}}l&&u(f+131072);for(var he=(1<<v)-1,je=(1<<b)-1,L=h;;L=h){var re=m[dy(t,h)&he],G=re>>4;if(h+=re&15,h>_){c&&na(0);break}if(re||na(2),G<256)r[f++]=G;else if(G==256){L=h,m=null;break}else{var Z=G-254;if(G>264){var R=G-257,se=Tm[R];Z=Xs(t,h,(1<<se)-1)+KN[R],h+=se}var H=g[dy(t,h)&je],ne=H>>4;H||na(3),h+=H&15;var X=R7[ne];if(ne>3){var se=Lm[ne];X+=dy(t,h)&(1<<se)-1,h+=se}if(h>_){c&&na(0);break}l&&u(f+131072);var oe=f+Z;if(f<X){var ce=a-X,ve=Math.min(X,oe);for(ce+f<0&&na(3);f<ve;++f)r[f]=n[ce+f]}for(;f<oe;++f)r[f]=r[f-X]}}e.l=m,e.p=L,e.b=f,e.f=d,m&&(d=1,e.m=v,e.d=g,e.n=b)}while(!d);return f!=r.length&&i?ZN(r,0,f):r.subarray(0,f)},li=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},zu=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},hy=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:QN,l:0};if(s==1){var i=new kn(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(A,W){return A.f-W.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=s-1;)l=r[r[u].f<r[h].f?u++:h++],c=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var f=a[0].s,n=1;n<s;++n)a[n].s>f&&(f=a[n].s);var m=new ms(f+1),g=Fv(r[d-1],m,0);if(g>e){var n=0,v=0,b=g-e,_=1<<b;for(a.sort(function(W,I){return m[I.s]-m[W.s]||W.f-I.f});n<s;++n){var S=a[n].s;if(m[S]>e)v+=_-(1<<g-m[S]),m[S]=e;else break}for(v>>=b;v>0;){var N=a[n].s;m[N]<e?v-=1<<e-m[N]++-1:++n}for(;n>=0&&v;--n){var k=a[n].s;m[k]==e&&(--m[k],++v)}g=e}return{t:new kn(m),l:g}},Fv=function(t,e,r){return t.s==-1?Math.max(Fv(t.l,e,r+1),Fv(t.r,e,r+1)):e[t.s]=r},dw=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ms(++e),n=0,s=t[0],a=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==s&&l!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[l]}return{c:r.subarray(0,n),n:e}},Wu=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},XN=function(t,e,r){var n=r.length,s=Mx(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},hw=function(t,e,r,n,s,a,i,l,c,u,d){li(e,d++,r),++s[256];for(var h=hy(s,15),f=h.t,m=h.l,g=hy(a,15),v=g.t,b=g.l,_=dw(f),S=_.c,N=_.n,k=dw(v),A=k.c,W=k.n,I=new ms(19),F=0;F<S.length;++F)++I[S[F]&31];for(var F=0;F<A.length;++F)++I[A[F]&31];for(var ee=hy(I,7),ae=ee.t,R=ee.l,D=19;D>4&&!ae[Ov[D-1]];--D);var T=u+5<<3,B=Wu(s,go)+Wu(a,Ud)+i,z=Wu(s,f)+Wu(a,v)+i+14+3*D+Wu(I,ae)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&T<=B&&T<=z)return XN(e,d,t.subarray(c,c+u));var re,$,V,X;if(li(e,d,1+(z<B)),d+=2,z<B){re=Va(f,m,0),$=f,V=Va(v,b,0),X=v;var he=Va(ae,R,0);li(e,d,N-257),li(e,d+5,W-1),li(e,d+10,D-4),d+=14;for(var F=0;F<D;++F)li(e,d+3*F,ae[Ov[F]]);d+=3*D;for(var je=[S,A],L=0;L<2;++L)for(var G=je[L],F=0;F<G.length;++F){var Z=G[F]&31;li(e,d,he[Z]),d+=ae[Z],Z>15&&(li(e,d,G[F]>>5&127),d+=G[F]>>12)}}else re=O7,$=go,V=M7,X=Ud;for(var F=0;F<l;++F){var se=n[F];if(se>255){var Z=se>>18&31;zu(e,d,re[Z+257]),d+=$[Z+257],Z>7&&(li(e,d,se>>23&31),d+=Tm[Z]);var H=se&31;zu(e,d,V[H]),d+=X[H],H>3&&(zu(e,d,se>>5&8191),d+=Lm[H])}else zu(e,d,re[se]),d+=$[se]}return zu(e,d,re[256]),d+$[256]},U7=new Ix([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),QN=new kn(0),V7=function(t,e,r,n,s,a){var i=a.z||t.length,l=new kn(n+i+5*(1+Math.ceil(i/7e3))+s),c=l.subarray(n,l.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(c[0]=a.r>>3);for(var h=U7[e-1],f=h>>13,m=h&8191,g=(1<<r)-1,v=a.p||new ms(32768),b=a.h||new ms(g+1),_=Math.ceil(r/3),S=2*_,N=function(Ke){return(t[Ke]^t[Ke+1]<<_^t[Ke+2]<<S)&g},k=new Ix(25e3),A=new ms(288),W=new ms(32),I=0,F=0,ee=a.i||0,ae=0,R=a.w||0,D=0;ee+2<i;++ee){var T=N(ee),B=ee&32767,z=b[T];if(v[B]=z,b[T]=B,R<=ee){var re=i-ee;if((I>7e3||ae>24576)&&(re>423||!u)){d=hw(t,c,0,k,A,W,F,ae,D,ee-D,d),ae=I=F=0,D=ee;for(var $=0;$<286;++$)A[$]=0;for(var $=0;$<30;++$)W[$]=0}var V=2,X=0,he=m,je=B-z&32767;if(re>2&&T==N(ee-je))for(var L=Math.min(f,re)-1,G=Math.min(32767,ee),Z=Math.min(258,re);je<=G&&--he&&B!=z;){if(t[ee+V]==t[ee+V-je]){for(var se=0;se<Z&&t[ee+se]==t[ee+se-je];++se);if(se>V){if(V=se,X=je,se>L)break;for(var H=Math.min(je,se-2),ne=0,$=0;$<H;++$){var oe=ee-je+$&32767,ce=v[oe],ve=oe-ce&32767;ve>ne&&(ne=ve,z=oe)}}}B=z,z=v[B],je+=B-z&32767}if(X){k[ae++]=268435456|Iv[V]<<18|uw[X];var Ae=Iv[V]&31,we=uw[X]&31;F+=Tm[Ae]+Lm[we],++A[257+Ae],++W[we],R=ee+V,++I}else k[ae++]=t[ee],++A[t[ee]]}}for(ee=Math.max(ee,R);ee<i;++ee)k[ae++]=t[ee],++A[t[ee]];d=hw(t,c,u,k,A,W,F,ae,D,ee-D,d),u||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=b,a.p=v,a.i=ee,a.w=R)}else{for(var ee=a.w||0;ee<i+u;ee+=65535){var ke=ee+65535;ke>=i&&(c[d/8|0]=u,ke=i),d=XN(c,d+1,t.subarray(ee,ke))}a.i=i}return ZN(l,0,n+Mx(d)+s)},e4=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)s+=n+=r[i];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},q7=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new kn(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return V7(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},t4=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},z7=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=e4();s.p(e.dictionary),t4(t,2,s.d())}},W7=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&na(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&na(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Bv(t,e){e||(e={});var r=e4();r.p(t);var n=q7(t,e,e.dictionary?6:2,4);return z7(n,e),t4(n,n.length-4,r.d()),n}function H7(t,e){return $7(t.subarray(W7(t,e),-4),{i:2},e,e)}var G7=typeof TextDecoder<"u"&&new TextDecoder,Y7=0;try{G7.decode(QN,{stream:!0}),Y7=1}catch{}var wt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function fy(){wt.console&&typeof wt.console.log=="function"&&wt.console.log.apply(wt.console,arguments)}var mr={log:fy,warn:function(t){wt.console&&(typeof wt.console.warn=="function"?wt.console.warn.apply(wt.console,arguments):fy.call(null,arguments))},error:function(t){wt.console&&(typeof wt.console.error=="function"?wt.console.error.apply(wt.console,arguments):fy(t))}};function py(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Ho(n.response,e,r)},n.onerror=function(){mr.error("could not download file")},n.send()}function fw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function qf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var pd,$v,Ho=wt.saveAs||((typeof window>"u"?"undefined":dr(window))!=="object"||window!==wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=wt.URL||wt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?fw(s.href)?py(t,e,r):qf(s,s.target="_blank"):qf(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){qf(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(fw(t))py(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){qf(n)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:dr(a)!=="object"&&(mr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return py(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(wt.HTMLElement)||wt.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":dr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=wt.URL||wt.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function r4(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function my(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=wn(r,n,s,a,e[0],7,-680876936),a=wn(a,r,n,s,e[1],12,-389564586),s=wn(s,a,r,n,e[2],17,606105819),n=wn(n,s,a,r,e[3],22,-1044525330),r=wn(r,n,s,a,e[4],7,-176418897),a=wn(a,r,n,s,e[5],12,1200080426),s=wn(s,a,r,n,e[6],17,-1473231341),n=wn(n,s,a,r,e[7],22,-45705983),r=wn(r,n,s,a,e[8],7,1770035416),a=wn(a,r,n,s,e[9],12,-1958414417),s=wn(s,a,r,n,e[10],17,-42063),n=wn(n,s,a,r,e[11],22,-1990404162),r=wn(r,n,s,a,e[12],7,1804603682),a=wn(a,r,n,s,e[13],12,-40341101),s=wn(s,a,r,n,e[14],17,-1502002290),r=Sn(r,n=wn(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Sn(a,r,n,s,e[6],9,-1069501632),s=Sn(s,a,r,n,e[11],14,643717713),n=Sn(n,s,a,r,e[0],20,-373897302),r=Sn(r,n,s,a,e[5],5,-701558691),a=Sn(a,r,n,s,e[10],9,38016083),s=Sn(s,a,r,n,e[15],14,-660478335),n=Sn(n,s,a,r,e[4],20,-405537848),r=Sn(r,n,s,a,e[9],5,568446438),a=Sn(a,r,n,s,e[14],9,-1019803690),s=Sn(s,a,r,n,e[3],14,-187363961),n=Sn(n,s,a,r,e[8],20,1163531501),r=Sn(r,n,s,a,e[13],5,-1444681467),a=Sn(a,r,n,s,e[2],9,-51403784),s=Sn(s,a,r,n,e[7],14,1735328473),r=_n(r,n=Sn(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=_n(a,r,n,s,e[8],11,-2022574463),s=_n(s,a,r,n,e[11],16,1839030562),n=_n(n,s,a,r,e[14],23,-35309556),r=_n(r,n,s,a,e[1],4,-1530992060),a=_n(a,r,n,s,e[4],11,1272893353),s=_n(s,a,r,n,e[7],16,-155497632),n=_n(n,s,a,r,e[10],23,-1094730640),r=_n(r,n,s,a,e[13],4,681279174),a=_n(a,r,n,s,e[0],11,-358537222),s=_n(s,a,r,n,e[3],16,-722521979),n=_n(n,s,a,r,e[6],23,76029189),r=_n(r,n,s,a,e[9],4,-640364487),a=_n(a,r,n,s,e[12],11,-421815835),s=_n(s,a,r,n,e[15],16,530742520),r=jn(r,n=_n(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=jn(a,r,n,s,e[7],10,1126891415),s=jn(s,a,r,n,e[14],15,-1416354905),n=jn(n,s,a,r,e[5],21,-57434055),r=jn(r,n,s,a,e[12],6,1700485571),a=jn(a,r,n,s,e[3],10,-1894986606),s=jn(s,a,r,n,e[10],15,-1051523),n=jn(n,s,a,r,e[1],21,-2054922799),r=jn(r,n,s,a,e[8],6,1873313359),a=jn(a,r,n,s,e[15],10,-30611744),s=jn(s,a,r,n,e[6],15,-1560198380),n=jn(n,s,a,r,e[13],21,1309151649),r=jn(r,n,s,a,e[4],6,-145523070),a=jn(a,r,n,s,e[11],10,-1120210379),s=jn(s,a,r,n,e[2],15,718787259),n=jn(n,s,a,r,e[9],21,-343485551),t[0]=oo(r,t[0]),t[1]=oo(n,t[1]),t[2]=oo(s,t[2]),t[3]=oo(a,t[3])}function Dm(t,e,r,n,s,a){return e=oo(oo(e,t),oo(n,a)),oo(e<<s|e>>>32-s,r)}function wn(t,e,r,n,s,a,i){return Dm(e&r|~e&n,t,e,s,a,i)}function Sn(t,e,r,n,s,a,i){return Dm(e&n|r&~n,t,e,s,a,i)}function _n(t,e,r,n,s,a,i){return Dm(e^r^n,t,e,s,a,i)}function jn(t,e,r,n,s,a,i){return Dm(r^(e|~n),t,e,s,a,i)}function n4(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)my(n,K7(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(my(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,my(n,s),n}function K7(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}pd=wt.atob.bind(wt),$v=wt.btoa.bind(wt);var pw="0123456789abcdef".split("");function J7(t){for(var e="",r=0;r<4;r++)e+=pw[t>>8*r+4&15]+pw[t>>8*r&15];return e}function Z7(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Uv(t){return n4(t).map(Z7).join("")}var X7=function(t){for(var e=0;e<t.length;e++)t[e]=J7(t[e]);return t.join("")}(n4("hello"))!="5d41402abc4b2a76b9719d911017c592";function oo(t,e){if(X7){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Vv(t,e){var r,n,s,a;if(t!==r){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var h=e.length,f=0,m=0,g="";for(c=0;c<h;c++)m=(m+(d=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=d,i=l[(l[f]+l[m])%256],g+=String.fromCharCode(e.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mw={print:4,modify:8,copy:16,"annot-forms":32};function ac(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(l){if(mw.perm!==void 0)throw new Error("Invalid permission: "+l);s+=mw[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=Uv(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Vv(this.encryptionKey,this.padding)}function ic(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function gw(t){if(dr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var i=e[r][a];try{i[0].apply(t,n)}catch(l){wt.console&&mr.error("jsPDF PubSub Error",l.message,l)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function kp(t){if(!(this instanceof kp))return new kp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function s4(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Xo(t,e,r,n,s){if(!(this instanceof Xo))return new Xo(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,s4.call(this,n,s)}function pc(t,e,r,n,s){if(!(this instanceof pc))return new pc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,s4.call(this,n,s)}function bt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],i=[],l=1,c=16,u="S",d=null;dr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=gw;var g="1.3",v=m.__private__.getPdfVersion=function(){return g};m.__private__.setPdfVersion=function(x){g=x};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return b};var _=m.__private__.getPageFormat=function(x){return b[x]};s=s||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},N=S.COMPAT;function k(){this.saveGraphicsState(),Q(new yt(He,0,0,-He,0,Ei()*He).toString()+" cm"),this.setFontSize(this.getFontSize()/He),u="n",N=S.ADVANCED}function A(){this.restoreGraphicsState(),u="S",N=S.COMPAT}var W=m.__private__.combineFontStyleAndFontWeight=function(x,E){if(x=="bold"&&E=="normal"||x=="bold"&&E==400||x=="normal"&&E=="italic"||x=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(x=E==400||E==="normal"?x==="italic"?"italic":"normal":E!=700&&E!=="bold"||x!=="normal"?(E==700?"bold":E)+""+x:"bold"),x};m.advancedAPI=function(x){var E=N===S.COMPAT;return E&&k.call(this),typeof x!="function"||(x(this),E&&A.call(this)),this},m.compatAPI=function(x){var E=N===S.ADVANCED;return E&&A.call(this),typeof x!="function"||(x(this),E&&k.call(this)),this},m.isAdvancedAPI=function(){return N===S.ADVANCED};var I,F=function(x){if(N!==S.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=m.roundToPrecision=m.__private__.roundToPrecision=function(x,E){var te=e||E;if(isNaN(x)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(te).replace(/0+$/,"")};I=m.hpf=m.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(x,16)};var ae=m.f2=m.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return ee(x,2)},R=m.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return ee(x,3)},D=m.scale=m.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return N===S.COMPAT?x*He:N===S.ADVANCED?x:void 0},T=function(x){return N===S.COMPAT?Ei()-x:N===S.ADVANCED?x:void 0},B=function(x){return D(T(x))};m.__private__.setPrecision=m.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var z,re="00000000000000000000000000000000",$=m.__private__.getFileId=function(){return re},V=m.__private__.setFileId=function(x){return re=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(vn=new ac(d.userPermissions,d.userPassword,d.ownerPassword,re)),re};m.setFileId=function(x){return V(x),this},m.getFileId=function(){return $()};var X=m.__private__.convertDateToPDFDate=function(x){var E=x.getTimezoneOffset(),te=E<0?"+":"-",le=Math.floor(Math.abs(E/60)),ge=Math.abs(E%60),Te=[te,Z(le),"'",Z(ge),"'"].join("");return["D:",x.getFullYear(),Z(x.getMonth()+1),Z(x.getDate()),Z(x.getHours()),Z(x.getMinutes()),Z(x.getSeconds()),Te].join("")},he=m.__private__.convertPDFDateToDate=function(x){var E=parseInt(x.substr(2,4),10),te=parseInt(x.substr(6,2),10)-1,le=parseInt(x.substr(8,2),10),ge=parseInt(x.substr(10,2),10),Te=parseInt(x.substr(12,2),10),Ue=parseInt(x.substr(14,2),10);return new Date(E,te,le,ge,Te,Ue,0)},je=m.__private__.setCreationDate=function(x){var E;if(x===void 0&&(x=new Date),x instanceof Date)E=X(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=x}return z=E},L=m.__private__.getCreationDate=function(x){var E=z;return x==="jsDate"&&(E=he(z)),E};m.setCreationDate=function(x){return je(x),this},m.getCreationDate=function(x){return L(x)};var G,Z=m.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},se=m.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},H=0,ne=[],oe=[],ce=0,ve=[],Ae=[],we=!1,ke=oe,Ke=function(){H=0,ce=0,oe=[],ne=[],ve=[],Za=Yr(),Us=Yr()};m.__private__.setCustomOutputDestination=function(x){we=!0,ke=x};var Ce=function(x){we||(ke=x)};m.__private__.resetCustomOutputDestination=function(){we=!1,ke=oe};var Q=m.__private__.out=function(x){return x=x.toString(),ce+=x.length+1,ke.push(x),ke},Ye=m.__private__.write=function(x){return Q(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Y=m.__private__.getArrayBuffer=function(x){for(var E=x.length,te=new ArrayBuffer(E),le=new Uint8Array(te);E--;)le[E]=x.charCodeAt(E);return te},J=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return J};var ie=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(x){return ie=N===S.ADVANCED?x/He:x,this};var _e,ye=m.__private__.getFontSize=m.getFontSize=function(){return N===S.COMPAT?ie:ie*He},Se=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(x){return Se=x,this},m.__private__.getR2L=m.getR2L=function(){return Se};var Be,qe=m.__private__.setZoomMode=function(x){var E=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))_e=x;else if(isNaN(x)){if(E.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');_e=x}else _e=parseInt(x,10)};m.__private__.getZoomMode=function(){return _e};var at,ot=m.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');Be=x};m.__private__.getPageMode=function(){return Be};var Lt=m.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');at=x};m.__private__.getLayoutMode=function(){return at},m.__private__.setDisplayMode=m.setDisplayMode=function(x,E,te){return qe(x),Lt(E),ot(te),this};var ut={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(x){if(Object.keys(ut).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ut[x]},m.__private__.getDocumentProperties=function(){return ut},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(x){for(var E in ut)ut.hasOwnProperty(E)&&x[E]&&(ut[E]=x[E]);return this},m.__private__.setDocumentProperty=function(x,E){if(Object.keys(ut).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ut[x]=E};var _t,He,De,rt,At,jt={},it={},Qr=[],Je={},It={},dt={},gr={},Ar=null,fr=0,kt=[],rr=new gw(m),Po=t.hotfixes||[],fn={},ba={},wa=[],yt=function x(E,te,le,ge,Te,Ue){if(!(this instanceof x))return new x(E,te,le,ge,Te,Ue);isNaN(E)&&(E=1),isNaN(te)&&(te=0),isNaN(le)&&(le=0),isNaN(ge)&&(ge=1),isNaN(Te)&&(Te=0),isNaN(Ue)&&(Ue=0),this._matrix=[E,te,le,ge,Te,Ue]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(x)},yt.prototype.multiply=function(x){var E=x.sx*this.sx+x.shy*this.shx,te=x.sx*this.shy+x.shy*this.sy,le=x.shx*this.sx+x.sy*this.shx,ge=x.shx*this.shy+x.sy*this.sy,Te=x.tx*this.sx+x.ty*this.shx+this.tx,Ue=x.tx*this.shy+x.ty*this.sy+this.ty;return new yt(E,te,le,ge,Te,Ue)},yt.prototype.decompose=function(){var x=this.sx,E=this.shy,te=this.shx,le=this.sy,ge=this.tx,Te=this.ty,Ue=Math.sqrt(x*x+E*E),tt=(x/=Ue)*te+(E/=Ue)*le;te-=x*tt,le-=E*tt;var pt=Math.sqrt(te*te+le*le);return tt/=pt,x*(le/=pt)<E*(te/=pt)&&(x=-x,E=-E,tt=-tt,Ue=-Ue),{scale:new yt(Ue,0,0,pt,0,0),translate:new yt(1,0,0,1,ge,Te),rotate:new yt(x,E,-E,x,0,0),skew:new yt(1,0,tt,1,0,0)}},yt.prototype.toString=function(x){return this.join(" ")},yt.prototype.inversed=function(){var x=this.sx,E=this.shy,te=this.shx,le=this.sy,ge=this.tx,Te=this.ty,Ue=1/(x*le-E*te),tt=le*Ue,pt=-E*Ue,Dt=-te*Ue,Et=x*Ue;return new yt(tt,pt,Dt,Et,-tt*ge-Dt*Te,-pt*ge-Et*Te)},yt.prototype.applyToPoint=function(x){var E=x.x*this.sx+x.y*this.shx+this.tx,te=x.x*this.shy+x.y*this.sy+this.ty;return new Ol(E,te)},yt.prototype.applyToRectangle=function(x){var E=this.applyToPoint(x),te=this.applyToPoint(new Ol(x.x+x.w,x.y+x.h));return new bu(E.x,E.y,te.x-E.x,te.y-E.y)},yt.prototype.clone=function(){var x=this.sx,E=this.shy,te=this.shx,le=this.sy,ge=this.tx,Te=this.ty;return new yt(x,E,te,le,ge,Te)},m.Matrix=yt;var $s=m.matrixMult=function(x,E){return E.multiply(x)},Sa=new yt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Sa;var zn=function(x,E){if(!It[x]){var te=(E instanceof Xo?"Sh":"P")+(Object.keys(Je).length+1).toString(10);E.id=te,It[x]=te,Je[te]=E,rr.publish("addPattern",E)}};m.ShadingPattern=Xo,m.TilingPattern=pc,m.addShadingPattern=function(x,E){return F("addShadingPattern()"),zn(x,E),this},m.beginTilingPattern=function(x){F("beginTilingPattern()"),tf(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},m.endTilingPattern=function(x,E){F("endTilingPattern()"),E.stream=Ae[G].join(`
`),zn(x,E),rr.publish("endTilingPattern",E),wa.pop().restore()};var en=m.__private__.newObject=function(){var x=Yr();return is(x,!0),x},Yr=m.__private__.newObjectDeferred=function(){return H++,ne[H]=function(){return ce},H},is=function(x,E){return E=typeof E=="boolean"&&E,ne[x]=ce,E&&Q(x+" 0 obj"),x},Sl=m.__private__.newAdditionalObject=function(){var x={objId:Yr(),content:""};return ve.push(x),x},Za=Yr(),Us=Yr(),Vs=m.__private__.decodeColorString=function(x){var E=x.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length===5&&(E[4]==="k"||E[4]==="K")&&(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var te=parseFloat(E[0]);E=[te,te,te,"r"]}for(var le="#",ge=0;ge<3;ge++)le+=("0"+Math.floor(255*parseFloat(E[ge])).toString(16)).slice(-2);return le},qs=m.__private__.encodeColorString=function(x){var E;typeof x=="string"&&(x={ch1:x});var te=x.ch1,le=x.ch2,ge=x.ch3,Te=x.ch4,Ue=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var tt=new r4(te);if(tt.ok)te=tt.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var pt=parseInt(te.substr(1),16);te=pt>>16&255,le=pt>>8&255,ge=255&pt}if(le===void 0||Te===void 0&&te===le&&le===ge)if(typeof te=="string")E=te+" "+Ue[0];else switch(x.precision){case 2:E=ae(te/255)+" "+Ue[0];break;case 3:default:E=R(te/255)+" "+Ue[0]}else if(Te===void 0||dr(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return E=["1.","1.","1.",Ue[1]].join(" ");if(typeof te=="string")E=[te,le,ge,Ue[1]].join(" ");else switch(x.precision){case 2:E=[ae(te/255),ae(le/255),ae(ge/255),Ue[1]].join(" ");break;default:case 3:E=[R(te/255),R(le/255),R(ge/255),Ue[1]].join(" ")}}else if(typeof te=="string")E=[te,le,ge,Te,Ue[2]].join(" ");else switch(x.precision){case 2:E=[ae(te),ae(le),ae(ge),ae(Te),Ue[2]].join(" ");break;case 3:default:E=[R(te),R(le),R(ge),R(Te),Ue[2]].join(" ")}return E},_a=m.__private__.getFilters=function(){return i},_s=m.__private__.putStream=function(x){var E=(x=x||{}).data||"",te=x.filters||_a(),le=x.alreadyAppliedFilters||[],ge=x.addLength1||!1,Te=E.length,Ue=x.objectId,tt=function(xn){return xn};if(d!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(tt=vn.encryptor(Ue,0));var pt={};te===!0&&(te=["FlateEncode"]);var Dt=x.additionalKeyValues||[],Et=(pt=bt.API.processDataByFilters!==void 0?bt.API.processDataByFilters(E,te):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(pt.data.length!==0&&(Dt.push({key:"Length",value:pt.data.length}),ge===!0&&Dt.push({key:"Length1",value:Te})),Et.length!=0)if(Et.split("/").length-1==1)Dt.push({key:"Filter",value:Et});else{Dt.push({key:"Filter",value:"["+Et+"]"});for(var Ht=0;Ht<Dt.length;Ht+=1)if(Dt[Ht].key==="DecodeParms"){for(var Pr=[],Lr=0;Lr<pt.reverseChain.split("/").length-1;Lr+=1)Pr.push("null");Pr.push(Dt[Ht].value),Dt[Ht].value="["+Pr.join(" ")+"]"}}Q("<<");for(var Kr=0;Kr<Dt.length;Kr++)Q("/"+Dt[Kr].key+" "+Dt[Kr].value);Q(">>"),pt.data.length!==0&&(Q("stream"),Q(tt(pt.data)),Q("endstream"))},ja=m.__private__.putPage=function(x){var E=x.number,te=x.data,le=x.objId,ge=x.contentsObjId;is(le,!0),Q("<</Type /Page"),Q("/Parent "+x.rootDictionaryObjId+" 0 R"),Q("/Resources "+x.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(I(x.mediaBox.bottomLeftX))+" "+parseFloat(I(x.mediaBox.bottomLeftY))+" "+I(x.mediaBox.topRightX)+" "+I(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&Q("/CropBox ["+I(x.cropBox.bottomLeftX)+" "+I(x.cropBox.bottomLeftY)+" "+I(x.cropBox.topRightX)+" "+I(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&Q("/BleedBox ["+I(x.bleedBox.bottomLeftX)+" "+I(x.bleedBox.bottomLeftY)+" "+I(x.bleedBox.topRightX)+" "+I(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&Q("/TrimBox ["+I(x.trimBox.bottomLeftX)+" "+I(x.trimBox.bottomLeftY)+" "+I(x.trimBox.topRightX)+" "+I(x.trimBox.topRightY)+"]"),x.artBox!==null&&Q("/ArtBox ["+I(x.artBox.bottomLeftX)+" "+I(x.artBox.bottomLeftY)+" "+I(x.artBox.topRightX)+" "+I(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&Q("/UserUnit "+x.userUnit),rr.publish("putPage",{objId:le,pageContext:kt[E],pageNumber:E,page:te}),Q("/Contents "+ge+" 0 R"),Q(">>"),Q("endobj");var Te=te.join(`
`);return N===S.ADVANCED&&(Te+=`
Q`),is(ge,!0),_s({data:Te,filters:_a(),objectId:ge}),Q("endobj"),le},Eo=m.__private__.putPages=function(){var x,E,te=[];for(x=1;x<=fr;x++)kt[x].objId=Yr(),kt[x].contentsObjId=Yr();for(x=1;x<=fr;x++)te.push(ja({number:x,data:Ae[x],objId:kt[x].objId,contentsObjId:kt[x].contentsObjId,mediaBox:kt[x].mediaBox,cropBox:kt[x].cropBox,bleedBox:kt[x].bleedBox,trimBox:kt[x].trimBox,artBox:kt[x].artBox,userUnit:kt[x].userUnit,rootDictionaryObjId:Za,resourceDictionaryObjId:Us}));is(Za,!0),Q("<</Type /Pages");var le="/Kids [";for(E=0;E<fr;E++)le+=te[E]+" 0 R ";Q(le+"]"),Q("/Count "+fr),Q(">>"),Q("endobj"),rr.publish("postPutPages")},_l=function(x){rr.publish("putFont",{font:x,out:Q,newObject:en,putStream:_s}),x.isAlreadyPutted!==!0&&(x.objectNumber=en(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+ic(x.postScriptName)),Q("/Subtype /Type1"),typeof x.encoding=="string"&&Q("/Encoding /"+x.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},jl=function(){for(var x in jt)jt.hasOwnProperty(x)&&(h===!1||h===!0&&f.hasOwnProperty(x))&&_l(jt[x])},Nl=function(x){x.objectNumber=en();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[I(x.x),I(x.y),I(x.x+x.width),I(x.y+x.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var te=x.pages[1].join(`
`);_s({data:te,additionalKeyValues:E,objectId:x.objectNumber}),Q("endobj")},Cl=function(){for(var x in fn)fn.hasOwnProperty(x)&&Nl(fn[x])},Mh=function(x,E){var te,le=[],ge=1/(E-1);for(te=0;te<1;te+=ge)le.push(te);if(le.push(1),x[0].offset!=0){var Te={offset:0,color:x[0].color};x.unshift(Te)}if(x[x.length-1].offset!=1){var Ue={offset:1,color:x[x.length-1].color};x.push(Ue)}for(var tt="",pt=0,Dt=0;Dt<le.length;Dt++){for(te=le[Dt];te>x[pt+1].offset;)pt++;var Et=x[pt].offset,Ht=(te-Et)/(x[pt+1].offset-Et),Pr=x[pt].color,Lr=x[pt+1].color;tt+=se(Math.round((1-Ht)*Pr[0]+Ht*Lr[0]).toString(16))+se(Math.round((1-Ht)*Pr[1]+Ht*Lr[1]).toString(16))+se(Math.round((1-Ht)*Pr[2]+Ht*Lr[2]).toString(16))}return tt.trim()},Hm=function(x,E){E||(E=21);var te=en(),le=Mh(x.colors,E),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+E+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_s({data:le,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),Q("endobj"),x.objectNumber=en(),Q("<< /ShadingType "+x.type),Q("/ColorSpace /DeviceRGB");var Te="/Coords ["+I(parseFloat(x.coords[0]))+" "+I(parseFloat(x.coords[1]))+" ";x.type===2?Te+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3])):Te+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3]))+" "+I(parseFloat(x.coords[4]))+" "+I(parseFloat(x.coords[5])),Q(Te+="]"),x.matrix&&Q("/Matrix ["+x.matrix.toString()+"]"),Q("/Function "+te+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Gm=function(x,E){var te=Yr(),le=en();E.push({resourcesOid:te,objectOid:le}),x.objectNumber=le;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+x.boundingBox.map(I).join(" ")+"]"}),ge.push({key:"XStep",value:I(x.xStep)}),ge.push({key:"YStep",value:I(x.yStep)}),ge.push({key:"Resources",value:te+" 0 R"}),x.matrix&&ge.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),_s({data:x.stream,additionalKeyValues:ge,objectId:x.objectNumber}),Q("endobj")},kl=function(x){var E;for(E in Je)Je.hasOwnProperty(E)&&(Je[E]instanceof Xo?Hm(Je[E]):Je[E]instanceof pc&&Gm(Je[E],x))},Fh=function(x){for(var E in x.objectNumber=en(),Q("<<"),x)switch(E){case"opacity":Q("/ca "+ae(x[E]));break;case"stroke-opacity":Q("/CA "+ae(x[E]))}Q(">>"),Q("endobj")},Ym=function(){var x;for(x in dt)dt.hasOwnProperty(x)&&Fh(dt[x])},uu=function(){for(var x in Q("/XObject <<"),fn)fn.hasOwnProperty(x)&&fn[x].objectNumber>=0&&Q("/"+x+" "+fn[x].objectNumber+" 0 R");rr.publish("putXobjectDict"),Q(">>")},Km=function(){vn.oid=en(),Q("<<"),Q("/Filter /Standard"),Q("/V "+vn.v),Q("/R "+vn.r),Q("/U <"+vn.toHexString(vn.U)+">"),Q("/O <"+vn.toHexString(vn.O)+">"),Q("/P "+vn.P),Q(">>"),Q("endobj")},Bh=function(){for(var x in Q("/Font <<"),jt)jt.hasOwnProperty(x)&&(h===!1||h===!0&&f.hasOwnProperty(x))&&Q("/"+x+" "+jt[x].objectNumber+" 0 R");Q(">>")},Jm=function(){if(Object.keys(Je).length>0){for(var x in Q("/Shading <<"),Je)Je.hasOwnProperty(x)&&Je[x]instanceof Xo&&Je[x].objectNumber>=0&&Q("/"+x+" "+Je[x].objectNumber+" 0 R");rr.publish("putShadingPatternDict"),Q(">>")}},Al=function(x){if(Object.keys(Je).length>0){for(var E in Q("/Pattern <<"),Je)Je.hasOwnProperty(E)&&Je[E]instanceof m.TilingPattern&&Je[E].objectNumber>=0&&Je[E].objectNumber<x&&Q("/"+E+" "+Je[E].objectNumber+" 0 R");rr.publish("putTilingPatternDict"),Q(">>")}},Zm=function(){if(Object.keys(dt).length>0){var x;for(x in Q("/ExtGState <<"),dt)dt.hasOwnProperty(x)&&dt[x].objectNumber>=0&&Q("/"+x+" "+dt[x].objectNumber+" 0 R");rr.publish("putGStateDict"),Q(">>")}},$r=function(x){is(x.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bh(),Jm(),Al(x.objectOid),Zm(),uu(),Q(">>"),Q("endobj")},$h=function(){var x=[];jl(),Ym(),Cl(),kl(x),rr.publish("putResources"),x.forEach($r),$r({resourcesOid:Us,objectOid:Number.MAX_SAFE_INTEGER}),rr.publish("postPutResources")},Uh=function(){rr.publish("putAdditionalObjects");for(var x=0;x<ve.length;x++){var E=ve[x];is(E.objId,!0),Q(E.content),Q("endobj")}rr.publish("postPutAdditionalObjects")},Vh=function(x){it[x.fontName]=it[x.fontName]||{},it[x.fontName][x.fontStyle]=x.id},du=function(x,E,te,le,ge){var Te={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:x,fontName:E,fontStyle:te,encoding:le,isStandardFont:ge||!1,metadata:{}};return rr.publish("addFont",{font:Te,instance:this}),jt[Te.id]=Te,Vh(Te),Te.id},Xm=function(x){for(var E=0,te=J.length;E<te;E++){var le=du.call(this,x[E][0],x[E][1],x[E][2],J[E][3],!0);h===!1&&(f[le]=!0);var ge=x[E][0].split("-");Vh({id:le,fontName:ge[0],fontStyle:ge[1]||""})}rr.publish("addFonts",{fonts:jt,dictionary:it})},zs=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(le){var E=le.stack||"";~E.indexOf(" at ")&&(E=E.split(" at ")[1]);var te="Error in function "+E.split(`
`)[0].split("<")[0]+": "+le.message;if(!wt.console)throw new Error(te);wt.console.error(te,le),wt.alert&&alert(te)}},x.foo.bar=x,x.foo},Pl=function(x,E){var te,le,ge,Te,Ue,tt,pt,Dt,Et;if(ge=(E=E||{}).sourceEncoding||"Unicode",Ue=E.outputEncoding,(E.autoencode||Ue)&&jt[_t].metadata&&jt[_t].metadata[ge]&&jt[_t].metadata[ge].encoding&&(Te=jt[_t].metadata[ge].encoding,!Ue&&jt[_t].encoding&&(Ue=jt[_t].encoding),!Ue&&Te.codePages&&(Ue=Te.codePages[0]),typeof Ue=="string"&&(Ue=Te[Ue]),Ue)){for(pt=!1,tt=[],te=0,le=x.length;te<le;te++)(Dt=Ue[x.charCodeAt(te)])?tt.push(String.fromCharCode(Dt)):tt.push(x[te]),tt[te].charCodeAt(0)>>8&&(pt=!0);x=tt.join("")}for(te=x.length;pt===void 0&&te!==0;)x.charCodeAt(te-1)>>8&&(pt=!0),te--;if(!pt)return x;for(tt=E.noBOM?[]:[254,255],te=0,le=x.length;te<le;te++){if((Et=(Dt=x.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");tt.push(Et),tt.push(Dt-(Et<<8))}return String.fromCharCode.apply(void 0,tt)},Wn=m.__private__.pdfEscape=m.pdfEscape=function(x,E){return Pl(x,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hu=m.__private__.beginPage=function(x){Ae[++fr]=[],kt[fr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},zh(fr),Ce(Ae[G])},qh=function(x,E){var te,le,ge;switch(r=E||r,typeof x=="string"&&(te=_(x.toLowerCase()),Array.isArray(te)&&(le=te[0],ge=te[1])),Array.isArray(x)&&(le=x[0]*He,ge=x[1]*He),isNaN(le)&&(le=s[0],ge=s[1]),(le>14400||ge>14400)&&(mr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),ge=Math.min(14400,ge)),s=[le,ge],r.substr(0,1)){case"l":ge>le&&(s=[ge,le]);break;case"p":le>ge&&(s=[ge,le])}hu(s),Jh(gu),Q(Ws),vu!==0&&Q(vu+" J"),xu!==0&&Q(xu+" j"),rr.publish("addPage",{pageNumber:fr})},Qm=function(x){x>0&&x<=fr&&(Ae.splice(x,1),kt.splice(x,1),fr--,G>fr&&(G=fr),this.setPage(G))},zh=function(x){x>0&&x<=fr&&(G=x)},eg=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ae.length-1},Wh=function(x,E,te){var le,ge=void 0;return te=te||{},x=x!==void 0?x:jt[_t].fontName,E=E!==void 0?E:jt[_t].fontStyle,le=x.toLowerCase(),it[le]!==void 0&&it[le][E]!==void 0?ge=it[le][E]:it[x]!==void 0&&it[x][E]!==void 0?ge=it[x][E]:te.disableWarning===!1&&mr.warn("Unable to look up font label for font '"+x+"', '"+E+"'. Refer to getFontList() for available fonts."),ge||te.noFallback||(ge=it.times[E])==null&&(ge=it.times.normal),ge},tg=m.__private__.putInfo=function(){var x=en(),E=function(le){return le};for(var te in d!==null&&(E=vn.encryptor(x,0)),Q("<<"),Q("/Producer ("+Wn(E("jsPDF "+bt.version))+")"),ut)ut.hasOwnProperty(te)&&ut[te]&&Q("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+Wn(E(ut[te]))+")");Q("/CreationDate ("+Wn(E(z))+")"),Q(">>"),Q("endobj")},fu=m.__private__.putCatalog=function(x){var E=(x=x||{}).rootDictionaryObjId||Za;switch(en(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+E+" 0 R"),_e||(_e="fullwidth"),_e){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+_e;te.substr(te.length-1)==="%"&&(_e=parseInt(_e)/100),typeof _e=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+ae(_e)+"]")}switch(at||(at="continuous"),at){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Be&&Q("/PageMode /"+Be),rr.publish("putCatalog"),Q(">>"),Q("endobj")},rg=m.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(H+1)),Q("/Root "+H+" 0 R"),Q("/Info "+(H-1)+" 0 R"),d!==null&&Q("/Encrypt "+vn.oid+" 0 R"),Q("/ID [ <"+re+"> <"+re+"> ]"),Q(">>")},ng=m.__private__.putHeader=function(){Q("%PDF-"+g),Q("%ºß¬à")},sg=m.__private__.putXRef=function(){var x="0000000000";Q("xref"),Q("0 "+(H+1)),Q("0000000000 65535 f ");for(var E=1;E<=H;E++)typeof ne[E]=="function"?Q((x+ne[E]()).slice(-10)+" 00000 n "):ne[E]!==void 0?Q((x+ne[E]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Xa=m.__private__.buildDocument=function(){Ke(),Ce(oe),rr.publish("buildDocument"),ng(),Eo(),Uh(),$h(),d!==null&&Km(),tg(),fu();var x=ce;return sg(),rg(),Q("startxref"),Q(""+x),Q("%%EOF"),Ce(Ae[G]),oe.join(`
`)},El=m.__private__.getBlob=function(x){return new Blob([Y(x)],{type:"application/pdf"})},Tl=m.output=m.__private__.output=zs(function(x,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",x){case void 0:return Xa();case"save":m.save(E.filename);break;case"arraybuffer":return Y(Xa());case"blob":return El(Xa());case"bloburi":case"bloburl":if(wt.URL!==void 0&&typeof wt.URL.createObjectURL=="function")return wt.URL&&wt.URL.createObjectURL(El(Xa()))||void 0;mr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",le=Xa();try{te=$v(le)}catch{te=$v(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+E.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wt)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(ge=E.pdfObjectUrl,Te="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",tt=wt.open();return tt!==null&&tt.document.write(Ue),tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',Dt=wt.open();if(Dt!==null){Dt.document.write(pt);var Et=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=E.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Et.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',Pr=wt.open();if(Pr!==null&&(Pr.document.write(Ht),Pr.document.title=E.filename),Pr||typeof safari>"u")return Pr;break;case"datauri":case"dataurl":return wt.document.location.href=this.output("datauristring",E);default:return null}}),Hh=function(x){return Array.isArray(Po)===!0&&Po.indexOf(x)>-1};switch(n){case"pt":He=1;break;case"mm":He=72/25.4;break;case"cm":He=72/2.54;break;case"in":He=72;break;case"px":He=Hh("px_scaling")==1?.75:96/72;break;case"pc":case"em":He=12;break;case"ex":He=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);He=n}var vn=null;je(),V();var ag=function(x){return d!==null?vn.encryptor(x,0):function(E){return E}},Gh=m.__private__.getPageInfo=m.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[x].objId,pageNumber:x,pageContext:kt[x]}},Pt=m.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in kt)if(kt[E].objId===x)break;return Gh(E)},ig=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:kt[G].objId,pageNumber:G,pageContext:kt[G]}};m.addPage=function(){return qh.apply(this,arguments),this},m.setPage=function(){return zh.apply(this,arguments),Ce.call(this,Ae[G]),this},m.insertPage=function(x){return this.addPage(),this.movePage(G,x),this},m.movePage=function(x,E){var te,le;if(x>E){te=Ae[x],le=kt[x];for(var ge=x;ge>E;ge--)Ae[ge]=Ae[ge-1],kt[ge]=kt[ge-1];Ae[E]=te,kt[E]=le,this.setPage(E)}else if(x<E){te=Ae[x],le=kt[x];for(var Te=x;Te<E;Te++)Ae[Te]=Ae[Te+1],kt[Te]=kt[Te+1];Ae[E]=te,kt[E]=le,this.setPage(E)}return this},m.deletePage=function(){return Qm.apply(this,arguments),this},m.__private__.text=m.text=function(x,E,te,le,ge){var Te,Ue,tt,pt,Dt,Et,Ht,Pr,Lr,Kr=(le=le||{}).scope||this;if(typeof x=="number"&&typeof E=="number"&&(typeof te=="string"||Array.isArray(te))){var xn=te;te=E,E=x,x=xn}if(arguments[3]instanceof yt?(F("The transform parameter of text() with a Matrix value"),Lr=ge):(tt=arguments[4],pt=arguments[5],dr(Ht=arguments[3])==="object"&&Ht!==null||(typeof tt=="string"&&(pt=tt,tt=null),typeof Ht=="string"&&(pt=Ht,Ht=null),typeof Ht=="number"&&(tt=Ht,Ht=null),le={flags:Ht,angle:tt,align:pt})),isNaN(E)||isNaN(te)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return Kr;var an="",Hs=!1,os=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:Lo,ka=Kr.internal.scaleFactor;function rf(yr){return yr=yr.split("	").join(Array(le.TabLen||9).join(" ")),Wn(yr,Ht)}function ju(yr){for(var vr,Vr=yr.concat(),tn=[],ni=Vr.length;ni--;)typeof(vr=Vr.shift())=="string"?tn.push(vr):Array.isArray(yr)&&(vr.length===1||vr[1]===void 0&&vr[2]===void 0)?tn.push(vr[0]):tn.push([vr[0],vr[1],vr[2]]);return tn}function Nu(yr,vr){var Vr;if(typeof yr=="string")Vr=vr(yr)[0];else if(Array.isArray(yr)){for(var tn,ni,Du=yr.concat(),Hl=[],lf=Du.length;lf--;)typeof(tn=Du.shift())=="string"?Hl.push(vr(tn)[0]):Array.isArray(tn)&&typeof tn[0]=="string"&&(ni=vr(tn[0],tn[1],tn[2]),Hl.push([ni[0],ni[1],ni[2]]));Vr=Hl}return Vr}var Ml=!1,Cu=!0;if(typeof x=="string")Ml=!0;else if(Array.isArray(x)){var ku=x.concat();Ue=[];for(var Fl,pn=ku.length;pn--;)(typeof(Fl=ku.shift())!="string"||Array.isArray(Fl)&&typeof Fl[0]!="string")&&(Cu=!1);Ml=Cu}if(Ml===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Bl=ie/Kr.internal.scaleFactor,$l=Bl*(os-1);switch(le.baseline){case"bottom":te-=$l;break;case"top":te+=Bl-$l;break;case"hanging":te+=Bl-2*$l;break;case"middle":te+=Bl/2-$l}if((Et=le.maxWidth||0)>0&&(typeof x=="string"?x=Kr.splitTextToSize(x,Et):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(yr,vr){return yr.concat(Kr.splitTextToSize(vr,Et))},[]))),Te={text:x,x:E,y:te,options:le,mutex:{pdfEscape:Wn,activeFontKey:_t,fonts:jt,activeFontSize:ie}},rr.publish("preProcessText",Te),x=Te.text,tt=(le=Te.options).angle,!(Lr instanceof yt)&&tt&&typeof tt=="number"){tt*=Math.PI/180,le.rotationDirection===0&&(tt=-tt),N===S.ADVANCED&&(tt=-tt);var Ul=Math.cos(tt),Au=Math.sin(tt);Lr=new yt(Ul,Au,-Au,Ul,0,0)}else tt&&tt instanceof yt&&(Lr=tt);N!==S.ADVANCED||Lr||(Lr=Sa),(Dt=le.charSpace||Rl)!==void 0&&(an+=I(D(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pr=le.horizontalScale)!==void 0&&(an+=I(100*Pr)+` Tz
`),le.lang;var Hn=-1,gg=le.renderingMode!==void 0?le.renderingMode:le.stroke,Pu=Kr.internal.getCurrentPageInfo().pageContext;switch(gg){case 0:case!1:case"fill":Hn=0;break;case 1:case!0:case"stroke":Hn=1;break;case 2:case"fillThenStroke":Hn=2;break;case 3:case"invisible":Hn=3;break;case 4:case"fillAndAddForClipping":Hn=4;break;case 5:case"strokeAndAddPathForClipping":Hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hn=6;break;case 7:case"addToPathForClipping":Hn=7}var nf=Pu.usedRenderingMode!==void 0?Pu.usedRenderingMode:-1;Hn!==-1?an+=Hn+` Tr
`:nf!==-1&&(an+=`0 Tr
`),Hn!==-1&&(Pu.usedRenderingMode=Hn),pt=le.align||"left";var js,Vl=ie*os,sf=Kr.internal.pageSize.getWidth(),af=jt[_t];Dt=le.charSpace||Rl,Et=le.maxWidth||0,Ht=Object.assign({autoencode:!0,noBOM:!0},le.flags);var Ti=[],Oo=function(yr){return Kr.getStringUnitWidth(yr,{font:af,charSpace:Dt,fontSize:ie,doKerning:!1})*ie/ka};if(Object.prototype.toString.call(x)==="[object Array]"){var Gn;Ue=ju(x),pt!=="left"&&(js=Ue.map(Oo));var Ln,Li=0;if(pt==="right"){E-=js[0],x=[],pn=Ue.length;for(var ei=0;ei<pn;ei++)ei===0?(Ln=Ca(E),Gn=Qa(te)):(Ln=D(Li-js[ei]),Gn=-Vl),x.push([Ue[ei],Ln,Gn]),Li=js[ei]}else if(pt==="center"){E-=js[0]/2,x=[],pn=Ue.length;for(var ti=0;ti<pn;ti++)ti===0?(Ln=Ca(E),Gn=Qa(te)):(Ln=D((Li-js[ti])/2),Gn=-Vl),x.push([Ue[ti],Ln,Gn]),Li=js[ti]}else if(pt==="left"){x=[],pn=Ue.length;for(var ql=0;ql<pn;ql++)x.push(Ue[ql])}else if(pt==="justify"&&af.encoding==="Identity-H"){x=[],pn=Ue.length,Et=Et!==0?Et:sf;for(var ri=0,Ur=0;Ur<pn;Ur++)if(Gn=Ur===0?Qa(te):-Vl,Ln=Ur===0?Ca(E):ri,Ur<pn-1){var Eu=D((Et-js[Ur])/(Ue[Ur].split(" ").length-1)),Dn=Ue[Ur].split(" ");x.push([Dn[0]+" ",Ln,Gn]),ri=0;for(var Ns=1;Ns<Dn.length;Ns++){var zl=(Oo(Dn[Ns-1]+" "+Dn[Ns])-Oo(Dn[Ns]))*ka+Eu;Ns==Dn.length-1?x.push([Dn[Ns],zl,0]):x.push([Dn[Ns]+" ",zl,0]),ri-=zl}}else x.push([Ue[Ur],Ln,Gn]);x.push(["",ri,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],pn=Ue.length,Et=Et!==0?Et:sf,Ur=0;Ur<pn;Ur++)Gn=Ur===0?Qa(te):-Vl,Ln=Ur===0?Ca(E):0,Ur<pn-1?Ti.push(I(D((Et-js[Ur])/(Ue[Ur].split(" ").length-1)))):Ti.push(0),x.push([Ue[Ur],Ln,Gn])}}var of=typeof le.R2L=="boolean"?le.R2L:Se;of===!0&&(x=Nu(x,function(yr,vr,Vr){return[yr.split("").reverse().join(""),vr,Vr]})),Te={text:x,x:E,y:te,options:le,mutex:{pdfEscape:Wn,activeFontKey:_t,fonts:jt,activeFontSize:ie}},rr.publish("postProcessText",Te),x=Te.text,Hs=Te.mutex.isHex||!1;var Tu=jt[_t].encoding;Tu!=="WinAnsiEncoding"&&Tu!=="StandardEncoding"||(x=Nu(x,function(yr,vr,Vr){return[rf(yr),vr,Vr]})),Ue=ju(x),x=[];for(var Io,Mo,Di,Fo=0,Wl=1,Bo=Array.isArray(Ue[0])?Wl:Fo,Ri="",Lu=function(yr,vr,Vr){var tn="";return Vr instanceof yt?(Vr=typeof le.angle=="number"?$s(Vr,new yt(1,0,0,1,yr,vr)):$s(new yt(1,0,0,1,yr,vr),Vr),N===S.ADVANCED&&(Vr=$s(new yt(1,0,0,-1,0,0),Vr)),tn=Vr.join(" ")+` Tm
`):tn=I(yr)+" "+I(vr)+` Td
`,tn},Cs=0;Cs<Ue.length;Cs++){switch(Ri="",Bo){case Wl:Di=(Hs?"<":"(")+Ue[Cs][0]+(Hs?">":")"),Io=parseFloat(Ue[Cs][1]),Mo=parseFloat(Ue[Cs][2]);break;case Fo:Di=(Hs?"<":"(")+Ue[Cs]+(Hs?">":")"),Io=Ca(E),Mo=Qa(te)}Ti!==void 0&&Ti[Cs]!==void 0&&(Ri=Ti[Cs]+` Tw
`),Cs===0?x.push(Ri+Lu(Io,Mo,Lr)+Di):Bo===Fo?x.push(Ri+Di):Bo===Wl&&x.push(Ri+Lu(Io,Mo,Lr)+Di)}x=Bo===Fo?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var ks=`BT
/`;return ks+=_t+" "+ie+` Tf
`,ks+=I(ie*os)+` TL
`,ks+=Do+`
`,ks+=an,ks+=x,Q(ks+="ET"),f[_t]=!0,Kr};var og=m.__private__.clip=m.clip=function(x){return Q(x==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return og("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Q("n"),this};var Na=m.__private__.isValidStyle=function(x){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(E=!0),E};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(x){return Na(x)&&(u=x),this};var Yh=m.__private__.getStyle=m.getStyle=function(x){var E=u;switch(x){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=x}return E},Kh=m.close=function(){return Q("h"),this};m.stroke=function(){return Q("S"),this},m.fill=function(x){return Ll("f",x),this},m.fillEvenOdd=function(x){return Ll("f*",x),this},m.fillStroke=function(x){return Ll("B",x),this},m.fillStrokeEvenOdd=function(x){return Ll("B*",x),this};var Ll=function(x,E){dr(E)==="object"?cg(E,x):Q(x)},pu=function(x){x===null||N===S.ADVANCED&&x===void 0||(x=Yh(x),Q(x))};function lg(x,E,te,le,ge){var Te=new pc(E||this.boundingBox,te||this.xStep,le||this.yStep,this.gState,ge||this.matrix);Te.stream=this.stream;var Ue=x+"$$"+this.cloneIndex+++"$$";return zn(Ue,Te),Te}var cg=function(x,E){var te=It[x.key],le=Je[te];if(le instanceof Xo)Q("q"),Q(ug(E)),le.gState&&m.setGState(le.gState),Q(x.matrix.toString()+" cm"),Q("/"+te+" sh"),Q("Q");else if(le instanceof pc){var ge=new yt(1,0,0,-1,0,Ei());x.matrix&&(ge=ge.multiply(x.matrix||Sa),te=lg.call(le,x.key,x.boundingBox,x.xStep,x.yStep,ge).id),Q("q"),Q("/Pattern cs"),Q("/"+te+" scn"),le.gState&&m.setGState(le.gState),Q(E),Q("Q")}},ug=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mu=m.moveTo=function(x,E){return Q(I(D(x))+" "+I(B(E))+" m"),this},To=m.lineTo=function(x,E){return Q(I(D(x))+" "+I(B(E))+" l"),this},Ai=m.curveTo=function(x,E,te,le,ge,Te){return Q([I(D(x)),I(B(E)),I(D(te)),I(B(le)),I(D(ge)),I(B(Te)),"c"].join(" ")),this};m.__private__.line=m.line=function(x,E,te,le,ge){if(isNaN(x)||isNaN(E)||isNaN(te)||isNaN(le)||!Na(ge))throw new Error("Invalid arguments passed to jsPDF.line");return N===S.COMPAT?this.lines([[te-x,le-E]],x,E,[1,1],ge||"S"):this.lines([[te-x,le-E]],x,E,[1,1]).stroke()},m.__private__.lines=m.lines=function(x,E,te,le,ge,Te){var Ue,tt,pt,Dt,Et,Ht,Pr,Lr,Kr,xn,an,Hs;if(typeof x=="number"&&(Hs=te,te=E,E=x,x=Hs),le=le||[1,1],Te=Te||!1,isNaN(E)||isNaN(te)||!Array.isArray(x)||!Array.isArray(le)||!Na(ge)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mu(E,te),Ue=le[0],tt=le[1],Dt=x.length,xn=E,an=te,pt=0;pt<Dt;pt++)(Et=x[pt]).length===2?(xn=Et[0]*Ue+xn,an=Et[1]*tt+an,To(xn,an)):(Ht=Et[0]*Ue+xn,Pr=Et[1]*tt+an,Lr=Et[2]*Ue+xn,Kr=Et[3]*tt+an,xn=Et[4]*Ue+xn,an=Et[5]*tt+an,Ai(Ht,Pr,Lr,Kr,xn,an));return Te&&Kh(),pu(ge),this},m.path=function(x){for(var E=0;E<x.length;E++){var te=x[E],le=te.c;switch(te.op){case"m":mu(le[0],le[1]);break;case"l":To(le[0],le[1]);break;case"c":Ai.apply(this,le);break;case"h":Kh()}}return this},m.__private__.rect=m.rect=function(x,E,te,le,ge){if(isNaN(x)||isNaN(E)||isNaN(te)||isNaN(le)||!Na(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return N===S.COMPAT&&(le=-le),Q([I(D(x)),I(B(E)),I(D(te)),I(D(le)),"re"].join(" ")),pu(ge),this},m.__private__.triangle=m.triangle=function(x,E,te,le,ge,Te,Ue){if(isNaN(x)||isNaN(E)||isNaN(te)||isNaN(le)||isNaN(ge)||isNaN(Te)||!Na(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-x,le-E],[ge-te,Te-le],[x-ge,E-Te]],x,E,[1,1],Ue,!0),this},m.__private__.roundedRect=m.roundedRect=function(x,E,te,le,ge,Te,Ue){if(isNaN(x)||isNaN(E)||isNaN(te)||isNaN(le)||isNaN(ge)||isNaN(Te)||!Na(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tt=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*te),Te=Math.min(Te,.5*le),this.lines([[te-2*ge,0],[ge*tt,0,ge,Te-Te*tt,ge,Te],[0,le-2*Te],[0,Te*tt,-ge*tt,Te,-ge,Te],[2*ge-te,0],[-ge*tt,0,-ge,-Te*tt,-ge,-Te],[0,2*Te-le],[0,-Te*tt,ge*tt,-Te,ge,-Te]],x+ge,E,[1,1],Ue,!0),this},m.__private__.ellipse=m.ellipse=function(x,E,te,le,ge){if(isNaN(x)||isNaN(E)||isNaN(te)||isNaN(le)||!Na(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*te,Ue=4/3*(Math.SQRT2-1)*le;return mu(x+te,E),Ai(x+te,E-Ue,x+Te,E-le,x,E-le),Ai(x-Te,E-le,x-te,E-Ue,x-te,E),Ai(x-te,E+Ue,x-Te,E+le,x,E+le),Ai(x+Te,E+le,x+te,E+Ue,x+te,E),pu(ge),this},m.__private__.circle=m.circle=function(x,E,te,le){if(isNaN(x)||isNaN(E)||isNaN(te)||!Na(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,E,te,te,le)},m.setFont=function(x,E,te){return te&&(E=W(E,te)),_t=Wh(x,E,{disableWarning:!1}),this};var dg=m.__private__.getFont=m.getFont=function(){return jt[Wh.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var x,E,te={};for(x in it)if(it.hasOwnProperty(x))for(E in te[x]=[],it[x])it[x].hasOwnProperty(E)&&te[x].push(E);return te},m.addFont=function(x,E,te,le,ge){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(te=W(te,le)),ge=ge||"Identity-H",du.call(this,x,E,te,ge)};var Lo,gu=t.lineWidth||.200025,Dl=m.__private__.getLineWidth=m.getLineWidth=function(){return gu},Jh=m.__private__.setLineWidth=m.setLineWidth=function(x){return gu=x,Q(I(D(x))+" w"),this};m.__private__.setLineDash=bt.API.setLineDash=bt.API.setLineDashPattern=function(x,E){if(x=x||[],E=E||0,isNaN(E)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(te){return I(D(te))}).join(" "),E=I(D(E)),Q("["+x+"] "+E+" d"),this};var Zh=m.__private__.getLineHeight=m.getLineHeight=function(){return ie*Lo};m.__private__.getLineHeight=m.getLineHeight=function(){return ie*Lo};var Xh=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Lo=x),this},Qh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Lo};Xh(t.lineHeight);var Ca=m.__private__.getHorizontalCoordinate=function(x){return D(x)},Qa=m.__private__.getVerticalCoordinate=function(x){return N===S.ADVANCED?x:kt[G].mediaBox.topRightY-kt[G].mediaBox.bottomLeftY-D(x)},hg=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(x){return I(Ca(x))},Pi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(x){return I(Qa(x))},Ws=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Vs(Ws)},m.__private__.setStrokeColor=m.setDrawColor=function(x,E,te,le){return Ws=qs({ch1:x,ch2:E,ch3:te,ch4:le,pdfColorType:"draw",precision:2}),Q(Ws),this};var yu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Vs(yu)},m.__private__.setFillColor=m.setFillColor=function(x,E,te,le){return yu=qs({ch1:x,ch2:E,ch3:te,ch4:le,pdfColorType:"fill",precision:2}),Q(yu),this};var Do=t.textColor||"0 g",fg=m.__private__.getTextColor=m.getTextColor=function(){return Vs(Do)};m.__private__.setTextColor=m.setTextColor=function(x,E,te,le){return Do=qs({ch1:x,ch2:E,ch3:te,ch4:le,pdfColorType:"text",precision:3}),this};var Rl=t.charSpace,pg=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Rl||0)};m.__private__.setCharSpace=m.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rl=x,this};var vu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(x){var E=m.CapJoinStyles[x];if(E===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vu=E,Q(E+" J"),this};var xu=0;m.__private__.setLineJoin=m.setLineJoin=function(x){var E=m.CapJoinStyles[x];if(E===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xu=E,Q(E+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(I(D(x))+" M"),this},m.GState=kp,m.setGState=function(x){(x=typeof x=="string"?dt[gr[x]]:ef(null,x)).equals(Ar)||(Q("/"+x.id+" gs"),Ar=x)};var ef=function(x,E){if(!x||!gr[x]){var te=!1;for(var le in dt)if(dt.hasOwnProperty(le)&&dt[le].equals(E)){te=!0;break}if(te)E=dt[le];else{var ge="GS"+(Object.keys(dt).length+1).toString(10);dt[ge]=E,E.id=ge}return x&&(gr[x]=E.id),rr.publish("addGState",E),E}};m.addGState=function(x,E){return ef(x,E),this},m.saveGraphicsState=function(){return Q("q"),Qr.push({key:_t,size:ie,color:Do}),this},m.restoreGraphicsState=function(){Q("Q");var x=Qr.pop();return _t=x.key,ie=x.size,Do=x.color,Ar=null,this},m.setCurrentTransformationMatrix=function(x){return Q(x.toString()+" cm"),this},m.comment=function(x){return Q("#"+x),this};var Ol=function(x,E){var te=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(Te){isNaN(Te)||(te=parseFloat(Te))}});var le=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Te){isNaN(Te)||(le=parseFloat(Te))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Te){ge=Te.toString()}}),this},bu=function(x,E,te,le){Ol.call(this,x,E),this.type="rect";var ge=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ue){isNaN(Ue)||(ge=parseFloat(Ue))}});var Te=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Ue){isNaN(Ue)||(Te=parseFloat(Ue))}}),this},wu=function(){this.page=fr,this.currentPage=G,this.pages=Ae.slice(0),this.pagesContext=kt.slice(0),this.x=De,this.y=rt,this.matrix=At,this.width=Ro(G),this.height=Ei(G),this.outputDestination=ke,this.id="",this.objectNumber=-1};wu.prototype.restore=function(){fr=this.page,G=this.currentPage,kt=this.pagesContext,Ae=this.pages,De=this.x,rt=this.y,At=this.matrix,Su(G,this.width),_u(G,this.height),ke=this.outputDestination};var tf=function(x,E,te,le,ge){wa.push(new wu),fr=G=0,Ae=[],De=x,rt=E,At=ge,hu([te,le])},mg=function(x){if(ba[x])wa.pop().restore();else{var E=new wu,te="Xo"+(Object.keys(fn).length+1).toString(10);E.id=te,ba[x]=te,fn[te]=E,rr.publish("addFormObject",E),wa.pop().restore()}};for(var Il in m.beginFormObject=function(x,E,te,le,ge){return tf(x,E,te,le,ge),this},m.endFormObject=function(x){return mg(x),this},m.doFormObject=function(x,E){var te=fn[ba[x]];return Q("q"),Q(E.toString()+" cm"),Q("/"+te.id+" Do"),Q("Q"),this},m.getFormObject=function(x){var E=fn[ba[x]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},m.save=function(x,E){return x=x||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(Ho(El(Xa()),x),typeof Ho.unload=="function"&&wt.setTimeout&&setTimeout(Ho.unload,911),this):new Promise(function(te,le){try{var ge=Ho(El(Xa()),x);typeof Ho.unload=="function"&&wt.setTimeout&&setTimeout(Ho.unload,911),te(ge)}catch(Te){le(Te.message)}})},bt.API)bt.API.hasOwnProperty(Il)&&(Il==="events"&&bt.API.events.length?function(x,E){var te,le,ge;for(ge=E.length-1;ge!==-1;ge--)te=E[ge][0],le=E[ge][1],x.subscribe.apply(x,[te].concat(typeof le=="function"?[le]:le))}(rr,bt.API.events):m[Il]=bt.API[Il]);var Ro=m.getPageWidth=function(x){return(kt[x=x||G].mediaBox.topRightX-kt[x].mediaBox.bottomLeftX)/He},Su=m.setPageWidth=function(x,E){kt[x].mediaBox.topRightX=E*He+kt[x].mediaBox.bottomLeftX},Ei=m.getPageHeight=function(x){return(kt[x=x||G].mediaBox.topRightY-kt[x].mediaBox.bottomLeftY)/He},_u=m.setPageHeight=function(x,E){kt[x].mediaBox.topRightY=E*He+kt[x].mediaBox.bottomLeftY};return m.internal={pdfEscape:Wn,getStyle:Yh,getFont:dg,getFontSize:ye,getCharSpace:pg,getTextColor:fg,getLineHeight:Zh,getLineHeightFactor:Qh,getLineWidth:Dl,write:Ye,getHorizontalCoordinate:Ca,getVerticalCoordinate:Qa,getCoordinateString:hg,getVerticalCoordinateString:Pi,collections:{},newObject:en,newAdditionalObject:Sl,newObjectDeferred:Yr,newObjectDeferredBegin:is,getFilters:_a,putStream:_s,events:rr,scaleFactor:He,pageSize:{getWidth:function(){return Ro(G)},setWidth:function(x){Su(G,x)},getHeight:function(){return Ei(G)},setHeight:function(x){_u(G,x)}},encryptionOptions:d,encryption:vn,getEncryptor:ag,output:Tl,getNumberOfPages:eg,pages:Ae,out:Q,f2:ae,f3:R,getPageInfo:Gh,getPageInfoByObjId:Pt,getCurrentPageInfo:ig,getPDFVersion:v,Point:Ol,Rectangle:bu,Matrix:yt,hasHotfix:Hh},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ro(G)},set:function(x){Su(G,x)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ei(G)},set:function(x){_u(G,x)},enumerable:!0,configurable:!0}),Xm.call(m,J),_t="F1",qh(s,r),rr.publish("initialized"),m}ac.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ac.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ac.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},ac.prototype.processOwnerPassword=function(t,e){return Vv(Uv(e).substr(0,5),t)},ac.prototype.encryptor=function(t,e){var r=Uv(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Vv(r,n)}},kp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||dr(t)!==dr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},bt.API={events:[]},bt.version="3.0.1";var Or=bt.API,Fx=1,wl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ec=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Tt=function(t){return t.toFixed(2)},Wi=function(t){return t.toFixed(5)};Or.__acroform__={};var as=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},yw=function(t){return t*Fx},Ta=function(t){var e=new i4,r=lt.internal.getHeight(t)||0,n=lt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Tt(n)),Number(Tt(r))],e},Q7=Or.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},eB=Or.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},tB=Or.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},zr=Or.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return tB(t,e-1)},Wr=Or.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Q7(t,e-1)},Hr=Or.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return eB(t,e-1)},rB=Or.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(a+l)||0,c.upperRight_X=r(s+i)||0,c.upperRight_Y=n(a)||0,[Number(Tt(c.lowerLeft_X)),Number(Tt(c.lowerLeft_Y)),Number(Tt(c.upperRight_X)),Number(Tt(c.upperRight_Y))]},nB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=qv(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Tt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ta(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},qv=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var a=r,i=lt.internal.getHeight(t)||0;i=i<0?-i:i;var l=lt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(R,D,T){if(R+1<s.length){var B=D+" "+s[R+1][0];return zf(B,t,T).width<=l-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,h=zf("3",t,a).height,f=t.multiline?i-a:(i-h)/2,m=f+=2,g=0,v=0,b=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+zf(e,t,a=12).width+", FieldWidth:"+l+`
`;break}for(var _="",S=0,N=0;N<s.length;N++)if(s.hasOwnProperty(N)){var k=!1;if(s[N].length!==1&&b!==s[N].length-1){if((h+2)*(S+2)+2>i)continue e;_+=s[N][b],k=!0,v=N,N--}else{_=(_+=s[N][b]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var A=parseInt(N),W=c(A,_,a),I=N>=s.length-1;if(W&&!I){_+=" ",b=0;continue}if(W||I){if(I)v=A;else if(t.multiline&&(h+2)*(S+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(S+2)+2>i)continue e;v=A}}for(var F="",ee=g;ee<=v;ee++){var ae=s[ee];if(t.multiline){if(ee===v){F+=ae[b]+" ",b=(b+1)%ae.length;continue}if(ee===g){F+=ae[ae.length-1]+" ";continue}}F+=ae[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=zf(F,t,a).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}e+=Tt(u)+" "+Tt(m)+` Td
`,e+="("+wl(F)+`) Tj
`,e+=-Tt(u)+` 0 Td
`,m=-(a+2),d=0,g=k?v:v+1,S++,_=""}break}return n.text=e,n.fontSize=a,n},zf=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},sB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aB=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},iB=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),dr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},oB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(va.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(sB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Fx=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new o4,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&aB(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var i in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=rB(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=lt.createDefaultAppearanceStream(l),dr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=nB(l);c.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var i in m)if(m.hasOwnProperty(i)){var g=m[i];typeof g=="function"&&(g=g.call(s,l)),h+="/"+i+" "+g+" ",s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g)}}else typeof(g=m)=="function"&&(g=g.call(s,l)),h+="/"+i+" "+g,s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}a&&iB(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},a4=Or.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),dr(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+wl(n(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gy=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+wl(n(t))+")"},Ma=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ma.prototype.toString=function(){return this.objId+" 0 R"},Ma.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ma.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:a4(s,this.objId,this.scope)}):s instanceof Ma?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var i4=function(){Ma.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};as(i4,Ma);var o4=function(){Ma.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wl(r(t))+")"}},set:function(r){t=r}})};as(o4,Ma);var va=function t(){Ma.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zr(e,3)},set:function(_){_?this.F=Wr(e,3):this.F=Hr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Ap)return;a="FieldObject"+t.FieldNum++}var _=function(S){return S};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+wl(_(a))+")"},set:function(_){a=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(_){a=_}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(_){i=_}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Fx:u},set:function(_){u=_}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Ap||this instanceof ll))return gy(h,this.objId,this.scope)},set:function(_){_=_.toString(),h=_}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof un?f:gy(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=this instanceof un?_:_.substr(0,1)==="("?ec(_.substr(1,_.length-2)):ec(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof un?ec(f.substr(1,f.length-1)):f},set:function(_){_=_.toString(),f=this instanceof un?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof un?m:gy(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof un?_:_.substr(0,1)==="("?ec(_.substr(1,_.length-2)):ec(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof un?ec(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof un?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(_){_=!!_,v=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(_){g=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,1)},set:function(_){_?this.Ff=Wr(this.Ff,1):this.Ff=Hr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,2)},set:function(_){_?this.Ff=Wr(this.Ff,2):this.Ff=Hr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,3)},set:function(_){_?this.Ff=Wr(this.Ff,3):this.Ff=Hr(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');b=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(b){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};as(va,Ma);var bc=function(){va.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return a4(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(a,i,l){l||(l=1);for(var c,u=[];c=i.exec(a);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,18)},set:function(r){r?this.Ff=Wr(this.Ff,18):this.Ff=Hr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Wr(this.Ff,19):this.Ff=Hr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,20)},set:function(r){r?(this.Ff=Wr(this.Ff,20),e.sort()):this.Ff=Hr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,22)},set:function(r){r?this.Ff=Wr(this.Ff,22):this.Ff=Hr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,23)},set:function(r){r?this.Ff=Wr(this.Ff,23):this.Ff=Hr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,27)},set:function(r){r?this.Ff=Wr(this.Ff,27):this.Ff=Hr(this.Ff,27)}}),this.hasAppearanceStream=!1};as(bc,va);var wc=function(){bc.call(this),this.fontName="helvetica",this.combo=!1};as(wc,bc);var Sc=function(){wc.call(this),this.combo=!0};as(Sc,wc);var rp=function(){Sc.call(this),this.edit=!0};as(rp,Sc);var un=function(){va.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,15)},set:function(r){r?this.Ff=Wr(this.Ff,15):this.Ff=Hr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,16)},set:function(r){r?this.Ff=Wr(this.Ff,16):this.Ff=Hr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,17)},set:function(r){r?this.Ff=Wr(this.Ff,17):this.Ff=Hr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,26)},set:function(r){r?this.Ff=Wr(this.Ff,26):this.Ff=Hr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+wl(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){dr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};as(un,va);var np=function(){un.call(this),this.pushButton=!0};as(np,un);var _c=function(){un.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};as(_c,un);var Ap=function(){var t,e;va.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),n)i.push("/"+a+" ("+wl(s(n[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){dr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};as(Ap,va),_c.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},_c.prototype.createOption=function(t){var e=new Ap;return e.Parent=this,e.optionName=t,this.Kids.push(e),lB.call(this.scope,e),e};var sp=function(){un.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=lt.CheckBox.createAppearanceStream()};as(sp,un);var ll=function(){va.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,13)},set:function(e){e?this.Ff=Wr(this.Ff,13):this.Ff=Hr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,21)},set:function(e){e?this.Ff=Wr(this.Ff,21):this.Ff=Hr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,23)},set:function(e){e?this.Ff=Wr(this.Ff,23):this.Ff=Hr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,24)},set:function(e){e?this.Ff=Wr(this.Ff,24):this.Ff=Hr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,25)},set:function(e){e?this.Ff=Wr(this.Ff,25):this.Ff=Hr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,26)},set:function(e){e?this.Ff=Wr(this.Ff,26):this.Ff=Hr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};as(ll,va);var ap=function(){ll.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zr(this.Ff,14)},set:function(t){t?this.Ff=Wr(this.Ff,14):this.Ff=Hr(this.Ff,14)}}),this.password=!0};as(ap,ll);var lt={CheckBox:{createAppearanceStream:function(){return{N:{On:lt.CheckBox.YesNormal},D:{On:lt.CheckBox.YesPushDown,Off:lt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=qv(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Tt(lt.internal.getWidth(t))+" "+Tt(lt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Tt(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=lt.internal.getHeight(t),i=lt.internal.getWidth(t),l=qv(t,t.caption);return s.push("1 g"),s.push("0 0 "+Tt(i)+" "+Tt(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Tt(i-1)+" "+Tt(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Tt(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Tt(lt.internal.getWidth(t))+" "+Tt(lt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:lt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=lt.RadioButton.Circle.YesNormal,e.D[t]=lt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=lt.internal.getWidth(t)<=lt.internal.getHeight(t)?lt.internal.getWidth(t)/4:lt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=lt.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wi(lt.internal.getWidth(t)/2)+" "+Wi(lt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=lt.internal.getWidth(t)<=lt.internal.getHeight(t)?lt.internal.getWidth(t)/4:lt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*lt.internal.Bezier_C).toFixed(5)),i=Number((n*lt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wi(lt.internal.getWidth(t)/2)+" "+Wi(lt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wi(lt.internal.getWidth(t)/2)+" "+Wi(lt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=lt.internal.getWidth(t)<=lt.internal.getHeight(t)?lt.internal.getWidth(t)/4:lt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*lt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wi(lt.internal.getWidth(t)/2)+" "+Wi(lt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:lt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=lt.RadioButton.Cross.YesNormal,e.D[t]=lt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=lt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Tt(lt.internal.getWidth(t)-2)+" "+Tt(lt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Tt(n.x1.x)+" "+Tt(n.x1.y)+" m"),r.push(Tt(n.x2.x)+" "+Tt(n.x2.y)+" l"),r.push(Tt(n.x4.x)+" "+Tt(n.x4.y)+" m"),r.push(Tt(n.x3.x)+" "+Tt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=lt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Tt(lt.internal.getWidth(t))+" "+Tt(lt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Tt(lt.internal.getWidth(t)-2)+" "+Tt(lt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Tt(r.x1.x)+" "+Tt(r.x1.y)+" m"),n.push(Tt(r.x2.x)+" "+Tt(r.x2.y)+" l"),n.push(Tt(r.x4.x)+" "+Tt(r.x4.y)+" m"),n.push(Tt(r.x3.x)+" "+Tt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Tt(lt.internal.getWidth(t))+" "+Tt(lt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};lt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=lt.internal.getWidth(t),r=lt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},lt.internal.getWidth=function(t){var e=0;return dr(t)==="object"&&(e=yw(t.Rect[2])),e},lt.internal.getHeight=function(t){var e=0;return dr(t)==="object"&&(e=yw(t.Rect[3])),e};var lB=Or.addField=function(t){if(oB(this,t),!(t instanceof va))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Or.AcroFormChoiceField=bc,Or.AcroFormListBox=wc,Or.AcroFormComboBox=Sc,Or.AcroFormEditBox=rp,Or.AcroFormButton=un,Or.AcroFormPushButton=np,Or.AcroFormRadioButton=_c,Or.AcroFormCheckBox=sp,Or.AcroFormTextField=ll,Or.AcroFormPasswordField=ap,Or.AcroFormAppearance=lt,Or.AcroForm={ChoiceField:bc,ListBox:wc,ComboBox:Sc,EditBox:rp,Button:un,PushButton:np,RadioButton:_c,CheckBox:sp,TextField:ll,PasswordField:ap,Appearance:lt},bt.AcroForm={ChoiceField:bc,ListBox:wc,ComboBox:Sc,EditBox:rp,Button:un,PushButton:np,RadioButton:_c,CheckBox:sp,TextField:ll,PasswordField:ap,Appearance:lt};function l4(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(R,D){var T,B,z,re,$,V=e;if((D=D||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(W(R))for($ in r)for(z=r[$],T=0;T<z.length;T+=1){for(re=!0,B=0;B<z[T].length;B+=1)if(z[T][B]!==void 0&&z[T][B]!==R[B]){re=!1;break}if(re===!0){V=$;break}}else for($ in r)for(z=r[$],T=0;T<z.length;T+=1){for(re=!0,B=0;B<z[T].length;B+=1)if(z[T][B]!==void 0&&z[T][B]!==R.charCodeAt(B)){re=!1;break}if(re===!0){V=$;break}}return V===e&&D!==e&&(V=D),V},s=function R(D){for(var T=this.internal.write,B=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:D.width}),re.push({key:"Height",value:D.height}),D.colorSpace===b.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===b.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var $="",V=0,X=D.transparency.length;V<X;V++)$+=D.transparency[V]+" "+D.transparency[V]+" ";re.push({key:"Mask",value:"["+$+"]"})}D.sMask!==void 0&&re.push({key:"SMask",value:D.objectId+1+" 0 R"});var he=D.filter!==void 0?["/"+D.filter]:void 0;if(B({data:D.data,additionalKeyValues:re,alreadyAppliedFilters:he,objectId:D.objectId}),T("endobj"),"sMask"in D&&D.sMask!==void 0){var je="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,L={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:je,data:D.sMask};"filter"in D&&(L.filter=D.filter),R.call(this,L)}if(D.colorSpace===b.INDEXED){var G=this.internal.newObject();B({data:F(new Uint8Array(D.palette)),objectId:G}),T("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var D in R)s.call(this,R[D])},i=function(){var R,D=this.internal.collections.addImage_images,T=this.internal.write;for(var B in D)T("/I"+(R=D[B]).index,R.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var R=this.internal.collections.addImage_images;return l.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},h=function(R){return dr(R)==="object"&&R.nodeType===1},f=function(R,D){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var T=""+R.getAttribute("src");if(T.indexOf("data:image/")===0)return pd(unescape(T).split("base64,").pop());var B=t.loadFile(T,!0);if(B!==void 0)return B}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var z;switch(D){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return pd(R.toDataURL(z,1).split("base64,").pop())}},m=function(R){var D=this.internal.collections.addImage_images;if(D){for(var T in D)if(R===D[T].alias)return D[T]}},g=function(R,D,T){return R||D||(R=-96,D=-96),R<0&&(R=-1*T.width*72/R/this.internal.scaleFactor),D<0&&(D=-1*T.height*72/D/this.internal.scaleFactor),R===0&&(R=D*T.width/T.height),D===0&&(D=R*T.height/T.width),[R,D]},v=function(R,D,T,B,z,re){var $=g.call(this,T,B,z),V=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,he=c.call(this);if(T=$[0],B=$[1],he[z.index]=z,re){re*=Math.PI/180;var je=Math.cos(re),L=Math.sin(re),G=function(se){return se.toFixed(4)},Z=[G(je),G(L),G(-1*L),G(je),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,V(R),X(D+B),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([V(T),"0","0",V(B),"0","0","cm"].join(" "))):this.internal.write([V(T),"0","0",V(B),V(R),X(D+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(R){var D,T,B=0;if(typeof R=="string")for(T=R.length,D=0;D<T;D++)B=(B<<5)-B+R.charCodeAt(D),B|=0;else if(W(R))for(T=R.byteLength/2,D=0;D<T;D++)B=(B<<5)-B+R[D],B|=0;return B},N=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var D=!0;return R.length===0&&(D=!1),R.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(D=!1),D},k=t.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var D=R.indexOf(",");return D<0?null:R.substring(0,D).trim().endsWith("base64")?R.substring(D+1):null},A=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return A()&&R instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(R){return A()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(R){for(var D=R.length,T=new Uint8Array(D),B=0;B<D;B++)T[B]=R.charCodeAt(B);return T},F=t.__addimage__.arrayBufferToBinaryString=function(R){for(var D="",T=W(R)?R:new Uint8Array(R),B=0;B<T.length;B+=8192)D+=String.fromCharCode.apply(null,T.subarray(B,B+8192));return D};t.addImage=function(){var R,D,T,B,z,re,$,V,X;if(typeof arguments[1]=="number"?(D=e,T=arguments[1],B=arguments[2],z=arguments[3],re=arguments[4],$=arguments[5],V=arguments[6],X=arguments[7]):(D=arguments[1],T=arguments[2],B=arguments[3],z=arguments[4],re=arguments[5],$=arguments[6],V=arguments[7],X=arguments[8]),dr(R=arguments[0])==="object"&&!h(R)&&"imageData"in R){var he=R;R=he.imageData,D=he.format||D||e,T=he.x||T||0,B=he.y||B||0,z=he.w||he.width||z,re=he.h||he.height||re,$=he.alias||$,V=he.compression||V,X=he.rotation||he.angle||X}var je=this.internal.getFilters();if(V===void 0&&je.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(T)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=ee.call(this,R,D,$,V);return v.call(this,T,B,z,re,L,X),this};var ee=function(R,D,T,B){var z,re,$;if(typeof R=="string"&&n(R)===e){R=unescape(R);var V=ae(R,!1);(V!==""||(V=t.loadFile(R,!0))!==void 0)&&(R=V)}if(h(R)&&(R=f(R,D)),D=n(R,D),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if((($=T)==null||$.length===0)&&(T=function(X){return typeof X=="string"||W(X)?S(X):W(X.data)?S(X.data):null}(R)),(z=m.call(this,T))||(A()&&(R instanceof Uint8Array||D==="RGBA"||(re=R,R=I(R))),z=this["process"+D.toUpperCase()](R,u.call(this),T,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:_.NONE}(B),re)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},ae=t.__addimage__.convertBase64ToBinaryString=function(R,D){D=typeof D!="boolean"||D;var T,B="";if(typeof R=="string"){var z;T=(z=k(R))!==null&&z!==void 0?z:R;try{B=pd(T)}catch(re){if(D)throw N(T)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};t.getImageProperties=function(R){var D,T,B="";if(h(R)&&(R=f(R)),typeof R=="string"&&n(R)===e&&((B=ae(R,!1))===""&&(B=t.loadFile(R)||""),R=B),T=n(R),!d(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(!A()||R instanceof Uint8Array||(R=I(R)),!(D=this["process"+T.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=T,D}})(bt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};bt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){n=u[f];var m=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(v.objId),S=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(_(n.contents))+")",a+=" /Popup "+b.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(_(S))+") >>",v.content=a;var N=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(a+=" /Open true"),a+=" >>",b.content=a,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(g(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var A=this.annotations._nameMap[n.options.name];n.options.pageNumber=A.page,n.options.top=A.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var W=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+s),h:u(n+a)},options:i,type:"link"})},t.textWithLink=function(r,n,s,a){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,s,a),s+=.2*u,a.align==="center"&&(n-=c/2),a.align==="right"&&(n-=c),this.link(n,s-u,l,i,a),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(bt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=t.__arabicParser__.isArabicEndLetter=function(v){return i(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(v){return i(v)&&s.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return i(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return i(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return i(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return i(v)&&a(v)&&e[v.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(v){var b=0,_=r,S="",N=0;for(b=0;b<v.length;b+=1)_[v.charCodeAt(b)]!==void 0?(N++,typeof(_=_[v.charCodeAt(b)])=="number"&&(S+=String.fromCharCode(_),_=r,N=0),b===v.length-1&&(_=r,S+=v.charAt(b-(N-1)),b-=N-1,N=0)):(_=r,S+=v.charAt(b-N),b-=N,N=0);return S};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(v,b,_){return i(v)?a(v)===!1?-1:!u(v)||!i(b)&&!i(_)||!i(_)&&l(b)||l(v)&&!i(b)||l(v)&&c(b)||l(v)&&l(b)?0:d(v)&&i(b)&&!l(b)&&i(_)&&u(_)?3:l(v)||!i(_)?1:2:-1},m=function(v){var b=0,_=0,S=0,N="",k="",A="",W=(v=v||"").split("\\s+"),I=[];for(b=0;b<W.length;b+=1){for(I.push(""),_=0;_<W[b].length;_+=1)N=W[b][_],k=W[b][_-1],A=W[b][_+1],i(N)?(S=f(N,k,A),I[b]+=S!==-1?String.fromCharCode(e[N.charCodeAt(0)][S]):N):I[b]+=N;I[b]=h(I[b])}return I.join(" ")},g=t.__arabicParser__.processArabic=t.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(b)){var S=0;for(_=[],S=0;S<b.length;S+=1)Array.isArray(b[S])?_.push([m(b[S][0]),b[S][1],b[S][2]]):_.push([m(b[S])]);v=_}else v=m(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",g])}(bt.API),bt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(bt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(v){g=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,m=0,g=0,v=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var _=u.maxWidth;_>0?typeof c=="string"?c=this.splitTextToSize(c,_):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,k){return N.concat(b.splitTextToSize(k,_))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)m<(v=this.getStringUnitWidth(c[S],{font:h})*d)&&(m=v);return m!==0&&(g=c.length),{w:m/=f,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,h,f){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,g,v,b,_=[],S=[],N=[],k={},A={},W=[],I=[],F=(f=f||{}).autoSize||!1,ee=f.printHeaders!==!1,ae=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,R=f.margins||Object.assign({width:this.getPageWidth()},e),D=typeof f.padding=="number"?f.padding:3,T=f.headerBackgroundColor||"#c8c8c8",B=f.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=ae,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=T,this.internal.__cell__.headerTextColor=B,this.setFontSize(ae),h==null)S=_=Object.keys(d[0]),N=_.map(function(){return"left"});else if(Array.isArray(h)&&dr(h[0])==="object")for(_=h.map(function(he){return he.name}),S=h.map(function(he){return he.prompt||he.name||""}),N=h.map(function(he){return he.align||"left"}),m=0;m<h.length;m+=1)A[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=_=h,N=_.map(function(){return"left"}));if(F||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<_.length;m+=1){for(k[b=_[m]]=d.map(function(he){return he[b]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(S[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=k[b],this.setFont(void 0,"normal"),v=0;v<g.length;v+=1)W.push(this.getTextDimensions(g[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[b]=Math.max.apply(null,W)+D+D,W=[]}if(ee){var z={};for(m=0;m<_.length;m+=1)z[_[m]]={},z[_[m]].text=S[m],z[_[m]].align=N[m];var re=l.call(this,z,A);I=_.map(function(he){return new a(c,u,A[he],re,z[he].text,void 0,z[he].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var $=h.reduce(function(he,je){return he[je.name]=je.align,he},{});for(m=0;m<d.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:d[m]},this);var V=l.call(this,d[m],A);for(v=0;v<_.length;v+=1){var X=d[m][_[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:v,data:X},this),i.call(this,new a(c,u,A[_[v]],V,X,m+2,$[_[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(m){var g=c[m];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/f+d+d},this).reduce(function(m,g){return Math.max(m,g)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(bt.API);var c4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},u4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zv=l4(u4),d4=[100,200,300,400,500,600,700,800,900],cB=l4(d4);function Wv(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return c4[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof zv[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function vw(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var uB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function dB(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},uB,r.genericFontFamilies||{}),a=null,i=null,l=0;l<e.length;++l)if(s[(a=Wv(e[l])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+bw(a)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=zv[c],h=d<=zv.normal?-1:1,f=vw(u,u4,d,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(a.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=c4[c],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+c)}(a.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=cB[c],h=vw(u,d4,d,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+bw(a)+"'.");return i}function ww(t){return t.trimLeft()}function hB(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function fB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Wf,Sw,_w,yy=["times"];(function(t){var e,r,n,s,a,i,l,c,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new i,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new i,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=L;Object.defineProperty(this,"pdf",{get:function(){return G}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Ce){Z=!!Ce}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(Ce){se=!!Ce}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(Ce){isNaN(Ce)||(H=Ce)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(Ce){isNaN(Ce)||(ne=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ce){var Q;typeof Ce=="number"?Q=[Ce,Ce,Ce,Ce]:((Q=new Array(4))[0]=Ce[0],Q[1]=Ce.length>=2?Ce[1]:Q[0],Q[2]=Ce.length>=3?Ce[2]:Q[0],Q[3]=Ce.length>=4?Ce[3]:Q[1]),u.margin=Q}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ce){oe=Ce}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ce){ce=Ce}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(Ce){ve=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ce){Ce instanceof d&&(u=Ce)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ce){u.path=Ce}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(Ce){Ae=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var Q;Q=f(Ce),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var Q=f(Ce);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var we=null;function ke(Ce,Q){if(we===null){var Ye=function(Y){var J=[];return Object.keys(Y).forEach(function(ie){Y[ie].forEach(function(_e){var ye=null;switch(_e){case"bold":ye={family:ie,weight:"bold"};break;case"italic":ye={family:ie,style:"italic"};break;case"bolditalic":ye={family:ie,weight:"bold",style:"italic"};break;case"":case"normal":ye={family:ie}}ye!==null&&(ye.ref={name:ie,style:_e},J.push(ye))})}),J}(Ce.getFontList());we=function(Y){for(var J={},ie=0;ie<Y.length;++ie){var _e=Wv(Y[ie]),ye=_e.family,Se=_e.stretch,Be=_e.style,qe=_e.weight;J[ye]=J[ye]||{},J[ye][Se]=J[ye][Se]||{},J[ye][Se][Be]=J[ye][Se][Be]||{},J[ye][Se][Be][qe]=_e}return J}(Ye.concat(Q))}return we}var Ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ke},set:function(Ce){we=null,Ke=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var Q;if(this.ctx.font=Ce,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var Ye=Q[1];Q[2];var Y=Q[3],J=Q[4];Q[5];var ie=Q[6],_e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(J)[2];J=Math.floor(_e==="px"?parseFloat(J)*this.pdf.internal.scaleFactor:_e==="em"?parseFloat(J)*this.pdf.getFontSize():parseFloat(J)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(J);var ye=function(ut){var _t,He,De=[],rt=ut.trim();if(rt==="")return yy;if(rt in xw)return[xw[rt]];for(;rt!=="";){switch(He=null,_t=(rt=ww(rt)).charAt(0)){case'"':case"'":He=hB(rt.substring(1),_t);break;default:He=fB(rt)}if(He===null||(De.push(He[0]),(rt=ww(He[1]))!==""&&rt.charAt(0)!==","))return yy;rt=rt.replace(/^,/,"")}return De}(ie);if(this.fontFaces){var Se=dB(ke(this.pdf,this.fontFaces),ye.map(function(ut){return{family:ut,stretch:"normal",weight:Y,style:Ye}}));this.pdf.setFont(Se.ref.name,Se.ref.style)}else{var Be="";(Y==="bold"||parseInt(Y,10)>=700||Ye==="bold")&&(Be="bold"),Ye==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var qe="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ot=0;ot<ye.length;ot++){if(this.pdf.internal.getFont(ye[ot],Be,{noFallback:!0,disableWarning:!0})!==void 0){qe=ye[ot];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(ye[ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=ye[ot],Be="bold";else if(this.pdf.internal.getFont(ye[ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=ye[ot],Be="normal";break}}if(qe===""){for(var Lt=0;Lt<ye.length;Lt++)if(at[ye[Lt]]){qe=at[ye[Lt]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,je.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,je.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};h.prototype.setLineDash=function(L){this.lineDash=L},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(L,G){if(isNaN(L)||isNaN(G))throw mr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new i(L,G));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(L,G)},h.prototype.closePath=function(){var L=new i(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&dr(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){L=new i(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(L.x,L.y)},h.prototype.lineTo=function(L,G){if(isNaN(L)||isNaN(G))throw mr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new i(L,G));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new i(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(L,G,Z,se){if(isNaN(Z)||isNaN(se)||isNaN(L)||isNaN(G))throw mr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new i(Z,se)),ne=this.ctx.transform.applyToPoint(new i(L,G));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:H.x,y:H.y}),this.ctx.lastPoint=new i(H.x,H.y)},h.prototype.bezierCurveTo=function(L,G,Z,se,H,ne){if(isNaN(H)||isNaN(ne)||isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se))throw mr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(H,ne)),ce=this.ctx.transform.applyToPoint(new i(L,G)),ve=this.ctx.transform.applyToPoint(new i(Z,se));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:ve.x,y2:ve.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},h.prototype.arc=function(L,G,Z,se,H,ne){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se)||isNaN(H))throw mr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(L,G));L=oe.x,G=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,Z)),ve=this.ctx.transform.applyToPoint(new i(0,0));Z=Math.sqrt(Math.pow(ce.x-ve.x,2)+Math.pow(ce.y-ve.y,2))}Math.abs(H-se)>=2*Math.PI&&(se=0,H=2*Math.PI),this.path.push({type:"arc",x:L,y:G,radius:Z,startAngle:se,endAngle:H,counterclockwise:ne})},h.prototype.arcTo=function(L,G,Z,se,H){throw new Error("arcTo not implemented.")},h.prototype.rect=function(L,G,Z,se){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se))throw mr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,G),this.lineTo(L+Z,G),this.lineTo(L+Z,G+se),this.lineTo(L,G+se),this.lineTo(L,G),this.lineTo(L+Z,G),this.lineTo(L,G)},h.prototype.fillRect=function(L,G,Z,se){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se))throw mr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,G,Z,se),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},h.prototype.strokeRect=function(L,G,Z,se){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se))throw mr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(L,G,Z,se),this.stroke())},h.prototype.clearRect=function(L,G,Z,se){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se))throw mr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,G,Z,se))},h.prototype.save=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},h.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(G),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(L){var G,Z,se,H;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))G=0,Z=0,se=0,H=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ne!==null)G=parseInt(ne[1]),Z=parseInt(ne[2]),se=parseInt(ne[3]),H=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)G=parseInt(ne[1]),Z=parseInt(ne[2]),se=parseInt(ne[3]),H=parseFloat(ne[4]);else{if(H=1,typeof L=="string"&&L.charAt(0)!=="#"){var oe=new r4(L);L=oe.ok?oe.toHex():"#000000"}L.length===4?(G=L.substring(1,2),G+=G,Z=L.substring(2,3),Z+=Z,se=L.substring(3,4),se+=se):(G=L.substring(1,3),Z=L.substring(3,5),se=L.substring(5,7)),G=parseInt(G,16),Z=parseInt(Z,16),se=parseInt(se,16)}}return{r:G,g:Z,b:se,a:H,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(L,G,Z,se){if(isNaN(G)||isNaN(Z)||typeof L!="string")throw mr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!m.call(this)){var H=V(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;D.call(this,{text:L,x:G,y:Z,scale:ne,angle:H,align:this.textAlign,maxWidth:se})}},h.prototype.strokeText=function(L,G,Z,se){if(isNaN(G)||isNaN(Z)||typeof L!="string")throw mr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){se=isNaN(se)?void 0:se;var H=V(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;D.call(this,{text:L,x:G,y:Z,scale:ne,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:se})}},h.prototype.measureText=function(L){if(typeof L!="string")throw mr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,Z=this.pdf.internal.scaleFactor,se=G.internal.getFontSize(),H=G.getStringUnitWidth(L)*se/G.internal.scaleFactor,ne=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new ne({width:H*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(L,G){if(isNaN(L)||isNaN(G))throw mr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(L,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(L){if(isNaN(L))throw mr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},h.prototype.translate=function(L,G){if(isNaN(L)||isNaN(G))throw mr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,L,G);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(L,G,Z,se,H,ne){if(isNaN(L)||isNaN(G)||isNaN(Z)||isNaN(se)||isNaN(H)||isNaN(ne))throw mr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new c(L,G,Z,se,H,ne);this.ctx.transform=this.ctx.transform.multiply(oe)},h.prototype.setTransform=function(L,G,Z,se,H,ne){L=isNaN(L)?1:L,G=isNaN(G)?0:G,Z=isNaN(Z)?0:Z,se=isNaN(se)?1:se,H=isNaN(H)?0:H,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(L,G,Z,se,H,ne)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(L,G,Z,se,H,ne,oe,ce,ve){var Ae=this.pdf.getImageProperties(L),we=1,ke=1,Ke=1,Ce=1;se!==void 0&&ce!==void 0&&(Ke=ce/se,Ce=ve/H,we=Ae.width/se*ce/se,ke=Ae.height/H*ve/H),ne===void 0&&(ne=G,oe=Z,G=0,Z=0),se!==void 0&&ce===void 0&&(ce=se,ve=H),se===void 0&&ce===void 0&&(ce=Ae.width,ve=Ae.height);for(var Q,Ye=this.ctx.transform.decompose(),Y=V(Ye.rotate.shx),J=new c,ie=(J=(J=(J=J.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new l(ne-G*Ke,oe-Z*Ce,se*we,H*ke)),_e=b.call(this,ie),ye=[],Se=0;Se<_e.length;Se+=1)ye.indexOf(_e[Se])===-1&&ye.push(_e[Se]);if(N(ye),this.autoPaging)for(var Be=ye[0],qe=ye[ye.length-1],at=Be;at<qe+1;at++){this.pdf.setPage(at);var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Lt=at===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],He=at===1?0:ut+(at-2)*_t;if(this.ctx.clip_path.length!==0){var De=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Q,this.posX+this.margin[3],-He+Lt+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=De}var rt=JSON.parse(JSON.stringify(ie));rt=S([rt],this.posX+this.margin[3],-He+Lt+this.ctx.prevPageLastElemOffset)[0];var At=(at>Be||at<qe)&&v.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,_t,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,Y),At&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",ie.x,ie.y,ie.w,ie.h,null,null,Y)};var b=function(L,G,Z){var se=[];G=G||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":se.push(Math.floor((L.y+H)/Z)+1);break;case"arc":se.push(Math.floor((L.y+H-L.radius)/Z)+1),se.push(Math.floor((L.y+H+L.radius)/Z)+1);break;case"qct":var ne=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);se.push(Math.floor((ne.y+H)/Z)+1),se.push(Math.floor((ne.y+ne.h+H)/Z)+1);break;case"bct":var oe=he(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);se.push(Math.floor((oe.y+H)/Z)+1),se.push(Math.floor((oe.y+oe.h+H)/Z)+1);break;case"rect":se.push(Math.floor((L.y+H)/Z)+1),se.push(Math.floor((L.y+L.h+H)/Z)+1)}for(var ce=0;ce<se.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<se[ce];)_.call(this);return se},_=function(){var L=this.fillStyle,G=this.strokeStyle,Z=this.font,se=this.lineCap,H=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=G,this.font=Z,this.lineCap=se,this.lineWidth=H,this.lineJoin=ne},S=function(L,G,Z){for(var se=0;se<L.length;se++)switch(L[se].type){case"bct":L[se].x2+=G,L[se].y2+=Z;case"qct":L[se].x1+=G,L[se].y1+=Z;case"mt":case"lt":case"arc":default:L[se].x+=G,L[se].y+=Z}return L},N=function(L){return L.sort(function(G,Z){return G-Z})},k=function(L,G){for(var Z,se,H=this.fillStyle,ne=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,ve=Math.abs(ce*this.ctx.transform.scaleX),Ae=this.lineJoin,we=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ke=[],Ce=0;Ce<ke.length;Ce++)if(ke[Ce].x!==void 0)for(var Q=b.call(this,ke[Ce]),Ye=0;Ye<Q.length;Ye+=1)Ke.indexOf(Q[Ye])===-1&&Ke.push(Q[Ye]);for(var Y=0;Y<Ke.length;Y++)for(;this.pdf.internal.getNumberOfPages()<Ke[Y];)_.call(this);if(N(Ke),this.autoPaging)for(var J=Ke[0],ie=Ke[Ke.length-1],_e=J;_e<ie+1;_e++){this.pdf.setPage(_e),this.fillStyle=H,this.strokeStyle=ne,this.lineCap=oe,this.lineWidth=ve,this.lineJoin=Ae;var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=_e===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=_e===1?0:Be+(_e-2)*qe;if(this.ctx.clip_path.length!==0){var ot=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-at+Se+this.ctx.prevPageLastElemOffset),A.call(this,L,!0),this.path=ot}if(se=JSON.parse(JSON.stringify(we)),this.path=S(se,this.posX+this.margin[3],-at+Se+this.ctx.prevPageLastElemOffset),G===!1||_e===0){var Lt=(_e>J||_e<ie)&&v.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,qe,null).clip().discardPath()),A.call(this,L,G),Lt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=ve,A.call(this,L,G),this.lineWidth=ce;this.path=we},A=function(L,G){if((L!=="stroke"||G||!g.call(this))&&(L==="stroke"||G||!m.call(this))){for(var Z,se,H=[],ne=this.path,oe=0;oe<ne.length;oe++){var ce=ne[oe];switch(ce.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:ce,deltas:[],abs:[]});break;case"lt":var ve=H.length;if(ne[oe-1]&&!isNaN(ne[oe-1].x)&&(Z=[ce.x-ne[oe-1].x,ce.y-ne[oe-1].y],ve>0)){for(;ve>=0;ve--)if(H[ve-1].close!==!0&&H[ve-1].begin!==!0){H[ve-1].deltas.push(Z),H[ve-1].abs.push(ce);break}}break;case"bct":Z=[ce.x1-ne[oe-1].x,ce.y1-ne[oe-1].y,ce.x2-ne[oe-1].x,ce.y2-ne[oe-1].y,ce.x-ne[oe-1].x,ce.y-ne[oe-1].y],H[H.length-1].deltas.push(Z);break;case"qct":var Ae=ne[oe-1].x+2/3*(ce.x1-ne[oe-1].x),we=ne[oe-1].y+2/3*(ce.y1-ne[oe-1].y),ke=ce.x+2/3*(ce.x1-ce.x),Ke=ce.y+2/3*(ce.y1-ce.y),Ce=ce.x,Q=ce.y;Z=[Ae-ne[oe-1].x,we-ne[oe-1].y,ke-ne[oe-1].x,Ke-ne[oe-1].y,Ce-ne[oe-1].x,Q-ne[oe-1].y],H[H.length-1].deltas.push(Z);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(ce)}}se=G?null:L==="stroke"?"stroke":"fill";for(var Ye=!1,Y=0;Y<H.length;Y++)if(H[Y].arc)for(var J=H[Y].abs,ie=0;ie<J.length;ie++){var _e=J[ie];_e.type==="arc"?F.call(this,_e.x,_e.y,_e.radius,_e.startAngle,_e.endAngle,_e.counterclockwise,void 0,G,!Ye):T.call(this,_e.x,_e.y),Ye=!0}else if(H[Y].close===!0)this.pdf.internal.out("h"),Ye=!1;else if(H[Y].begin!==!0){var ye=H[Y].start.x,Se=H[Y].start.y;B.call(this,H[Y].deltas,ye,Se),Ye=!0}se&&ee.call(this,se),G&&ae.call(this)}},W=function(L){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Z;case"top":return L+G-Z;case"hanging":return L+G-2*Z;case"middle":return L+G/2-Z;case"ideographic":return L;case"alphabetic":default:return L}},I=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(G,Z){this.colorStops.push([G,Z])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(L,G,Z,se,H,ne,oe,ce,ve){for(var Ae=re.call(this,Z,se,H,ne),we=0;we<Ae.length;we++){var ke=Ae[we];we===0&&(ve?R.call(this,ke.x1+L,ke.y1+G):T.call(this,ke.x1+L,ke.y1+G)),z.call(this,L,G,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}ce?ae.call(this):ee.call(this,oe)},ee=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ae=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(L,G){this.pdf.internal.out(r(L)+" "+n(G)+" m")},D=function(L){var G;switch(L.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var Z=this.pdf.getTextDimensions(L.text),se=W.call(this,L.y),H=I.call(this,se)-Z.h,ne=this.ctx.transform.applyToPoint(new i(L.x,se)),oe=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var ve,Ae,we,ke=this.ctx.transform.applyToRectangle(new l(L.x,se,Z.w,Z.h)),Ke=ce.applyToRectangle(new l(L.x,H,Z.w,Z.h)),Ce=b.call(this,Ke),Q=[],Ye=0;Ye<Ce.length;Ye+=1)Q.indexOf(Ce[Ye])===-1&&Q.push(Ce[Ye]);if(N(Q),this.autoPaging)for(var Y=Q[0],J=Q[Q.length-1],ie=Y;ie<J+1;ie++){this.pdf.setPage(ie);var _e=ie===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[2],Be=Se-this.margin[0],qe=this.pdf.internal.pageSize.width-this.margin[1],at=qe-this.margin[3],ot=ie===1?0:ye+(ie-2)*Be;if(this.ctx.clip_path.length!==0){var Lt=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ve,this.posX+this.margin[3],-1*ot+_e),A.call(this,"fill",!0),this.path=Lt}var ut=S([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-ot+_e+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*L.scale),we=this.lineWidth,this.lineWidth=we*L.scale);var _t=this.autoPaging!=="text";if(_t||ut.y+ut.h<=Se){if(_t||ut.y>=_e&&ut.x<=qe){var He=_t?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||qe-ut.x)[0],De=S([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-ot+_e+this.ctx.prevPageLastElemOffset)[0],rt=_t&&(ie>Y||ie<J)&&v.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Be,null).clip().discardPath()),this.pdf.text(He,De.x,De.y,{angle:L.angle,align:G,renderingMode:L.renderingMode}),rt&&this.pdf.restoreGraphicsState()}}else ut.y<Se&&(this.ctx.prevPageLastElemOffset+=Se-ut.y);L.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=we)}else L.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*L.scale),we=this.lineWidth,this.lineWidth=we*L.scale),this.pdf.text(L.text,ne.x+this.posX,ne.y+this.posY,{angle:L.angle,align:G,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=we)},T=function(L,G,Z,se){Z=Z||0,se=se||0,this.pdf.internal.out(r(L+Z)+" "+n(G+se)+" l")},B=function(L,G,Z){return this.pdf.lines(L,G,Z,null,null)},z=function(L,G,Z,se,H,ne,oe,ce){this.pdf.internal.out([e(s(Z+L)),e(a(se+G)),e(s(H+L)),e(a(ne+G)),e(s(oe+L)),e(a(ce+G)),"c"].join(" "))},re=function(L,G,Z,se){for(var H=2*Math.PI,ne=Math.PI/2;G>Z;)G-=H;var oe=Math.abs(Z-G);oe<H&&se&&(oe=H-oe);for(var ce=[],ve=se?-1:1,Ae=G;oe>1e-5;){var we=Ae+ve*Math.min(oe,ne);ce.push($.call(this,L,Ae,we)),oe-=Math.abs(we-Ae),Ae=we}return ce},$=function(L,G,Z){var se=(Z-G)/2,H=L*Math.cos(se),ne=L*Math.sin(se),oe=H,ce=-ne,ve=oe*oe+ce*ce,Ae=ve+oe*H+ce*ne,we=4/3*(Math.sqrt(2*ve*Ae)-Ae)/(oe*ne-ce*H),ke=oe-we*ce,Ke=ce+we*oe,Ce=ke,Q=-Ke,Ye=se+G,Y=Math.cos(Ye),J=Math.sin(Ye);return{x1:L*Math.cos(G),y1:L*Math.sin(G),x2:ke*Y-Ke*J,y2:ke*J+Ke*Y,x3:Ce*Y-Q*J,y3:Ce*J+Q*Y,x4:L*Math.cos(Z),y4:L*Math.sin(Z)}},V=function(L){return 180*L/Math.PI},X=function(L,G,Z,se,H,ne){var oe=L+.5*(Z-L),ce=G+.5*(se-G),ve=H+.5*(Z-H),Ae=ne+.5*(se-ne),we=Math.min(L,H,oe,ve),ke=Math.max(L,H,oe,ve),Ke=Math.min(G,ne,ce,Ae),Ce=Math.max(G,ne,ce,Ae);return new l(we,Ke,ke-we,Ce-Ke)},he=function(L,G,Z,se,H,ne,oe,ce){var ve,Ae,we,ke,Ke,Ce,Q,Ye,Y,J,ie,_e,ye,Se,Be=Z-L,qe=se-G,at=H-Z,ot=ne-se,Lt=oe-H,ut=ce-ne;for(Ae=0;Ae<41;Ae++)Y=(Q=(we=L+(ve=Ae/40)*Be)+ve*((Ke=Z+ve*at)-we))+ve*(Ke+ve*(H+ve*Lt-Ke)-Q),J=(Ye=(ke=G+ve*qe)+ve*((Ce=se+ve*ot)-ke))+ve*(Ce+ve*(ne+ve*ut-Ce)-Ye),Ae==0?(ie=Y,_e=J,ye=Y,Se=J):(ie=Math.min(ie,Y),_e=Math.min(_e,J),ye=Math.max(ye,Y),Se=Math.max(Se,J));return new l(Math.round(ie),Math.round(_e),Math.round(ye-ie),Math.round(Se-_e))},je=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,G,Z=(L=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:G}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(bt.API),function(t){var e=function(a){var i,l,c,u,d,h,f,m,g,v;for(l=[],c=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(f=d%85))/85)%85,l.push(h+33,f+33,m+33,g+33,v+33)):l.push(122);return function(b,_){for(var S=_;S>0;S--)b.pop()}(l,i.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var i,l,c,u,d,h=String,f="length",m=255,g="charCodeAt",v="slice",b="replace";for(a[v](-2),a=a[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(a+=i="uuuuu"[v](a[f]%5||5))[f];d>u;u+=5)l=52200625*(a[g](u)-33)+614125*(a[g](u+1)-33)+7225*(a[g](u+2)-33)+85*(a[g](u+3)-33)+(a[g](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(_,S){for(var N=S;N>0;N--)_.pop()}(c,i[f]),h.fromCharCode.apply(h,c)},n=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},s=function(a){for(var i=new Uint8Array(a.length),l=a.length;l--;)i[l]=a.charCodeAt(l);return a=(i=Bv(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var l=0,c=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),l=0;l<i.length;l+=1)switch(i[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(bt.API),function(t){t.loadFile=function(e,r,n){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var h=new XMLHttpRequest,f=0,m=function(g){var v=g.length,b=[],_=String.fromCharCode;for(f=0;f<v;f+=1)b.push(_(255&g.charCodeAt(f)));return b.join("")};if(h.open("GET",c,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(m(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return m(h.responseText)}(s,a,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(bt.API),function(t){function e(){return(wt.html2canvas?Promise.resolve(wt.html2canvas):Un(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(wt.DOMPurify?Promise.resolve(wt.DOMPurify):Un(()=>import("./purify.es-D-QPbZEk.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var l=dr(i);return l==="undefined"?"undefined":l==="string"||i instanceof String?"string":l==="number"||i instanceof Number?"number":l==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(i,l){var c=document.createElement(i);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function i(l){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,l){return i.__proto__=l||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var m=u[f],g=m.src.find(function(v){return v.format==="truetype"});g&&c.addFont(g.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,l):this.outputPdf(i,l)},a.prototype.outputPdf=function(i,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,l)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(n(i)!=="object")return this;var l=Object.keys(i||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(i,l){return this.then(function(){var c=i in a.template.prop?this.prop[i]:this.opt[i];return l?l(c):c})},a.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||bt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:l(i.inner.width,i.k),height:l(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,l,c,u){return i!=null&&(this.progress.val=i),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,l,c,u){return this.setProgress(i?this.progress.val+i:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,l){var c=this;return this.thenCore(i,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(i,l,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,l);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,l){return Promise.prototype.then.call(this,i,l)},a.prototype.thenList=function(i){var l=this;return i.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(i){i&&(i=i.bind(this));var l=Promise.prototype.catch.call(this,i);return a.convert(l,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,bt.getPageSize=function(i,l,c){if(dr(i)==="object"){var u=i;i=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,g=0,v=0;if(f.hasOwnProperty(h))g=f[h][1]/d,v=f[h][0]/d;else try{g=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",v>g&&(m=v,v=g,g=m);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>v&&(m=v,v=g,g=m)}return{width:v,height:g,unit:l,k:d,orientation:i}},t.html=function(i,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Wv):null;var c=new a(l);return l.worker?c:c.from(i).doCallback()}}(bt.API),bt.API.addJS=function(t){return _w=t,this.internal.events.subscribe("postPutResources",function(){Wf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Sw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_w+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wf!==void 0&&Sw!==void 0&&this.internal.out("/Names <</JavaScript "+Wf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=r.internal.newObject();d.push(h);var f=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var i={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var i=n.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])}(bt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var f,m=256*h.charCodeAt(4)+h.charCodeAt(5),g=h.length,v={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=m,e.indexOf(h.charCodeAt(b+1))!==-1){f=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),v={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:f,numcomponents:h.charCodeAt(b+9)};break}m=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:s}}return d}}(bt.API);var tc,Hf,jw,Nw,Cw,pB=function(){var t,e,r;function n(a){var i,l,c,u,d,h,f,m,g,v,b,_,S,N;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),g=(function(){var k,A;for(A=[],k=0;k<4;++k)A.push(String.fromCharCode(this.data[this.pos++]));return A}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,_=0;0<=i?_<i:_>i;0<=i?++_:--_)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(S=0;0<=v?S<v:S>v;0<=v?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":f=(b=this.read(i)).indexOf(0),m=String.fromCharCode.apply(String,b.slice(0,f)),this.text[m]=String.fromCharCode.apply(String,b.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var i,l;for(l=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*i),c=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,f,m,g){var v,b,_,S,N,k,A,W,I,F,ee,ae,R,D,T,B,z,re,$,V,X,he=Math.ceil((u.width-h)/m),je=Math.ceil((u.height-f)/g),L=u.width==he&&u.height==je;for(D=i*he,ae=L?l:new Uint8Array(D*je),k=a.length,R=0,b=0;R<je&&c<k;){switch(a[c++]){case 0:for(S=z=0;z<D;S=z+=1)ae[b++]=a[c++];break;case 1:for(S=re=0;re<D;S=re+=1)v=a[c++],N=S<i?0:ae[b-i],ae[b++]=(v+N)%256;break;case 2:for(S=$=0;$<D;S=$+=1)v=a[c++],_=(S-S%i)/i,T=R&&ae[(R-1)*D+_*i+S%i],ae[b++]=(T+v)%256;break;case 3:for(S=V=0;V<D;S=V+=1)v=a[c++],_=(S-S%i)/i,N=S<i?0:ae[b-i],T=R&&ae[(R-1)*D+_*i+S%i],ae[b++]=(v+Math.floor((N+T)/2))%256;break;case 4:for(S=X=0;X<D;S=X+=1)v=a[c++],_=(S-S%i)/i,N=S<i?0:ae[b-i],R===0?T=B=0:(T=ae[(R-1)*D+_*i+S%i],B=_&&ae[(R-1)*D+(_-1)*i+S%i]),A=N+T-B,W=Math.abs(A-N),F=Math.abs(A-T),ee=Math.abs(A-B),I=W<=F&&W<=ee?N:F<=ee?T:B,ae[b++]=(v+I)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!L){var G=((f+R*g)*u.width+h)*i,Z=R*D;for(S=0;S<he;S+=1){for(var se=0;se<i;se+=1)l[G++]=ae[Z++];G+=(m-1)*i}}R++}}return a=H7(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},n.prototype.decodePalette=function(){var a,i,l,c,u,d,h,f,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,a=0,i=h=0,f=l.length;h<f;i=h+=3)u[c++]=l[i],u[c++]=l[i+1],u[c++]=l[i+2],u[c++]=(m=d[a++])!=null?m:255;return u},n.prototype.copyToImageData=function(a,i){var l,c,u,d,h,f,m,g,v,b,_;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),c=4,l=!0),g=(u=a.data||a).length,h=v||i,d=f=0,c===1)for(;d<g;)m=v?4*i[d/4]:f,b=h[m++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=l?h[m++]:255,f=m;else for(;d<g;)m=v?4*i[d/4]:f,u[d++]=h[m++],u[d++]=h[m++],u[d++]=h[m++],u[d++]=l?h[m++]:255,f=m},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(wt)==="[object Window]"){try{e=wt.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var i,l,c,u,d,h,f,m;if(this.animation){for(m=[],l=d=0,h=(f=this.animation.frames).length;d<h;l=++d)i=f[l],c=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,m.push(i.image=t(c));return m}},n.prototype.renderFrame=function(a,i){var l,c,u;return l=(c=this.animation.frames)[i],u=c[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(a){var i,l,c,u,d,h,f=this;return l=0,h=this.animation,u=h.numFrames,c=h.frames,d=h.numPlays,(i=function(){var m,g;if(m=l++%u,g=c[m],f.renderFrame(a,m),u>1&&l/u<d)return f.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var i,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(l=i.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),i.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function mB(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var l=null,c=null;a&&(l=e,c=i,e+=3*i);var u=!0,d=[],h=0,f=null,m=0,g=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,g=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],!(1&v)&&(f=null),m=v>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,k=t[e++],A=k>>6&1,W=1<<(7&k)+1,I=l,F=c,ee=!1;k>>7&&(ee=!0,I=e,F=W,e+=3*W);var ae=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:b,y:_,width:S,height:N,has_local_palette:ee,palette_offset:I,palette_size:F,data_offset:ae,data_length:e-ae,transparent_index:f,interlaced:!!A,delay:h,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(D){if(D<0||D>=d.length)throw new Error("Frame index out of range.");return d[D]},this.decodeAndBlitFrameBGRA=function(D,T){var B=this.frameInfo(D),z=B.width*B.height,re=new Uint8Array(z);kw(t,B.data_offset,re,z);var $=B.palette_offset,V=B.transparent_index;V===null&&(V=256);var X=B.width,he=r-X,je=X,L=4*(B.y*r+B.x),G=4*((B.y+B.height)*r+B.x),Z=L,se=4*he;B.interlaced===!0&&(se+=4*r*7);for(var H=8,ne=0,oe=re.length;ne<oe;++ne){var ce=re[ne];if(je===0&&(je=X,(Z+=se)>=G&&(se=4*he+4*r*(H-1),Z=L+(X+he)*(H<<1),H>>=1)),ce===V)Z+=4;else{var ve=t[$+3*ce],Ae=t[$+3*ce+1],we=t[$+3*ce+2];T[Z++]=we,T[Z++]=Ae,T[Z++]=ve,T[Z++]=255}--je}},this.decodeAndBlitFrameRGBA=function(D,T){var B=this.frameInfo(D),z=B.width*B.height,re=new Uint8Array(z);kw(t,B.data_offset,re,z);var $=B.palette_offset,V=B.transparent_index;V===null&&(V=256);var X=B.width,he=r-X,je=X,L=4*(B.y*r+B.x),G=4*((B.y+B.height)*r+B.x),Z=L,se=4*he;B.interlaced===!0&&(se+=4*r*7);for(var H=8,ne=0,oe=re.length;ne<oe;++ne){var ce=re[ne];if(je===0&&(je=X,(Z+=se)>=G&&(se=4*he+4*r*(H-1),Z=L+(X+he)*(H<<1),H>>=1)),ce===V)Z+=4;else{var ve=t[$+3*ce],Ae=t[$+3*ce+1],we=t[$+3*ce+2];T[Z++]=ve,T[Z++]=Ae,T[Z++]=we,T[Z++]=255}--je}}}function kw(t,e,r,n){for(var s=t[e++],a=1<<s,i=a+1,l=i+1,c=s+1,u=(1<<c)-1,d=0,h=0,f=0,m=t[e++],g=new Int32Array(4096),v=null;;){for(;d<16&&m!==0;)h|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<c)break;var b=h&u;if(h>>=c,d-=c,b!==a){if(b===i)break;for(var _=b<l?b:v,S=0,N=_;N>a;)N=g[N]>>8,++S;var k=N;if(f+S+(_!==b?1:0)>n)return void mr.log("Warning, gif stream longer than expected.");r[f++]=k;var A=f+=S;for(_!==b&&(r[f++]=k),N=_;S--;)N=g[N],r[--A]=255&N,N>>=8;v!==null&&l<4096&&(g[l++]=v<<8|k,l>=u+1&&c<12&&(++c,u=u<<1|1)),v=b}else l=i+1,u=(1<<(c=s+1))-1,v=null}return f!==n&&mr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vy(t){var e,r,n,s,a,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),f=new Array(65535),m=new Array(64),g=new Array(64),v=[],b=0,_=7,S=new Array(64),N=new Array(64),k=new Array(64),A=new Array(256),W=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(L,G){for(var Z=0,se=0,H=new Array,ne=1;ne<=16;ne++){for(var oe=1;oe<=L[ne];oe++)H[G[se]]=[],H[G[se]][0]=Z,H[G[se]][1]=ne,se++,Z++;Z*=2}return H}function $(L){for(var G=L[0],Z=L[1]-1;Z>=0;)G&1<<Z&&(b|=1<<_),Z--,--_<0&&(b==255?(V(255),V(0)):V(b),_=7,b=0)}function V(L){v.push(L)}function X(L){V(L>>8&255),V(255&L)}function he(L,G,Z,se,H){for(var ne,oe=H[0],ce=H[240],ve=function(J,ie){var _e,ye,Se,Be,qe,at,ot,Lt,ut,_t,He=0;for(ut=0;ut<8;++ut){_e=J[He],ye=J[He+1],Se=J[He+2],Be=J[He+3],qe=J[He+4],at=J[He+5],ot=J[He+6];var De=_e+(Lt=J[He+7]),rt=_e-Lt,At=ye+ot,jt=ye-ot,it=Se+at,Qr=Se-at,Je=Be+qe,It=Be-qe,dt=De+Je,gr=De-Je,Ar=At+it,fr=At-it;J[He]=dt+Ar,J[He+4]=dt-Ar;var kt=.707106781*(fr+gr);J[He+2]=gr+kt,J[He+6]=gr-kt;var rr=.382683433*((dt=It+Qr)-(fr=jt+rt)),Po=.5411961*dt+rr,fn=1.306562965*fr+rr,ba=.707106781*(Ar=Qr+jt),wa=rt+ba,yt=rt-ba;J[He+5]=yt+Po,J[He+3]=yt-Po,J[He+1]=wa+fn,J[He+7]=wa-fn,He+=8}for(He=0,ut=0;ut<8;++ut){_e=J[He],ye=J[He+8],Se=J[He+16],Be=J[He+24],qe=J[He+32],at=J[He+40],ot=J[He+48];var $s=_e+(Lt=J[He+56]),Sa=_e-Lt,zn=ye+ot,en=ye-ot,Yr=Se+at,is=Se-at,Sl=Be+qe,Za=Be-qe,Us=$s+Sl,Vs=$s-Sl,qs=zn+Yr,_a=zn-Yr;J[He]=Us+qs,J[He+32]=Us-qs;var _s=.707106781*(_a+Vs);J[He+16]=Vs+_s,J[He+48]=Vs-_s;var ja=.382683433*((Us=Za+is)-(_a=en+Sa)),Eo=.5411961*Us+ja,_l=1.306562965*_a+ja,jl=.707106781*(qs=is+en),Nl=Sa+jl,Cl=Sa-jl;J[He+40]=Cl+Eo,J[He+24]=Cl-Eo,J[He+8]=Nl+_l,J[He+56]=Nl-_l,He++}for(ut=0;ut<64;++ut)_t=J[ut]*ie[ut],m[ut]=_t>0?_t+.5|0:_t-.5|0;return m}(L,G),Ae=0;Ae<64;++Ae)g[I[Ae]]=ve[Ae];var we=g[0]-Z;Z=g[0],we==0?$(se[0]):($(se[f[ne=32767+we]]),$(h[ne]));for(var ke=63;ke>0&&g[ke]==0;)ke--;if(ke==0)return $(oe),Z;for(var Ke,Ce=1;Ce<=ke;){for(var Q=Ce;g[Ce]==0&&Ce<=ke;)++Ce;var Ye=Ce-Q;if(Ye>=16){Ke=Ye>>4;for(var Y=1;Y<=Ke;++Y)$(ce);Ye&=15}ne=32767+g[Ce],$(H[(Ye<<4)+f[ne]]),$(h[ne]),Ce++}return ke!=63&&$(oe),Z}function je(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(G){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var H=i((Z[se]*G+50)/100);H=Math.min(Math.max(H,1),255),l[I[se]]=H}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((ne[oe]*G+50)/100);ce=Math.min(Math.max(ce,1),255),c[I[oe]]=ce}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,we=0;we<8;we++)for(var ke=0;ke<8;ke++)u[Ae]=1/(l[I[Ae]]*ve[we]*ve[ke]*8),d[Ae]=1/(c[I[Ae]]*ve[we]*ve[ke]*8),Ae++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,G){G&&je(G),v=new Array,b=0,_=7,X(65496),X(65504),X(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),X(1),X(1),V(0),V(0),function(){X(65499),X(132),V(0);for(var ye=0;ye<64;ye++)V(l[ye]);V(1);for(var Se=0;Se<64;Se++)V(c[Se])}(),function(ye,Se){X(65472),X(17),V(8),X(Se),X(ye),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(L.width,L.height),function(){X(65476),X(418),V(0);for(var ye=0;ye<16;ye++)V(F[ye+1]);for(var Se=0;Se<=11;Se++)V(ee[Se]);V(16);for(var Be=0;Be<16;Be++)V(ae[Be+1]);for(var qe=0;qe<=161;qe++)V(R[qe]);V(1);for(var at=0;at<16;at++)V(D[at+1]);for(var ot=0;ot<=11;ot++)V(T[ot]);V(17);for(var Lt=0;Lt<16;Lt++)V(B[Lt+1]);for(var ut=0;ut<=161;ut++)V(z[ut])}(),X(65498),X(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Z=0,se=0,H=0;b=0,_=7,this.encode.displayName="_encode_";for(var ne,oe,ce,ve,Ae,we,ke,Ke,Ce,Q=L.data,Ye=L.width,Y=L.height,J=4*Ye,ie=0;ie<Y;){for(ne=0;ne<J;){for(Ae=J*ie+ne,ke=-1,Ke=0,Ce=0;Ce<64;Ce++)we=Ae+(Ke=Ce>>3)*J+(ke=4*(7&Ce)),ie+Ke>=Y&&(we-=J*(ie+1+Ke-Y)),ne+ke>=J&&(we-=ne+ke-J+4),oe=Q[we++],ce=Q[we++],ve=Q[we++],S[Ce]=(W[oe]+W[ce+256>>0]+W[ve+512>>0]>>16)-128,N[Ce]=(W[oe+768>>0]+W[ce+1024>>0]+W[ve+1280>>0]>>16)-128,k[Ce]=(W[oe+1280>>0]+W[ce+1536>>0]+W[ve+1792>>0]>>16)-128;Z=he(S,u,Z,e,n),se=he(N,d,se,r,s),H=he(k,d,H,r,s),ne+=32}ie+=8}if(_>=0){var _e=[];_e[1]=_+1,_e[0]=(1<<_+1)-1,$(_e)}return X(65497),new Uint8Array(v)},t=t||50,function(){for(var L=String.fromCharCode,G=0;G<256;G++)A[G]=L(G)}(),e=re(F,ee),r=re(D,T),n=re(ae,R),s=re(B,z),function(){for(var L=1,G=2,Z=1;Z<=15;Z++){for(var se=L;se<G;se++)f[32767+se]=Z,h[32767+se]=[],h[32767+se][1]=Z,h[32767+se][0]=se;for(var H=-(G-1);H<=-L;H++)f[32767+H]=Z,h[32767+H]=[],h[32767+H][1]=Z,h[32767+H][0]=G-1+H;L<<=1,G<<=1}}(),function(){for(var L=0;L<256;L++)W[L]=19595*L,W[L+256>>0]=38470*L,W[L+512>>0]=7471*L+32768,W[L+768>>0]=-11059*L,W[L+1024>>0]=-21709*L,W[L+1280>>0]=32768*L+8421375,W[L+1536>>0]=-27439*L,W[L+1792>>0]=-5329*L}(),je(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Aw(t){function e(F){if(!F)throw Error("assert :P")}function r(F,ee,ae){for(var R=0;4>R;R++)if(F[ee+R]!=ae.charCodeAt(R))return!0;return!1}function n(F,ee,ae,R,D){for(var T=0;T<D;T++)F[ee+T]=ae[R+T]}function s(F,ee,ae,R){for(var D=0;D<R;D++)F[ee+D]=ae}function a(F){return new Int32Array(F)}function i(F,ee){for(var ae=[],R=0;R<F;R++)ae.push(new ee);return ae}function l(F,ee){var ae=[];return function R(D,T,B){for(var z=B[T],re=0;re<z&&(D.push(B.length>T+1?[]:new ee),!(B.length<T+1));re++)R(D[re],T+1,B)}(ae,0,F),ae}var c=function(){var F=this;function ee(p,y){for(var j=1<<y-1>>>0;p&j;)j>>>=1;return j?(p&j-1)+j:p}function ae(p,y,j,C,P){e(!(C%j));do p[y+(C-=j)]=P;while(0<C)}function R(p,y,j,C,P){if(e(2328>=P),512>=P)var O=a(512);else if((O=a(P))==null)return 0;return function(M,U,q,K,ue,xe){var be,pe,Me=U,Pe=1<<q,de=a(16),fe=a(16);for(e(ue!=0),e(K!=null),e(M!=null),e(0<q),pe=0;pe<ue;++pe){if(15<K[pe])return 0;++de[K[pe]]}if(de[0]==ue)return 0;for(fe[1]=0,be=1;15>be;++be){if(de[be]>1<<be)return 0;fe[be+1]=fe[be]+de[be]}for(pe=0;pe<ue;++pe)be=K[pe],0<K[pe]&&(xe[fe[be]++]=pe);if(fe[15]==1)return(K=new D).g=0,K.value=xe[0],ae(M,Me,1,Pe,K),Pe;var Re,$e=-1,Oe=Pe-1,nt=0,Xe=1,gt=1,Qe=1<<q;for(pe=0,be=1,ue=2;be<=q;++be,ue<<=1){if(Xe+=gt<<=1,0>(gt-=de[be]))return 0;for(;0<de[be];--de[be])(K=new D).g=be,K.value=xe[pe++],ae(M,Me+nt,ue,Qe,K),nt=ee(nt,be)}for(be=q+1,ue=2;15>=be;++be,ue<<=1){if(Xe+=gt<<=1,0>(gt-=de[be]))return 0;for(;0<de[be];--de[be]){if(K=new D,(nt&Oe)!=$e){for(Me+=Qe,Re=1<<($e=be)-q;15>$e&&!(0>=(Re-=de[$e]));)++$e,Re<<=1;Pe+=Qe=1<<(Re=$e-q),M[U+($e=nt&Oe)].g=Re+q,M[U+$e].value=Me-U-$e}K.g=be-q,K.value=xe[pe++],ae(M,Me+(nt>>q),ue,Qe,K),nt=ee(nt,be)}}return Xe!=2*fe[15]-1?0:Pe}(p,y,j,C,P,O)}function D(){this.value=this.g=0}function T(){this.value=this.g=0}function B(){this.G=i(5,D),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(pn,T)}function z(p,y,j,C){e(p!=null),e(y!=null),e(2147483648>C),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=y,p.pa=j,p.Jd=y,p.Yc=j+C,p.Zc=4<=C?j+C-4+1:j,ne(p)}function re(p,y){for(var j=0;0<y--;)j|=ce(p,128)<<y;return j}function $(p,y){var j=re(p,y);return oe(p)?-j:j}function V(p,y,j,C){var P,O=0;for(e(p!=null),e(y!=null),e(4294967288>C),p.Sb=C,p.Ra=0,p.u=0,p.h=0,4<C&&(C=4),P=0;P<C;++P)O+=y[j+P]<<8*P;p.Ra=O,p.bb=C,p.oa=y,p.pa=j}function X(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ul-8>>>0,++p.bb,p.u-=8;Z(p)&&(p.h=1,p.u=0)}function he(p,y){if(e(0<=y),!p.h&&y<=$l){var j=G(p)&Bl[y];return p.u+=y,X(p),j}return p.h=1,p.u=0}function je(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(p){return p.Ra>>>(p.u&Ul-1)>>>0}function Z(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ul}function se(p,y){p.u=y,p.h=Z(p)}function H(p){p.u>=Au&&(e(p.u>=Au),X(p))}function ne(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function oe(p){return re(p,1)}function ce(p,y){var j=p.Ca;0>p.b&&ne(p);var C=p.b,P=j*y>>>8,O=(p.I>>>C>P)+0;for(O?(j-=P,p.I-=P+1<<C>>>0):j=P+1,C=j,P=0;256<=C;)P+=8,C>>=8;return C=7^P+Hn[C],p.b-=C,p.Ca=(j<<C)-1,O}function ve(p,y,j){p[y+0]=j>>24&255,p[y+1]=j>>16&255,p[y+2]=j>>8&255,p[y+3]=j>>0&255}function Ae(p,y){return p[y+0]<<0|p[y+1]<<8}function we(p,y){return Ae(p,y)|p[y+2]<<16}function ke(p,y){return Ae(p,y)|Ae(p,y+2)<<16}function Ke(p,y){var j=1<<y;return e(p!=null),e(0<y),p.X=a(j),p.X==null?0:(p.Mb=32-y,p.Xa=y,1)}function Ce(p,y){e(p!=null),e(y!=null),e(p.Xa==y.Xa),n(y.X,0,p.X,0,1<<y.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function Ye(p,y,j,C){e(j!=null),e(C!=null);var P=j[0],O=C[0];return P==0&&(P=(p*O+y/2)/y),O==0&&(O=(y*P+p/2)/p),0>=P||0>=O?0:(j[0]=P,C[0]=O,1)}function Y(p,y){return p+(1<<y)-1>>>y}function J(p,y){return((4278255360&p)+(4278255360&y)>>>0&4278255360)+((16711935&p)+(16711935&y)>>>0&16711935)>>>0}function ie(p,y){F[y]=function(j,C,P,O,M,U,q){var K;for(K=0;K<M;++K){var ue=F[p](U[q+K-1],P,O+K);U[q+K]=J(j[C+K],ue)}}}function _e(){this.ud=this.hd=this.jd=0}function ye(p,y){return((4278124286&(p^y))>>>1)+(p&y)>>>0}function Se(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Be(p,y){return Se(p+(p-y+.5>>1))}function qe(p,y,j){return Math.abs(y-j)-Math.abs(p-j)}function at(p,y,j,C,P,O,M){for(C=O[M-1],j=0;j<P;++j)O[M+j]=C=J(p[y+j],C)}function ot(p,y,j,C,P){var O;for(O=0;O<j;++O){var M=p[y+O],U=M>>8&255,q=16711935&(q=(q=16711935&M)+((U<<16)+U));C[P+O]=(4278255360&M)+q>>>0}}function Lt(p,y){y.jd=p>>0&255,y.hd=p>>8&255,y.ud=p>>16&255}function ut(p,y,j,C,P,O){var M;for(M=0;M<C;++M){var U=y[j+M],q=U>>>8,K=U,ue=255&(ue=(ue=U>>>16)+((p.jd<<24>>24)*(q<<24>>24)>>>5));K=255&(K=(K=K+((p.hd<<24>>24)*(q<<24>>24)>>>5))+((p.ud<<24>>24)*(ue<<24>>24)>>>5)),P[O+M]=(4278255360&U)+(ue<<16)+K}}function _t(p,y,j,C,P){F[y]=function(O,M,U,q,K,ue,xe,be,pe){for(q=xe;q<be;++q)for(xe=0;xe<pe;++xe)K[ue++]=P(U[C(O[M++])])},F[p]=function(O,M,U,q,K,ue,xe){var be=8>>O.b,pe=O.Ea,Me=O.K[0],Pe=O.w;if(8>be)for(O=(1<<O.b)-1,Pe=(1<<be)-1;M<U;++M){var de,fe=0;for(de=0;de<pe;++de)de&O||(fe=C(q[K++])),ue[xe++]=P(Me[fe&Pe]),fe>>=be}else F["VP8LMapColor"+j](q,K,Me,Pe,ue,xe,M,U,pe)}}function He(p,y,j,C,P){for(j=y+j;y<j;){var O=p[y++];C[P++]=O>>16&255,C[P++]=O>>8&255,C[P++]=O>>0&255}}function De(p,y,j,C,P){for(j=y+j;y<j;){var O=p[y++];C[P++]=O>>16&255,C[P++]=O>>8&255,C[P++]=O>>0&255,C[P++]=O>>24&255}}function rt(p,y,j,C,P){for(j=y+j;y<j;){var O=(M=p[y++])>>16&240|M>>12&15,M=M>>0&240|M>>28&15;C[P++]=O,C[P++]=M}}function At(p,y,j,C,P){for(j=y+j;y<j;){var O=(M=p[y++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;C[P++]=O,C[P++]=M}}function jt(p,y,j,C,P){for(j=y+j;y<j;){var O=p[y++];C[P++]=O>>0&255,C[P++]=O>>8&255,C[P++]=O>>16&255}}function it(p,y,j,C,P,O){if(O==0)for(j=y+j;y<j;)ve(C,((O=p[y++])[0]>>24|O[1]>>8&65280|O[2]<<8&16711680|O[3]<<24)>>>0),P+=32;else n(C,P,p,y,j)}function Qr(p,y){F[y][0]=F[p+"0"],F[y][1]=F[p+"1"],F[y][2]=F[p+"2"],F[y][3]=F[p+"3"],F[y][4]=F[p+"4"],F[y][5]=F[p+"5"],F[y][6]=F[p+"6"],F[y][7]=F[p+"7"],F[y][8]=F[p+"8"],F[y][9]=F[p+"9"],F[y][10]=F[p+"10"],F[y][11]=F[p+"11"],F[y][12]=F[p+"12"],F[y][13]=F[p+"13"],F[y][14]=F[p+"0"],F[y][15]=F[p+"0"]}function Je(p){return p==xg||p==bg||p==pf||p==wg}function It(){this.eb=[],this.size=this.A=this.fb=0}function dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new dt,this.sd=null}function Ar(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function fr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function rr(p,y){var j=p.T,C=y.ba.f.RGBA,P=C.eb,O=C.fb+p.ka*C.A,M=Ps[y.ba.S],U=p.y,q=p.O,K=p.f,ue=p.N,xe=p.ea,be=p.W,pe=y.cc,Me=y.dc,Pe=y.Mc,de=y.Nc,fe=p.ka,Re=p.ka+p.T,$e=p.U,Oe=$e+1>>1;for(fe==0?M(U,q,null,null,K,ue,xe,be,K,ue,xe,be,P,O,null,null,$e):(M(y.ec,y.fc,U,q,pe,Me,Pe,de,K,ue,xe,be,P,O-C.A,P,O,$e),++j);fe+2<Re;fe+=2)pe=K,Me=ue,Pe=xe,de=be,ue+=p.Rc,be+=p.Rc,O+=2*C.A,M(U,(q+=2*p.fa)-p.fa,U,q,pe,Me,Pe,de,K,ue,xe,be,P,O-C.A,P,O,$e);return q+=p.fa,p.j+Re<p.o?(n(y.ec,y.fc,U,q,$e),n(y.cc,y.dc,K,ue,Oe),n(y.Mc,y.Nc,xe,be,Oe),j--):1&Re||M(U,q,null,null,K,ue,xe,be,K,ue,xe,be,P,O+C.A,null,null,$e),j}function Po(p,y,j){var C=p.F,P=[p.J];if(C!=null){var O=p.U,M=y.ba.S,U=M==ff||M==pf;y=y.ba.f.RGBA;var q=[0],K=p.ka;q[0]=p.T,p.Kb&&(K==0?--q[0]:(--K,P[0]-=p.width),p.j+p.ka+p.T==p.o&&(q[0]=p.o-p.j-K));var ue=y.eb;K=y.fb+K*y.A,p=vr(C,P[0],p.width,O,q,ue,K+(U?0:3),y.A),e(j==q),p&&Je(M)&&ks(ue,K,U,O,q,y.A)}return 0}function fn(p){var y=p.ma,j=y.ba.S,C=11>j,P=j==df||j==hf||j==ff||j==vg||j==12||Je(j);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Cu(y.Oa,p,P?11:12))return 0;if(P&&Je(j)&&Ue(),p.da)alert("todo:use_scaling");else{if(C){if(y.Ib=kt,p.Kb){if(j=p.U+1>>1,y.memory=a(p.U+2*j),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+p.U,y.Mc=y.cc,y.Nc=y.dc+j,y.Ib=rr,Ue()}}else alert("todo:EmitYUV");P&&(y.Jb=Po,C&&ge())}if(C&&!_1){for(p=0;256>p;++p)nA[p]=89858*(p-128)+gf>>mf,iA[p]=-22014*(p-128)+gf,aA[p]=-45773*(p-128),sA[p]=113618*(p-128)+gf>>mf;for(p=Ou;p<jg;++p)y=76283*(p-16)+gf>>mf,oA[p-Ou]=os(y,255),lA[p-Ou]=os(y+8>>4,15);_1=1}return 1}function ba(p){var y=p.ma,j=p.U,C=p.T;return e(!(1&p.ka)),0>=j||0>=C?0:(j=y.Ib(p,y),y.Jb!=null&&y.Jb(p,y,j),y.Dc+=j,1)}function wa(p){p.ma.memory=null}function yt(p,y,j,C){return he(p,8)!=47?0:(y[0]=he(p,14)+1,j[0]=he(p,14)+1,C[0]=he(p,1),he(p,3)!=0?0:!p.h)}function $s(p,y){if(4>p)return p+1;var j=p-2>>1;return(2+(1&p)<<j)+he(y,j)+1}function Sa(p,y){return 120<y?y-120:1<=(j=((j=q3[y-1])>>4)*p+(8-(15&j)))?j:1;var j}function zn(p,y,j){var C=G(j),P=p[y+=255&C].g-8;return 0<P&&(se(j,j.u+8),C=G(j),y+=p[y].value,y+=C&(1<<P)-1),se(j,j.u+p[y].g),p[y].value}function en(p,y,j){return j.g+=p.g,j.value+=p.value<<y>>>0,e(8>=j.g),p.g}function Yr(p,y,j){var C=p.xc;return e((y=C==0?0:p.vc[p.md*(j>>C)+(y>>C)])<p.Wb),p.Ya[y]}function is(p,y,j,C){var P=p.ab,O=p.c*y,M=p.C;y=M+y;var U=j,q=C;for(C=p.Ta,j=p.Ua;0<P--;){var K=p.gc[P],ue=M,xe=y,be=U,pe=q,Me=(q=C,U=j,K.Ea);switch(e(ue<xe),e(xe<=K.nc),K.hc){case 2:nf(be,pe,(xe-ue)*Me,q,U);break;case 0:var Pe=ue,de=xe,fe=q,Re=U,$e=(Qe=K).Ea;Pe==0&&(gg(be,pe,null,null,1,fe,Re),at(be,pe+1,0,0,$e-1,fe,Re+1),pe+=$e,Re+=$e,++Pe);for(var Oe=1<<Qe.b,nt=Oe-1,Xe=Y($e,Qe.b),gt=Qe.K,Qe=Qe.w+(Pe>>Qe.b)*Xe;Pe<de;){var Qt=gt,or=Qe,Yt=1;for(Pu(be,pe,fe,Re-$e,1,fe,Re);Yt<$e;){var Vt=(Yt&~nt)+Oe;Vt>$e&&(Vt=$e),(0,Ti[Qt[or++]>>8&15])(be,pe+ +Yt,fe,Re+Yt-$e,Vt-Yt,fe,Re+Yt),Yt=Vt}pe+=$e,Re+=$e,++Pe&nt||(Qe+=Xe)}xe!=K.nc&&n(q,U-Me,q,U+(xe-ue-1)*Me,Me);break;case 1:for(Me=be,de=pe,$e=(be=K.Ea)-(Re=be&~(fe=(pe=1<<K.b)-1)),Pe=Y(be,K.b),Oe=K.K,K=K.w+(ue>>K.b)*Pe;ue<xe;){for(nt=Oe,Xe=K,gt=new _e,Qe=de+Re,Qt=de+be;de<Qe;)Lt(nt[Xe++],gt),Oo(gt,Me,de,pe,q,U),de+=pe,U+=pe;de<Qt&&(Lt(nt[Xe++],gt),Oo(gt,Me,de,$e,q,U),de+=$e,U+=$e),++ue&fe||(K+=Pe)}break;case 3:if(be==q&&pe==U&&0<K.b){for(de=q,be=Me=U+(xe-ue)*Me-(Re=(xe-ue)*Y(K.Ea,K.b)),pe=q,fe=U,Pe=[],Re=($e=Re)-1;0<=Re;--Re)Pe[Re]=pe[fe+Re];for(Re=$e-1;0<=Re;--Re)de[be+Re]=Pe[Re];js(K,ue,xe,q,Me,q,U)}else js(K,ue,xe,be,pe,q,U)}U=C,q=j}q!=j&&n(C,j,U,q,O)}function Sl(p,y){var j=p.V,C=p.Ba+p.c*p.C,P=y-p.C;if(e(y<=p.l.o),e(16>=P),0<P){var O=p.l,M=p.Ta,U=p.Ua,q=O.width;if(is(p,P,j,C),P=U=[U],e((j=p.C)<(C=y)),e(O.v<O.va),C>O.o&&(C=O.o),j<O.j){var K=O.j-j;j=O.j,P[0]+=K*q}if(j>=C?j=0:(P[0]+=4*O.v,O.ka=j-O.j,O.U=O.va-O.v,O.T=C-j,j=1),j){if(U=U[0],11>(j=p.ca).S){var ue=j.f.RGBA,xe=(C=j.S,P=O.U,O=O.T,K=ue.eb,ue.A),be=O;for(ue=ue.fb+p.Ma*ue.A;0<be--;){var pe=M,Me=U,Pe=P,de=K,fe=ue;switch(C){case uf:Gn(pe,Me,Pe,de,fe);break;case df:Ln(pe,Me,Pe,de,fe);break;case xg:Ln(pe,Me,Pe,de,fe),ks(de,fe,0,Pe,1,0);break;case f1:ti(pe,Me,Pe,de,fe);break;case hf:it(pe,Me,Pe,de,fe,1);break;case bg:it(pe,Me,Pe,de,fe,1),ks(de,fe,0,Pe,1,0);break;case ff:it(pe,Me,Pe,de,fe,0);break;case pf:it(pe,Me,Pe,de,fe,0),ks(de,fe,1,Pe,1,0);break;case vg:Li(pe,Me,Pe,de,fe);break;case wg:Li(pe,Me,Pe,de,fe),yr(de,fe,Pe,1,0);break;case p1:ei(pe,Me,Pe,de,fe);break;default:e(0)}U+=q,ue+=xe}p.Ma+=O}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=j.height)}}p.C=y,e(p.C<=p.i)}function Za(p){var y;if(0<p.ua)return 0;for(y=0;y<p.Wb;++y){var j=p.Ya[y].G,C=p.Ya[y].H;if(0<j[1][C[1]+0].g||0<j[2][C[2]+0].g||0<j[3][C[3]+0].g)return 0}return 1}function Us(p,y,j,C,P,O){if(p.Z!=0){var M=p.qd,U=p.rd;for(e(Ii[p.Z]!=null);y<j;++y)Ii[p.Z](M,U,C,P,C,P,O),M=C,U=P,P+=O;p.qd=M,p.rd=U}}function Vs(p,y){var j=p.l.ma,C=j.Z==0||j.Z==1?p.l.j:p.C;if(C=p.C<C?C:p.C,e(y<=p.l.o),y>C){var P=p.l.width,O=j.ca,M=j.tb+P*C,U=p.V,q=p.Ba+p.c*C,K=p.gc;e(p.ab==1),e(K[0].hc==3),sf(K[0],C,y,U,q,O,M),Us(j,C,y,O,M,P)}p.C=p.Ma=y}function qs(p,y,j,C,P,O,M){var U=p.$/C,q=p.$%C,K=p.m,ue=p.s,xe=j+p.$,be=xe;P=j+C*P;var pe=j+C*O,Me=280+ue.ua,Pe=p.Pb?U:16777216,de=0<ue.ua?ue.Wa:null,fe=ue.wc,Re=xe<pe?Yr(ue,q,U):null;e(p.C<O),e(pe<=P);var $e=!1;e:for(;;){for(;$e||xe<pe;){var Oe=0;if(U>=Pe){var nt=xe-j;e((Pe=p).Pb),Pe.wd=Pe.m,Pe.xd=nt,0<Pe.s.ua&&Ce(Pe.s.Wa,Pe.s.vb),Pe=U+W3}if(q&fe||(Re=Yr(ue,q,U)),e(Re!=null),Re.Qb&&(y[xe]=Re.qb,$e=!0),!$e)if(H(K),Re.jc){Oe=K,nt=y;var Xe=xe,gt=Re.pd[G(Oe)&pn-1];e(Re.jc),256>gt.g?(se(Oe,Oe.u+gt.g),nt[Xe]=gt.value,Oe=0):(se(Oe,Oe.u+gt.g-256),e(256<=gt.value),Oe=gt.value),Oe==0&&($e=!0)}else Oe=zn(Re.G[0],Re.H[0],K);if(K.h)break;if($e||256>Oe){if(!$e)if(Re.nd)y[xe]=(Re.qb|Oe<<8)>>>0;else{if(H(K),$e=zn(Re.G[1],Re.H[1],K),H(K),nt=zn(Re.G[2],Re.H[2],K),Xe=zn(Re.G[3],Re.H[3],K),K.h)break;y[xe]=(Xe<<24|$e<<16|Oe<<8|nt)>>>0}if($e=!1,++xe,++q>=C&&(q=0,++U,M!=null&&U<=O&&!(U%16)&&M(p,U),de!=null))for(;be<xe;)Oe=y[be++],de.X[(506832829*Oe&4294967295)>>>de.Mb]=Oe}else if(280>Oe){if(Oe=$s(Oe-256,K),nt=zn(Re.G[4],Re.H[4],K),H(K),nt=Sa(C,nt=$s(nt,K)),K.h)break;if(xe-j<nt||P-xe<Oe)break e;for(Xe=0;Xe<Oe;++Xe)y[xe+Xe]=y[xe+Xe-nt];for(xe+=Oe,q+=Oe;q>=C;)q-=C,++U,M!=null&&U<=O&&!(U%16)&&M(p,U);if(e(xe<=P),q&fe&&(Re=Yr(ue,q,U)),de!=null)for(;be<xe;)Oe=y[be++],de.X[(506832829*Oe&4294967295)>>>de.Mb]=Oe}else{if(!(Oe<Me))break e;for($e=Oe-280,e(de!=null);be<xe;)Oe=y[be++],de.X[(506832829*Oe&4294967295)>>>de.Mb]=Oe;Oe=xe,e(!($e>>>(nt=de).Xa)),y[Oe]=nt.X[$e],$e=!0}$e||e(K.h==Z(K))}if(p.Pb&&K.h&&xe<P)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Ce(p.s.vb,p.s.Wa);else{if(K.h)break e;M!=null&&M(p,U>O?O:U),p.a=0,p.$=xe-j}return 1}return p.a=3,0}function _a(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var y=p.Wa;y!=null&&(y.X=null),p.vb=null,e(p!=null)}function _s(){var p=new mg;return p==null?null:(p.a=0,p.xb=y1,Qr("Predictor","VP8LPredictors"),Qr("Predictor","VP8LPredictors_C"),Qr("PredictorAdd","VP8LPredictorsAdd"),Qr("PredictorAdd","VP8LPredictorsAdd_C"),nf=ot,Oo=ut,Gn=He,Ln=De,Li=rt,ei=At,ti=jt,F.VP8LMapColor32b=Vl,F.VP8LMapColor8b=af,p)}function ja(p,y,j,C,P){var O=1,M=[p],U=[y],q=C.m,K=C.s,ue=null,xe=0;e:for(;;){if(j)for(;O&&he(q,1);){var be=M,pe=U,Me=C,Pe=1,de=Me.m,fe=Me.gc[Me.ab],Re=he(de,2);if(Me.Oc&1<<Re)O=0;else{switch(Me.Oc|=1<<Re,fe.hc=Re,fe.Ea=be[0],fe.nc=pe[0],fe.K=[null],++Me.ab,e(4>=Me.ab),Re){case 0:case 1:fe.b=he(de,3)+2,Pe=ja(Y(fe.Ea,fe.b),Y(fe.nc,fe.b),0,Me,fe.K),fe.K=fe.K[0];break;case 3:var $e,Oe=he(de,8)+1,nt=16<Oe?0:4<Oe?1:2<Oe?2:3;if(be[0]=Y(fe.Ea,nt),fe.b=nt,$e=Pe=ja(Oe,1,0,Me,fe.K)){var Xe,gt=Oe,Qe=fe,Qt=1<<(8>>Qe.b),or=a(Qt);if(or==null)$e=0;else{var Yt=Qe.K[0],Vt=Qe.w;for(or[0]=Qe.K[0][0],Xe=1;Xe<1*gt;++Xe)or[Xe]=J(Yt[Vt+Xe],or[Xe-1]);for(;Xe<4*Qt;++Xe)or[Xe]=0;Qe.K[0]=null,Qe.K[0]=or,$e=1}}Pe=$e;break;case 2:break;default:e(0)}O=Pe}}if(M=M[0],U=U[0],O&&he(q,1)&&!(O=1<=(xe=he(q,4))&&11>=xe)){C.a=3;break e}var pr;if(pr=O)t:{var hr,Rt,Jr,Yn=C,Zr=M,Kn=U,lr=xe,cs=j,us=Yn.m,on=Yn.s,mn=[null],Rn=1,Es=0,Aa=z3[lr];r:for(;;){if(cs&&he(us,1)){var ln=he(us,3)+2,ai=Y(Zr,ln),$o=Y(Kn,ln),Gl=ai*$o;if(!ja(ai,$o,0,Yn,mn))break r;for(mn=mn[0],on.xc=ln,hr=0;hr<Gl;++hr){var Mi=mn[hr]>>8&65535;mn[hr]=Mi,Mi>=Rn&&(Rn=Mi+1)}}if(us.h)break r;for(Rt=0;5>Rt;++Rt){var Dr=m1[Rt];!Rt&&0<lr&&(Dr+=1<<lr),Es<Dr&&(Es=Dr)}var Ng=i(Rn*Aa,D),C1=Rn,k1=i(C1,B);if(k1==null)var vf=null;else e(65536>=C1),vf=k1;var Iu=a(Es);if(vf==null||Iu==null||Ng==null){Yn.a=1;break r}var xf=Ng;for(hr=Jr=0;hr<Rn;++hr){var Ys=vf[hr],Yl=Ys.G,Kl=Ys.H,A1=0,bf=1,P1=0;for(Rt=0;5>Rt;++Rt){Dr=m1[Rt],Yl[Rt]=xf,Kl[Rt]=Jr,!Rt&&0<lr&&(Dr+=1<<lr);s:{var wf,Cg=Dr,Sf=Yn,Mu=Iu,dA=xf,hA=Jr,kg=0,Fi=Sf.m,fA=he(Fi,1);if(s(Mu,0,0,Cg),fA){var pA=he(Fi,1)+1,mA=he(Fi,1),E1=he(Fi,mA==0?1:8);Mu[E1]=1,pA==2&&(Mu[E1=he(Fi,8)]=1);var _f=1}else{var T1=a(19),L1=he(Fi,4)+4;if(19<L1){Sf.a=3;var jf=0;break s}for(wf=0;wf<L1;++wf)T1[V3[wf]]=he(Fi,3);var Ag=void 0,Fu=void 0,D1=Sf,gA=T1,Nf=Cg,R1=Mu,Pg=0,Bi=D1.m,O1=8,I1=i(128,D);n:for(;R(I1,0,7,gA,19);){if(he(Bi,1)){var yA=2+2*he(Bi,3);if((Ag=2+he(Bi,yA))>Nf)break n}else Ag=Nf;for(Fu=0;Fu<Nf&&Ag--;){H(Bi);var M1=I1[0+(127&G(Bi))];se(Bi,Bi.u+M1.g);var Jl=M1.value;if(16>Jl)R1[Fu++]=Jl,Jl!=0&&(O1=Jl);else{var vA=Jl==16,F1=Jl-16,xA=$3[F1],B1=he(Bi,B3[F1])+xA;if(Fu+B1>Nf)break n;for(var bA=vA?O1:0;0<B1--;)R1[Fu++]=bA}}Pg=1;break n}Pg||(D1.a=3),_f=Pg}(_f=_f&&!Fi.h)&&(kg=R(dA,hA,8,Mu,Cg)),_f&&kg!=0?jf=kg:(Sf.a=3,jf=0)}if(jf==0)break r;if(bf&&U3[Rt]==1&&(bf=xf[Jr].g==0),A1+=xf[Jr].g,Jr+=jf,3>=Rt){var Bu,Eg=Iu[0];for(Bu=1;Bu<Dr;++Bu)Iu[Bu]>Eg&&(Eg=Iu[Bu]);P1+=Eg}}if(Ys.nd=bf,Ys.Qb=0,bf&&(Ys.qb=(Yl[3][Kl[3]+0].value<<24|Yl[1][Kl[1]+0].value<<16|Yl[2][Kl[2]+0].value)>>>0,A1==0&&256>Yl[0][Kl[0]+0].value&&(Ys.Qb=1,Ys.qb+=Yl[0][Kl[0]+0].value<<8)),Ys.jc=!Ys.Qb&&6>P1,Ys.jc){var Cf,ii=Ys;for(Cf=0;Cf<pn;++Cf){var $i=Cf,Ui=ii.pd[$i],kf=ii.G[0][ii.H[0]+$i];256<=kf.value?(Ui.g=kf.g+256,Ui.value=kf.value):(Ui.g=0,Ui.value=0,$i>>=en(kf,8,Ui),$i>>=en(ii.G[1][ii.H[1]+$i],16,Ui),$i>>=en(ii.G[2][ii.H[2]+$i],0,Ui),en(ii.G[3][ii.H[3]+$i],24,Ui))}}}on.vc=mn,on.Wb=Rn,on.Ya=vf,on.yc=Ng,pr=1;break t}pr=0}if(!(O=pr)){C.a=3;break e}if(0<xe){if(K.ua=1<<xe,!Ke(K.Wa,xe)){C.a=1,O=0;break e}}else K.ua=0;var Tg=C,$1=M,wA=U,Lg=Tg.s,Dg=Lg.xc;if(Tg.c=$1,Tg.i=wA,Lg.md=Y($1,Dg),Lg.wc=Dg==0?-1:(1<<Dg)-1,j){C.xb=X3;break e}if((ue=a(M*U))==null){C.a=1,O=0;break e}O=(O=qs(C,ue,0,M,U,U,null))&&!q.h;break e}return O?(P!=null?P[0]=ue:(e(ue==null),e(j)),C.$=0,j||_a(K)):_a(K),O}function Eo(p,y){var j=p.c*p.i,C=j+y+16*y;return e(p.c<=y),p.V=a(C),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+j+y,1)}function _l(p,y){var j=p.C,C=y-j,P=p.V,O=p.Ba+p.c*j;for(e(y<=p.l.o);0<C;){var M=16<C?16:C,U=p.l.ma,q=p.l.width,K=q*M,ue=U.ca,xe=U.tb+q*j,be=p.Ta,pe=p.Ua;is(p,M,P,O),Vr(be,pe,ue,xe,K),Us(U,j,j+M,ue,xe,q),C-=M,P+=M*p.c,j+=M}e(j==y),p.C=p.Ma=y}function jl(){this.ub=this.yd=this.td=this.Rb=0}function Nl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Cl(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Mh(){this.Yb=function(){var p=[];return function y(j,C,P){for(var O=P[C],M=0;M<O&&(j.push(P.length>C+1?[]:0),!(P.length<C+1));M++)y(j[M],C+1,P)}(p,0,[3,11]),p}()}function Hm(){this.jb=a(3),this.Wc=l([4,8],Mh),this.Xc=l([4,17],Mh)}function Gm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function kl(){this.ld=this.La=this.dd=this.tc=0}function Fh(){this.Na=this.la=0}function Ym(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function uu(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Km(){this.uc=this.M=this.Nb=0,this.wa=Array(new kl),this.Y=0,this.ya=Array(new uu),this.aa=0,this.l=new Al}function Bh(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Jm(){this.cb=this.a=0,this.sc="",this.m=new je,this.Od=new jl,this.Kc=new Nl,this.ed=new Gm,this.Qa=new Cl,this.Ic=this.$c=this.Aa=0,this.D=new Km,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,je),this.ia=0,this.pb=i(4,Ym),this.Pa=new Hm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bh),this.Hd=0,this.rb=Array(new Fh),this.sb=0,this.wa=Array(new kl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new uu),this.L=this.aa=0,this.gd=l([4,2],kl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Al(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Zm(){var p=new Jm;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Ru||(Ru=Vh)),p}function $r(p,y,j){return p.a==0&&(p.a=y,p.sc=j,p.cb=0),0}function $h(p,y,j){return 3<=j&&p[y+0]==157&&p[y+1]==1&&p[y+2]==42}function Uh(p,y){if(p==null)return 0;if(p.a=0,p.sc="OK",y==null)return $r(p,2,"null VP8Io passed to VP8GetHeaders()");var j=y.data,C=y.w,P=y.ha;if(4>P)return $r(p,7,"Truncated header.");var O=j[C+0]|j[C+1]<<8|j[C+2]<<16,M=p.Od;if(M.Rb=!(1&O),M.td=O>>1&7,M.yd=O>>4&1,M.ub=O>>5,3<M.td)return $r(p,3,"Incorrect keyframe parameters.");if(!M.yd)return $r(p,4,"Frame not displayable.");C+=3,P-=3;var U=p.Kc;if(M.Rb){if(7>P)return $r(p,7,"cannot parse picture header");if(!$h(j,C,P))return $r(p,3,"Bad code word");U.c=16383&(j[C+4]<<8|j[C+3]),U.Td=j[C+4]>>6,U.i=16383&(j[C+6]<<8|j[C+5]),U.Ud=j[C+6]>>6,C+=7,P-=7,p.za=U.c+15>>4,p.Ub=U.i+15>>4,y.width=U.c,y.height=U.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,s((O=p.Pa).jb,0,255,O.jb.length),e((O=p.Qa)!=null),O.Cb=0,O.Bb=0,O.Fb=1,s(O.Zb,0,0,O.Zb.length),s(O.Lb,0,0,O.Lb)}if(M.ub>P)return $r(p,7,"bad partition length");z(O=p.m,j,C,M.ub),C+=M.ub,P-=M.ub,M.Rb&&(U.Ld=oe(O),U.Kd=oe(O)),U=p.Qa;var q,K=p.Pa;if(e(O!=null),e(U!=null),U.Cb=oe(O),U.Cb){if(U.Bb=oe(O),oe(O)){for(U.Fb=oe(O),q=0;4>q;++q)U.Zb[q]=oe(O)?$(O,7):0;for(q=0;4>q;++q)U.Lb[q]=oe(O)?$(O,6):0}if(U.Bb)for(q=0;3>q;++q)K.jb[q]=oe(O)?re(O,8):255}else U.Bb=0;if(O.Ka)return $r(p,3,"cannot parse segment header");if((U=p.ed).zd=oe(O),U.Tb=re(O,6),U.wb=re(O,3),U.Pc=oe(O),U.Pc&&oe(O)){for(K=0;4>K;++K)oe(O)&&(U.vd[K]=$(O,6));for(K=0;4>K;++K)oe(O)&&(U.od[K]=$(O,6))}if(p.L=U.Tb==0?0:U.zd?1:2,O.Ka)return $r(p,3,"cannot parse filter header");var ue=P;if(P=q=C,C=q+ue,U=ue,p.Xb=(1<<re(p.m,2))-1,ue<3*(K=p.Xb))j=7;else{for(q+=3*K,U-=3*K,ue=0;ue<K;++ue){var xe=j[P+0]|j[P+1]<<8|j[P+2]<<16;xe>U&&(xe=U),z(p.Jc[+ue],j,q,xe),q+=xe,U-=xe,P+=3}z(p.Jc[+K],j,q,U),j=q<C?0:5}if(j!=0)return $r(p,j,"cannot parse partitions");for(j=re(q=p.m,7),P=oe(q)?$(q,4):0,C=oe(q)?$(q,4):0,U=oe(q)?$(q,4):0,K=oe(q)?$(q,4):0,q=oe(q)?$(q,4):0,ue=p.Qa,xe=0;4>xe;++xe){if(ue.Cb){var be=ue.Zb[xe];ue.Fb||(be+=j)}else{if(0<xe){p.pb[xe]=p.pb[0];continue}be=j}var pe=p.pb[xe];pe.Sc[0]=Sg[os(be+P,127)],pe.Sc[1]=_g[os(be+0,127)],pe.Eb[0]=2*Sg[os(be+C,127)],pe.Eb[1]=101581*_g[os(be+U,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=Sg[os(be+K,117)],pe.Qc[1]=_g[os(be+q,127)],pe.lc=be+q}if(!M.Rb)return $r(p,4,"Not a key frame.");for(oe(O),M=p.Pa,j=0;4>j;++j){for(P=0;8>P;++P)for(C=0;3>C;++C)for(U=0;11>U;++U)K=ce(O,J3[j][P][C][U])?re(O,8):Y3[j][P][C][U],M.Wc[j][P].Yb[C][U]=K;for(P=0;17>P;++P)M.Xc[j][P]=M.Wc[j][Z3[P]]}return p.kc=oe(O),p.kc&&(p.Bd=re(O,8)),p.cb=1}function Vh(p,y,j,C,P,O,M){var U=y[P].Yb[j];for(j=0;16>P;++P){if(!ce(p,U[j+0]))return P;for(;!ce(p,U[j+1]);)if(U=y[++P].Yb[0],j=0,P==16)return 16;var q=y[P+1].Yb;if(ce(p,U[j+2])){var K=p,ue=0;if(ce(K,(be=U)[(xe=j)+3]))if(ce(K,be[xe+6])){for(U=0,xe=2*(ue=ce(K,be[xe+8]))+(be=ce(K,be[xe+9+ue])),ue=0,be=H3[xe];be[U];++U)ue+=ue+ce(K,be[U]);ue+=3+(8<<xe)}else ce(K,be[xe+7])?(ue=7+2*ce(K,165),ue+=ce(K,145)):ue=5+ce(K,159);else ue=ce(K,be[xe+4])?3+ce(K,be[xe+5]):2;U=q[2]}else ue=1,U=q[1];q=M+G3[P],0>(K=p).b&&ne(K);var xe,be=K.b,pe=(xe=K.Ca>>1)-(K.I>>be)>>31;--K.b,K.Ca+=pe,K.Ca|=1,K.I-=(xe+1&pe)<<be,O[q]=((ue^pe)-pe)*C[(0<P)+0]}return 16}function du(p){var y=p.rb[p.sb-1];y.la=0,y.Na=0,s(p.zc,0,0,p.zc.length),p.ja=0}function Xm(p,y){if(p==null)return 0;if(y==null)return $r(p,2,"NULL VP8Io parameter in VP8Decode().");if(!p.cb&&!Uh(p,y))return 0;if(e(p.cb),y.ac==null||y.ac(y)){y.ob&&(p.L=0);var j=yf[p.L];if(p.L==2?(p.yb=0,p.zb=0):(p.yb=y.v-j>>4,p.zb=y.j-j>>4,0>p.yb&&(p.yb=0),0>p.zb&&(p.zb=0)),p.Va=y.o+15+j>>4,p.Hb=y.va+15+j>>4,p.Hb>p.za&&(p.Hb=p.za),p.Va>p.Ub&&(p.Va=p.Ub),0<p.L){var C=p.ed;for(j=0;4>j;++j){var P;if(p.Qa.Cb){var O=p.Qa.Lb[j];p.Qa.Fb||(O+=C.Tb)}else O=C.Tb;for(P=0;1>=P;++P){var M=p.gd[j][P],U=O;if(C.Pc&&(U+=C.vd[0],P&&(U+=C.od[0])),0<(U=0>U?0:63<U?63:U)){var q=U;0<C.wb&&(q=4<C.wb?q>>2:q>>1)>9-C.wb&&(q=9-C.wb),1>q&&(q=1),M.dd=q,M.tc=2*U+q,M.ld=40<=U?2:15<=U?1:0}else M.tc=0;M.La=P}}}j=0}else $r(p,6,"Frame setup failed"),j=p.a;if(j=j==0){if(j){p.$c=0,0<p.Aa||(p.Ic=uA);e:{j=p.Ic,C=4*(q=p.za);var K=32*q,ue=q+1,xe=0<p.L?q*(0<p.Aa?2:1):0,be=(p.Aa==2?2:1)*q;if((M=C+832+(P=3*(16*j+yf[p.L])/2*K)+(O=p.Fa!=null&&0<p.Fa.length?p.Kc.c*p.Kc.i:0))!=M)j=0;else{if(M>p.Vb){if(p.Vb=0,p.Ec=a(M),p.Fc=0,p.Ec==null){j=$r(p,1,"no memory during frame initialization.");break e}p.Vb=M}M=p.Ec,U=p.Fc,p.Ac=M,p.Bc=U,U+=C,p.Gd=i(K,Bh),p.Hd=0,p.rb=i(ue+1,Fh),p.sb=1,p.wa=xe?i(xe,kl):null,p.Y=0,p.D.Nb=0,p.D.wa=p.wa,p.D.Y=p.Y,0<p.Aa&&(p.D.Y+=q),e(!0),p.oc=M,p.pc=U,U+=832,p.ya=i(be,uu),p.aa=0,p.D.ya=p.ya,p.D.aa=p.aa,p.Aa==2&&(p.D.aa+=q),p.R=16*q,p.B=8*q,q=(K=yf[p.L])*p.R,K=K/2*p.B,p.sa=M,p.ta=U+q,p.qa=p.sa,p.ra=p.ta+16*j*p.R+K,p.Ha=p.qa,p.Ia=p.ra+8*j*p.B+K,p.$c=0,U+=P,p.mb=O?M:null,p.nb=O?U:null,e(U+O<=p.Fc+p.Vb),du(p),s(p.Ac,p.Bc,0,C),j=1}}if(j){if(y.ka=0,y.y=p.sa,y.O=p.ta,y.f=p.qa,y.N=p.ra,y.ea=p.Ha,y.Vd=p.Ia,y.fa=p.R,y.Rc=p.B,y.F=null,y.J=0,!lf){for(j=-255;255>=j;++j)tn[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)ni[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)Du[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)Hl[255+j]=0>j?0:255<j?255:j;lf=1}ql=tg,ri=Qm,Eu=zh,Dn=eg,Ns=Wh,Ur=qh,zl=yu,of=Do,Tu=pg,Io=vu,Mo=fg,Di=Rl,Fo=xu,Wl=ef,Bo=Qh,Ri=Ca,Lu=Qa,Cs=hg,Gs[0]=Na,Gs[1]=rg,Gs[2]=ig,Gs[3]=og,Gs[4]=Yh,Gs[5]=Ll,Gs[6]=Kh,Gs[7]=pu,Gs[8]=cg,Gs[9]=lg,Oi[0]=Hh,Oi[1]=sg,Oi[2]=Xa,Oi[3]=El,Oi[4]=vn,Oi[5]=ag,Oi[6]=Gh,si[0]=Ai,si[1]=ng,si[2]=ug,si[3]=mu,si[4]=Lo,si[5]=dg,si[6]=gu,j=1}else j=0}j&&(j=function(pe,Me){for(pe.M=0;pe.M<pe.Va;++pe.M){var Pe,de=pe.Jc[pe.M&pe.Xb],fe=pe.m,Re=pe;for(Pe=0;Pe<Re.za;++Pe){var $e=fe,Oe=Re,nt=Oe.Ac,Xe=Oe.Bc+4*Pe,gt=Oe.zc,Qe=Oe.ya[Oe.aa+Pe];if(Oe.Qa.Bb?Qe.$b=ce($e,Oe.Pa.jb[0])?2+ce($e,Oe.Pa.jb[2]):ce($e,Oe.Pa.jb[1]):Qe.$b=0,Oe.kc&&(Qe.Ad=ce($e,Oe.Bd)),Qe.Za=!ce($e,145)+0,Qe.Za){var Qt=Qe.Ob,or=0;for(Oe=0;4>Oe;++Oe){var Yt,Vt=gt[0+Oe];for(Yt=0;4>Yt;++Yt){Vt=K3[nt[Xe+Yt]][Vt];for(var pr=g1[ce($e,Vt[0])];0<pr;)pr=g1[2*pr+ce($e,Vt[pr])];Vt=-pr,nt[Xe+Yt]=Vt}n(Qt,or,nt,Xe,4),or+=4,gt[0+Oe]=Vt}}else Vt=ce($e,156)?ce($e,128)?1:3:ce($e,163)?2:0,Qe.Ob[0]=Vt,s(nt,Xe,Vt,4),s(gt,0,Vt,4);Qe.Dd=ce($e,142)?ce($e,114)?ce($e,183)?1:3:2:0}if(Re.m.Ka)return $r(pe,7,"Premature end-of-partition0 encountered.");for(;pe.ja<pe.za;++pe.ja){if(Re=de,$e=(fe=pe).rb[fe.sb-1],nt=fe.rb[fe.sb+fe.ja],Pe=fe.ya[fe.aa+fe.ja],Xe=fe.kc?Pe.Ad:0)$e.la=nt.la=0,Pe.Za||($e.Na=nt.Na=0),Pe.Hc=0,Pe.Gc=0,Pe.ia=0;else{var hr,Rt;if($e=nt,nt=Re,Xe=fe.Pa.Xc,gt=fe.ya[fe.aa+fe.ja],Qe=fe.pb[gt.$b],Oe=gt.ad,Qt=0,or=fe.rb[fe.sb-1],Vt=Yt=0,s(Oe,Qt,0,384),gt.Za)var Jr=0,Yn=Xe[3];else{pr=a(16);var Zr=$e.Na+or.Na;if(Zr=Ru(nt,Xe[1],Zr,Qe.Eb,0,pr,0),$e.Na=or.Na=(0<Zr)+0,1<Zr)ql(pr,0,Oe,Qt);else{var Kn=pr[0]+3>>3;for(pr=0;256>pr;pr+=16)Oe[Qt+pr]=Kn}Jr=1,Yn=Xe[0]}var lr=15&$e.la,cs=15&or.la;for(pr=0;4>pr;++pr){var us=1&cs;for(Kn=Rt=0;4>Kn;++Kn)lr=lr>>1|(us=(Zr=Ru(nt,Yn,Zr=us+(1&lr),Qe.Sc,Jr,Oe,Qt))>Jr)<<7,Rt=Rt<<2|(3<Zr?3:1<Zr?2:Oe[Qt+0]!=0),Qt+=16;lr>>=4,cs=cs>>1|us<<7,Yt=(Yt<<8|Rt)>>>0}for(Yn=lr,Jr=cs>>4,hr=0;4>hr;hr+=2){for(Rt=0,lr=$e.la>>4+hr,cs=or.la>>4+hr,pr=0;2>pr;++pr){for(us=1&cs,Kn=0;2>Kn;++Kn)Zr=us+(1&lr),lr=lr>>1|(us=0<(Zr=Ru(nt,Xe[2],Zr,Qe.Qc,0,Oe,Qt)))<<3,Rt=Rt<<2|(3<Zr?3:1<Zr?2:Oe[Qt+0]!=0),Qt+=16;lr>>=2,cs=cs>>1|us<<5}Vt|=Rt<<4*hr,Yn|=lr<<4<<hr,Jr|=(240&cs)<<hr}$e.la=Yn,or.la=Jr,gt.Hc=Yt,gt.Gc=Vt,gt.ia=43690&Vt?0:Qe.ia,Xe=!(Yt|Vt)}if(0<fe.L&&(fe.wa[fe.Y+fe.ja]=fe.gd[Pe.$b][Pe.Za],fe.wa[fe.Y+fe.ja].La|=!Xe),Re.Ka)return $r(pe,7,"Premature end-of-file encountered.")}if(du(pe),fe=Me,Re=1,Pe=(de=pe).D,$e=0<de.L&&de.M>=de.zb&&de.M<=de.Va,de.Aa==0)e:{if(Pe.M=de.M,Pe.uc=$e,Nu(de,Pe),Re=1,Pe=(Rt=de.D).Nb,$e=(Vt=yf[de.L])*de.R,nt=Vt/2*de.B,pr=16*Pe*de.R,Kn=8*Pe*de.B,Xe=de.sa,gt=de.ta-$e+pr,Qe=de.qa,Oe=de.ra-nt+Kn,Qt=de.Ha,or=de.Ia-nt+Kn,cs=(lr=Rt.M)==0,Yt=lr>=de.Va-1,de.Aa==2&&Nu(de,Rt),Rt.uc)for(us=(Zr=de).D.M,e(Zr.D.uc),Rt=Zr.yb;Rt<Zr.Hb;++Rt){Jr=Rt,Yn=us;var on=(mn=(Dr=Zr).D).Nb;hr=Dr.R;var mn=mn.wa[mn.Y+Jr],Rn=Dr.sa,Es=Dr.ta+16*on*hr+16*Jr,Aa=mn.dd,ln=mn.tc;if(ln!=0)if(e(3<=ln),Dr.L==1)0<Jr&&Ri(Rn,Es,hr,ln+4),mn.La&&Cs(Rn,Es,hr,ln),0<Yn&&Bo(Rn,Es,hr,ln+4),mn.La&&Lu(Rn,Es,hr,ln);else{var ai=Dr.B,$o=Dr.qa,Gl=Dr.ra+8*on*ai+8*Jr,Mi=Dr.Ha,Dr=Dr.Ia+8*on*ai+8*Jr;on=mn.ld,0<Jr&&(of(Rn,Es,hr,ln+4,Aa,on),Io($o,Gl,Mi,Dr,ai,ln+4,Aa,on)),mn.La&&(Di(Rn,Es,hr,ln,Aa,on),Wl($o,Gl,Mi,Dr,ai,ln,Aa,on)),0<Yn&&(zl(Rn,Es,hr,ln+4,Aa,on),Tu($o,Gl,Mi,Dr,ai,ln+4,Aa,on)),mn.La&&(Mo(Rn,Es,hr,ln,Aa,on),Fo($o,Gl,Mi,Dr,ai,ln,Aa,on))}}if(de.ia&&alert("todo:DitherRow"),fe.put!=null){if(Rt=16*lr,lr=16*(lr+1),cs?(fe.y=de.sa,fe.O=de.ta+pr,fe.f=de.qa,fe.N=de.ra+Kn,fe.ea=de.Ha,fe.W=de.Ia+Kn):(Rt-=Vt,fe.y=Xe,fe.O=gt,fe.f=Qe,fe.N=Oe,fe.ea=Qt,fe.W=or),Yt||(lr-=Vt),lr>fe.o&&(lr=fe.o),fe.F=null,fe.J=null,de.Fa!=null&&0<de.Fa.length&&Rt<lr&&(fe.J=_u(de,fe,Rt,lr-Rt),fe.F=de.mb,fe.F==null&&fe.F.length==0)){Re=$r(de,3,"Could not decode alpha data.");break e}Rt<fe.j&&(Vt=fe.j-Rt,Rt=fe.j,e(!(1&Vt)),fe.O+=de.R*Vt,fe.N+=de.B*(Vt>>1),fe.W+=de.B*(Vt>>1),fe.F!=null&&(fe.J+=fe.width*Vt)),Rt<lr&&(fe.O+=fe.v,fe.N+=fe.v>>1,fe.W+=fe.v>>1,fe.F!=null&&(fe.J+=fe.v),fe.ka=Rt-fe.j,fe.U=fe.va-fe.v,fe.T=lr-Rt,Re=fe.put(fe))}Pe+1!=de.Ic||Yt||(n(de.sa,de.ta-$e,Xe,gt+16*de.R,$e),n(de.qa,de.ra-nt,Qe,Oe+8*de.B,nt),n(de.Ha,de.Ia-nt,Qt,or+8*de.B,nt))}if(!Re)return $r(pe,6,"Output aborted.")}return 1}(p,y)),y.bc!=null&&y.bc(y),j&=1}return j?(p.cb=0,j):0}function zs(p,y,j,C,P){P=p[y+j+32*C]+(P>>3),p[y+j+32*C]=-256&P?0>P?0:255:P}function Pl(p,y,j,C,P,O){zs(p,y,0,j,C+P),zs(p,y,1,j,C+O),zs(p,y,2,j,C-O),zs(p,y,3,j,C-P)}function Wn(p){return(20091*p>>16)+p}function hu(p,y,j,C){var P,O=0,M=a(16);for(P=0;4>P;++P){var U=p[y+0]+p[y+8],q=p[y+0]-p[y+8],K=(35468*p[y+4]>>16)-Wn(p[y+12]),ue=Wn(p[y+4])+(35468*p[y+12]>>16);M[O+0]=U+ue,M[O+1]=q+K,M[O+2]=q-K,M[O+3]=U-ue,O+=4,y++}for(P=O=0;4>P;++P)U=(p=M[O+0]+4)+M[O+8],q=p-M[O+8],K=(35468*M[O+4]>>16)-Wn(M[O+12]),zs(j,C,0,0,U+(ue=Wn(M[O+4])+(35468*M[O+12]>>16))),zs(j,C,1,0,q+K),zs(j,C,2,0,q-K),zs(j,C,3,0,U-ue),O++,C+=32}function qh(p,y,j,C){var P=p[y+0]+4,O=35468*p[y+4]>>16,M=Wn(p[y+4]),U=35468*p[y+1]>>16;Pl(j,C,0,P+M,p=Wn(p[y+1]),U),Pl(j,C,1,P+O,p,U),Pl(j,C,2,P-O,p,U),Pl(j,C,3,P-M,p,U)}function Qm(p,y,j,C,P){hu(p,y,j,C),P&&hu(p,y+16,j,C+4)}function zh(p,y,j,C){ri(p,y+0,j,C,1),ri(p,y+32,j,C+128,1)}function eg(p,y,j,C){var P;for(p=p[y+0]+4,P=0;4>P;++P)for(y=0;4>y;++y)zs(j,C,y,P,p)}function Wh(p,y,j,C){p[y+0]&&Dn(p,y+0,j,C),p[y+16]&&Dn(p,y+16,j,C+4),p[y+32]&&Dn(p,y+32,j,C+128),p[y+48]&&Dn(p,y+48,j,C+128+4)}function tg(p,y,j,C){var P,O=a(16);for(P=0;4>P;++P){var M=p[y+0+P]+p[y+12+P],U=p[y+4+P]+p[y+8+P],q=p[y+4+P]-p[y+8+P],K=p[y+0+P]-p[y+12+P];O[0+P]=M+U,O[8+P]=M-U,O[4+P]=K+q,O[12+P]=K-q}for(P=0;4>P;++P)M=(p=O[0+4*P]+3)+O[3+4*P],U=O[1+4*P]+O[2+4*P],q=O[1+4*P]-O[2+4*P],K=p-O[3+4*P],j[C+0]=M+U>>3,j[C+16]=K+q>>3,j[C+32]=M-U>>3,j[C+48]=K-q>>3,C+=64}function fu(p,y,j){var C,P=y-32,O=ls,M=255-p[P-1];for(C=0;C<j;++C){var U,q=O,K=M+p[y-1];for(U=0;U<j;++U)p[y+U]=q[K+p[P+U]];y+=32}}function rg(p,y){fu(p,y,4)}function ng(p,y){fu(p,y,8)}function sg(p,y){fu(p,y,16)}function Xa(p,y){var j;for(j=0;16>j;++j)n(p,y+32*j,p,y-32,16)}function El(p,y){var j;for(j=16;0<j;--j)s(p,y,p[y-1],16),y+=32}function Tl(p,y,j){var C;for(C=0;16>C;++C)s(y,j+32*C,p,16)}function Hh(p,y){var j,C=16;for(j=0;16>j;++j)C+=p[y-1+32*j]+p[y+j-32];Tl(C>>5,p,y)}function vn(p,y){var j,C=8;for(j=0;16>j;++j)C+=p[y-1+32*j];Tl(C>>4,p,y)}function ag(p,y){var j,C=8;for(j=0;16>j;++j)C+=p[y+j-32];Tl(C>>4,p,y)}function Gh(p,y){Tl(128,p,y)}function Pt(p,y,j){return p+2*y+j+2>>2}function ig(p,y){var j,C=y-32;for(C=new Uint8Array([Pt(p[C-1],p[C+0],p[C+1]),Pt(p[C+0],p[C+1],p[C+2]),Pt(p[C+1],p[C+2],p[C+3]),Pt(p[C+2],p[C+3],p[C+4])]),j=0;4>j;++j)n(p,y+32*j,C,0,C.length)}function og(p,y){var j=p[y-1],C=p[y-1+32],P=p[y-1+64],O=p[y-1+96];ve(p,y+0,16843009*Pt(p[y-1-32],j,C)),ve(p,y+32,16843009*Pt(j,C,P)),ve(p,y+64,16843009*Pt(C,P,O)),ve(p,y+96,16843009*Pt(P,O,O))}function Na(p,y){var j,C=4;for(j=0;4>j;++j)C+=p[y+j-32]+p[y-1+32*j];for(C>>=3,j=0;4>j;++j)s(p,y+32*j,C,4)}function Yh(p,y){var j=p[y-1+0],C=p[y-1+32],P=p[y-1+64],O=p[y-1-32],M=p[y+0-32],U=p[y+1-32],q=p[y+2-32],K=p[y+3-32];p[y+0+96]=Pt(C,P,p[y-1+96]),p[y+1+96]=p[y+0+64]=Pt(j,C,P),p[y+2+96]=p[y+1+64]=p[y+0+32]=Pt(O,j,C),p[y+3+96]=p[y+2+64]=p[y+1+32]=p[y+0+0]=Pt(M,O,j),p[y+3+64]=p[y+2+32]=p[y+1+0]=Pt(U,M,O),p[y+3+32]=p[y+2+0]=Pt(q,U,M),p[y+3+0]=Pt(K,q,U)}function Kh(p,y){var j=p[y+1-32],C=p[y+2-32],P=p[y+3-32],O=p[y+4-32],M=p[y+5-32],U=p[y+6-32],q=p[y+7-32];p[y+0+0]=Pt(p[y+0-32],j,C),p[y+1+0]=p[y+0+32]=Pt(j,C,P),p[y+2+0]=p[y+1+32]=p[y+0+64]=Pt(C,P,O),p[y+3+0]=p[y+2+32]=p[y+1+64]=p[y+0+96]=Pt(P,O,M),p[y+3+32]=p[y+2+64]=p[y+1+96]=Pt(O,M,U),p[y+3+64]=p[y+2+96]=Pt(M,U,q),p[y+3+96]=Pt(U,q,q)}function Ll(p,y){var j=p[y-1+0],C=p[y-1+32],P=p[y-1+64],O=p[y-1-32],M=p[y+0-32],U=p[y+1-32],q=p[y+2-32],K=p[y+3-32];p[y+0+0]=p[y+1+64]=O+M+1>>1,p[y+1+0]=p[y+2+64]=M+U+1>>1,p[y+2+0]=p[y+3+64]=U+q+1>>1,p[y+3+0]=q+K+1>>1,p[y+0+96]=Pt(P,C,j),p[y+0+64]=Pt(C,j,O),p[y+0+32]=p[y+1+96]=Pt(j,O,M),p[y+1+32]=p[y+2+96]=Pt(O,M,U),p[y+2+32]=p[y+3+96]=Pt(M,U,q),p[y+3+32]=Pt(U,q,K)}function pu(p,y){var j=p[y+0-32],C=p[y+1-32],P=p[y+2-32],O=p[y+3-32],M=p[y+4-32],U=p[y+5-32],q=p[y+6-32],K=p[y+7-32];p[y+0+0]=j+C+1>>1,p[y+1+0]=p[y+0+64]=C+P+1>>1,p[y+2+0]=p[y+1+64]=P+O+1>>1,p[y+3+0]=p[y+2+64]=O+M+1>>1,p[y+0+32]=Pt(j,C,P),p[y+1+32]=p[y+0+96]=Pt(C,P,O),p[y+2+32]=p[y+1+96]=Pt(P,O,M),p[y+3+32]=p[y+2+96]=Pt(O,M,U),p[y+3+64]=Pt(M,U,q),p[y+3+96]=Pt(U,q,K)}function lg(p,y){var j=p[y-1+0],C=p[y-1+32],P=p[y-1+64],O=p[y-1+96];p[y+0+0]=j+C+1>>1,p[y+2+0]=p[y+0+32]=C+P+1>>1,p[y+2+32]=p[y+0+64]=P+O+1>>1,p[y+1+0]=Pt(j,C,P),p[y+3+0]=p[y+1+32]=Pt(C,P,O),p[y+3+32]=p[y+1+64]=Pt(P,O,O),p[y+3+64]=p[y+2+64]=p[y+0+96]=p[y+1+96]=p[y+2+96]=p[y+3+96]=O}function cg(p,y){var j=p[y-1+0],C=p[y-1+32],P=p[y-1+64],O=p[y-1+96],M=p[y-1-32],U=p[y+0-32],q=p[y+1-32],K=p[y+2-32];p[y+0+0]=p[y+2+32]=j+M+1>>1,p[y+0+32]=p[y+2+64]=C+j+1>>1,p[y+0+64]=p[y+2+96]=P+C+1>>1,p[y+0+96]=O+P+1>>1,p[y+3+0]=Pt(U,q,K),p[y+2+0]=Pt(M,U,q),p[y+1+0]=p[y+3+32]=Pt(j,M,U),p[y+1+32]=p[y+3+64]=Pt(C,j,M),p[y+1+64]=p[y+3+96]=Pt(P,C,j),p[y+1+96]=Pt(O,P,C)}function ug(p,y){var j;for(j=0;8>j;++j)n(p,y+32*j,p,y-32,8)}function mu(p,y){var j;for(j=0;8>j;++j)s(p,y,p[y-1],8),y+=32}function To(p,y,j){var C;for(C=0;8>C;++C)s(y,j+32*C,p,8)}function Ai(p,y){var j,C=8;for(j=0;8>j;++j)C+=p[y+j-32]+p[y-1+32*j];To(C>>4,p,y)}function dg(p,y){var j,C=4;for(j=0;8>j;++j)C+=p[y+j-32];To(C>>3,p,y)}function Lo(p,y){var j,C=4;for(j=0;8>j;++j)C+=p[y-1+32*j];To(C>>3,p,y)}function gu(p,y){To(128,p,y)}function Dl(p,y,j){var C=p[y-j],P=p[y+0],O=3*(P-C)+yg[1020+p[y-2*j]-p[y+j]],M=cf[112+(O+4>>3)];p[y-j]=ls[255+C+cf[112+(O+3>>3)]],p[y+0]=ls[255+P-M]}function Jh(p,y,j,C){var P=p[y+0],O=p[y+j];return As[255+p[y-2*j]-p[y-j]]>C||As[255+O-P]>C}function Zh(p,y,j,C){return 4*As[255+p[y-j]-p[y+0]]+As[255+p[y-2*j]-p[y+j]]<=C}function Xh(p,y,j,C,P){var O=p[y-3*j],M=p[y-2*j],U=p[y-j],q=p[y+0],K=p[y+j],ue=p[y+2*j],xe=p[y+3*j];return 4*As[255+U-q]+As[255+M-K]>C?0:As[255+p[y-4*j]-O]<=P&&As[255+O-M]<=P&&As[255+M-U]<=P&&As[255+xe-ue]<=P&&As[255+ue-K]<=P&&As[255+K-q]<=P}function Qh(p,y,j,C){var P=2*C+1;for(C=0;16>C;++C)Zh(p,y+C,j,P)&&Dl(p,y+C,j)}function Ca(p,y,j,C){var P=2*C+1;for(C=0;16>C;++C)Zh(p,y+C*j,1,P)&&Dl(p,y+C*j,1)}function Qa(p,y,j,C){var P;for(P=3;0<P;--P)Qh(p,y+=4*j,j,C)}function hg(p,y,j,C){var P;for(P=3;0<P;--P)Ca(p,y+=4,j,C)}function Pi(p,y,j,C,P,O,M,U){for(O=2*O+1;0<P--;){if(Xh(p,y,j,O,M))if(Jh(p,y,j,U))Dl(p,y,j);else{var q=p,K=y,ue=j,xe=q[K-2*ue],be=q[K-ue],pe=q[K+0],Me=q[K+ue],Pe=q[K+2*ue],de=27*(Re=yg[1020+3*(pe-be)+yg[1020+xe-Me]])+63>>7,fe=18*Re+63>>7,Re=9*Re+63>>7;q[K-3*ue]=ls[255+q[K-3*ue]+Re],q[K-2*ue]=ls[255+xe+fe],q[K-ue]=ls[255+be+de],q[K+0]=ls[255+pe-de],q[K+ue]=ls[255+Me-fe],q[K+2*ue]=ls[255+Pe-Re]}y+=C}}function Ws(p,y,j,C,P,O,M,U){for(O=2*O+1;0<P--;){if(Xh(p,y,j,O,M))if(Jh(p,y,j,U))Dl(p,y,j);else{var q=p,K=y,ue=j,xe=q[K-ue],be=q[K+0],pe=q[K+ue],Me=cf[112+((Pe=3*(be-xe))+4>>3)],Pe=cf[112+(Pe+3>>3)],de=Me+1>>1;q[K-2*ue]=ls[255+q[K-2*ue]+de],q[K-ue]=ls[255+xe+Pe],q[K+0]=ls[255+be-Me],q[K+ue]=ls[255+pe-de]}y+=C}}function yu(p,y,j,C,P,O){Pi(p,y,j,1,16,C,P,O)}function Do(p,y,j,C,P,O){Pi(p,y,1,j,16,C,P,O)}function fg(p,y,j,C,P,O){var M;for(M=3;0<M;--M)Ws(p,y+=4*j,j,1,16,C,P,O)}function Rl(p,y,j,C,P,O){var M;for(M=3;0<M;--M)Ws(p,y+=4,1,j,16,C,P,O)}function pg(p,y,j,C,P,O,M,U){Pi(p,y,P,1,8,O,M,U),Pi(j,C,P,1,8,O,M,U)}function vu(p,y,j,C,P,O,M,U){Pi(p,y,1,P,8,O,M,U),Pi(j,C,1,P,8,O,M,U)}function xu(p,y,j,C,P,O,M,U){Ws(p,y+4*P,P,1,8,O,M,U),Ws(j,C+4*P,P,1,8,O,M,U)}function ef(p,y,j,C,P,O,M,U){Ws(p,y+4,1,P,8,O,M,U),Ws(j,C+4,1,P,8,O,M,U)}function Ol(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new fr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tf(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new D}function mg(){this.xb=this.a=0,this.l=new Al,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tf,this.ab=0,this.gc=i(4,wu),this.Oc=0}function Il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Al,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ro(p,y,j,C,P,O,M){for(p=p==null?0:p[y+0],y=0;y<M;++y)P[O+y]=p+j[C+y]&255,p=P[O+y]}function Su(p,y,j,C,P,O,M){var U;if(p==null)Ro(null,null,j,C,P,O,M);else for(U=0;U<M;++U)P[O+U]=p[y+U]+j[C+U]&255}function Ei(p,y,j,C,P,O,M){if(p==null)Ro(null,null,j,C,P,O,M);else{var U,q=p[y+0],K=q,ue=q;for(U=0;U<M;++U)K=ue+(q=p[y+U])-K,ue=j[C+U]+(-256&K?0>K?0:255:K)&255,K=q,P[O+U]=ue}}function _u(p,y,j,C){var P=y.width,O=y.o;if(e(p!=null&&y!=null),0>j||0>=C||j+C>O)return null;if(!p.Cc){if(p.ga==null){var M;if(p.ga=new Il,(M=p.ga==null)||(M=y.width*y.o,e(p.Gb.length==0),p.Gb=a(M),p.Uc=0,p.Gb==null?M=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,M=1),M=!M),!M){M=p.ga;var U=p.Fa,q=p.P,K=p.qc,ue=p.mb,xe=p.nb,be=q+1,pe=K-1,Me=M.l;if(e(U!=null&&ue!=null&&y!=null),Ii[0]=null,Ii[1]=Ro,Ii[2]=Su,Ii[3]=Ei,M.ca=ue,M.tb=xe,M.c=y.width,M.i=y.height,e(0<M.c&&0<M.i),1>=K)y=0;else if(M.$a=U[q+0]>>0&3,M.Z=U[q+0]>>2&3,M.Lc=U[q+0]>>4&3,q=U[q+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||q)y=0;else if(Me.put=ba,Me.ac=fn,Me.bc=wa,Me.ma=M,Me.width=y.width,Me.height=y.height,Me.Da=y.Da,Me.v=y.v,Me.va=y.va,Me.j=y.j,Me.o=y.o,M.$a)e:{e(M.$a==1),y=_s();t:for(;;){if(y==null){y=0;break e}if(e(M!=null),M.mc=y,y.c=M.c,y.i=M.i,y.l=M.l,y.l.ma=M,y.l.width=M.c,y.l.height=M.i,y.a=0,V(y.m,U,be,pe),!ja(M.c,M.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Za(y.s)?(M.ic=1,U=y.c*y.i,y.Ta=null,y.Ua=0,y.V=a(U),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(M.ic=0,y=Eo(y,M.c)),!y))break t;y=1;break e}M.mc=null,y=0}else y=pe>=M.c*M.i;M=!y}if(M)return null;p.ga.Lc!=1?p.Ga=0:C=O-j}e(p.ga!=null),e(j+C<=O);e:{if(y=(U=p.ga).c,O=U.l.o,U.$a==0){if(be=p.rc,pe=p.Vc,Me=p.Fa,q=p.P+1+j*y,K=p.mb,ue=p.nb+j*y,e(q<=p.P+p.qc),U.Z!=0)for(e(Ii[U.Z]!=null),M=0;M<C;++M)Ii[U.Z](be,pe,Me,q,K,ue,y),be=K,pe=ue,ue+=y,q+=y;else for(M=0;M<C;++M)n(K,ue,Me,q,y),be=K,pe=ue,ue+=y,q+=y;p.rc=be,p.Vc=pe}else{if(e(U.mc!=null),y=j+C,e((M=U.mc)!=null),e(y<=M.i),M.C>=y)y=1;else if(U.ic||ge(),U.ic){U=M.V,be=M.Ba,pe=M.c;var Pe=M.i,de=(Me=1,q=M.$/pe,K=M.$%pe,ue=M.m,xe=M.s,M.$),fe=pe*Pe,Re=pe*y,$e=xe.wc,Oe=de<Re?Yr(xe,K,q):null;e(de<=fe),e(y<=Pe),e(Za(xe));t:for(;;){for(;!ue.h&&de<Re;){if(K&$e||(Oe=Yr(xe,K,q)),e(Oe!=null),H(ue),256>(Pe=zn(Oe.G[0],Oe.H[0],ue)))U[be+de]=Pe,++de,++K>=pe&&(K=0,++q<=y&&!(q%16)&&Vs(M,q));else{if(!(280>Pe)){Me=0;break t}Pe=$s(Pe-256,ue);var nt,Xe=zn(Oe.G[4],Oe.H[4],ue);if(H(ue),!(de>=(Xe=Sa(pe,Xe=$s(Xe,ue)))&&fe-de>=Pe)){Me=0;break t}for(nt=0;nt<Pe;++nt)U[be+de+nt]=U[be+de+nt-Xe];for(de+=Pe,K+=Pe;K>=pe;)K-=pe,++q<=y&&!(q%16)&&Vs(M,q);de<Re&&K&$e&&(Oe=Yr(xe,K,q))}e(ue.h==Z(ue))}Vs(M,q>y?y:q);break t}!Me||ue.h&&de<fe?(Me=0,M.a=ue.h?5:3):M.$=de,y=Me}else y=qs(M,M.V,M.Ba,M.c,M.i,y,_l);if(!y){C=0;break e}}j+C>=O&&(p.Cc=1),C=1}if(!C)return null;if(p.Cc&&((C=p.ga)!=null&&(C.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+j*P}function x(p,y,j,C,P,O){for(;0<P--;){var M,U=p,q=y+(j?1:0),K=p,ue=y+(j?0:3);for(M=0;M<C;++M){var xe=K[ue+4*M];xe!=255&&(xe*=32897,U[q+4*M+0]=U[q+4*M+0]*xe>>23,U[q+4*M+1]=U[q+4*M+1]*xe>>23,U[q+4*M+2]=U[q+4*M+2]*xe>>23)}y+=O}}function E(p,y,j,C,P){for(;0<C--;){var O;for(O=0;O<j;++O){var M=p[y+2*O+0],U=15&(K=p[y+2*O+1]),q=4369*U,K=(240&K|K>>4)*q>>16;p[y+2*O+0]=(240&M|M>>4)*q>>16&240|(15&M|M<<4)*q>>16>>4&15,p[y+2*O+1]=240&K|U}y+=P}}function te(p,y,j,C,P,O,M,U){var q,K,ue=255;for(K=0;K<P;++K){for(q=0;q<C;++q){var xe=p[y+q];O[M+4*q]=xe,ue&=xe}y+=j,M+=U}return ue!=255}function le(p,y,j,C,P){var O;for(O=0;O<P;++O)j[C+O]=p[y+O]>>8}function ge(){ks=x,yr=E,vr=te,Vr=le}function Te(p,y,j){F[p]=function(C,P,O,M,U,q,K,ue,xe,be,pe,Me,Pe,de,fe,Re,$e){var Oe,nt=$e-1>>1,Xe=U[q+0]|K[ue+0]<<16,gt=xe[be+0]|pe[Me+0]<<16;e(C!=null);var Qe=3*Xe+gt+131074>>2;for(y(C[P+0],255&Qe,Qe>>16,Pe,de),O!=null&&(Qe=3*gt+Xe+131074>>2,y(O[M+0],255&Qe,Qe>>16,fe,Re)),Oe=1;Oe<=nt;++Oe){var Qt=U[q+Oe]|K[ue+Oe]<<16,or=xe[be+Oe]|pe[Me+Oe]<<16,Yt=Xe+Qt+gt+or+524296,Vt=Yt+2*(Qt+gt)>>3;Qe=Vt+Xe>>1,Xe=(Yt=Yt+2*(Xe+or)>>3)+Qt>>1,y(C[P+2*Oe-1],255&Qe,Qe>>16,Pe,de+(2*Oe-1)*j),y(C[P+2*Oe-0],255&Xe,Xe>>16,Pe,de+(2*Oe-0)*j),O!=null&&(Qe=Yt+gt>>1,Xe=Vt+or>>1,y(O[M+2*Oe-1],255&Qe,Qe>>16,fe,Re+(2*Oe-1)*j),y(O[M+2*Oe+0],255&Xe,Xe>>16,fe,Re+(2*Oe+0)*j)),Xe=Qt,gt=or}1&$e||(Qe=3*Xe+gt+131074>>2,y(C[P+$e-1],255&Qe,Qe>>16,Pe,de+($e-1)*j),O!=null&&(Qe=3*gt+Xe+131074>>2,y(O[M+$e-1],255&Qe,Qe>>16,fe,Re+($e-1)*j)))}}function Ue(){Ps[uf]=Q3,Ps[df]=v1,Ps[f1]=eA,Ps[hf]=x1,Ps[ff]=b1,Ps[vg]=w1,Ps[p1]=tA,Ps[xg]=v1,Ps[bg]=x1,Ps[pf]=b1,Ps[wg]=w1}function tt(p){return p&~rA?0>p?0:255:p>>S1}function pt(p,y){return tt((19077*p>>8)+(26149*y>>8)-14234)}function Dt(p,y,j){return tt((19077*p>>8)-(6419*y>>8)-(13320*j>>8)+8708)}function Et(p,y){return tt((19077*p>>8)+(33050*y>>8)-17685)}function Ht(p,y,j,C,P){C[P+0]=pt(p,j),C[P+1]=Dt(p,y,j),C[P+2]=Et(p,y)}function Pr(p,y,j,C,P){C[P+0]=Et(p,y),C[P+1]=Dt(p,y,j),C[P+2]=pt(p,j)}function Lr(p,y,j,C,P){var O=Dt(p,y,j);y=O<<3&224|Et(p,y)>>3,C[P+0]=248&pt(p,j)|O>>5,C[P+1]=y}function Kr(p,y,j,C,P){var O=240&Et(p,y)|15;C[P+0]=240&pt(p,j)|Dt(p,y,j)>>4,C[P+1]=O}function xn(p,y,j,C,P){C[P+0]=255,Ht(p,y,j,C,P+1)}function an(p,y,j,C,P){Pr(p,y,j,C,P),C[P+3]=255}function Hs(p,y,j,C,P){Ht(p,y,j,C,P),C[P+3]=255}function os(p,y){return 0>p?0:p>y?y:p}function ka(p,y,j){F[p]=function(C,P,O,M,U,q,K,ue,xe){for(var be=ue+(-2&xe)*j;ue!=be;)y(C[P+0],O[M+0],U[q+0],K,ue),y(C[P+1],O[M+0],U[q+0],K,ue+j),P+=2,++M,++q,ue+=2*j;1&xe&&y(C[P+0],O[M+0],U[q+0],K,ue)}}function rf(p,y,j){return j==0?p==0?y==0?6:5:y==0?4:0:j}function ju(p,y,j,C,P){switch(p>>>30){case 3:ri(y,j,C,P,0);break;case 2:Ur(y,j,C,P);break;case 1:Dn(y,j,C,P)}}function Nu(p,y){var j,C,P=y.M,O=y.Nb,M=p.oc,U=p.pc+40,q=p.oc,K=p.pc+584,ue=p.oc,xe=p.pc+600;for(j=0;16>j;++j)M[U+32*j-1]=129;for(j=0;8>j;++j)q[K+32*j-1]=129,ue[xe+32*j-1]=129;for(0<P?M[U-1-32]=q[K-1-32]=ue[xe-1-32]=129:(s(M,U-32-1,127,21),s(q,K-32-1,127,9),s(ue,xe-32-1,127,9)),C=0;C<p.za;++C){var be=y.ya[y.aa+C];if(0<C){for(j=-1;16>j;++j)n(M,U+32*j-4,M,U+32*j+12,4);for(j=-1;8>j;++j)n(q,K+32*j-4,q,K+32*j+4,4),n(ue,xe+32*j-4,ue,xe+32*j+4,4)}var pe=p.Gd,Me=p.Hd+C,Pe=be.ad,de=be.Hc;if(0<P&&(n(M,U-32,pe[Me].y,0,16),n(q,K-32,pe[Me].f,0,8),n(ue,xe-32,pe[Me].ea,0,8)),be.Za){var fe=M,Re=U-32+16;for(0<P&&(C>=p.za-1?s(fe,Re,pe[Me].y[15],4):n(fe,Re,pe[Me+1].y,0,4)),j=0;4>j;j++)fe[Re+128+j]=fe[Re+256+j]=fe[Re+384+j]=fe[Re+0+j];for(j=0;16>j;++j,de<<=2)fe=M,Re=U+j1[j],Gs[be.Ob[j]](fe,Re),ju(de,Pe,16*+j,fe,Re)}else if(fe=rf(C,P,be.Ob[0]),Oi[fe](M,U),de!=0)for(j=0;16>j;++j,de<<=2)ju(de,Pe,16*+j,M,U+j1[j]);for(j=be.Gc,fe=rf(C,P,be.Dd),si[fe](q,K),si[fe](ue,xe),de=Pe,fe=q,Re=K,255&(be=j>>0)&&(170&be?Eu(de,256,fe,Re):Ns(de,256,fe,Re)),be=ue,de=xe,255&(j>>=8)&&(170&j?Eu(Pe,320,be,de):Ns(Pe,320,be,de)),P<p.Ub-1&&(n(pe[Me].y,0,M,U+480,16),n(pe[Me].f,0,q,K+224,8),n(pe[Me].ea,0,ue,xe+224,8)),j=8*O*p.B,pe=p.sa,Me=p.ta+16*C+16*O*p.R,Pe=p.qa,be=p.ra+8*C+j,de=p.Ha,fe=p.Ia+8*C+j,j=0;16>j;++j)n(pe,Me+j*p.R,M,U+32*j,16);for(j=0;8>j;++j)n(Pe,be+j*p.B,q,K+32*j,8),n(de,fe+j*p.B,ue,xe+32*j,8)}}function Ml(p,y,j,C,P,O,M,U,q){var K=[0],ue=[0],xe=0,be=q!=null?q.kd:0,pe=q??new bu;if(p==null||12>j)return 7;pe.data=p,pe.w=y,pe.ha=j,y=[y],j=[j],pe.gb=[pe.gb];e:{var Me=y,Pe=j,de=pe.gb;if(e(p!=null),e(Pe!=null),e(de!=null),de[0]=0,12<=Pe[0]&&!r(p,Me[0],"RIFF")){if(r(p,Me[0]+8,"WEBP")){de=3;break e}var fe=ke(p,Me[0]+4);if(12>fe||4294967286<fe){de=3;break e}if(be&&fe>Pe[0]-8){de=7;break e}de[0]=fe,Me[0]+=12,Pe[0]-=12}de=0}if(de!=0)return de;for(fe=0<pe.gb[0],j=j[0];;){e:{var Re=p;Pe=y,de=j;var $e=K,Oe=ue,nt=Me=[0];if((Qe=xe=[xe])[0]=0,8>de[0])de=7;else{if(!r(Re,Pe[0],"VP8X")){if(ke(Re,Pe[0]+4)!=10){de=3;break e}if(18>de[0]){de=7;break e}var Xe=ke(Re,Pe[0]+8),gt=1+we(Re,Pe[0]+12);if(2147483648<=gt*(Re=1+we(Re,Pe[0]+15))){de=3;break e}nt!=null&&(nt[0]=Xe),$e!=null&&($e[0]=gt),Oe!=null&&(Oe[0]=Re),Pe[0]+=18,de[0]-=18,Qe[0]=1}de=0}}if(xe=xe[0],Me=Me[0],de!=0)return de;if(Pe=!!(2&Me),!fe&&xe)return 3;if(O!=null&&(O[0]=!!(16&Me)),M!=null&&(M[0]=Pe),U!=null&&(U[0]=0),M=K[0],Me=ue[0],xe&&Pe&&q==null){de=0;break}if(4>j){de=7;break}if(fe&&xe||!fe&&!xe&&!r(p,y[0],"ALPH")){j=[j],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{Xe=p,de=y,fe=j;var Qe=pe.gb;$e=pe.na,Oe=pe.P,nt=pe.Sa,gt=22,e(Xe!=null),e(fe!=null),Re=de[0];var Qt=fe[0];for(e($e!=null),e(nt!=null),$e[0]=null,Oe[0]=null,nt[0]=0;;){if(de[0]=Re,fe[0]=Qt,8>Qt){de=7;break e}var or=ke(Xe,Re+4);if(4294967286<or){de=3;break e}var Yt=8+or+1&-2;if(gt+=Yt,0<Qe&&gt>Qe){de=3;break e}if(!r(Xe,Re,"VP8 ")||!r(Xe,Re,"VP8L")){de=0;break e}if(Qt[0]<Yt){de=7;break e}r(Xe,Re,"ALPH")||($e[0]=Xe,Oe[0]=Re+8,nt[0]=or),Re+=Yt,Qt-=Yt}}if(j=j[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],de!=0)break}j=[j],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(Qe=p,de=y,fe=j,$e=pe.gb[0],Oe=pe.Ja,nt=pe.xa,Xe=de[0],Re=!r(Qe,Xe,"VP8 "),gt=!r(Qe,Xe,"VP8L"),e(Qe!=null),e(fe!=null),e(Oe!=null),e(nt!=null),8>fe[0])de=7;else{if(Re||gt){if(Qe=ke(Qe,Xe+4),12<=$e&&Qe>$e-12){de=3;break e}if(be&&Qe>fe[0]-8){de=7;break e}Oe[0]=Qe,de[0]+=8,fe[0]-=8,nt[0]=gt}else nt[0]=5<=fe[0]&&Qe[Xe+0]==47&&!(Qe[Xe+4]>>5),Oe[0]=fe[0];de=0}if(j=j[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],y=y[0],de!=0)break;if(4294967286<pe.Ja)return 3;if(U==null||Pe||(U[0]=pe.xa?2:1),M=[M],Me=[Me],pe.xa){if(5>j){de=7;break}U=M,be=Me,Pe=O,p==null||5>j?p=0:5<=j&&p[y+0]==47&&!(p[y+4]>>5)?(fe=[0],Qe=[0],$e=[0],V(Oe=new L,p,y,j),yt(Oe,fe,Qe,$e)?(U!=null&&(U[0]=fe[0]),be!=null&&(be[0]=Qe[0]),Pe!=null&&(Pe[0]=$e[0]),p=1):p=0):p=0}else{if(10>j){de=7;break}U=Me,p==null||10>j||!$h(p,y+3,j-3)?p=0:(be=p[y+0]|p[y+1]<<8|p[y+2]<<16,Pe=16383&(p[y+7]<<8|p[y+6]),p=16383&(p[y+9]<<8|p[y+8]),1&be||3<(be>>1&7)||!(be>>4&1)||be>>5>=pe.Ja||!Pe||!p?p=0:(M&&(M[0]=Pe),U&&(U[0]=p),p=1))}if(!p||(M=M[0],Me=Me[0],xe&&(K[0]!=M||ue[0]!=Me)))return 3;q!=null&&(q[0]=pe,q.offset=y-q.w,e(4294967286>y-q.w),e(q.offset==q.ha-j));break}return de==0||de==7&&xe&&q==null?(O!=null&&(O[0]|=pe.na!=null&&0<pe.na.length),C!=null&&(C[0]=M),P!=null&&(P[0]=Me),0):de}function Cu(p,y,j){var C=y.width,P=y.height,O=0,M=0,U=C,q=P;if(y.Da=p!=null&&0<p.Da,y.Da&&(U=p.cd,q=p.bd,O=p.v,M=p.j,11>j||(O&=-2,M&=-2),0>O||0>M||0>=U||0>=q||O+U>C||M+q>P))return 0;if(y.v=O,y.j=M,y.va=O+U,y.o=M+q,y.U=U,y.T=q,y.da=p!=null&&0<p.da,y.da){if(!Ye(U,q,j=[p.ib],O=[p.hb]))return 0;y.ib=j[0],y.hb=O[0]}return y.ob=p!=null&&p.ob,y.Kb=p==null||!p.Sd,y.da&&(y.ob=y.ib<3*C/4&&y.hb<3*P/4,y.Kb=0),1}function ku(p){if(p==null)return 2;if(11>p.S){var y=p.f.RGBA;y.fb+=(p.height-1)*y.A,y.A=-y.A}else y=p.f.kb,p=p.height,y.O+=(p-1)*y.fa,y.fa=-y.fa,y.N+=(p-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(p-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(p-1)*y.lb,y.lb=-y.lb);return 0}function Fl(p,y,j,C){if(C==null||0>=p||0>=y)return 2;if(j!=null){if(j.Da){var P=j.cd,O=j.bd,M=-2&j.v,U=-2&j.j;if(0>M||0>U||0>=P||0>=O||M+P>p||U+O>y)return 2;p=P,y=O}if(j.da){if(!Ye(p,y,P=[j.ib],O=[j.hb]))return 2;p=P[0],y=O[0]}}C.width=p,C.height=y;e:{var q=C.width,K=C.height;if(p=C.S,0>=q||0>=K||!(p>=uf&&13>p))p=2;else{if(0>=C.Rd&&C.sd==null){M=O=P=y=0;var ue=(U=q*N1[p])*K;if(11>p||(O=(K+1)/2*(y=(q+1)/2),p==12&&(M=(P=q)*K)),(K=a(ue+2*O+M))==null){p=1;break e}C.sd=K,11>p?((q=C.f.RGBA).eb=K,q.fb=0,q.A=U,q.size=ue):((q=C.f.kb).y=K,q.O=0,q.fa=U,q.Fd=ue,q.f=K,q.N=0+ue,q.Ab=y,q.Cd=O,q.ea=K,q.W=0+ue+O,q.Db=y,q.Ed=O,p==12&&(q.F=K,q.J=0+ue+2*O),q.Tc=M,q.lb=P)}if(y=1,P=C.S,O=C.width,M=C.height,P>=uf&&13>P)if(11>P)p=C.f.RGBA,y&=(U=Math.abs(p.A))*(M-1)+O<=p.size,y&=U>=O*N1[P],y&=p.eb!=null;else{p=C.f.kb,U=(O+1)/2,ue=(M+1)/2,q=Math.abs(p.fa),K=Math.abs(p.Ab);var xe=Math.abs(p.Db),be=Math.abs(p.lb),pe=be*(M-1)+O;y&=q*(M-1)+O<=p.Fd,y&=K*(ue-1)+U<=p.Cd,y=(y&=xe*(ue-1)+U<=p.Ed)&q>=O&K>=U&xe>=U,y&=p.y!=null,y&=p.f!=null,y&=p.ea!=null,P==12&&(y&=be>=O,y&=pe<=p.Tc,y&=p.F!=null)}else y=0;p=y?0:2}}return p!=0||j!=null&&j.fd&&(p=ku(C)),p}var pn=64,Bl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$l=24,Ul=32,Au=8,Hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ie("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(p){return p},F.Predictor2=function(p,y,j){return y[j+0]},F.Predictor3=function(p,y,j){return y[j+1]},F.Predictor4=function(p,y,j){return y[j-1]},F.Predictor5=function(p,y,j){return ye(ye(p,y[j+1]),y[j+0])},F.Predictor6=function(p,y,j){return ye(p,y[j-1])},F.Predictor7=function(p,y,j){return ye(p,y[j+0])},F.Predictor8=function(p,y,j){return ye(y[j-1],y[j+0])},F.Predictor9=function(p,y,j){return ye(y[j+0],y[j+1])},F.Predictor10=function(p,y,j){return ye(ye(p,y[j-1]),ye(y[j+0],y[j+1]))},F.Predictor11=function(p,y,j){var C=y[j+0];return 0>=qe(C>>24&255,p>>24&255,(y=y[j-1])>>24&255)+qe(C>>16&255,p>>16&255,y>>16&255)+qe(C>>8&255,p>>8&255,y>>8&255)+qe(255&C,255&p,255&y)?C:p},F.Predictor12=function(p,y,j){var C=y[j+0];return(Se((p>>24&255)+(C>>24&255)-((y=y[j-1])>>24&255))<<24|Se((p>>16&255)+(C>>16&255)-(y>>16&255))<<16|Se((p>>8&255)+(C>>8&255)-(y>>8&255))<<8|Se((255&p)+(255&C)-(255&y)))>>>0},F.Predictor13=function(p,y,j){var C=y[j-1];return(Be((p=ye(p,y[j+0]))>>24&255,C>>24&255)<<24|Be(p>>16&255,C>>16&255)<<16|Be(p>>8&255,C>>8&255)<<8|Be(p>>0&255,C>>0&255))>>>0};var gg=F.PredictorAdd0;F.PredictorAdd1=at,ie("Predictor2","PredictorAdd2"),ie("Predictor3","PredictorAdd3"),ie("Predictor4","PredictorAdd4"),ie("Predictor5","PredictorAdd5"),ie("Predictor6","PredictorAdd6"),ie("Predictor7","PredictorAdd7"),ie("Predictor8","PredictorAdd8"),ie("Predictor9","PredictorAdd9"),ie("Predictor10","PredictorAdd10"),ie("Predictor11","PredictorAdd11"),ie("Predictor12","PredictorAdd12"),ie("Predictor13","PredictorAdd13");var Pu=F.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var nf,js=F.ColorIndexInverseTransform,Vl=F.MapARGB,sf=F.VP8LColorIndexInverseTransformAlpha,af=F.MapAlpha,Ti=F.VP8LPredictorsAdd=[];Ti.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var Oo,Gn,Ln,Li,ei,ti,ql,ri,Ur,Eu,Dn,Ns,zl,of,Tu,Io,Mo,Di,Fo,Wl,Bo,Ri,Lu,Cs,ks,yr,vr,Vr,tn=a(511),ni=a(2041),Du=a(225),Hl=a(767),lf=0,yg=ni,cf=Du,ls=Hl,As=tn,uf=0,df=1,f1=2,hf=3,ff=4,vg=5,p1=6,xg=7,bg=8,pf=9,wg=10,B3=[2,3,7],$3=[3,3,11],m1=[280,256,256,256,40],U3=[0,1,1,1,0],V3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],q3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],z3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W3=8,Sg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],_g=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ru=null,H3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],G3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],g1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Y3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],K3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],J3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oi=[],Gs=[],si=[],X3=1,y1=2,Ii=[],Ps=[];Te("UpsampleRgbLinePair",Ht,3),Te("UpsampleBgrLinePair",Pr,3),Te("UpsampleRgbaLinePair",Hs,4),Te("UpsampleBgraLinePair",an,4),Te("UpsampleArgbLinePair",xn,4),Te("UpsampleRgba4444LinePair",Kr,2),Te("UpsampleRgb565LinePair",Lr,2);var Q3=F.UpsampleRgbLinePair,eA=F.UpsampleBgrLinePair,v1=F.UpsampleRgbaLinePair,x1=F.UpsampleBgraLinePair,b1=F.UpsampleArgbLinePair,w1=F.UpsampleRgba4444LinePair,tA=F.UpsampleRgb565LinePair,mf=16,gf=1<<mf-1,Ou=-227,jg=482,S1=6,rA=(256<<S1)-1,_1=0,nA=a(256),sA=a(256),aA=a(256),iA=a(256),oA=a(jg-Ou),lA=a(jg-Ou);ka("YuvToRgbRow",Ht,3),ka("YuvToBgrRow",Pr,3),ka("YuvToRgbaRow",Hs,4),ka("YuvToBgraRow",an,4),ka("YuvToArgbRow",xn,4),ka("YuvToRgba4444Row",Kr,2),ka("YuvToRgb565Row",Lr,2);var j1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yf=[0,2,8],cA=[8,7,6,4,4,2,2,2,1,1,1,1],uA=1;this.WebPDecodeRGBA=function(p,y,j,C,P){var O=df,M=new Ol,U=new gr;M.ba=U,U.S=O,U.width=[U.width],U.height=[U.height];var q=U.width,K=U.height,ue=new Ar;if(ue==null||p==null)var xe=2;else e(ue!=null),xe=Ml(p,y,j,ue.width,ue.height,ue.Pd,ue.Qd,ue.format,null);if(xe!=0?q=0:(q!=null&&(q[0]=ue.width[0]),K!=null&&(K[0]=ue.height[0]),q=1),q){U.width=U.width[0],U.height=U.height[0],C!=null&&(C[0]=U.width),P!=null&&(P[0]=U.height);e:{if(C=new Al,(P=new bu).data=p,P.w=y,P.ha=j,P.kd=1,y=[0],e(P!=null),((p=Ml(P.data,P.w,P.ha,null,null,null,y,null,P))==0||p==7)&&y[0]&&(p=4),(y=p)==0){if(e(M!=null),C.data=P.data,C.w=P.w+P.offset,C.ha=P.ha-P.offset,C.put=ba,C.ac=fn,C.bc=wa,C.ma=M,P.xa){if((p=_s())==null){M=1;break e}if(function(be,pe){var Me=[0],Pe=[0],de=[0];t:for(;;){if(be==null)return 0;if(pe==null)return be.a=2,0;if(be.l=pe,be.a=0,V(be.m,pe.data,pe.w,pe.ha),!yt(be.m,Me,Pe,de)){be.a=3;break t}if(be.xb=y1,pe.width=Me[0],pe.height=Pe[0],!ja(Me[0],Pe[0],1,be,null))break t;return 1}return e(be.a!=0),0}(p,C)){if(C=(y=Fl(C.width,C.height,M.Oa,M.ba))==0){t:{C=p;r:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((j=C.l)!=null),e((P=j.ma)!=null),C.xb!=0){if(C.ca=P.ba,C.tb=P.tb,e(C.ca!=null),!Cu(P.Oa,j,hf)){C.a=2;break r}if(!Eo(C,j.width)||j.da)break r;if((j.da||Je(C.ca.S))&&ge(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&ge()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!Ke(C.s.vb,C.s.Wa.Xa)){C.a=1;break r}C.xb=0}if(!qs(C,C.V,C.Ba,C.c,C.i,j.o,Sl))break r;P.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(y=p.a)}else y=p.a}else{if((p=new Zm)==null){M=1;break e}if(p.Fa=P.na,p.P=P.P,p.qc=P.Sa,Uh(p,C)){if((y=Fl(C.width,C.height,M.Oa,M.ba))==0){if(p.Aa=0,j=M.Oa,e((P=p)!=null),j!=null){if(0<(q=0>(q=j.Md)?0:100<q?255:255*q/100)){for(K=ue=0;4>K;++K)12>(xe=P.pb[K]).lc&&(xe.ia=q*cA[0>xe.lc?0:xe.lc]>>3),ue|=xe.ia;ue&&(alert("todo:VP8InitRandom"),P.ia=1)}P.Ga=j.Id,100<P.Ga?P.Ga=100:0>P.Ga&&(P.Ga=0)}Xm(p,C)||(y=p.a)}}else y=p.a}y==0&&M.Oa!=null&&M.Oa.fd&&(y=ku(M.ba))}M=y}O=M!=0?null:11>O?U.f.RGBA.eb:U.f.kb.y}else O=null;return O};var N1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(F,ee){for(var ae="",R=0;R<4;R++)ae+=String.fromCharCode(F[ee++]);return ae}function d(F,ee){return(F[ee+0]<<0|F[ee+1]<<8|F[ee+2]<<16)>>>0}function h(F,ee){return(F[ee+0]<<0|F[ee+1]<<8|F[ee+2]<<16|F[ee+3]<<24)>>>0}new c;var f=[0],m=[0],g=[],v=new c,b=t,_=function(F,ee){var ae={},R=0,D=!1,T=0,B=0;if(ae.frames=[],!function(G,Z,se,H){for(var ne=0;ne<H;ne++)if(G[Z+ne]!=se.charCodeAt(ne))return!0;return!1}(F,ee,"RIFF",4)){for(h(F,ee+=4),ee+=8;ee<F.length;){var z=u(F,ee),re=h(F,ee+=4);ee+=4;var $=re+(1&re);switch(z){case"VP8 ":case"VP8L":ae.frames[R]===void 0&&(ae.frames[R]={}),(he=ae.frames[R]).src_off=D?B:ee-8,he.src_size=T+re+8,R++,D&&(D=!1,T=0,B=0);break;case"VP8X":(he=ae.header={}).feature_flags=F[ee];var V=ee+4;he.canvas_width=1+d(F,V),V+=3,he.canvas_height=1+d(F,V),V+=3;break;case"ALPH":D=!0,T=$+8,B=ee-8;break;case"ANIM":(he=ae.header).bgcolor=h(F,ee),V=ee+4,he.loop_count=(je=F)[(L=V)+0]<<0|je[L+1]<<8,V+=2;break;case"ANMF":var X,he;(he=ae.frames[R]={}).offset_x=2*d(F,ee),ee+=3,he.offset_y=2*d(F,ee),ee+=3,he.width=1+d(F,ee),ee+=3,he.height=1+d(F,ee),ee+=3,he.duration=d(F,ee),ee+=3,X=F[ee++],he.dispose=1&X,he.blend=X>>1&1}z!="ANMF"&&(ee+=$)}var je,L;return ae}}(b,0);_.response=b,_.rgbaoutput=!0,_.dataurl=!1;var S=_.header?_.header:null,N=_.frames?_.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],m=[S.canvas_width];for(var k=0;k<N.length&&N[k].blend!=0;k++);}var A=N[0],W=v.WebPDecodeRGBA(b,A.src_off,A.src_size,m,f);A.rgba=W,A.imgwidth=m[0],A.imgheight=f[0];for(var I=0;I<m[0]*f[0]*4;I++)g[I]=W[I];return this.width=m,this.height=f,this.data=g,this}(function(t){var e=function(){return typeof Bv=="function"},r=function(f,m,g,v){var b=4,_=i;switch(v){case t.image_compression.FAST:b=1,_=a;break;case t.image_compression.MEDIUM:b=6,_=l;break;case t.image_compression.SLOW:b=9,_=c}f=n(f,m,g,_);var S=Bv(f,{level:b});return t.__addimage__.arrayBufferToBinaryString(S)},n=function(f,m,g,v){for(var b,_,S,N=f.length/m,k=new Uint8Array(f.length+N),A=d(),W=0;W<N;W+=1){if(S=W*m,b=f.subarray(S,S+m),v)k.set(v(b,g,_),S+W);else{for(var I,F=A.length,ee=[];I<F;I+=1)ee[I]=A[I](b,g,_);var ae=h(ee.concat());k.set(ee[ae],S+W)}_=b}return k},s=function(f){var m=Array.apply([],f);return m.unshift(0),m},a=function(f,m){var g,v=[],b=f.length;v[0]=1;for(var _=0;_<b;_+=1)g=f[_-m]||0,v[_+1]=f[_]-g+256&255;return v},i=function(f,m,g){var v,b=[],_=f.length;b[0]=2;for(var S=0;S<_;S+=1)v=g&&g[S]||0,b[S+1]=f[S]-v+256&255;return b},l=function(f,m,g){var v,b,_=[],S=f.length;_[0]=3;for(var N=0;N<S;N+=1)v=f[N-m]||0,b=g&&g[N]||0,_[N+1]=f[N]+256-(v+b>>>1)&255;return _},c=function(f,m,g){var v,b,_,S,N=[],k=f.length;N[0]=4;for(var A=0;A<k;A+=1)v=f[A-m]||0,b=g&&g[A]||0,_=g&&g[A-m]||0,S=u(v,b,_),N[A+1]=f[A]-S+256&255;return N},u=function(f,m,g){if(f===m&&m===g)return f;var v=Math.abs(m-g),b=Math.abs(f-g),_=Math.abs(f+m-g-g);return v<=b&&v<=_?f:b<=_?m:g},d=function(){return[s,a,i,l,c]},h=function(f){var m=f.map(function(g){return g.reduce(function(v,b){return v+Math.abs(b)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(f,m,g,v){var b,_,S,N,k,A,W,I,F,ee,ae,R,D,T,B,z=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(S=new pB(f)).imgData,_=S.bits,b=S.colorSpace,k=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){F=(I=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,ae=new Uint8Array(F*S.colors),ee=new Uint8Array(F);var $,V=S.pixelBitlength-S.bits;for(T=0,B=0;T<F;T++){for(D=I[T],$=0;$<V;)ae[B++]=D>>>$&255,$+=S.bits;ee[T]=D>>>$&255}}if(S.bits===16){F=(I=new Uint32Array(S.decodePixels().buffer)).length,ae=new Uint8Array(F*(32/S.pixelBitlength)*S.colors),ee=new Uint8Array(F*(32/S.pixelBitlength)),R=S.colors>1,T=0,B=0;for(var X=0;T<F;)D=I[T++],ae[B++]=D>>>0&255,R&&(ae[B++]=D>>>16&255,D=I[T++],ae[B++]=D>>>0&255),ee[X++]=D>>>16&255;_=8}v!==t.image_compression.NONE&&e()?(f=r(ae,S.width*S.colors,S.colors,v),W=r(ee,S.width,1,v)):(f=ae,W=ee,z=void 0)}if(S.colorType===3&&(b=this.color_spaces.INDEXED,A=S.palette,S.transparency.indexed)){var he=S.transparency.indexed,je=0;for(T=0,F=he.length;T<F;++T)je+=he[T];if((je/=255)===F-1&&he.indexOf(0)!==-1)N=[he.indexOf(0)];else if(je!==F){for(I=S.decodePixels(),ee=new Uint8Array(I.length),T=0,F=I.length;T<F;T++)ee[T]=he[I[T]];W=r(ee,S.width,1)}}var L=function(G){var Z;switch(G){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(v);return z===this.decode.FLATE_DECODE&&(re="/Predictor "+L+" "),re+="/Colors "+k+" /BitsPerComponent "+_+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:g,data:f,index:m,filter:z,decodeParameters:re,transparency:N,palette:A,sMask:W,predictor:L,width:S.width,height:S.height,bitsPerComponent:_,colorSpace:b}}}})(bt.API),function(t){t.processGIF89A=function(e,r,n,s){var a=new mB(e),i=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new vy(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(bt.API),Qs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){mr.log("bit decode error:"+r)}},Qs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Qs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*s*4,l=a>>4,c=15&a,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},Qs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Qs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,l=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,u=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},Qs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Qs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Qs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=a,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=i}},Qs.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var a=new Qs(e,!1),i=a.width,l=a.height,c={data:a.getData(),width:i,height:l},u=new vy(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)}}(bt.API),Aw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var a=new Aw(e),i=a.width,l=a.height,c={data:a.getData(),width:i,height:l},u=new vy(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)}}(bt.API),bt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),l=0,c=0,u=0;u<s;u+=4){var d=n[u],h=n[u+1],f=n[u+2],m=n[u+3];a[l++]=d,a[l++]=h,a[l++]=f,i[c++]=m}var g=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},bt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tc=bt.API,Hf=tc.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,m=t.length,g=0,v=l[0]||c,b=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+i*(1e3/a)||0)/1e3):(f=h&&dr(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((l[n]||v)/c+f)),g=n;return b},jw=tc.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return tc.processArabic&&(t=tc.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:Hf.apply(this,arguments).reduce(function(a,i){return a+i},0)},Nw=function(t,e,r,n){for(var s=[],a=0,i=t.length,l=0;a!==i&&l+e[a]<r;)l+=e[a],a++;s.push(t.slice(0,a));var c=a;for(l=0;a!==i;)l+e[a]>n&&(s.push(t.slice(c,a)),l=0,c=a),l+=e[a],a++;return c!==a&&s.push(t.slice(c,a)),s},Cw=function(t,e,r){r||(r={});var n,s,a,i,l,c,u,d=[],h=[d],f=r.textIndent||0,m=0,g=0,v=t.split(" "),b=Hf.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var _=Array(c).join(" "),S=[];v.map(function(k){(k=k.split(/\s*\n/)).length>1?S=S.concat(k.map(function(A,W){return(W&&A.length?`
`:"")+A})):S.push(k[0])}),v=S,c=jw.apply(this,[_,r])}for(a=0,i=v.length;a<i;a++){var N=0;if(n=v[a],c&&n[0]==`
`&&(n=n.substr(1),N=1),f+m+(g=(s=Hf.apply(this,[n,r])).reduce(function(k,A){return k+A},0))>e||N){if(g>e){for(l=Nw.apply(this,[n,s,e-(f+m),e]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);g=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(k,A){return k+A},0)}else d=[n];h.push(d),f=g+c,m=b}else d.push(n),f+=m+g,m=b}return u=c?function(k,A){return(A?_:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(u)},tc.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Cw.apply(this,[n[l],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var f,m,g,v,b=["{"];for(var _ in h){if(f=h[_],isNaN(parseInt(_,10))?m="'"+_+"'":(_=parseInt(_,10),m=(m=a(_).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof f=="number")f<0?(g=a(f).slice(3),v="-"):(g=a(f).slice(2),v=""),g=v+g.slice(0,-1)+n[g.slice(-1)];else{if(dr(f)!=="object")throw new Error("Don't know what to do with value type "+dr(f)+".");g=i(f)}b.push(m+g)}return b.push("}"),b.join("")},l=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,g,v,b={},_=1,S=b,N=[],k="",A="",W=h.length-1,I=1;I<W;I+=1)(v=h[I])=="'"?f?(g=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(N.push([S,g]),S={},g=void 0):v=="}"?((m=N.pop())[0][m[1]]=S,g=void 0,S=m[0]):v=="-"?_=-1:g===void 0?r.hasOwnProperty(v)?(k+=r[v],g=parseInt(k,16)*_,_=1,k=""):k+=v:r.hasOwnProperty(v)?(A+=r[v],S[g]=parseInt(A,16)*_,_=1,g=void 0,A=""):A+=v;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,m=d.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[f.postScriptName];g&&(f.metadata.Unicode.encoding=g,f.encoding=g.codePages[0])}])}(bt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(pd(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,n)}}])}(bt),function(t){function e(){return(wt.canvg?Promise.resolve(wt.canvg):Un(()=>import("./index.es-0pq0_1KS.js"),__vite__mapDeps([2,1,3]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}bt.API.addSvgAsImage=function(r,n,s,a,i,l,c,u){if(isNaN(n)||isNaN(s))throw mr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw mr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(g){return g.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(f)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,s,a,i,c,u)})}}(),bt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},bt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,h=0;function f(g,v){var b,_=!1;for(b=0;b<g.length;b+=1)g[b]===v&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=l.length;for(h=0;h<m;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(dr(t)==="object"){for(s in t)if(a=t[s],f(l,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&f(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,v=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?v.push("/"+g+" /"+r[g].value):v.push("/"+g+" "+r[g].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(bt.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,f=a.length;h<f;++h){if(l=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(a){var i,l,c,u,d,h,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(a).sort(function(m,g){return m-g})).length;h<f;h++)i=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",g=0;g<f.length;g++)m+=String.fromCharCode(f[g]);var v=u();d({data:m,addLength1:!0,objectId:v}),c("endobj");var b=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var _=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ic(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+ic(l.fontName)),c("/FontDescriptor "+_+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+ic(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var g=u();d({data:f,addLength1:!0,objectId:g}),c("endobj");var v=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var b=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ic(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var _=0;_<l.metadata.hmtx.widths.length;_++)l.metadata.hmtx.widths[_]=parseInt(l.metadata.hmtx.widths[_]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+ic(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,l=a.text||"",c=a.x,u=a.y,d=a.options||{},h=a.mutex||{},f=h.pdfEscape,m=h.activeFontKey,g=h.fonts,v=m,b="",_=0,S="",N=g[v].encoding;if(g[v].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:h};for(S=l,v=m,Array.isArray(l)&&(S=l[0]),_=0;_<S.length;_+=1)g[v].metadata.hasOwnProperty("cmap")&&(i=g[v].metadata.cmap.unicode.codeMap[S[_].charCodeAt(0)]),i||S[_].charCodeAt(0)<256&&g[v].metadata.hasOwnProperty("Unicode")?b+=S[_]:b+="";var k="";return parseInt(v.slice(1))<14||N==="WinAnsiEncoding"?k=f(b,v).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(k=r(b,g[v])),h.isHex=!0,{text:k,x:c,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",l=[],c={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([s(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(s(Object.assign({},c,{text:i[u]})).text);a.text=l}else a.text=s(Object.assign({},c,{text:i})).text}])}(bt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(bt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,i,l,c,u,d,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,N=0;this.__bidiEngine__={};var k=function(R){var D=R.charCodeAt(),T=D>>8,B=v[T];return B!==void 0?h[256*B+(255&D)]:T===252||T===253?"AL":_.test(T)?"L":T===8?"R":"N"},A=function(R){for(var D,T=0;T<R.length;T++){if((D=k(R.charAt(T)))==="L")return!1;if(D==="R")return!0}return!1},W=function(R,D,T,B){var z,re,$,V,X=D[B];switch(X){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(X="AN");break;case"AL":S=!0,X="R";break;case"WS":X="N";break;case"CS":B<1||B+1>=D.length||(z=T[B-1])!=="EN"&&z!=="AN"||(re=D[B+1])!=="EN"&&re!=="AN"?X="N":S&&(re="AN"),X=re===z?re:"N";break;case"ES":X=(z=B>0?T[B-1]:"B")==="EN"&&B+1<D.length&&D[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&T[B-1]==="EN"){X="EN";break}if(S){X="N";break}for($=B+1,V=D.length;$<V&&D[$]==="ET";)$++;X=$<V&&D[$]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(V=D.length,$=B+1;$<V&&D[$]==="NSM";)$++;if($<V){var he=R[B],je=he>=1425&&he<=2303||he===64286;if(z=D[$],je&&(z==="R"||z==="AL")){X="R";break}}}X=B<1||(z=D[B-1])==="B"?"N":T[B-1];break;case"B":S=!1,s=!0,X=N;break;case"S":a=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":X="N"}return X},I=function(R,D,T){var B=R.split("");return T&&F(B,T,{hiLevel:N}),B.reverse(),D&&D.reverse(),B.join("")},F=function(R,D,T){var B,z,re,$,V,X=-1,he=R.length,je=0,L=[],G=N?m:f,Z=[];for(S=!1,s=!1,a=!1,z=0;z<he;z++)Z[z]=k(R[z]);for(re=0;re<he;re++){if(V=je,L[re]=W(R,Z,L,re),B=240&(je=G[V][g[L[re]]]),je&=15,D[re]=$=G[je][5],B>0)if(B===16){for(z=X;z<re;z++)D[z]=1;X=-1}else X=-1;if(G[je][6])X===-1&&(X=re);else if(X>-1){for(z=X;z<re;z++)D[z]=$;X=-1}Z[re]==="B"&&(D[re]=0),T.hiLevel|=$}a&&function(se,H,ne){for(var oe=0;oe<ne;oe++)if(se[oe]==="S"){H[oe]=N;for(var ce=oe-1;ce>=0&&se[ce]==="WS";ce--)H[ce]=N}}(Z,D,he)},ee=function(R,D,T,B,z){if(!(z.hiLevel<R)){if(R===1&&N===1&&!s)return D.reverse(),void(T&&T.reverse());for(var re,$,V,X,he=D.length,je=0;je<he;){if(B[je]>=R){for(V=je+1;V<he&&B[V]>=R;)V++;for(X=je,$=V-1;X<$;X++,$--)re=D[X],D[X]=D[$],D[$]=re,T&&(re=T[X],T[X]=T[$],T[$]=re);je=V}je++}}},ae=function(R,D,T){var B=R.split(""),z={hiLevel:N};return T||(T=[]),F(B,T,z),function(re,$,V){if(V.hiLevel!==0&&d)for(var X,he=0;he<re.length;he++)$[he]===1&&(X=b.indexOf(re[he]))>=0&&(re[he]=b[X+1])}(B,T,z),ee(2,B,D,T,z),ee(1,B,D,T,z),B.join("")};return this.__bidiEngine__.doBidiReorder=function(R,D,T){if(function(z,re){if(re)for(var $=0;$<z.length;$++)re[$]=$;l===void 0&&(l=A(z)),u===void 0&&(u=A(z))}(R,D),i||!c||u)if(i&&c&&l^u)N=l?1:0,R=I(R,D,T);else if(!i&&c&&u)N=l?1:0,R=ae(R,D,T),R=I(R,D);else if(!i||l||c||u){if(i&&!c&&l^u)R=I(R,D),l?(N=0,R=ae(R,D,T)):(N=1,R=ae(R,D,T),R=I(R,D));else if(i&&l&&!c&&u)N=1,R=ae(R,D,T),R=I(R,D);else if(!i&&!c&&l^u){var B=d;l?(N=1,R=ae(R,D,T),N=0,d=!1,R=ae(R,D,T),d=B):(N=0,R=ae(R,D,T),R=I(R,D),N=1,d=!1,R=ae(R,D,T),d=B,R=I(R,D))}}else N=0,R=ae(R,D,T);else N=l?1:0,R=ae(R,D,T);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var i=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(i=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?i.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):i.push([r.doBidiReorder(s[l])]);n.text=i}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(bt),bt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new yo(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new EB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new gB(this.contents),this.head=new vB(this),this.name=new _B(this),this.cmap=new h4(this),this.toUnicode={},this.hhea=new xB(this),this.maxp=new jB(this),this.hmtx=new NB(this),this.post=new wB(this),this.os2=new bB(this),this.loca=new PB(this),this.glyf=new CB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,i,l;for(i=0,a=0,l=(e=""+e).length;0<=l?a<l:a>l;a=0<=l?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var xa,yo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),gB=function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,i,l,c,u,d,h,f,m,g,v;for(v in m=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),i=Math.floor(h/c),d=16*m-h,(s=new yo).writeInt(this.scalarType),s.writeShort(m),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*m,u=s.pos+a,l=null,g=[],r)for(f=r[v],s.writeString(v),s.writeInt(t(f)),s.writeInt(u),s.writeInt(f.length),g=g.concat(f),v==="head"&&(l=u),u+=f.length;u%4;)g.push(0),u++;return s.write(g),n=2981146554-t(s.data),s.pos=l+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,i;for(r=f4.call(r);r.length%4;)r.push(0);for(a=new yo(r),s=0,n=0,i=r.length;n<i;n=n+=4)s+=a.readUInt32();return 4294967295&s},e}(),yB={}.hasOwnProperty,Ja=function(t,e){for(var r in e)yB.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};xa=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var vB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new yo).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),Pw=function(){function t(e,r){var n,s,a,i,l,c,u,d,h,f,m,g,v,b,_,S,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),f=m/2,e.pos+=6,a=function(){var k,A;for(A=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)A.push(e.readUInt16());return A}(),e.pos+=2,v=function(){var k,A;for(A=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)A.push(e.readUInt16());return A}(),u=function(){var k,A;for(A=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)A.push(e.readUInt16());return A}(),d=function(){var k,A;for(A=[],c=k=0;0<=f?k<f:k>f;c=0<=f?++k:--k)A.push(e.readUInt16());return A}(),s=(this.length-e.pos+this.offset)/2,l=function(){var k,A;for(A=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)A.push(e.readUInt16());return A}(),c=_=0,N=a.length;_<N;c=++_)for(b=a[c],n=S=g=v[c];g<=b?S<=b:S>=b;n=g<=b?++S:--S)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-g)-(f-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,s,a,i,l,c,u,d,h,f,m,g,v,b,_,S,N,k,A,W,I,F,ee,ae,R,D,T,B,z,re,$,V,X,he,je,L,G,Z,se,H,ne,oe,ce,ve,Ae,we;switch(B=new yo,i=Object.keys(e).sort(function(ke,Ke){return ke-Ke}),r){case"macroman":for(v=0,b=function(){var ke=[];for(g=0;g<256;++g)ke.push(0);return ke}(),S={0:0},a={},z=0,X=i.length;z<X;z++)S[ce=e[s=i[z]]]==null&&(S[ce]=++v),a[s]={old:e[s],new:S[e[s]]},b[s]=S[e[s]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(b),{charMap:a,subtable:B.data,maxGlyphID:v+1};case"unicode":for(D=[],h=[],N=0,S={},n={},_=u=null,re=0,he=i.length;re<he;re++)S[A=e[s=i[re]]]==null&&(S[A]=++N),n[s]={old:A,new:S[A]},l=S[A]-s,_!=null&&l===u||(_&&h.push(_),D.push(s),u=l),_=s;for(_&&h.push(_),h.push(65535),D.push(65535),ae=2*(ee=D.length),F=2*Math.pow(Math.log(ee)/Math.LN2,2),f=Math.log(F/2)/Math.LN2,I=2*ee-F,c=[],W=[],m=[],g=$=0,je=D.length;$<je;g=++$){if(R=D[g],d=h[g],R===65535){c.push(0),W.push(0);break}if(R-(T=n[R].new)>=32768)for(c.push(0),W.push(2*(m.length+ee-g)),s=V=R;R<=d?V<=d:V>=d;s=R<=d?++V:--V)m.push(n[s].new);else c.push(T-R),W.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*ee+2*m.length),B.writeUInt16(0),B.writeUInt16(ae),B.writeUInt16(F),B.writeUInt16(f),B.writeUInt16(I),ne=0,L=h.length;ne<L;ne++)s=h[ne],B.writeUInt16(s);for(B.writeUInt16(0),oe=0,G=D.length;oe<G;oe++)s=D[oe],B.writeUInt16(s);for(ve=0,Z=c.length;ve<Z;ve++)l=c[ve],B.writeUInt16(l);for(Ae=0,se=W.length;Ae<se;Ae++)k=W[Ae],B.writeUInt16(k);for(we=0,H=m.length;we<H;we++)v=m[we],B.writeUInt16(v);return{charMap:n,subtable:B.data,maxGlyphID:N+1}}},t}(),h4=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)n=new Pw(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,a;return n==null&&(n="macroman"),s=Pw.encode(r,n),(a=new yo).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),xB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),bB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),wB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(s=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],i=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;i=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},e}(),SB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},_B=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,a,i,l,c,u,d,h,f,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=h=0,f=s.length;h<f;i=++h)a=s[i],r.pos=a.offset,d=r.readString(a.length),l=new SB(d,a),u[m=a.nameID]==null&&(u[m]=[]),u[a.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),jB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),NB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,a,i,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,f,m;for(m=[],d=0,h=(f=this.metrics).length;d<h;d++)i=f[d],m.push(i.advance);return m}).call(this),s=this.widths[this.widths.length-1],u=[],n=l=0;0<=a?l<a:l>a;n=0<=a?++l:--l)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),f4=[].slice,CB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,a,i,l,c,u,d,h,f;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,s=i.indexOf(r),(a=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new yo(n.read(a))).readShort(),d=c.readShort(),f=c.readShort(),u=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new AB(c,d,f,u,h):new kB(c,l,d,f,u,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var a,i,l,c,u;for(l=[],i=[],c=0,u=n.length;c<u;c++)a=r[n[c]],i.push(l.length),a&&(l=l.concat(a.encode(s)));return i.push(l.length),{table:l,offsets:i}},e}(),kB=function(){function t(e,r,n,s,a,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),AB=function(){function t(e,r,n,s,a){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new yo(f4.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),PB=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ja(e,xa),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,l=0;l<s.length;++l)if(s[l]=a,i<n.length&&n[i]==l){++i,s[l]=a;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(a+=u)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),EB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,i,l,c;for(s={},i=0,l=e.length;i<l;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))n=c[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,i,l,c,u,d,h,f,m,g,v,b,_;for(s in n=h4.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),m={0:0},_=n.charMap)m[(c=_[s]).old]=c.new;for(g in f=n.maxGlyphID,i)g in m||(m[g]=f++);return d=function(S){var N,k;for(N in k={},S)k[S[N]]=N;return k}(m),h=Object.keys(d).sort(function(S,N){return S-N}),v=function(){var S,N,k;for(k=[],S=0,N=h.length;S<N;S++)l=h[S],k.push(d[l]);return k}(),a=this.font.glyf.encode(i,v,m),u=this.font.loca.encode(a.offsets,v),b={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();bt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)i=r[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+r},e}();function p4(t,e,r,n,s){n=n||{};var a=1.15,i=s.internal.scaleFactor,l=s.internal.getFontSize()/i,c=s.getLineHeightFactor?s.getLineHeightFactor():a,u=l*c,d=/\r\n|\r|\n/g,h="",f=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,f=h.length||1),r+=l*(2-a),n.valign==="middle"?r-=f/2*u:n.valign==="bottom"&&(r-=f*u),n.halign==="center"||n.halign==="right"){var m=l;if(n.halign==="center"&&(m*=.5),h&&f>=1){for(var g=0;g<h.length;g++)s.text(h[g],e-s.getStringUnitWidth(h[g])*m,r),r+=u;return s}e-=s.getStringUnitWidth(t)*m}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var Ew={},jc=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Ew=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),l=i.fontStyle,c=i.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,a){return this.jsPDFDocument.rect(e,r,n,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Ew||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Hv=function(t,e){return Hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Hv(t,e)};function m4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Hv(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var g4=function(t){m4(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function TB(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function LB(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Pp(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function y4(t,e,r,n){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=v4(s,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function v4(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Rm(t,e){var r,n,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function x4(t,e){var r=Rm(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function DB(t,e,r,n,s){var a={},i=1.3333333333333333,l=xy(e,function(N){return s.getComputedStyle(N).backgroundColor});l!=null&&(a.fillColor=l);var c=xy(e,function(N){return s.getComputedStyle(N).color});c!=null&&(a.textColor=c);var u=OB(n,r);u&&(a.cellPadding=u);var d="borderTopColor",h=i*r,f=n.borderTopWidth;if(n.borderBottomWidth===f&&n.borderRightWidth===f&&n.borderLeftWidth===f){var m=(parseFloat(f)||0)/h;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var g=xy(e,function(N){return s.getComputedStyle(N)[d]});g!=null&&(a.lineColor=g);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(a.fontSize=b/i);var _=RB(n);_&&(a.fontStyle=_);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(a.font=S),a}function RB(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function xy(t,e){var r=b4(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function b4(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:b4(t.parentElement,e):r}function OB(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(l){return parseInt(l||"0")/n}),i=Rm(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function w4(t,e,r,n,s){var a,i;n===void 0&&(n=!1),s===void 0&&(s=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],f=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:f};for(var m=0;m<l.rows.length;m++){var g=l.rows[m],v=(i=(a=g==null?void 0:g.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=IB(c,u,r,g,n,s);b&&(v==="thead"?d.push(b):v==="tfoot"?f.push(b):h.push(b))}return{head:d,body:h,foot:f}}function IB(t,e,r,n,s,a){for(var i=new g4(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(s||u.display!=="none"){var d=void 0;a&&(d=DB(t,c,e,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:MB(c)})}}var h=r.getComputedStyle(n);if(i.length>0&&(s||h.display!=="none"))return i}function MB(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function FB(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var a=s[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function mi(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var l=arguments[i];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a}function BB(t,e){var r=new jc(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();FB(s,n,e);var a=mi({},s,n,e),i;typeof window<"u"&&(i=window);var l=$B(s,n,e),c=UB(s,n,e),u=VB(r,a),d=zB(r,a,i);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function $B(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],h=r[c];n.columnStyles=mi({},u,d,h)}else{var f=[t,e,r],m=f.map(function(g){return g[c]||{}});n[c]=mi({},m[0],m[1],m[2])}},a=0,i=Object.keys(n);a<i.length;a++){var l=i[a];s(l)}return n}function UB(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=n;a<i.length;a++){var l=i[a];l.didParseCell&&s.didParseCell.push(l.didParseCell),l.willDrawCell&&s.willDrawCell.push(l.willDrawCell),l.didDrawCell&&s.didDrawCell.push(l.didDrawCell),l.willDrawPage&&s.willDrawPage.push(l.willDrawPage),l.didDrawPage&&s.didDrawPage.push(l.didDrawPage)}return s}function VB(t,e){var r,n,s,a,i,l,c,u,d,h,f,m,g=Rm(e.margin,40/t.scaleFactor()),v=(r=qB(t,e.startY))!==null&&r!==void 0?r:g.top,b;e.showFoot===!0?b="everyPage":e.showFoot===!1?b="never":b=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var _;e.showHead===!0?_="everyPage":e.showHead===!1?_="never":_=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var S=(a=e.useCss)!==null&&a!==void 0?a:!1,N=e.theme||(S?"plain":"striped"),k=!!e.horizontalPageBreak,A=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:S,theme:N,startY:v,margin:g,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:_,showFoot:b,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:k,horizontalPageBreakRepeat:A,horizontalPageBreakBehaviour:(m=e.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function qB(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function zB(t,e,r){var n=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var l=w4(t,e.html,r,i,e.useCss)||{};n=l.head||n,s=l.body||n,a=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||WB(n,s,a);return{columns:c,head:n,body:s,foot:a}}function WB(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,l;Array.isArray(n)?l=n[parseInt(a)]:l=n[a],typeof l=="object"&&!Array.isArray(l)&&(i=(l==null?void 0:l.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=s.length:u=a+(c>0?"_".concat(c):"");var d={dataKey:u};s.push(d)}}),s}var Gv=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),HB=function(t){m4(e,t);function e(r,n,s,a,i,l){var c=t.call(this,r,n,l)||this;return c.cell=s,c.row=a,c.column=i,c.section=a.section,c}return e}(Gv),GB=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,a,i){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new HB(e,this,n,s,a,i),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var a=s[n];a(new Gv(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var a=s[n];a(new Gv(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),S4=function(){function t(e,r,n,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof g4&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var a;return Math.max(n,((a=r.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,a){var i=n.cells[a.index];if(!i)return 0;var l=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+l;return u>s?u:s},0)},t}(),_4=function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",l=/\r\n|\r|\n/g;this.text=i.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,a=n*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Rm(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),YB=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var a=s[n],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function KB(t,e){JB(t,e);var r=[],n=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=Yv(r,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=Yv(r,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),XB(e),QB(e,t),ZB(e)}function JB(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=x4(t,e);e.allRows().forEach(function(a){for(var i=0,l=e.columns;i<l.length;i++){var c=l[i],u=a.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,c,null);var h=u.padding("horizontal");u.contentWidth=Pp(u.text,u.styles,t)+h;var f=Pp(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=f+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,l=e.columns;i<l.length;i++){var c=l[i],u=a.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Yv(t,e,r){for(var n=e,s=t.reduce(function(m,g){return m+g.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],l=i.wrappedWidth/s,c=n*l,u=i.width+c,d=r(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=t.filter(function(m){return e<0?m.width>r(m):!0});f.length&&(e=Yv(f,e,r))}return e}function ZB(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,l=t.columns;i<l.length;i++){var c=l[i],u=e[c.index];if(r>1)r--,delete a.cells[c.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=a.cells[c.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=n.length-s,f=d.rowSpan>h?h:d.rowSpan;e[c.index]={cell:d,left:f,row:a}}}}}function XB(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,a=0,i=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(i-=1,i>1&&t.columns[l+1])a+=c.width,delete n.cells[c.index];else if(s){var u=s;delete n.cells[c.index],s=null,u.width=c.width+a}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=c.width;continue}u.width=c.width+a}}}function QB(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var a=s[n],i=0,l=t.columns;i<l.length;i++){var c=l[i],u=a.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Tw(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Tw(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<f*u.rowSpan?r={height:f,count:u.rowSpan}:r&&r.count>0&&r.height>f&&(f=r.height),f>a.height&&(a.height=f)}}r.count--}}function Tw(t,e,r,n,s){return t.map(function(a){return e9(a,e,r,n,s)})}function e9(t,e,r,n,s){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Pp(t,r,n))return t;for(;e<Pp(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function t9(t,e){var r=new jc(t),n=r9(e,r.scaleFactor()),s=new GB(e,n);return KB(r,s),r.applyStyles(r.userStyles),s}function r9(t,e){var r=t.content,n=s9(r.columns);if(r.head.length===0){var s=Lw(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=Lw(n,"foot");s&&r.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:n,head:by("head",r.head,n,i,a,e),body:by("body",r.body,n,i,a,e),foot:by("foot",r.foot,n,i,a,e)}}function by(t,e,r,n,s,a){var i={},l=e.map(function(c,u){for(var d=0,h={},f=0,m=0,g=0,v=r;g<v.length;g++){var b=v[g];if(i[b.index]==null||i[b.index].left===0)if(m===0){var _=void 0;Array.isArray(c)?_=c[b.index-f-d]:_=c[b.dataKey];var S={};typeof _=="object"&&!Array.isArray(_)&&(S=(_==null?void 0:_.styles)||{});var N=a9(t,b,u,s,n,a,S),k=new _4(_,N,t);h[b.dataKey]=k,h[b.index]=k,m=k.colSpan-1,i[b.index]={left:k.rowSpan-1,times:m}}else m--,f++;else i[b.index].left--,m=i[b.index].times,d++}return new S4(c,u,t,h)});return l}function Lw(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=n9(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function n9(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function s9(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new YB(s,e,r)})}function a9(t,e,r,n,s,a,i){var l=LB(n),c;t==="head"?c=s.headStyles:t==="body"?c=s.bodyStyles:t==="foot"&&(c=s.footStyles);var u=mi({},l.table,l[t],s.styles,c),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},f=t==="body"&&r%2===0?mi({},l.alternateRow,s.alternateRowStyles):{},m=TB(a),g=mi({},m,u,f,h);return mi(g,i)}function i9(t,e,r){var n;r===void 0&&(r={});var s=x4(t,e),a=new Map,i=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(f){var m=e.columns.find(function(g){return g.dataKey===f||g.index===f});m&&!a.has(m.index)&&(a.set(m.index,!0),i.push(m.index),l.push(e.columns[m.index]),s-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||s>=h)u=!1,i.push(d),l.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:l,lastIndex:d-1}}function o9(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=i9(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function l9(t,e){var r=e.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+s.bottom+i;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(f,m){return f+m.height},0);l+=u}var d=new jc(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(N4(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=mi({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?c9(d,e,h,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(f){return ji(d,e,f,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(f,m){var g=m===e.body.length-1;Ep(d,e,f,g,h,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(f){return ji(d,e,f,a,e.columns)})),y4(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function c9(t,e,r,n){var s=o9(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?md(t,e,r,n,u.columns,!0):Dw(t,e,n,u.columns),u9(t,e,r,n,u.columns),wy(t,e,n,u.columns)});else for(var i=-1,l=s[0],c=function(){var u=i;if(l){t.applyStyles(t.userStyles);var d=l.columns;i>=0?md(t,e,r,n,d,!0):Dw(t,e,n,d),u=Rw(t,e,i+1,n,d),wy(t,e,n,d)}var h=u-i;s.slice(1).forEach(function(f){t.applyStyles(t.userStyles),md(t,e,r,n,f.columns,!0),Rw(t,e,i+1,n,f.columns,h),wy(t,e,n,f.columns)}),i=u};i<e.body.length-1;)c()}function Dw(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return ji(t,e,a,r,n)})}function u9(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var l=i===e.body.length-1;Ep(t,e,a,l,r,n,s)})}function Rw(t,e,r,n,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(r+a,e.body.length),l=-1;return e.body.slice(r,i).forEach(function(c,u){var d=r+u===e.body.length-1,h=j4(t,e,d,n);c.canEntireRowFit(h,s)&&(ji(t,e,c,n,s),l=r+u)}),l}function wy(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return ji(t,e,a,r,n)})}function d9(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/n);return Math.max(0,a)}function h9(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,l=r.columns;i<l.length;i++){var c=l[i],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new _4(u.raw,u.styles,u.section);d=mi(d,u),d.text=[];var h=d9(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var f=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(f,m),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(f,m),d.contentHeight>a&&(a=d.contentHeight),s[c.index]=d}}var g=new S4(t.raw,-1,t.section,s,!0);g.height=a;for(var v=0,b=r.columns;v<b.length;v++){var c=b[v],d=g.cells[c.index];d&&(d.height=g.height);var u=t.cells[c.index];u&&(u.height=t.height)}return g}function f9(t,e,r,n){var s=t.pageSize().height,a=n.settings.margin,i=a.top+a.bottom,l=s-i;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>l;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Ep(t,e,r,n,s,a,i){var l=j4(t,e,n,a);if(r.canEntireRowFit(l,i))ji(t,e,r,a,i);else if(f9(t,r,l,e)){var c=h9(r,l,e,t);ji(t,e,r,a,i),md(t,e,s,a,i),Ep(t,e,c,n,s,a,i)}else md(t,e,s,a,i),Ep(t,e,r,n,s,a,i)}function ji(t,e,r,n,s){n.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var l=i[a],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}p9(t,c,n);var d=c.getTextPos();p4(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function p9(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=v4(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),m9(t,e,r,n.lineWidth))}function m9(t,e,r,n){var s,a,i,l;n.top&&(s=r.x,a=r.y,i=r.x+e.width,l=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),c(n.top,s,a,i,l)),n.bottom&&(s=r.x,a=r.y+e.height,i=r.x+e.width,l=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),c(n.bottom,s,a,i,l)),n.left&&(s=r.x,a=r.y,i=r.x,l=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,s,a,i,l)),n.right&&(s=r.x+e.width,a=r.y,i=r.x+e.width,l=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,s,a,i,l));function c(u,d,h,f,m){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,f,m,"S")}}function j4(t,e,r,n){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function md(t,e,r,n,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(l){return ji(t,e,l,n,s)}),e.callEndPageHooks(t,n);var i=e.settings.margin;y4(t,e,r,n),N4(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return ji(t,e,l,n,s)}),t.applyStyles(t.userStyles))}function N4(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function g9(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=BB(this,n),a=t9(this,s);return l9(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){p4(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return jc.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){jc.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new jc(this),a=w4(s,e,window,r,!1),i=a.head,l=a.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var Sy;try{if(typeof window<"u"&&window){var Ow=window,Iw=Ow.jsPDF||((Sy=Ow.jspdf)===null||Sy===void 0?void 0:Sy.jsPDF);Iw&&g9(Iw)}}catch(t){console.error("Could not apply autoTable plugin",t)}const y9=async(t,e)=>{switch(e){case"json":return v9(t);case"csv":return x9(t);case"pdf":return b9(t);case"excel":return w9(t);default:throw new Error(`Unsupported export format: ${e}`)}},v9=t=>new Promise(e=>{const r=JSON.stringify(t,null,2),n=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`transactly-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),e()}),x9=t=>new Promise(e=>{try{const r=t.map(c=>{var u,d,h,f,m,g,v,b,_,S,N;return{id:c.id,name:c.name,date:c.date,totalAmount:c.totalAmount,status:c.status,supplierName:(u=c.loadBuy)==null?void 0:u.supplierName,goodsName:(d=c.loadBuy)==null?void 0:d.goodsName,quantity:(h=c.loadBuy)==null?void 0:h.quantity,purchaseRate:(f=c.loadBuy)==null?void 0:f.purchaseRate,totalCost:(m=c.loadBuy)==null?void 0:m.totalCost,buyerName:(g=c.loadSold)==null?void 0:g.buyerName,saleRate:(v=c.loadSold)==null?void 0:v.saleRate,totalSaleAmount:(b=c.loadSold)==null?void 0:b.totalSaleAmount,origin:(_=c.transportation)==null?void 0:_.origin,destination:(S=c.transportation)==null?void 0:S.destination,transportCharges:(N=c.transportation)==null?void 0:N.charges}}),n=Object.keys(r[0]||{});let s=n.join(",")+`
`;r.forEach(c=>{const u=n.map(d=>{const h=c[d],f=h==null?"":String(h);return f.includes(",")||f.includes(`
`)||f.includes('"')?`"${f.replace(/"/g,'""')}"`:f}).join(",");s+=u+`
`});const a=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download=`transactly-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i),e()}catch(r){console.error("CSV Export error:",r),e()}}),b9=t=>new Promise(e=>{try{const r=new bt;r.setFontSize(18),r.text("Transaction Export",14,22),r.setFontSize(11),r.text(`Generated on: ${new Date().toLocaleDateString()}`,14,30);const n=t.map(s=>{var a,i;return[s.id.substring(0,8)+"...",s.name||"N/A",new Date(s.date||"").toLocaleDateString(),((a=s.totalAmount)==null?void 0:a.toString())||"0",s.status||"pending",((i=s.loadBuy)==null?void 0:i.goodsName)||"N/A"]});r.autoTable({head:[["ID","Name","Date","Amount","Status","Goods"]],body:n,startY:40,headStyles:{fillColor:[51,51,51]},alternateRowStyles:{fillColor:[245,245,245]}}),r.save(`transactly-export-${new Date().toISOString().split("T")[0]}.pdf`),e()}catch(r){console.error("PDF Export error:",r),e()}}),w9=t=>new Promise(e=>{try{const r=t.map(l=>{var c,u,d,h,f,m,g,v,b,_,S;return{id:l.id,name:l.name,date:l.date,totalAmount:l.totalAmount,status:l.status,supplierName:(c=l.loadBuy)==null?void 0:c.supplierName,goodsName:(u=l.loadBuy)==null?void 0:u.goodsName,quantity:(d=l.loadBuy)==null?void 0:d.quantity,purchaseRate:(h=l.loadBuy)==null?void 0:h.purchaseRate,totalCost:(f=l.loadBuy)==null?void 0:f.totalCost,buyerName:(m=l.loadSold)==null?void 0:m.buyerName,saleRate:(g=l.loadSold)==null?void 0:g.saleRate,totalSaleAmount:(v=l.loadSold)==null?void 0:v.totalSaleAmount,origin:(b=l.transportation)==null?void 0:b.origin,destination:(_=l.transportation)==null?void 0:_.destination,transportCharges:(S=l.transportation)==null?void 0:S.charges}});let n=`<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
<Worksheet ss:Name="Sheet1">
<Table>
`;n+=`<Row>
`,Object.keys(r[0]||{}).forEach(l=>{n+=`<Cell><Data ss:Type="String">${l}</Data></Cell>
`}),n+=`</Row>
`,r.forEach(l=>{n+=`<Row>
`,Object.values(l).forEach(c=>{if(c==null)n+=`<Cell><Data ss:Type="String"></Data></Cell>
`;else if(typeof c=="number")n+=`<Cell><Data ss:Type="Number">${c}</Data></Cell>
`;else{const u=String(c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");n+=`<Cell><Data ss:Type="String">${u}</Data></Cell>
`}}),n+=`</Row>
`}),n+=`</Table>
</Worksheet>
</Workbook>`;const s=new Blob([n],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download=`transactly-export-${new Date().toISOString().split("T")[0]}.xls`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),e()}catch(r){console.error("Excel Export error:",r),e()}}),_y=768;function Om(){const[t,e]=w.useState(void 0);return w.useEffect(()=>{const r=window.matchMedia(`(max-width: ${_y-1}px)`),n=()=>{e(window.innerWidth<_y)};return r.addEventListener("change",n),e(window.innerWidth<_y),()=>r.removeEventListener("change",n)},[]),!!t}const Nc=kA,kh=w.forwardRef(({className:t,...e},r)=>{const n=Om();return o.jsx(E5,{ref:r,className:Ve("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n?"overflow-x-auto scrollbar-hide w-full":"",t),...e})});kh.displayName=E5.displayName;const gs=w.forwardRef(({className:t,icon:e,children:r,...n},s)=>{const a=Om(),i=n["data-state"]==="active",l=document.querySelector('[data-force-show-text="true"]')!==null;return o.jsxs(T5,{ref:s,className:Ve("relative inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a&&"min-w-[40px]",a&&!i&&e&&"px-2 py-1",t),...n,children:[e&&o.jsx("span",{className:Ve("transition-all duration-200",i||!a?"mr-2":"mr-0"),children:e}),o.jsx("span",{className:Ve("transition-all duration-200 whitespace-nowrap",n.className&&typeof n.className=="string"&&n.className.includes("settings-tab")||l?"inline-block":a&&!i&&e?"sr-only":"inline-block"),children:r}),i&&o.jsx("span",{className:"tab-active-indicator absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})});gs.displayName=T5.displayName;const ts=w.forwardRef(({className:t,...e},r)=>o.jsx(L5,{ref:r,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ts.displayName=L5.displayName;const Gf=({value:t,onChange:e,className:r,...n})=>{const s=w.useRef(null),[a,i]=w.useState(!1),[l,c]=w.useState(null),u=()=>{i(!0)},d=()=>{i(!1)},h=f=>{c(f.target.selectionStart),e(f.target.value)};return w.useEffect(()=>{if(a&&s.current&&(s.current.focus(),l!==null))try{s.current.setSelectionRange(l,l)}catch{}},[a,t,l]),o.jsx("input",{ref:s,value:t,onChange:h,onFocus:u,onBlur:d,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n})},S9=({value:t,onChange:e,className:r,...n})=>{const s=w.useRef(null),[a,i]=w.useState(!1),[l,c]=w.useState(null),u=()=>{i(!0)},d=()=>{i(!1)},h=f=>{c(f.target.selectionStart),e(f.target.value)};return w.useEffect(()=>{if(a&&s.current&&(s.current.focus(),l!==null))try{s.current.setSelectionRange(l,l)}catch{}},[a,t,l]),o.jsx("textarea",{ref:s,value:t,onChange:h,onFocus:u,onBlur:d,className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n})};function Mw(t,[e,r]){return Math.min(r,Math.max(e,t))}function Bx(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var _9=[" ","Enter","ArrowUp","ArrowDown"],j9=[" ","Enter"],Ah="Select",[Im,Mm,N9]=N5(Ah),[lu,aG]=Ya(Ah,[N9,jo]),Fm=jo(),[C9,Co]=lu(Ah),[k9,A9]=lu(Ah),C4=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:g}=t,v=Fm(e),[b,_]=w.useState(null),[S,N]=w.useState(null),[k,A]=w.useState(!1),W=Qp(u),[I=!1,F]=za({prop:n,defaultProp:s,onChange:a}),[ee,ae]=za({prop:i,defaultProp:l,onChange:c}),R=w.useRef(null),D=b?g||!!b.closest("form"):!0,[T,B]=w.useState(new Set),z=Array.from(T).map(re=>re.props.value).join(";");return o.jsx(fm,{...v,children:o.jsxs(C9,{required:m,scope:e,trigger:b,onTriggerChange:_,valueNode:S,onValueNodeChange:N,valueNodeHasChildren:k,onValueNodeHasChildrenChange:A,contentId:ul(),value:ee,onValueChange:ae,open:I,onOpenChange:F,dir:W,triggerPointerDownPosRef:R,disabled:f,children:[o.jsx(Im.Provider,{scope:e,children:o.jsx(k9,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(re=>{B($=>new Set($).add(re))},[]),onNativeOptionRemove:w.useCallback(re=>{B($=>{const V=new Set($);return V.delete(re),V})},[]),children:r})}),D?o.jsxs(Z4,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:ee,onChange:re=>ae(re.target.value),disabled:f,form:g,children:[ee===void 0?o.jsx("option",{value:""}):null,Array.from(T)]},z):null]})})};C4.displayName=Ah;var k4="SelectTrigger",A4=w.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,a=Fm(r),i=Co(k4,r),l=i.disabled||n,c=Sr(e,i.onTriggerChange),u=Mm(r),d=w.useRef("touch"),[h,f,m]=X4(v=>{const b=u().filter(N=>!N.disabled),_=b.find(N=>N.value===i.value),S=Q4(b,v,_);S!==void 0&&i.onValueChange(S.value)}),g=v=>{l||(i.onOpenChange(!0),m()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(bh,{asChild:!0,...a,children:o.jsx(Ut.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":J4(i.value)?"":void 0,...s,ref:c,onClick:ht(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&g(v)}),onPointerDown:ht(s.onPointerDown,v=>{d.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:ht(s.onKeyDown,v=>{const b=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&f(v.key),!(b&&v.key===" ")&&_9.includes(v.key)&&(g(),v.preventDefault())})})})});A4.displayName=k4;var P4="SelectValue",E4=w.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:i="",...l}=t,c=Co(P4,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Sr(e,c.onValueNodeChange);return bs(()=>{u(d)},[u,d]),o.jsx(Ut.span,{...l,ref:h,style:{pointerEvents:"none"},children:J4(c.value)?o.jsx(o.Fragment,{children:i}):a})});E4.displayName=P4;var P9="SelectIcon",T4=w.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx(Ut.span,{"aria-hidden":!0,...s,ref:e,children:n||"▼"})});T4.displayName=P9;var E9="SelectPortal",L4=t=>o.jsx(g0,{asChild:!0,...t});L4.displayName=E9;var hl="SelectContent",D4=w.forwardRef((t,e)=>{const r=Co(hl,t.__scopeSelect),[n,s]=w.useState();if(bs(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?tm.createPortal(o.jsx(R4,{scope:t.__scopeSelect,children:o.jsx(Im.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(O4,{...t,ref:e})});D4.displayName=hl;var ta=10,[R4,ko]=lu(hl),T9="SelectContentImpl",O4=w.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:b,..._}=t,S=Co(hl,r),[N,k]=w.useState(null),[A,W]=w.useState(null),I=Sr(e,ne=>k(ne)),[F,ee]=w.useState(null),[ae,R]=w.useState(null),D=Mm(r),[T,B]=w.useState(!1),z=w.useRef(!1);w.useEffect(()=>{if(N)return u0(N)},[N]),d0();const re=w.useCallback(ne=>{const[oe,...ce]=D().map(we=>we.ref.current),[ve]=ce.slice(-1),Ae=document.activeElement;for(const we of ne)if(we===Ae||(we==null||we.scrollIntoView({block:"nearest"}),we===oe&&A&&(A.scrollTop=0),we===ve&&A&&(A.scrollTop=A.scrollHeight),we==null||we.focus(),document.activeElement!==Ae))return},[D,A]),$=w.useCallback(()=>re([F,N]),[re,F,N]);w.useEffect(()=>{T&&$()},[T,$]);const{onOpenChange:V,triggerPointerDownPosRef:X}=S;w.useEffect(()=>{if(N){let ne={x:0,y:0};const oe=ve=>{var Ae,we;ne={x:Math.abs(Math.round(ve.pageX)-(((Ae=X.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((we=X.current)==null?void 0:we.y)??0))}},ce=ve=>{ne.x<=10&&ne.y<=10?ve.preventDefault():N.contains(ve.target)||V(!1),document.removeEventListener("pointermove",oe),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",ce,{capture:!0})}}},[N,V,X]),w.useEffect(()=>{const ne=()=>V(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[V]);const[he,je]=X4(ne=>{const oe=D().filter(Ae=>!Ae.disabled),ce=oe.find(Ae=>Ae.ref.current===document.activeElement),ve=Q4(oe,ne,ce);ve&&setTimeout(()=>ve.ref.current.focus())}),L=w.useCallback((ne,oe,ce)=>{const ve=!z.current&&!ce;(S.value!==void 0&&S.value===oe||ve)&&(ee(ne),ve&&(z.current=!0))},[S.value]),G=w.useCallback(()=>N==null?void 0:N.focus(),[N]),Z=w.useCallback((ne,oe,ce)=>{const ve=!z.current&&!ce;(S.value!==void 0&&S.value===oe||ve)&&R(ne)},[S.value]),se=n==="popper"?Kv:I4,H=se===Kv?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:b}:{};return o.jsx(R4,{scope:r,content:N,viewport:A,onViewportChange:W,itemRefCallback:L,selectedItem:F,onItemLeave:G,itemTextRefCallback:Z,focusSelectedItem:$,selectedItemText:ae,position:n,isPositioned:T,searchRef:he,children:o.jsx(m0,{as:mh,allowPinchZoom:!0,children:o.jsx(h0,{asChild:!0,trapped:S.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:ht(s,ne=>{var oe;(oe=S.trigger)==null||oe.focus({preventScroll:!0}),ne.preventDefault()}),children:o.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:o.jsx(se,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:ne=>ne.preventDefault(),..._,...H,onPlaced:()=>B(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ht(_.onKeyDown,ne=>{const oe=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!oe&&ne.key.length===1&&je(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let ve=D().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const Ae=ne.target,we=ve.indexOf(Ae);ve=ve.slice(we+1)}setTimeout(()=>re(ve)),ne.preventDefault()}})})})})})})});O4.displayName=T9;var L9="SelectItemAlignedPosition",I4=w.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,a=Co(hl,r),i=ko(hl,r),[l,c]=w.useState(null),[u,d]=w.useState(null),h=Sr(e,I=>d(I)),f=Mm(r),m=w.useRef(!1),g=w.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:_,focusSelectedItem:S}=i,N=w.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&v&&b&&_){const I=a.trigger.getBoundingClientRect(),F=u.getBoundingClientRect(),ee=a.valueNode.getBoundingClientRect(),ae=_.getBoundingClientRect();if(a.dir!=="rtl"){const Ae=ae.left-F.left,we=ee.left-Ae,ke=I.left-we,Ke=I.width+ke,Ce=Math.max(Ke,F.width),Q=window.innerWidth-ta,Ye=Mw(we,[ta,Math.max(ta,Q-Ce)]);l.style.minWidth=Ke+"px",l.style.left=Ye+"px"}else{const Ae=F.right-ae.right,we=window.innerWidth-ee.right-Ae,ke=window.innerWidth-I.right-we,Ke=I.width+ke,Ce=Math.max(Ke,F.width),Q=window.innerWidth-ta,Ye=Mw(we,[ta,Math.max(ta,Q-Ce)]);l.style.minWidth=Ke+"px",l.style.right=Ye+"px"}const R=f(),D=window.innerHeight-ta*2,T=v.scrollHeight,B=window.getComputedStyle(u),z=parseInt(B.borderTopWidth,10),re=parseInt(B.paddingTop,10),$=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),X=z+re+T+V+$,he=Math.min(b.offsetHeight*5,X),je=window.getComputedStyle(v),L=parseInt(je.paddingTop,10),G=parseInt(je.paddingBottom,10),Z=I.top+I.height/2-ta,se=D-Z,H=b.offsetHeight/2,ne=b.offsetTop+H,oe=z+re+ne,ce=X-oe;if(oe<=Z){const Ae=R.length>0&&b===R[R.length-1].ref.current;l.style.bottom="0px";const we=u.clientHeight-v.offsetTop-v.offsetHeight,ke=Math.max(se,H+(Ae?G:0)+we+$),Ke=oe+ke;l.style.height=Ke+"px"}else{const Ae=R.length>0&&b===R[0].ref.current;l.style.top="0px";const ke=Math.max(Z,z+v.offsetTop+(Ae?L:0)+H)+ce;l.style.height=ke+"px",v.scrollTop=oe-Z+v.offsetTop}l.style.margin=`${ta}px 0`,l.style.minHeight=he+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,v,b,_,a.dir,n]);bs(()=>N(),[N]);const[k,A]=w.useState();bs(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const W=w.useCallback(I=>{I&&g.current===!0&&(N(),S==null||S(),g.current=!1)},[N,S]);return o.jsx(R9,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:W,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:o.jsx(Ut.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});I4.displayName=L9;var D9="SelectPopperPosition",Kv=w.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=ta,...a}=t,i=Fm(r);return o.jsx(pm,{...i,...a,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kv.displayName=D9;var[R9,$x]=lu(hl,{}),Jv="SelectViewport",M4=w.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,a=ko(Jv,r),i=$x(Jv,r),l=Sr(e,a.onViewportChange),c=w.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Im.Slot,{scope:r,children:o.jsx(Ut.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ht(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-ta*2,v=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),_=Math.max(v,b);if(_<g){const S=_+m,N=Math.min(g,S),k=S-N;h.style.height=N+"px",h.style.bottom==="0px"&&(d.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});M4.displayName=Jv;var F4="SelectGroup",[O9,I9]=lu(F4),M9=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ul();return o.jsx(O9,{scope:r,id:s,children:o.jsx(Ut.div,{role:"group","aria-labelledby":s,...n,ref:e})})});M9.displayName=F4;var B4="SelectLabel",$4=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=I9(B4,r);return o.jsx(Ut.div,{id:s.id,...n,ref:e})});$4.displayName=B4;var Tp="SelectItem",[F9,U4]=lu(Tp),V4=w.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...i}=t,l=Co(Tp,r),c=ko(Tp,r),u=l.value===n,[d,h]=w.useState(a??""),[f,m]=w.useState(!1),g=Sr(e,S=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,S,n,s)}),v=ul(),b=w.useRef("touch"),_=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(F9,{scope:r,value:n,disabled:s,textId:v,isSelected:u,onItemTextChange:w.useCallback(S=>{h(N=>N||((S==null?void 0:S.textContent)??"").trim())},[]),children:o.jsx(Im.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx(Ut.div,{role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:g,onFocus:ht(i.onFocus,()=>m(!0)),onBlur:ht(i.onBlur,()=>m(!1)),onClick:ht(i.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:ht(i.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:ht(i.onPointerDown,S=>{b.current=S.pointerType}),onPointerMove:ht(i.onPointerMove,S=>{var N;b.current=S.pointerType,s?(N=c.onItemLeave)==null||N.call(c):b.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ht(i.onPointerLeave,S=>{var N;S.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:ht(i.onKeyDown,S=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&S.key===" "||(j9.includes(S.key)&&_(),S.key===" "&&S.preventDefault())})})})})});V4.displayName=Tp;var rd="SelectItemText",q4=w.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...a}=t,i=Co(rd,r),l=ko(rd,r),c=U4(rd,r),u=A9(rd,r),[d,h]=w.useState(null),f=Sr(e,_=>h(_),c.onItemTextChange,_=>{var S;return(S=l.itemTextRefCallback)==null?void 0:S.call(l,_,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=w.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return bs(()=>(v(g),()=>b(g)),[v,b,g]),o.jsxs(o.Fragment,{children:[o.jsx(Ut.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tm.createPortal(a.children,i.valueNode):null]})});q4.displayName=rd;var z4="SelectItemIndicator",W4=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return U4(z4,r).isSelected?o.jsx(Ut.span,{"aria-hidden":!0,...n,ref:e}):null});W4.displayName=z4;var Zv="SelectScrollUpButton",H4=w.forwardRef((t,e)=>{const r=ko(Zv,t.__scopeSelect),n=$x(Zv,t.__scopeSelect),[s,a]=w.useState(!1),i=Sr(e,n.onScrollButtonChange);return bs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(Y4,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});H4.displayName=Zv;var Xv="SelectScrollDownButton",G4=w.forwardRef((t,e)=>{const r=ko(Xv,t.__scopeSelect),n=$x(Xv,t.__scopeSelect),[s,a]=w.useState(!1),i=Sr(e,n.onScrollButtonChange);return bs(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(Y4,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});G4.displayName=Xv;var Y4=w.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,a=ko("SelectScrollButton",r),i=w.useRef(null),l=Mm(r),c=w.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),bs(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(Ut.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ht(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ht(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ht(s.onPointerLeave,()=>{c()})})}),B9="SelectSeparator",K4=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx(Ut.div,{"aria-hidden":!0,...n,ref:e})});K4.displayName=B9;var Qv="SelectArrow",$9=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Fm(r),a=Co(Qv,r),i=ko(Qv,r);return a.open&&i.position==="popper"?o.jsx(mm,{...s,...n,ref:e}):null});$9.displayName=Qv;function J4(t){return t===""||t===void 0}var Z4=w.forwardRef((t,e)=>{const{value:r,...n}=t,s=w.useRef(null),a=Sr(e,s),i=Bx(r);return w.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==r&&d){const h=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(h)}},[i,r]),o.jsx(AA,{asChild:!0,children:o.jsx("select",{...n,ref:a,defaultValue:r})})});Z4.displayName="BubbleSelect";function X4(t){const e=ph(t),r=w.useRef(""),n=w.useRef(0),s=w.useCallback(i=>{const l=r.current+i;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=w.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function Q4(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let i=U9(t,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function U9(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var V9=C4,eC=A4,q9=E4,z9=T4,W9=L4,tC=D4,H9=M4,rC=$4,nC=V4,G9=q4,Y9=W4,sC=H4,aC=G4,iC=K4;const dn=V9,hn=q9,nn=w.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(eC,{ref:n,className:Ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(z9,{asChild:!0,children:o.jsx(P0,{className:"h-4 w-4 opacity-50"})})]}));nn.displayName=eC.displayName;const oC=w.forwardRef(({className:t,...e},r)=>o.jsx(sC,{ref:r,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(uT,{className:"h-4 w-4"})}));oC.displayName=sC.displayName;const lC=w.forwardRef(({className:t,...e},r)=>o.jsx(aC,{ref:r,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(P0,{className:"h-4 w-4"})}));lC.displayName=aC.displayName;const sn=w.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx(W9,{children:o.jsxs(tC,{ref:s,className:Ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(oC,{}),o.jsx(H9,{className:Ve("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(lC,{})]})}));sn.displayName=tC.displayName;const K9=w.forwardRef(({className:t,...e},r)=>o.jsx(rC,{ref:r,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));K9.displayName=rC.displayName;const xt=w.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(nC,{ref:n,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Y9,{children:o.jsx(A0,{className:"h-4 w-4"})})}),o.jsx(G9,{children:e})]}));xt.displayName=nC.displayName;const J9=w.forwardRef(({className:t,...e},r)=>o.jsx(iC,{ref:r,className:Ve("-mx-1 my-1 h-px bg-muted",t),...e}));J9.displayName=iC.displayName;var Ux="Radio",[Z9,cC]=Ya(Ux),[X9,Q9]=Z9(Ux),uC=w.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u,...d}=t,[h,f]=w.useState(null),m=Sr(e,b=>f(b)),g=w.useRef(!1),v=h?u||!!h.closest("form"):!0;return o.jsxs(X9,{scope:r,checked:s,disabled:i,children:[o.jsx(Ut.button,{type:"button",role:"radio","aria-checked":s,"data-state":fC(s),"data-disabled":i?"":void 0,disabled:i,value:l,...d,ref:m,onClick:ht(t.onClick,b=>{s||c==null||c(),v&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),v&&o.jsx(e$,{control:h,bubbles:!g.current,name:n,value:l,checked:s,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});uC.displayName=Ux;var dC="RadioIndicator",hC=w.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...s}=t,a=Q9(dC,r);return o.jsx(So,{present:n||a.checked,children:o.jsx(Ut.span,{"data-state":fC(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e})})});hC.displayName=dC;var e$=t=>{const{control:e,checked:r,bubbles:n=!0,...s}=t,a=w.useRef(null),i=Bx(r),l=B0(e);return w.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==r&&h){const f=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(f)}},[i,r,n]),o.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function fC(t){return t?"checked":"unchecked"}var t$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Vx="RadioGroup",[r$,iG]=Ya(Vx,[eu,cC]),pC=eu(),mC=cC(),[n$,s$]=r$(Vx),gC=w.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,m=pC(r),g=Qp(u),[v,b]=za({prop:a,defaultProp:s,onChange:h});return o.jsx(n$,{scope:r,name:n,required:i,disabled:l,value:v,onValueChange:b,children:o.jsx(f0,{asChild:!0,...m,orientation:c,dir:g,loop:d,children:o.jsx(Ut.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...f,ref:e})})})});gC.displayName=Vx;var yC="RadioGroupItem",vC=w.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...s}=t,a=s$(yC,r),i=a.disabled||n,l=pC(r),c=mC(r),u=w.useRef(null),d=Sr(e,u),h=a.value===s.value,f=w.useRef(!1);return w.useEffect(()=>{const m=v=>{t$.includes(v.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),o.jsx(p0,{asChild:!0,...l,focusable:!i,active:h,children:o.jsx(uC,{disabled:i,required:a.required,checked:h,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:ht(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:ht(s.onFocus,()=>{var m;f.current&&((m=u.current)==null||m.click())})})})});vC.displayName=yC;var a$="RadioGroupIndicator",xC=w.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,s=mC(r);return o.jsx(hC,{...s,...n,ref:e})});xC.displayName=a$;var bC=gC,wC=vC,i$=xC;const gd=w.forwardRef(({className:t,...e},r)=>o.jsx(bC,{className:Ve("grid gap-2",t),...e,ref:r}));gd.displayName=bC.displayName;const La=w.forwardRef(({className:t,...e},r)=>o.jsx(wC,{ref:r,className:Ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(i$,{className:"flex items-center justify-center",children:o.jsx(dS,{className:"h-2.5 w-2.5 fill-current text-current"})})}));La.displayName=wC.displayName;const SC=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:r,className:Ve("w-full caption-bottom text-sm",t),...e})}));SC.displayName="Table";const _C=w.forwardRef(({className:t,...e},r)=>o.jsx("thead",{ref:r,className:Ve("[&_tr]:border-b",t),...e}));_C.displayName="TableHeader";const jC=w.forwardRef(({className:t,...e},r)=>o.jsx("tbody",{ref:r,className:Ve("[&_tr:last-child]:border-0",t),...e}));jC.displayName="TableBody";const o$=w.forwardRef(({className:t,...e},r)=>o.jsx("tfoot",{ref:r,className:Ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));o$.displayName="TableFooter";const e0=w.forwardRef(({className:t,...e},r)=>o.jsx("tr",{ref:r,className:Ve("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));e0.displayName="TableRow";const Go=w.forwardRef(({className:t,...e},r)=>o.jsx("th",{ref:r,className:Ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Go.displayName="TableHead";const Yo=w.forwardRef(({className:t,...e},r)=>o.jsx("td",{ref:r,className:Ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Yo.displayName="TableCell";const l$=w.forwardRef(({className:t,...e},r)=>o.jsx("caption",{ref:r,className:Ve("mt-4 text-sm text-muted-foreground",t),...e}));l$.displayName="TableCaption";function c$(t,e=[]){let r=[];function n(a,i){const l=w.createContext(i),c=r.length;r=[...r,i];function u(h){const{scope:f,children:m,...g}=h,v=(f==null?void 0:f[t][c])||l,b=w.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:b,children:m})}function d(h,f){const m=(f==null?void 0:f[t][c])||l,g=w.useContext(m);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const s=()=>{const a=r.map(i=>w.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return w.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,u$(s,...e)]}function u$(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}var d$="Toggle",qx=w.forwardRef((t,e)=>{const{pressed:r,defaultPressed:n=!1,onPressedChange:s,...a}=t,[i=!1,l]=za({prop:r,onChange:s,defaultProp:n});return o.jsx(Ut.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:ht(t.onClick,()=>{t.disabled||l(!i)})})});qx.displayName=d$;var NC=qx,cu="ToggleGroup",[CC,oG]=c$(cu,[eu]),kC=eu(),zx=Le.forwardRef((t,e)=>{const{type:r,...n}=t;if(r==="single"){const s=n;return o.jsx(h$,{...s,ref:e})}if(r==="multiple"){const s=n;return o.jsx(f$,{...s,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${cu}\``)});zx.displayName=cu;var[AC,PC]=CC(cu),h$=Le.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=t,[i,l]=za({prop:r,defaultProp:n,onChange:s});return o.jsx(AC,{scope:t.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:Le.useCallback(()=>l(""),[l]),children:o.jsx(EC,{...a,ref:e})})}),f$=Le.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=t,[i=[],l]=za({prop:r,defaultProp:n,onChange:s}),c=Le.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=Le.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return o.jsx(AC,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(EC,{...a,ref:e})})});zx.displayName=cu;var[p$,m$]=CC(cu),EC=Le.forwardRef((t,e)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:s=!0,orientation:a,dir:i,loop:l=!0,...c}=t,u=kC(r),d=Qp(i),h={role:"group",dir:d,...c};return o.jsx(p$,{scope:r,rovingFocus:s,disabled:n,children:s?o.jsx(f0,{asChild:!0,...u,orientation:a,dir:d,loop:l,children:o.jsx(Ut.div,{...h,ref:e})}):o.jsx(Ut.div,{...h,ref:e})})}),Lp="ToggleGroupItem",TC=Le.forwardRef((t,e)=>{const r=PC(Lp,t.__scopeToggleGroup),n=m$(Lp,t.__scopeToggleGroup),s=kC(t.__scopeToggleGroup),a=r.value.includes(t.value),i=n.disabled||t.disabled,l={...t,pressed:a,disabled:i},c=Le.useRef(null);return n.rovingFocus?o.jsx(p0,{asChild:!0,...s,focusable:!i,active:a,ref:c,children:o.jsx(Fw,{...l,ref:e})}):o.jsx(Fw,{...l,ref:e})});TC.displayName=Lp;var Fw=Le.forwardRef((t,e)=>{const{__scopeToggleGroup:r,value:n,...s}=t,a=PC(Lp,r),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(qx,{...l,...s,ref:e,onPressedChange:c=>{c?a.onItemActivate(n):a.onItemDeactivate(n)}})}),LC=zx,DC=TC;const RC=vh("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),g$=w.forwardRef(({className:t,variant:e,size:r,...n},s)=>o.jsx(NC,{ref:s,className:Ve(RC({variant:e,size:r,className:t})),...n}));g$.displayName=NC.displayName;const OC=w.createContext({size:"default",variant:"default"}),IC=w.forwardRef(({className:t,variant:e,size:r,children:n,...s},a)=>o.jsx(LC,{ref:a,className:Ve("flex items-center justify-center gap-1",t),...s,children:o.jsx(OC.Provider,{value:{variant:e,size:r},children:n})}));IC.displayName=LC.displayName;const nd=w.forwardRef(({className:t,children:e,variant:r,size:n,...s},a)=>{const i=w.useContext(OC);return o.jsx(DC,{ref:a,className:Ve(RC({variant:i.variant||r,size:i.size||n}),t),...s,children:e})});nd.displayName=DC.displayName;function Zt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ss(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Mn(t,e){const r=Zt(t);return isNaN(e)?ss(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function pa(t,e){const r=Zt(t);if(isNaN(e))return ss(t,NaN);if(!e)return r;const n=r.getDate(),s=ss(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return n>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const Wx=6048e5,y$=864e5,MC=6e4,FC=36e5;let v$={};function Ph(){return v$}function Bs(t,e){var l,c,u,d;const r=Ph(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Zt(t),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function fl(t){return Bs(t,{weekStartsOn:1})}function BC(t){const e=Zt(t),r=e.getFullYear(),n=ss(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=fl(n),a=ss(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=fl(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Yc(t){const e=Zt(t);return e.setHours(0,0,0,0),e}function Dp(t){const e=Zt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Fa(t,e){const r=Yc(t),n=Yc(e),s=+r-Dp(r),a=+n-Dp(n);return Math.round((s-a)/y$)}function x$(t){const e=BC(t),r=ss(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),fl(r)}function t0(t,e){const r=e*7;return Mn(t,r)}function b$(t,e){return pa(t,e*12)}function w$(t){let e;return t.forEach(function(r){const n=Zt(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function S$(t){let e;return t.forEach(r=>{const n=Zt(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function Bm(t){return ss(t,Date.now())}function Pn(t,e){const r=Yc(t),n=Yc(e);return+r==+n}function Hx(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $C(t){if(!Hx(t)&&typeof t!="number")return!1;const e=Zt(t);return!isNaN(Number(e))}function Vd(t,e){const r=Zt(t),n=Zt(e),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function _$(t,e,r){const n=Bs(t,r),s=Bs(e,r),a=+n-Dp(n),i=+s-Dp(s);return Math.round((a-i)/Wx)}function Gx(t){const e=Zt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function rs(t){const e=Zt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function UC(t){const e=Zt(t),r=ss(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Yx(t,e){var l,c,u,d;const r=Ph(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Zt(t),a=s.getDay(),i=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function VC(t){return Yx(t,{weekStartsOn:1})}const j$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},N$=(t,e,r)=>{let n;const s=j$[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jy(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const C$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},k$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P$={date:jy({formats:C$,defaultWidth:"full"}),time:jy({formats:k$,defaultWidth:"full"}),dateTime:jy({formats:A$,defaultWidth:"full"})},E$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},T$=(t,e,r,n)=>E$[t];function Hu(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[i]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const L$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},D$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},R$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},O$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},I$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},M$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},F$=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},B$={ordinalNumber:F$,era:Hu({values:L$,defaultWidth:"wide"}),quarter:Hu({values:D$,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hu({values:R$,defaultWidth:"wide"}),day:Hu({values:O$,defaultWidth:"wide"}),dayPeriod:Hu({values:I$,defaultWidth:"wide",formattingValues:M$,defaultFormattingWidth:"wide"})};function Gu(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?U$(l,h=>h.test(i)):$$(l,h=>h.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function $$(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function U$(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function V$(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],a=e.match(t.parsePattern);if(!a)return null;let i=t.valueCallback?t.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const q$=/^(\d+)(th|st|nd|rd)?/i,z$=/\d+/i,W$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H$={any:[/^b/i,/^(a|c)/i]},G$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Y$={any:[/1/i,/2/i,/3/i,/4/i]},K$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},J$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Z$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},X$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Q$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tU={ordinalNumber:V$({matchPattern:q$,parsePattern:z$,valueCallback:t=>parseInt(t,10)}),era:Gu({matchPatterns:W$,defaultMatchWidth:"wide",parsePatterns:H$,defaultParseWidth:"any"}),quarter:Gu({matchPatterns:G$,defaultMatchWidth:"wide",parsePatterns:Y$,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gu({matchPatterns:K$,defaultMatchWidth:"wide",parsePatterns:J$,defaultParseWidth:"any"}),day:Gu({matchPatterns:Z$,defaultMatchWidth:"wide",parsePatterns:X$,defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:Q$,defaultMatchWidth:"any",parsePatterns:eU,defaultParseWidth:"any"})},qC={code:"en-US",formatDistance:N$,formatLong:P$,formatRelative:T$,localize:B$,match:tU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rU(t){const e=Zt(t);return Fa(e,UC(e))+1}function zC(t){const e=Zt(t),r=+fl(e)-+x$(e);return Math.round(r/Wx)+1}function WC(t,e){var d,h,f,m;const r=Zt(t),n=r.getFullYear(),s=Ph(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=ss(t,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const l=Bs(i,e),c=ss(t,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Bs(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function nU(t,e){var l,c,u,d;const r=Ph(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=WC(t,e),a=ss(t,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Bs(a,e)}function HC(t,e){const r=Zt(t),n=+Bs(r,e)-+nU(r,e);return Math.round(n/Wx)+1}function cr(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Hi={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return cr(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):cr(r+1,2)},d(t,e){return cr(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return cr(t.getHours()%12||12,e.length)},H(t,e){return cr(t.getHours(),e.length)},m(t,e){return cr(t.getMinutes(),e.length)},s(t,e){return cr(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return cr(s,e.length)}},rc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Bw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Hi.y(t,e)},Y:function(t,e,r,n){const s=WC(t,n),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return cr(i,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):cr(a,e.length)},R:function(t,e){const r=BC(t);return cr(r,e.length)},u:function(t,e){const r=t.getFullYear();return cr(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return cr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return cr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Hi.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return cr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=HC(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):cr(s,e.length)},I:function(t,e,r){const n=zC(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):cr(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Hi.d(t,e)},D:function(t,e,r){const n=rU(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):cr(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return cr(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return cr(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return cr(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=rc.noon:n===0?s=rc.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=rc.evening:n>=12?s=rc.afternoon:n>=4?s=rc.morning:s=rc.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Hi.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Hi.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):cr(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):cr(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Hi.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Hi.s(t,e)},S:function(t,e){return Hi.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Uw(n);case"XXXX":case"XX":return Ko(n);case"XXXXX":case"XXX":default:return Ko(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Uw(n);case"xxxx":case"xx":return Ko(n);case"xxxxx":case"xxx":default:return Ko(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+$w(n,":");case"OOOO":default:return"GMT"+Ko(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+$w(n,":");case"zzzz":default:return"GMT"+Ko(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return cr(n,e.length)},T:function(t,e,r){const n=t.getTime();return cr(n,e.length)}};function $w(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+e+cr(a,2)}function Uw(t,e){return t%60===0?(t>0?"-":"+")+cr(Math.abs(t)/60,2):Ko(t,e)}function Ko(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=cr(Math.trunc(n/60),2),a=cr(n%60,2);return r+s+e+a}const Vw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GC=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},sU=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Vw(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Vw(n,e)).replace("{{time}}",GC(s,e))},aU={p:GC,P:sU},iU=/^D+$/,oU=/^Y+$/,lU=["D","DD","YY","YYYY"];function cU(t){return iU.test(t)}function uU(t){return oU.test(t)}function dU(t,e,r){const n=hU(t,e,r);if(console.warn(n),lU.includes(t))throw new RangeError(n)}function hU(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mU=/^'([^]*?)'?$/,gU=/''/g,yU=/[a-zA-Z]/;function ma(t,e,r){var d,h,f,m,g,v,b,_;const n=Ph(),s=(r==null?void 0:r.locale)??n.locale??qC,a=(r==null?void 0:r.firstWeekContainsDate)??((h=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((v=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((_=(b=n.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??0,l=Zt(t);if(!$C(l))throw new RangeError("Invalid time value");let c=e.match(pU).map(S=>{const N=S[0];if(N==="p"||N==="P"){const k=aU[N];return k(S,s.formatLong)}return S}).join("").match(fU).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const N=S[0];if(N==="'")return{isToken:!1,value:vU(S)};if(Bw[N])return{isToken:!0,value:S};if(N.match(yU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(S=>{if(!S.isToken)return S.value;const N=S.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&uU(N)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&cU(N))&&dU(N,e,String(t));const k=Bw[N[0]];return k(l,N,s.localize,u)}).join("")}function vU(t){const e=t.match(mU);return e?e[1].replace(gU,"'"):t}function xU(t){const e=Zt(t),r=e.getFullYear(),n=e.getMonth(),s=ss(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function bU(t){return Math.trunc(+Zt(t)/1e3)}function wU(t){const e=Zt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function SU(t,e){return _$(wU(t),rs(t),e)+1}function r0(t,e){const r=Zt(t),n=Zt(e);return r.getTime()>n.getTime()}function YC(t,e){const r=Zt(t),n=Zt(e);return+r<+n}function _U(t,e,r){const n=Bs(t,r),s=Bs(e,r);return+n==+s}function $m(t,e){const r=Zt(t),n=Zt(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function jU(t,e){const r=Zt(t),n=Zt(e);return r.getFullYear()===n.getFullYear()}function NU(t){return $m(t,Bm(t))}function CU(t,e){return _U(t,Bm(t),e)}function kU(t){return Pn(t,Bm(t))}function ip(t,e){return Mn(t,-e)}function AU(t){return Pn(t,ip(Bm(t),1))}function PU(t,e){const n=DU(t);let s;if(n.date){const c=RU(n.date,2);s=OU(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let i=0,l;if(n.time&&(i=IU(n.time),isNaN(i)))return new Date(NaN);if(n.timezone){if(l=MU(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(a+i),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(a+i+l)}const Yf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},EU=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,TU=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,LU=/^([+-])(\d{2})(?::?(\d{2}))?$/;function DU(t){const e={},r=t.split(Yf.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Yf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Yf.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=Yf.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function RU(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((n[1]||n[2]).length)}}function OU(t,e){if(e===null)return new Date(NaN);const r=t.match(EU);if(!r)return new Date(NaN);const n=!!r[4],s=Yu(r[1]),a=Yu(r[2])-1,i=Yu(r[3]),l=Yu(r[4]),c=Yu(r[5])-1;if(n)return VU(e,l,c)?FU(e,l,c):new Date(NaN);{const u=new Date(0);return!$U(e,a,i)||!UU(e,s)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(s,i)),u)}}function Yu(t){return t?parseInt(t):1}function IU(t){const e=t.match(TU);if(!e)return NaN;const r=Ny(e[1]),n=Ny(e[2]),s=Ny(e[3]);return qU(r,n,s)?r*FC+n*MC+s*1e3:NaN}function Ny(t){return t&&parseFloat(t.replace(",","."))||0}function MU(t){if(t==="Z")return 0;const e=t.match(LU);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return zU(n,s)?r*(n*FC+s*MC):NaN}function FU(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,a=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+a),n}const BU=[31,null,31,30,31,30,31,31,30,31,30,31];function KC(t){return t%400===0||t%4===0&&t%100!==0}function $U(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(BU[e]||(KC(t)?29:28))}function UU(t,e){return e>=1&&e<=(KC(t)?366:365)}function VU(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function qU(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function zU(t,e){return e>=0&&e<=59}function Cy(t,e){const r=Zt(t),n=r.getFullYear(),s=r.getDate(),a=ss(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const i=xU(a);return r.setMonth(e,Math.min(s,i)),r}function qw(t,e){const r=Zt(t);return isNaN(+r)?ss(t,NaN):(r.setFullYear(e),r)}var JC="AlertDialog",[WU,lG]=Ya(JC,[D5]),ki=D5(),ZC=t=>{const{__scopeAlertDialog:e,...r}=t,n=ki(e);return o.jsx(A5,{...n,...r,modal:!0})};ZC.displayName=JC;var HU="AlertDialogTrigger",XC=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=ki(r);return o.jsx(P5,{...s,...n,ref:e})});XC.displayName=HU;var GU="AlertDialogPortal",QC=t=>{const{__scopeAlertDialog:e,...r}=t,n=ki(e);return o.jsx(k5,{...n,...r})};QC.displayName=GU;var YU="AlertDialogOverlay",ek=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=ki(r);return o.jsx(y0,{...s,...n,ref:e})});ek.displayName=YU;var Cc="AlertDialogContent",[KU,JU]=WU(Cc),tk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,a=ki(r),i=w.useRef(null),l=Sr(e,i),c=w.useRef(null);return o.jsx(PA,{contentName:Cc,titleName:rk,docsSlug:"alert-dialog",children:o.jsx(KU,{scope:r,cancelRef:c,children:o.jsxs(v0,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:ht(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(j5,{children:n}),o.jsx(XU,{contentRef:i})]})})})});tk.displayName=Cc;var rk="AlertDialogTitle",nk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=ki(r);return o.jsx(x0,{...s,...n,ref:e})});nk.displayName=rk;var sk="AlertDialogDescription",ak=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=ki(r);return o.jsx(b0,{...s,...n,ref:e})});ak.displayName=sk;var ZU="AlertDialogAction",ik=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=ki(r);return o.jsx(em,{...s,...n,ref:e})});ik.displayName=ZU;var ok="AlertDialogCancel",lk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=JU(ok,r),a=ki(r),i=Sr(e,s);return o.jsx(em,{...a,...n,ref:i})});lk.displayName=ok;var XU=({contentRef:t})=>{const e=`\`${Cc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Cc}\` by passing a \`${sk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Cc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},QU=ZC,eV=XC,tV=QC,ck=ek,uk=tk,dk=ik,hk=lk,fk=nk,pk=ak;const Rp=QU,n0=eV,rV=tV,mk=w.forwardRef(({className:t,...e},r)=>o.jsx(ck,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));mk.displayName=ck.displayName;const qd=w.forwardRef(({className:t,...e},r)=>o.jsxs(rV,{children:[o.jsx(mk,{}),o.jsx(uk,{ref:r,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));qd.displayName=uk.displayName;const zd=({className:t,...e})=>o.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",t),...e});zd.displayName="AlertDialogHeader";const Wd=({className:t,...e})=>o.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wd.displayName="AlertDialogFooter";const Hd=w.forwardRef(({className:t,...e},r)=>o.jsx(fk,{ref:r,className:Ve("text-lg font-semibold",t),...e}));Hd.displayName=fk.displayName;const Gd=w.forwardRef(({className:t,...e},r)=>o.jsx(pk,{ref:r,className:Ve("text-sm text-muted-foreground",t),...e}));Gd.displayName=pk.displayName;const Yd=w.forwardRef(({className:t,...e},r)=>o.jsx(dk,{ref:r,className:Ve(Dd(),t),...e}));Yd.displayName=dk.displayName;const Kd=w.forwardRef(({className:t,...e},r)=>o.jsx(hk,{ref:r,className:Ve(Dd({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Kd.displayName=hk.displayName;const nV=({isFormOpen:t,setIsFormOpen:e,dialogModeRef:r})=>{const[n,s]=w.useState([]),[a,i]=w.useState({user_id:"",direction:"paid",payment_type:"cash",date:new Date().toISOString().split("T")[0],recipient_name:"",amount:0,is_third_party:!1,third_party_name:"",notes:""}),[l,c]=w.useState(!1),u=t!==void 0?t:l,d=e||c,[h,f]=w.useState(!0),[m,g]=w.useState(""),[v,b]=w.useState(null),[_,S]=w.useState({}),[N,k]=w.useState("all"),[A,W]=w.useState(!1),[I,F]=w.useState(!1),[ee,ae]=w.useState(null),[R,D]=w.useState(!1),{toast:T}=Xt(),{user:B}=_r();w.useEffect(()=>{B!=null&&B.id&&z()},[B]),w.useEffect(()=>{r&&u&&f(r.current)},[r,u]);const z=async()=>{if(B!=null&&B.id)try{W(!0),console.log("Loading daily logs from local database...");const H=await Ee.getDailyLogsByUser(B.id);console.log(`Loaded ${H.length} daily logs from local database`);const ne=[...H].sort((oe,ce)=>new Date(ce.date).getTime()-new Date(oe.date).getTime());s(ne)}catch(H){console.error("Error loading daily logs:",H),T({title:"Error",description:"Failed to load transaction history",variant:"destructive"})}finally{W(!1)}},re=w.useMemo(()=>N==="all"?n:n.filter(H=>{try{const ne=PU(H.date);if(!$C(ne))return!1;switch(N){case"today":return kU(ne);case"yesterday":return AU(ne);case"thisWeek":return CU(ne);case"thisMonth":return NU(ne);default:return!0}}catch(ne){return console.error("Error parsing date for filtering:",H.date,ne),!1}}),[n,N]),$=(H,ne)=>{_[H]&&S(oe=>({...oe,[H]:void 0})),i(oe=>({...oe,[H]:H==="amount"?parseFloat(ne)||0:ne})),H==="is_third_party"&&ne!=="true"&&g(""),H==="direction"&&ne==="received"&&g("")},V=H=>ne=>{i(oe=>({...oe,[H]:ne})),H==="is_third_party"&&ne!=="true"&&g(""),H==="direction"&&ne==="received"&&g("")},X=H=>{const ne=H==="true";i(oe=>({...oe,is_third_party:ne})),ne||g("")},he=H=>{ae(H),F(!0),i({user_id:H.user_id,direction:H.direction,payment_type:H.payment_type,date:H.date,recipient_name:H.recipient_name,amount:H.amount,is_third_party:H.is_third_party,third_party_name:H.third_party_name,notes:H.notes||""}),H.is_third_party&&H.third_party_name?g(H.third_party_name):g(""),f(!0),d(!0)},je=H=>{ae(H),D(!0)},L=async()=>{if(ee)try{if(W(!0),console.log(`Deleting transaction ${ee.id}...`),await Ee.deleteDailyLog(ee.id),navigator.onLine)try{await Ge.deleteDailyLog(ee.id),console.log("Successfully deleted from Supabase")}catch(H){console.error("Error deleting from Supabase:",H)}await z(),T({title:"Success",description:"Transaction deleted successfully"})}catch(H){console.error("Error deleting transaction:",H),T({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}finally{W(!1),D(!1),ae(null)}},G=()=>{d(!1),F(!1),ae(null),r&&f(r.current),i({user_id:(B==null?void 0:B.id)||"",direction:"paid",payment_type:"cash",date:new Date().toISOString().split("T")[0],recipient_name:"",amount:0,is_third_party:!1,third_party_name:"",notes:""}),g(""),S({})},Z=async()=>{if(!(B!=null&&B.id)){T({title:"Error",description:"You must be logged in to add transactions",variant:"destructive"});return}const H={};let ne=!0;if(S({}),a.recipient_name.trim()||(H.recipient="Recipient/Source name is required.",ne=!1),a.amount<=0&&(H.amount="Amount must be greater than zero.",ne=!1),a.date||(H.date="Date is required.",ne=!1),a.direction==="paid"&&a.is_third_party&&!m.trim()&&(H.thirdPartyName="Third-party name is required for this destination.",ne=!1),!ne){S(H),T({title:"Validation Error",description:"Please fix the errors indicated below.",variant:"destructive"});return}try{W(!0);const oe={...a,user_id:B.id,third_party_name:a.is_third_party?m.trim():void 0,attachment_url:v?URL.createObjectURL(v):I&&ee?ee.attachment_url:void 0};if(I&&ee){console.log(`Updating transaction ${ee.id}...`);const ve={...oe,id:ee.id,created_at:ee.created_at};if(await Ee.updateDailyLog(ve),console.log("Successfully updated log in local database"),navigator.onLine){console.log("Online, syncing updated log to Supabase...");try{await Ge.updateDailyLog(ve)?console.log("Successfully synced updated log to Supabase"):console.error("Failed to sync updated log to Supabase: result was null")}catch(Ae){console.error("Error syncing updated log to Supabase:",Ae)}}else console.log("Offline, skipping Supabase sync");T({title:"Success",description:"Transaction updated successfully."})}else{console.log("Adding new daily log...");const ve=new Date(oe.date).toDateString(),Ae=n.filter(ke=>ke.recipient_name===oe.recipient_name&&ke.amount===oe.amount&&new Date(ke.date).toDateString()===ve&&ke.direction===oe.direction&&ke.payment_type===oe.payment_type);if(Ae.length>0){console.log("Found potential duplicate daily log:",Ae[0]),T({title:"Duplicate Detected",description:"A similar transaction already exists for this date, recipient, and amount.",variant:"destructive"}),W(!1);return}const we=await Ee.addDailyLog(oe);if(console.log("Successfully added log to local database:",we),navigator.onLine){console.log("Online, syncing daily log to Supabase...");try{const ke=await Ge.createDailyLog(we);ke?console.log("Successfully synced daily log to Supabase:",ke):console.error("Failed to sync daily log to Supabase: result was null")}catch(ke){console.error("Error syncing daily log to Supabase:",ke)}}else console.log("Offline, skipping Supabase sync");T({title:"Success",description:"Transaction logged successfully."})}await z(),i({user_id:B.id,direction:"paid",payment_type:"cash",date:new Date().toISOString().split("T")[0],recipient_name:"",amount:0,is_third_party:!1,third_party_name:"",notes:""}),g(""),b(null),F(!1),ae(null);const ce=document.getElementById("attachment");if(ce&&(ce.value=""),d(!1),navigator.onLine){console.log("Forcing sync of all data...");try{await mt.forceSyncContacts(B.id),console.log("Force sync completed successfully")}catch(ve){console.error("Error during force sync:",ve)}}}catch(oe){console.error(`Error ${I?"updating":"adding"} transaction:`,oe),T({title:"Error",description:`Failed to ${I?"update":"add"} transaction`,variant:"destructive"})}finally{W(!1)}},se=()=>o.jsxs("div",{className:"space-y-4 mb-4 p-4 border border-border/40 rounded-lg bg-background/50 backdrop-blur-sm",children:[o.jsx("h3",{className:"text-base font-medium mb-3",children:I?"Edit Transaction":"Transaction Details"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"direction",className:"text-xs text-muted-foreground",children:"Direction"}),o.jsxs(dn,{name:"direction",value:a.direction,onValueChange:V("direction"),children:[o.jsx(nn,{id:"direction",className:"h-9",children:o.jsx(hn,{placeholder:"Select direction"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"paid",children:"Outgoing (Paid)"}),o.jsx(xt,{value:"received",children:"Incoming (Received)"})]})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"payment_type",className:"text-xs text-muted-foreground",children:"Type"}),o.jsxs(dn,{name:"payment_type",value:a.payment_type,onValueChange:V("payment_type"),children:[o.jsx(nn,{id:"payment_type",className:"h-9",children:o.jsx(hn,{placeholder:"Select type"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"upi",children:"UPI"}),o.jsx(xt,{value:"cash",children:"Cash"}),o.jsx(xt,{value:"bank",children:"Bank Transfer"}),o.jsx(xt,{value:"others",children:"Other"})]})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"date",className:"text-xs text-muted-foreground",children:"Date"}),o.jsx(Gf,{id:"date",name:"date",type:"date",value:a.date,onChange:H=>$("date",H),className:Ve("h-9",_.date&&"border-red-500 focus:border-red-500")}),_.date&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.date})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"recipient_name",className:"text-xs text-muted-foreground",children:a.direction==="paid"?"Recipient Name":"Source Name"}),o.jsx(Gf,{id:"recipient_name",name:"recipient_name",placeholder:a.direction==="paid"?"Enter recipient name":"Enter source name",value:a.recipient_name,onChange:H=>$("recipient_name",H),className:Ve("h-9",_.recipient&&"border-red-500 focus:border-red-500")}),_.recipient&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.recipient})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"amount",className:"text-xs text-muted-foreground",children:"Amount"}),o.jsx(Gf,{id:"amount",name:"amount",type:"number",placeholder:"Enter amount",value:a.amount.toString(),onChange:H=>$("amount",H),min:"0.01",step:"0.01",className:Ve("h-9",_.amount&&"border-red-500 focus:border-red-500")}),_.amount&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.amount})]}),a.direction==="paid"&&o.jsxs("div",{children:[o.jsx(Ne,{className:"text-xs text-muted-foreground",children:"Payment Destination"}),o.jsxs(gd,{value:a.is_third_party?"true":"false",onValueChange:X,className:"flex items-center space-x-4 mt-2",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(La,{value:"false",id:"dest_direct",className:"h-3.5 w-3.5"}),o.jsx(Ne,{htmlFor:"dest_direct",className:"text-xs",children:"Direct to Recipient"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(La,{value:"true",id:"dest_third_party",className:"h-3.5 w-3.5"}),o.jsx(Ne,{htmlFor:"dest_third_party",className:"text-xs",children:"To Third-Party"})]})]})]}),a.is_third_party&&o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"third_party_name",className:"text-xs text-muted-foreground",children:"Third-Party Name"}),o.jsx(Gf,{id:"third_party_name",name:"third_party_name",placeholder:"Enter third-party name",value:m,onChange:H=>{g(H),_.thirdPartyName&&S(ne=>({...ne,thirdPartyName:void 0}))},className:Ve("h-9",_.thirdPartyName&&"border-red-500 focus:border-red-500")}),_.thirdPartyName&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.thirdPartyName})]})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"notes",className:"text-xs text-muted-foreground",children:"Note (Optional)"}),o.jsx(S9,{id:"notes",name:"notes",placeholder:"Add any relevant notes...",value:a.notes||"",onChange:H=>$("notes",H),className:"resize-none min-h-[60px]"})]}),o.jsxs("div",{children:[o.jsx(Ne,{htmlFor:"attachment",className:"text-xs text-muted-foreground",children:"Attachment (Optional)"}),o.jsx("input",{id:"attachment",name:"attachment",type:"file",onChange:H=>b(H.target.files?H.target.files[0]:null),className:"text-xs mt-1 w-full"}),v&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",v.name]})]}),o.jsxs("div",{className:"flex justify-end mt-4 gap-2",children:[o.jsx(me,{variant:"outline",size:"sm",onClick:G,disabled:A,children:"Cancel"}),o.jsx(me,{size:"sm",onClick:Z,disabled:A,children:A?"Saving...":I?"Update Transaction":"Save Transaction"})]})]});return o.jsxs(Wt,{className:"border-0 shadow-none bg-transparent mt-0",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("h2",{className:"text-xl font-bold",children:"History"})}),o.jsxs(zt,{className:"p-0 mt-2",children:[u&&!h&&o.jsx(se,{}),o.jsx("div",{className:"flex items-center justify-between mt-2 mb-3",children:o.jsxs(IC,{type:"single",defaultValue:"all",value:N,onValueChange:H=>k(H||"all"),className:"bg-muted/20 rounded-lg p-0.5",size:"sm",children:[o.jsx(nd,{value:"all",className:"text-xs px-2.5 rounded-md","aria-label":"Show all",children:"All"}),o.jsx(nd,{value:"today",className:"text-xs px-2.5 rounded-md","aria-label":"Show today",children:"Today"}),o.jsx(nd,{value:"yesterday",className:"text-xs px-2.5 rounded-md","aria-label":"Show yesterday",children:"Yesterday"}),o.jsx(nd,{value:"thisWeek",className:"text-xs px-2.5 rounded-md","aria-label":"Show this week",children:"This Week"})]})}),A?o.jsx("div",{className:"text-center py-4 md:py-8 bg-muted/10 rounded-lg",children:o.jsx("p",{className:"text-muted-foreground text-xs md:text-sm",children:"Loading transactions..."})}):re.length===0?o.jsxs("div",{className:"text-center py-4 md:py-8 bg-muted/10 rounded-lg",children:[o.jsx(Yy,{className:"w-6 h-6 md:w-8 md:h-8 text-muted-foreground/50 mx-auto mb-1 md:mb-2"}),o.jsx("p",{className:"text-muted-foreground text-xs md:text-sm px-2",children:n.length===0?"No transactions logged yet. Use the + button to add one.":`No transactions found for the selected filter (${N}).`})]}):o.jsxs("div",{className:"overflow-x-auto -mx-4 px-4",children:[o.jsx("div",{className:"md:hidden space-y-1",children:re.map(H=>o.jsxs("div",{className:"mobile-transaction-item",children:[o.jsxs("div",{className:"transaction-header",children:[o.jsxs("div",{className:"flex items-center",children:[H.direction==="received"?o.jsx(Hy,{className:"h-3 w-3 text-green-500 mr-0.5"}):o.jsx(Gy,{className:"h-3 w-3 text-red-500 mr-0.5"}),o.jsx("span",{className:`text-xs font-medium ${H.direction==="received"?"text-green-500":"text-red-500"}`,children:H.direction==="received"?"Received":"Paid"}),o.jsx("span",{className:"text-xs text-muted-foreground mx-0.5",children:"•"}),o.jsx("span",{className:"text-xs capitalize",children:H.payment_type.replace("_"," ")})]}),o.jsx("div",{className:"text-xs font-mono font-medium",children:H.amount.toFixed(2)})]}),o.jsxs("div",{className:"transaction-details",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-muted-foreground mr-0.5",children:H.direction==="received"?"From:":"To:"}),o.jsx("span",{className:"font-medium",children:H.recipient_name})]}),o.jsx("div",{className:"text-muted-foreground",children:new Date(H.date).toLocaleDateString()})]}),H.direction==="paid"&&H.is_third_party&&H.third_party_name&&o.jsxs("div",{className:"flex items-center text-xs",children:[o.jsx("span",{className:"text-muted-foreground mr-0.5",children:"Third Party:"}),o.jsx("span",{children:H.third_party_name})]}),o.jsxs("div",{className:"transaction-actions",children:[o.jsxs(me,{variant:"ghost",size:"sm",className:"action-button",onClick:()=>he(H),children:[o.jsx(ws,{className:"h-3 w-3 mr-0.5"}),"Edit"]}),o.jsxs(me,{variant:"ghost",size:"sm",className:"action-button text-destructive hover:bg-destructive/10",onClick:()=>je(H),children:[o.jsx(En,{className:"h-3 w-3 mr-0.5"}),"Delete"]})]})]},H.id))}),o.jsxs(SC,{className:"min-w-full border border-border/30 rounded-lg overflow-hidden hidden md:table",children:[o.jsx(_C,{className:"bg-muted/10",children:o.jsxs(e0,{className:"hover:bg-transparent border-border/30",children:[o.jsx(Go,{className:"w-24 py-2 text-xs",children:"Date"}),o.jsx(Go,{className:"w-28 py-2 text-xs",children:"Direction"}),o.jsx(Go,{className:"w-24 py-2 text-xs",children:"Type"}),o.jsx(Go,{className:"py-2 text-xs",children:"Recipient/Source"}),o.jsx(Go,{className:"py-2 text-xs text-right",children:"Amount"}),o.jsx(Go,{className:"w-16 py-2 text-xs text-right",children:"Actions"})]})}),o.jsx(jC,{children:re.map(H=>o.jsxs(e0,{className:"border-border/30 hover:bg-muted/5",children:[o.jsx(Yo,{className:"py-2 text-xs",children:new Date(H.date).toLocaleDateString()}),o.jsx(Yo,{className:"py-2 text-xs",children:o.jsxs("div",{className:"flex items-center",children:[H.direction==="received"?o.jsx(Hy,{className:"h-3.5 w-3.5 text-green-500 mr-1.5"}):o.jsx(Gy,{className:"h-3.5 w-3.5 text-red-500 mr-1.5"}),o.jsx("span",{className:`${H.direction==="received"?"text-green-500":"text-red-500"}`,children:H.direction==="received"?"Received":"Paid"})]})}),o.jsx(Yo,{className:"py-2 text-xs capitalize",children:H.payment_type.replace("_"," ")}),o.jsxs(Yo,{className:"py-2 text-xs font-medium",children:[H.recipient_name,H.direction==="paid"&&H.is_third_party&&H.third_party_name&&o.jsxs("span",{className:"text-muted-foreground ml-2 text-xs",children:["→ ",H.third_party_name]})]}),o.jsx(Yo,{className:"py-2 text-xs font-mono text-right",children:H.amount.toFixed(2)}),o.jsx(Yo,{className:"py-2 text-xs text-right",children:o.jsxs("div",{className:"flex justify-end items-center space-x-1",children:[o.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>he(H),title:"Edit",children:o.jsx(ws,{className:"h-3.5 w-3.5"})}),o.jsx(me,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>je(H),title:"Delete",children:o.jsx(En,{className:"h-3.5 w-3.5"})})]})})]},H.id))})]})]})]}),o.jsx(Kt,{open:u&&h,onOpenChange:H=>{H?(d(H),f(!0)):G()},children:o.jsx(tr,{className:"sm:max-w-lg",children:o.jsx(se,{})})}),o.jsx(Rp,{open:R,onOpenChange:D,children:o.jsxs(qd,{children:[o.jsxs(zd,{children:[o.jsx(Hd,{children:"Are you sure?"}),o.jsxs(Gd,{children:["This action cannot be undone. This will permanently delete the transaction",ee&&o.jsxs("span",{className:"font-medium",children:[" for ",ee.recipient_name]}),"."]})]}),o.jsxs(Wd,{children:[o.jsx(Kd,{disabled:A,children:"Cancel"}),o.jsx(Yd,{onClick:L,disabled:A,className:"bg-destructive hover:bg-destructive/90",children:A?"Deleting...":"Delete"})]})]})})]})},sV=()=>{const[t,e]=Le.useState(""),[r,n]=Le.useState(""),[s,a]=Le.useState(null),{formatCurrency:i}=Ox(),l=()=>{const c=parseFloat(t),u=parseFloat(r);!isNaN(c)&&!isNaN(u)?a(c*u/100):a(null)};return o.jsxs(Wt,{className:"border-none shadow-none",children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Tax Calculator"}),o.jsx(Fr,{children:"Calculate tax based on amount and rate."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"tax-amount",children:"Amount"}),o.jsx(Ie,{id:"tax-amount",type:"number",placeholder:"Enter amount",value:t,onChange:c=>e(c.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"tax-rate",children:"Tax Rate (%)"}),o.jsx(Ie,{id:"tax-rate",type:"number",placeholder:"Enter tax rate",value:r,onChange:c=>n(c.target.value)})]}),o.jsx(me,{onClick:l,children:"Calculate Tax"}),s!==null&&t&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[o.jsxs("p",{children:["Calculated Tax: ",o.jsx("span",{className:"font-semibold",children:i(s)})]}),o.jsxs("p",{children:["Total Amount (incl. Tax): ",o.jsx("span",{className:"font-semibold",children:i(parseFloat(t)+s)})]})]})]})]})},aV=()=>{const[t,e]=Le.useState(""),[r,n]=Le.useState(""),[s,a]=Le.useState(""),[i,l]=Le.useState("years"),[c,u]=Le.useState(null),{formatCurrency:d}=Ox(),h=()=>{const f=parseFloat(t),m=parseFloat(r)/100;let g=parseFloat(s);if(isNaN(f)||isNaN(m)||isNaN(g)){u(null);return}i==="months"&&(g=g/12);const v=f*m*g;u(v)};return o.jsxs(Wt,{className:"border-none shadow-none",children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Simple Interest Calculator"}),o.jsx(Fr,{children:"Calculate simple interest based on principal, rate, and time."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"principal",children:"Principal Amount"}),o.jsx(Ie,{id:"principal",type:"number",placeholder:"Enter principal amount",value:t,onChange:f=>e(f.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"interest-rate",children:"Annual Interest Rate (%)"}),o.jsx(Ie,{id:"interest-rate",type:"number",placeholder:"Enter annual rate",value:r,onChange:f=>n(f.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2 col-span-2",children:[o.jsx(Ne,{htmlFor:"time",children:"Time Period"}),o.jsx(Ie,{id:"time",type:"number",placeholder:"Enter time period",value:s,onChange:f=>a(f.target.value)})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"time-unit",children:"Unit"}),o.jsxs(dn,{value:i,onValueChange:f=>l(f),children:[o.jsx(nn,{id:"time-unit",children:o.jsx(hn,{placeholder:"Select unit"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"years",children:"Years"}),o.jsx(xt,{value:"months",children:"Months"})]})]})]})]}),o.jsx(me,{onClick:h,children:"Calculate Interest"}),c!==null&&t&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[o.jsxs("p",{children:["Calculated Interest: ",o.jsx("span",{className:"font-semibold",children:d(c)})]}),o.jsxs("p",{children:["Total Amount (Principal + Interest): ",o.jsx("span",{className:"font-semibold",children:d(parseFloat(t)+c)})]})]})]})]})},zw=["USD","EUR","GBP","JPY","INR","CAD","AUD"],iV=()=>{const[t,e]=Le.useState(""),[r,n]=Le.useState("USD"),[s,a]=Le.useState("INR"),[i,l]=Le.useState(null),[c,u]=Le.useState(!1),d=async()=>{u(!0),l(null);const f=parseFloat(t);if(isNaN(f)||r===s){u(!1);return}await new Promise(v=>setTimeout(v,500));const g=f*(s==="INR"?83.5:.9);l(g),u(!1)},h=()=>{const f=r;n(s),a(f)};return o.jsxs(Wt,{className:"border-none shadow-none",children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Currency Converter"}),o.jsx(Fr,{children:"Convert amounts between different currencies."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"convert-amount",children:"Amount"}),o.jsx(Ie,{id:"convert-amount",type:"number",placeholder:"Enter amount to convert",value:t,onChange:f=>e(f.target.value)})]}),o.jsxs("div",{className:"flex items-end space-x-2",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(Ne,{htmlFor:"from-currency",children:"From"}),o.jsxs(dn,{value:r,onValueChange:n,children:[o.jsx(nn,{id:"from-currency",children:o.jsx(hn,{placeholder:"Select currency"})}),o.jsx(sn,{children:zw.map(f=>o.jsx(xt,{value:f,children:f},f))})]})]}),o.jsx(me,{variant:"ghost",size:"icon",onClick:h,"aria-label":"Swap currencies",children:o.jsx(iT,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(Ne,{htmlFor:"to-currency",children:"To"}),o.jsxs(dn,{value:s,onValueChange:a,children:[o.jsx(nn,{id:"to-currency",children:o.jsx(hn,{placeholder:"Select currency"})}),o.jsx(sn,{children:zw.map(f=>o.jsx(xt,{value:f,children:f},f))})]})]})]}),o.jsx(me,{onClick:d,disabled:c||!t,children:c?"Converting...":"Convert"}),i!==null&&!c&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[o.jsxs("p",{className:"font-semibold text-lg",children:[t," ",r," = ",new Intl.NumberFormat(void 0,{style:"currency",currency:s}).format(i)]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"(Using placeholder conversion rate)"})]}),o.jsx("div",{className:"mt-4 p-3 border rounded-md text-sm text-muted-foreground",children:"Note: This converter currently uses placeholder rates. Integrating live exchange rates requires an external API subscription."})]})]})},Op=({type:t,onSyncComplete:e,className:r=""})=>{const[n,s]=w.useState(!1),{toast:a}=Xt(),{user:i}=_r(),l=async()=>{if(console.log("FORCE-SYNC: handleSync called for",t),!(i!=null&&i.id)||n){console.log("FORCE-SYNC: No user ID or already syncing, returning");return}try{s(!0),console.log(`FORCE-SYNC: Starting force sync of ${t} for user ${i.id}...`),console.log(`Checking if ${t} table exists in Supabase...`);let c=[];t==="buyers"?c=await Ee.getBuyersByUser(i.id):c=await Ee.getSellersByUser(i.id),console.log(`Found ${c.length} local ${t}`);let u=!1;try{console.log(`Using forceSyncContacts to sync ${t}...`),u=await mt.forceSyncContacts(i.id),console.log(`forceSyncContacts result: ${u}`)}catch(d){console.error(`Error in forceSyncContacts for ${t}:`,d)}if(u)a({title:"Sync Successful",description:`Your ${t} have been synchronized with the cloud.`});else{console.log(`Falling back to direct inserts for ${t}...`);let d=0,h=0;for(const m of c)try{let g=null;t==="buyers"?(console.log(`Syncing buyer ${m.id} (${m.name}) to Supabase...`),g=await Ge.createBuyer(m)):(console.log(`Syncing seller ${m.id} (${m.name}) to Supabase...`),g=await Ge.createSeller(m)),g?(console.log(`Successfully synced ${t.slice(0,-1)} ${m.id}`),d++):(console.log(`Failed to sync ${t.slice(0,-1)} ${m.id}`),h++)}catch(g){console.error(`Error syncing ${t.slice(0,-1)} ${m.id}:`,g),h++}let f=!1;try{t==="buyers"?(console.log("Forcing sync of buyers using syncBuyers..."),f=await mt.syncBuyers(i.id)):(console.log("Forcing sync of sellers using syncSellers..."),f=await mt.syncSellers(i.id))}catch(m){console.error(`Error in regular sync of ${t}:`,m)}d>0||f?a({title:"Sync Successful",description:`${d} ${t} have been synchronized with the cloud.${h>0?` (${h} failed)`:""}`}):h>0?a({title:"Sync Partially Failed",description:`Failed to sync ${h} ${t}. Please check the console for details.`,variant:"destructive"}):a({title:"Sync Failed",description:"Please check your internet connection and try again.",variant:"destructive"})}e&&await e()}catch(c){console.error(`Error syncing ${t}:`,c),a({title:"Sync Error",description:`An error occurred while syncing your ${t}.`,variant:"destructive"})}finally{s(!1)}};return o.jsxs(me,{variant:"outline",size:"sm",onClick:l,disabled:n||!navigator.onLine,className:r,children:[o.jsx(ua,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),n?"Syncing...":`Force Sync ${t.charAt(0).toUpperCase()+t.slice(1)}`]})},oV=()=>{const{filteredTransactions:t,loading:e,searchQuery:r,setSearchQuery:n,setStatusFilter:s,loadTransactions:a}=aF(),i=Ss(),[l,c]=w.useState(!1),[u,d]=w.useState("TransactLy"),[h,f]=w.useState(!1),[m,g]=w.useState(!1),[v,b]=w.useState(!1),[_,S]=w.useState(!1),[N,k]=w.useState(!1),[A,W]=w.useState(!1),[I,F]=w.useState([]),[ee,ae]=w.useState([]),[R,D]=w.useState(!1),[T,B]=w.useState({name:"",email:"",phone:""}),[z,re]=w.useState({name:"",email:"",phone:""}),[$,V]=w.useState(null),[X,he]=w.useState(null),[je,L]=w.useState(!1),[G,Z]=w.useState("dashboard"),[se,H]=w.useState("tax"),[ne,oe]=w.useState("buyers"),{toast:ce}=Xt(),{user:ve}=_r(),Ae=Om(),we=async De=>{try{await y9(t,De),ce({title:"Export Successful",description:`Transaction data has been exported as ${De.toUpperCase()}`})}catch(rt){console.error("Export failed:",rt),ce({title:"Export Failed",description:"Failed to export transaction data",variant:"destructive"})}},ke=De=>{s(De)},Ke=()=>{try{const De=localStorage.getItem("businessName");De&&d(De)}catch(De){console.error("Failed to load business name:",De)}},Ce=De=>{console.log("INDEX: Deduplicating buyers, initial count:",De.length);const rt=new Map;De.forEach(it=>{rt.set(it.id,it)});const At=[],jt=new Set;return Array.from(rt.values()).forEach(it=>{const Qr=it.name.toLowerCase().trim(),Je=(it.email||"").toLowerCase().trim(),It=(it.phone||"").toLowerCase().trim(),dt=`${Qr}-${Je}-${It}`;jt.has(dt)?console.log(`INDEX: Found duplicate buyer: ${it.name} (${it.id})`):(jt.add(dt),At.push(it))}),console.log("INDEX: After deduplication, buyer count:",At.length),At},Q=De=>{console.log("INDEX: Deduplicating sellers, initial count:",De.length);const rt=new Map;De.forEach(it=>{rt.set(it.id,it)});const At=[],jt=new Set;return Array.from(rt.values()).forEach(it=>{const Qr=it.name.toLowerCase().trim(),Je=(it.email||"").toLowerCase().trim(),It=(it.phone||"").toLowerCase().trim(),dt=`${Qr}-${Je}-${It}`;jt.has(dt)?console.log(`INDEX: Found duplicate seller: ${it.name} (${it.id})`):(jt.add(dt),At.push(it))}),console.log("INDEX: After deduplication, seller count:",At.length),At},Ye=async()=>{if(ve!=null&&ve.id)try{D(!0),console.log("Loading buyers from IndexedDB...");const De=await Ee.getBuyersByUser(ve.id);console.log(`Loaded ${De.length} buyers from IndexedDB`);const rt=Ce(De);if(F(rt),rt.length<De.length){console.log(`INDEX: Found ${De.length-rt.length} duplicate buyers, cleaning up database`);try{const it=await Ee.cleanupDuplicateBuyers(ve.id);console.log(`INDEX: Successfully removed ${it} duplicate buyers from database`)}catch(it){console.error("INDEX: Error cleaning up duplicate buyers:",it)}}console.log("Loading sellers from IndexedDB...");const At=await Ee.getSellersByUser(ve.id);console.log(`Loaded ${At.length} sellers from IndexedDB`);const jt=Q(At);if(ae(jt),jt.length<At.length){console.log(`INDEX: Found ${At.length-jt.length} duplicate sellers, cleaning up database`);try{const it=await Ee.cleanupDuplicateSellers(ve.id);console.log(`INDEX: Successfully removed ${it} duplicate sellers from database`)}catch(it){console.error("INDEX: Error cleaning up duplicate sellers:",it)}}try{const it=localStorage.getItem("buyers"),Qr=localStorage.getItem("sellers");if(it&&De.length===0){const Je=JSON.parse(it);console.log(`Migrating ${Je.length} buyers from localStorage to IndexedDB`);for(const gr of Je){const Ar={...gr,user_id:ve.id};await Ee.addBuyer(Ar)}const It=await Ee.getBuyersByUser(ve.id),dt=Ce(It);F(dt)}if(Qr&&At.length===0){const Je=JSON.parse(Qr);console.log(`Migrating ${Je.length} sellers from localStorage to IndexedDB`);for(const gr of Je){const Ar={...gr,user_id:ve.id};await Ee.addSeller(Ar)}const It=await Ee.getSellersByUser(ve.id),dt=Q(It);ae(dt)}}catch(it){console.error("Error migrating from localStorage:",it)}}catch(De){console.error("Failed to load buyers and sellers:",De),ce({title:"Error",description:"Failed to load contacts",variant:"destructive"})}finally{D(!1)}},Y=De=>{const{name:rt,value:At}=De.target;$?V({...$,[rt]:At}):B(jt=>({...jt,[rt]:At}))},J=De=>{const{name:rt,value:At}=De.target;X?he({...X,[rt]:At}):re(jt=>({...jt,[rt]:At}))},ie=async()=>{if(ve!=null&&ve.id)try{if(!T.name){ce({title:"Validation Error",description:"Name is required",variant:"destructive"});return}const De={...T,user_id:ve.id};console.log("Adding buyer to IndexedDB:",De);const rt=await Ee.addBuyer(De);if(console.log("Added buyer to IndexedDB:",rt),navigator.onLine)try{console.log("Syncing new buyer to Supabase...");const At=await Ge.createBuyer(rt);At?console.log("Successfully synced buyer to Supabase:",At):console.error("Failed to sync buyer to Supabase")}catch(At){console.error("Error syncing buyer to Supabase:",At)}await Ye(),B({name:"",email:"",phone:""}),f(!1),ce({title:"Success",description:"Buyer added successfully"})}catch(De){console.error("Failed to add buyer:",De),ce({title:"Error",description:"Failed to add buyer",variant:"destructive"})}},_e=async()=>{if(ve!=null&&ve.id)try{if(!z.name){ce({title:"Validation Error",description:"Name is required",variant:"destructive"});return}const De={...z,user_id:ve.id};console.log("Adding seller to IndexedDB:",De);const rt=await Ee.addSeller(De);if(console.log("Added seller to IndexedDB:",rt),navigator.onLine)try{console.log("Syncing new seller to Supabase...");const At=await Ge.createSeller(rt);At?console.log("Successfully synced seller to Supabase:",At):console.error("Failed to sync seller to Supabase")}catch(At){console.error("Error syncing seller to Supabase:",At)}await Ye(),re({name:"",email:"",phone:""}),g(!1),ce({title:"Success",description:"Seller added successfully"})}catch(De){console.error("Failed to add seller:",De),ce({title:"Error",description:"Failed to add seller",variant:"destructive"})}},ye=()=>{i("/new-transaction")},Se=async()=>{if($)try{if(!$.name){ce({title:"Validation Error",description:"Name is required",variant:"destructive"});return}if(console.log("Updating buyer in IndexedDB:",$),await Ee.updateBuyer($),console.log("Updated buyer in IndexedDB"),navigator.onLine)try{console.log("Syncing updated buyer to Supabase...");const De=await Ge.updateBuyer($);De?console.log("Successfully synced updated buyer to Supabase:",De):console.error("Failed to sync updated buyer to Supabase")}catch(De){console.error("Error syncing updated buyer to Supabase:",De)}await Ye(),b(!1),V(null),ce({title:"Success",description:"Buyer updated successfully"})}catch(De){console.error("Failed to update buyer:",De),ce({title:"Error",description:"Failed to update buyer",variant:"destructive"})}},Be=async()=>{if($)try{if(console.log("Deleting buyer from IndexedDB:",$.id),await Ee.deleteBuyer($.id),console.log("Deleted buyer from IndexedDB"),navigator.onLine)try{console.log("Syncing deleted buyer to Supabase..."),await Ge.deleteBuyer($.id)?console.log("Successfully synced deleted buyer to Supabase"):console.error("Failed to sync deleted buyer to Supabase")}catch(De){console.error("Error syncing deleted buyer to Supabase:",De)}await Ye(),S(!1),V(null),ce({title:"Success",description:"Buyer deleted successfully"})}catch(De){console.error("Failed to delete buyer:",De),ce({title:"Error",description:"Failed to delete buyer",variant:"destructive"})}},qe=async()=>{if(X)try{if(!X.name){ce({title:"Validation Error",description:"Name is required",variant:"destructive"});return}if(console.log("Updating seller in IndexedDB:",X),await Ee.updateSeller(X),console.log("Updated seller in IndexedDB"),navigator.onLine)try{console.log("Syncing updated seller to Supabase...");const De=await Ge.updateSeller(X);De?console.log("Successfully synced updated seller to Supabase:",De):console.error("Failed to sync updated seller to Supabase")}catch(De){console.error("Error syncing updated seller to Supabase:",De)}await Ye(),k(!1),he(null),ce({title:"Success",description:"Seller updated successfully"})}catch(De){console.error("Failed to update seller:",De),ce({title:"Error",description:"Failed to update seller",variant:"destructive"})}},at=async()=>{if(X)try{if(console.log("Deleting seller from IndexedDB:",X.id),await Ee.deleteSeller(X.id),console.log("Deleted seller from IndexedDB"),navigator.onLine)try{console.log("Syncing deleted seller to Supabase..."),await Ge.deleteSeller(X.id)?console.log("Successfully synced deleted seller to Supabase"):console.error("Failed to sync deleted seller to Supabase")}catch(De){console.error("Error syncing deleted seller to Supabase:",De)}await Ye(),W(!1),he(null),ce({title:"Success",description:"Seller deleted successfully"})}catch(De){console.error("Failed to delete seller:",De),ce({title:"Error",description:"Failed to delete seller",variant:"destructive"})}},ot=De=>{V(De),b(!0)},Lt=De=>{V(De),S(!0)},ut=De=>{he(De),k(!0)},_t=De=>{he(De),W(!0)},He=()=>{switch(G){case"transactions":return"Business Transactions";case"calculations":return"Calculations";case"clients-vendors":return"Clients";default:return u}};return w.useEffect(()=>{Ke(),ve!=null&&ve.id&&Ye()},[ve]),o.jsxs(ns.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex flex-col",children:[o.jsx(w7,{onExport:we,businessName:He()}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsxs(Nc,{defaultValue:"dashboard",value:G,onValueChange:Z,className:"w-full flex flex-col h-[calc(100vh-64px)]",children:[o.jsxs(ts,{value:"dashboard",className:"container mx-auto px-4 py-4 flex-1 overflow-auto",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-4 gap-4",children:[o.jsx("div",{className:"w-full md:w-auto",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx(S7,{searchQuery:r,setSearchQuery:n}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(me,{variant:t.length===0?"default":"outline",size:"sm",onClick:()=>ke(null),children:"All"}),o.jsx(me,{variant:"outline",size:"sm",onClick:()=>ke("pending"),className:"border-amber-500 text-amber-500 hover:bg-amber-50",children:"Pending"}),o.jsx(me,{variant:"outline",size:"sm",onClick:()=>ke("completed"),className:"border-green-500 text-green-500 hover:bg-green-50",children:"Completed"})]})]})}),o.jsxs(Kt,{open:l,onOpenChange:c,children:[o.jsx(xi,{asChild:!0,children:o.jsxs(me,{onClick:()=>c(!0),children:[o.jsx(Is,{className:"h-4 w-4 mr-2"}),"New Transaction"]})}),o.jsx(zN,{onTransactionCreated:()=>{c(!1),a()}})]})]}),o.jsx(K0,{children:e?o.jsx(A7,{}):t.length===0?o.jsx(k7,{hasSearchQuery:r.length>0,onCreateTransaction:ye}):o.jsx(D7,{transactions:t,loading:e,onRefresh:a,onCreateTransaction:ye})})]}),o.jsx(ts,{value:"clients-vendors",className:"container mx-auto px-4 py-8 flex-1 overflow-auto",children:o.jsxs(Nc,{value:ne,onValueChange:oe,className:"w-full",children:[o.jsx("div",{className:"w-full mb-4 flex justify-around items-center bg-muted p-1 rounded-md",children:[{value:"buyers",label:"Buyers",icon:o.jsx(DT,{className:"h-4 w-4"})},{value:"sellers",label:"Sellers",icon:o.jsx(OT,{className:"h-4 w-4"})}].map(De=>{const rt=De.value===ne;return o.jsxs("button",{onClick:()=>oe(De.value),className:`flex items-center px-3 py-2 text-sm font-medium ${rt?"text-primary border-b-2 border-primary":"text-foreground/80"}`,children:[De.icon,o.jsx("span",{className:`${Ae?"mt-1 text-xs":"ml-2"} ${rt||!Ae?"":"hidden"}`,children:De.label})]},De.value)})}),o.jsx(Kt,{open:v,onOpenChange:b,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Edit Buyer"}),o.jsx(Xi,{children:"Update the buyer's information below."})]}),$&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"edit_name",name:"name",value:$.name,onChange:Y,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"edit_email",name:"email",type:"email",value:$.email||"",onChange:Y,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"edit_phone",name:"phone",value:$.phone||"",onChange:Y,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),o.jsx(me,{onClick:Se,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:_,onOpenChange:S,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Delete Buyer"}),o.jsx(Xi,{children:"This action cannot be undone."})]}),o.jsx("div",{className:"py-4",children:o.jsx("p",{children:"Are you sure you want to delete this buyer?"})}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:Be,children:"Delete"})]})]})}),o.jsx(Kt,{open:N,onOpenChange:k,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Edit Seller"}),o.jsx(Xi,{children:"Update the seller's information below."})]}),X&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_seller_name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"edit_seller_name",name:"name",value:X.name,onChange:J,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_seller_email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"edit_seller_email",name:"email",type:"email",value:X.email||"",onChange:J,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_seller_phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"edit_seller_phone",name:"phone",value:X.phone||"",onChange:J,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),o.jsx(me,{onClick:qe,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:A,onOpenChange:W,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Delete Seller"}),o.jsx(Xi,{children:"This action cannot be undone."})]}),o.jsx("div",{className:"py-4",children:o.jsx("p",{children:"Are you sure you want to delete this seller?"})}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>W(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:at,children:"Delete"})]})]})}),o.jsxs("div",{className:"mt-4",children:[ne==="buyers"&&o.jsxs(Wt,{children:[o.jsx(Jt,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Op,{type:"buyers",onSyncComplete:Ye,className:"mt-2 sm:mt-0"})})}),o.jsx(zt,{children:R?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):I.length===0?o.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No buyers added yet. Add your first buyer."}):o.jsx("div",{className:"space-y-4",children:I.map(De=>o.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent/5 transition-colors relative",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:De.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:De.phone}),De.email&&o.jsx("p",{className:"text-sm text-muted-foreground",children:De.email})]}),o.jsx("div",{className:"text-sm text-right mt-2 md:mt-0",children:o.jsxs("p",{className:"text-muted-foreground",children:["Added on ",new Date(De.date).toLocaleDateString()]})})]}),o.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[o.jsx(me,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600",onClick:()=>ot(De),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600",onClick:()=>Lt(De),children:o.jsx(En,{className:"h-4 w-4"})})]})]},De.id))})}),o.jsx(_i,{className:"flex justify-end",children:o.jsx(Kt,{open:h,onOpenChange:f,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Add New Buyer"}),o.jsx(Xi,{children:"Enter the details of the new buyer to add them to your system."})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"buyerName",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"buyerName",name:"name",className:"col-span-3",placeholder:"Enter buyer name",value:T.name,onChange:Y})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"buyerEmail",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"buyerEmail",name:"email",className:"col-span-3",placeholder:"Enter buyer email",value:T.email,onChange:Y})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"buyerPhone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"buyerPhone",name:"phone",className:"col-span-3",placeholder:"Enter buyer phone",value:T.phone,onChange:Y})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),o.jsx(me,{type:"button",onClick:ie,children:"Add Buyer"})]})]})})})]}),ne==="sellers"&&o.jsxs(Wt,{children:[o.jsx(Jt,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Op,{type:"sellers",onSyncComplete:Ye,className:"mt-2 sm:mt-0"})})}),o.jsx(zt,{children:R?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):ee.length===0?o.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No sellers added yet. Add your first seller."}):o.jsx("div",{className:"space-y-4",children:ee.map(De=>o.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent/5 transition-colors relative",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:De.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:De.phone}),De.email&&o.jsx("p",{className:"text-sm text-muted-foreground",children:De.email})]}),o.jsx("div",{className:"text-sm text-right mt-2 md:mt-0",children:o.jsxs("p",{className:"text-muted-foreground",children:["Added on ",new Date(De.date).toLocaleDateString()]})})]}),o.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[o.jsx(me,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-blue-600",onClick:()=>ut(De),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600",onClick:()=>_t(De),children:o.jsx(En,{className:"h-4 w-4"})})]})]},De.id))})}),o.jsx(_i,{className:"flex justify-end",children:o.jsx(Kt,{open:m,onOpenChange:g,children:o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Add New Seller"}),o.jsx(Xi,{children:"Enter the details of the new seller to add them to your system."})]}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"sellerName",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"sellerName",name:"name",className:"col-span-3",placeholder:"Enter seller name",value:z.name,onChange:J})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"sellerEmail",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"sellerEmail",name:"email",className:"col-span-3",placeholder:"Enter seller email",value:z.email,onChange:J})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"sellerPhone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"sellerPhone",name:"phone",className:"col-span-3",placeholder:"Enter seller phone",value:z.phone,onChange:J})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),o.jsx(me,{type:"button",onClick:_e,children:"Add Seller"})]})]})})})]})]}),ne==="buyers"&&o.jsx(Kt,{open:h,onOpenChange:f,children:o.jsx(xi,{asChild:!0,children:o.jsx(me,{size:"icon",className:"h-12 w-12 rounded-full fixed bottom-24 right-6 shadow-lg z-10",children:o.jsx(Is,{className:"h-5 w-5"})})})}),ne==="sellers"&&o.jsx(Kt,{open:m,onOpenChange:g,children:o.jsx(xi,{asChild:!0,children:o.jsx(me,{size:"icon",className:"h-12 w-12 rounded-full fixed bottom-24 right-6 shadow-lg z-10",children:o.jsx(Is,{className:"h-5 w-5"})})})})]})}),o.jsxs(ts,{value:"transactions",className:"container mx-auto px-4 py-8 flex-1 overflow-auto relative",children:[o.jsx(nV,{isFormOpen:je,setIsFormOpen:L,dialogModeRef:{current:!0}}),o.jsx(me,{size:"icon",className:"h-12 w-12 rounded-full fixed bottom-24 right-6 shadow-lg z-10",onClick:()=>{L(!0)},children:o.jsx(Is,{className:"h-5 w-5"})})]}),o.jsx(ts,{value:"calculations",className:"container mx-auto px-4 py-8 flex-1 overflow-auto",children:o.jsx(Wt,{children:o.jsx(zt,{className:"p-0 pt-6",children:o.jsxs(Nc,{value:se,onValueChange:H,className:"w-full",children:[o.jsx("div",{className:"w-full mb-4 flex justify-around items-center bg-muted p-1 rounded-md",children:[{value:"tax",label:"Tax",icon:o.jsx(CT,{className:"h-4 w-4"})},{value:"interest",label:"Interest",icon:o.jsx(wT,{className:"h-4 w-4"})},{value:"currency",label:"Currency",icon:o.jsx(PT,{className:"h-4 w-4"})}].map(De=>{const rt=De.value===se;return o.jsxs("button",{onClick:()=>H(De.value),className:`flex items-center px-3 py-2 text-sm font-medium ${rt?"text-primary border-b-2 border-primary":"text-foreground/80"}`,children:[De.icon,o.jsx("span",{className:`${Ae?"mt-1 text-xs":"ml-2"} ${rt||!Ae?"":"hidden"}`,children:De.label})]},De.value)})}),o.jsxs("div",{className:"mt-4",children:[se==="tax"&&o.jsx(sV,{}),se==="interest"&&o.jsx(aV,{}),se==="currency"&&o.jsx(iV,{})]})]})})})}),o.jsx(ts,{value:"settings",className:"container mx-auto px-4 py-8 flex-1 overflow-auto",children:o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Settings"}),o.jsx(Fr,{children:"Manage your application preferences"})]}),o.jsx(zt,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium",children:"Business Information"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Update your business details"})]})})})]})}),o.jsx("div",{className:"mt-auto sticky bottom-0 z-10",children:o.jsxs(kh,{className:"w-full bg-background border-t flex justify-between rounded-none",children:[o.jsx(gs,{value:"dashboard",className:"flex-1 py-3",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(cT,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs mt-1",children:"Dashboard"})]})}),o.jsx(gs,{value:"transactions",className:"flex-1 py-3",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(ST,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs mt-1",children:"Transactions"})]})}),o.jsx(gs,{value:"calculations",className:"flex-1 py-3",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(lT,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs mt-1",children:"Calculations"})]})}),o.jsx(gs,{value:"clients-vendors",className:"flex-1 py-3",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(oT,{className:"w-5 h-5"}),o.jsx("span",{className:"text-xs mt-1",children:"Clients"})]})})]})})]})})]})};var es=(t=>(t.PURCHASES="purchases",t.TRANSPORTATION="transportation",t.SALES="sales",t.PAYMENTS="payments",t.NOTES="notes",t.ATTACHMENTS="attachments",t))(es||{});const lV=({activeTab:t,onTabChange:e,disabledTabs:r,isMobile:n})=>{const s=[{key:es.PURCHASES,label:"Purchases",icon:o.jsx(jT,{className:"h-4 w-4"})},{key:es.TRANSPORTATION,label:"Transportation",icon:o.jsx(LT,{className:"h-4 w-4"})},{key:es.SALES,label:"Sales",icon:o.jsx(TT,{className:"h-4 w-4"})},{key:es.PAYMENTS,label:"Payments",icon:o.jsx(pT,{className:"h-4 w-4"})},{key:es.NOTES,label:"Notes",icon:o.jsx(E0,{className:"h-4 w-4"})},{key:es.ATTACHMENTS,label:"Attachments",icon:o.jsx(hS,{className:"h-4 w-4"})}];return o.jsx("div",{className:`flex ${n?"justify-around":"justify-start"} items-center`,children:s.map(a=>o.jsxs("button",{onClick:()=>e(a.key),disabled:r.includes(a.key),className:`flex items-center px-3 py-2 text-sm font-medium ${t===a.key?"text-primary border-b-2 border-primary":"text-foreground/80"} ${n?"flex-col":""}`,children:[a.icon,o.jsx("span",{className:`${n?"mt-1 text-xs":"ml-2"} ${t===a.key?"":"hidden md:inline"}`,children:a.label})]},a.key))})},Kc=w.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Kc.displayName="Textarea";const cV=({transaction:t,refreshTransaction:e})=>{const{toast:r}=Xt(),n=t.transportation,[s,a]=w.useState(!1),[i,l]=w.useState(null);w.useEffect(()=>{n?l({transaction_id:n.transaction_id,vehicle_type:n.vehicle_type,number_plate:n.number_plate,driver_phone:n.driver_phone||"",empty_weight:n.empty_weight,loaded_weight:n.loaded_weight,origin:n.origin,distance:n.distance,departure_date:n.departure_date||"",departure_time:n.departure_time||"",expected_arrival_date:n.expected_arrival_date||"",expected_arrival_time:n.expected_arrival_time||"",transportation_charges:n.transportation_charges,notes:n.notes||""}):(a(!0),l({transaction_id:t.transaction.id,vehicle_type:"",number_plate:"",driver_phone:"",empty_weight:0,loaded_weight:0,origin:"",distance:0,departure_date:"",departure_time:"",expected_arrival_date:"",expected_arrival_time:"",transportation_charges:0,notes:""}))},[n,t.transaction.id]);const c=d=>{if(!i)return;const{name:h,value:f}=d.target;l({...i,[h]:["empty_weight","loaded_weight","distance","transportation_charges"].includes(h)?parseFloat(f)||0:f})},u=async()=>{try{if(!i){console.error("Form data is null, cannot save");return}console.log("Saving transportation data:",i),console.log("Transaction ID:",t.transaction.id);const d={...i};d.departure_date===""&&(d.departure_date=null),d.expected_arrival_date===""&&(d.expected_arrival_date=null),d.departure_time===""&&(d.departure_time=null),d.expected_arrival_time===""&&(d.expected_arrival_time=null),console.log("Prepared transportation data:",d);let h;n?(console.log("Updating existing transportation with ID:",n.id),h=await Br.saveTransportation({...d,id:n.id})):(console.log("Adding new transportation"),h=await Br.saveTransportation(d)),console.log("Transportation save result:",h),console.log("Refreshing transaction data..."),await e(),a(!1),r({title:"Success",description:"Transportation details updated successfully"})}catch(d){console.error("Error updating transportation details:",d),r({title:"Error",description:"Failed to update transportation details",variant:"destructive"})}};return i?s?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-medium",children:n?"Edit Transportation Details":"Add Transportation Details"}),o.jsxs("div",{className:"flex space-x-2",children:[n&&o.jsx(me,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(me,{onClick:u,children:"Save Changes"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"vehicle_type",children:"Vehicle Type"}),o.jsx(Ie,{id:"vehicle_type",name:"vehicle_type",value:i.vehicle_type,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"number_plate",children:"Number Plate"}),o.jsx(Ie,{id:"number_plate",name:"number_plate",value:i.number_plate,onChange:c})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"driver_phone",children:"Driver's Phone Number"}),o.jsx(Ie,{id:"driver_phone",name:"driver_phone",value:i.driver_phone,onChange:c,placeholder:"Enter driver's phone number"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"empty_weight",children:"Empty Weight (kg)"}),o.jsx(Ie,{id:"empty_weight",name:"empty_weight",type:"number",value:i.empty_weight,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"loaded_weight",children:"Loaded Weight (kg)"}),o.jsx(Ie,{id:"loaded_weight",name:"loaded_weight",type:"number",value:i.loaded_weight,onChange:c})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"origin",children:"Origin"}),o.jsx(Ie,{id:"origin",name:"origin",value:i.origin,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"distance",children:"Distance (km)"}),o.jsx(Ie,{id:"distance",name:"distance",type:"number",value:i.distance,onChange:c})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"departure_date",children:"Departure Date"}),o.jsx(Ie,{id:"departure_date",name:"departure_date",type:"date",value:i.departure_date,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"departure_time",children:"Departure Time"}),o.jsx(Ie,{id:"departure_time",name:"departure_time",type:"time",value:i.departure_time,onChange:c})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"expected_arrival_date",children:"Expected Arrival Date"}),o.jsx(Ie,{id:"expected_arrival_date",name:"expected_arrival_date",type:"date",value:i.expected_arrival_date,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"expected_arrival_time",children:"Expected Arrival Time"}),o.jsx(Ie,{id:"expected_arrival_time",name:"expected_arrival_time",type:"time",value:i.expected_arrival_time,onChange:c})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"transportation_charges",children:"Transport Charges"}),o.jsx(Ie,{id:"transportation_charges",name:"transportation_charges",type:"number",value:i.transportation_charges,onChange:c})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"notes",children:"Transportation Notes"}),o.jsx(Kc,{id:"notes",name:"notes",value:i.notes,onChange:c,placeholder:"Add details about the transportation",rows:4})]})]})]}):n?o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Vehicle Information"}),o.jsxs(me,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"bg-background hover:bg-secondary border border-border text-foreground",children:[o.jsx(ws,{className:"h-4 w-4 mr-1"}),"Edit Details"]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicle Type"}),o.jsx("p",{className:"font-medium text-foreground",children:n.vehicle_type})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Number Plate"}),o.jsx("p",{className:"font-medium text-foreground",children:n.number_plate})]}),n.driver_phone&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Driver's Phone"}),o.jsx("p",{className:"font-medium text-foreground",children:n.driver_phone})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Load Measurements"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Empty Weight"}),o.jsxs("p",{className:"font-medium text-foreground",children:[n.empty_weight," kg"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Loaded Weight"}),o.jsxs("p",{className:"font-medium text-foreground",children:[n.loaded_weight," kg"]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Schedule Details"}),o.jsxs("div",{className:"glass p-4 rounded-lg bg-card/80 border border-border",children:[n.departure_date&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Departure Date"}),o.jsx("p",{className:"font-medium text-foreground",children:new Date(n.departure_date).toLocaleDateString()})]}),n.departure_time&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Departure Time"}),o.jsx("p",{className:"font-medium text-foreground",children:n.departure_time})]})]}),n.expected_arrival_date&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected Arrival Date"}),o.jsx("p",{className:"font-medium text-foreground",children:new Date(n.expected_arrival_date).toLocaleDateString()})]}),n.expected_arrival_time&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected Arrival Time"}),o.jsx("p",{className:"font-medium text-foreground",children:n.expected_arrival_time})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Route Details"}),o.jsx("div",{className:"glass p-4 rounded-lg bg-card/80 border border-border",children:o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Origin"}),o.jsx("p",{className:"font-medium text-foreground",children:n.origin})]}),o.jsx("div",{className:"mx-4 text-muted-foreground",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),o.jsx("polyline",{points:"12 5 19 12 12 19"})]})}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Distance"}),o.jsxs("p",{className:"font-medium text-foreground",children:[n.distance," km"]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport Charges"}),o.jsx("p",{className:"font-medium text-foreground",children:la(n.transportation_charges)})]})})]})})]}),n.notes&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Transportation Notes"}),o.jsx("div",{className:"glass p-4 rounded-lg bg-card/80 border border-border",children:o.jsx("p",{className:"whitespace-pre-wrap text-foreground",children:n.notes})})]})]}):o.jsxs("div",{className:"text-center p-8",children:[o.jsx("p",{className:"text-muted-foreground mb-4",children:"No transportation data available"}),o.jsxs(me,{onClick:()=>a(!0),variant:"outline",className:"bg-background hover:bg-secondary border border-border text-foreground",children:[o.jsx(ws,{className:"h-4 w-4 mr-1"}),"Add Transportation Details"]})]}):o.jsx("div",{children:"Loading..."})},uV=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(!1),[s,a]=w.useState(!1),[i,l]=w.useState(!1),[c,u]=w.useState(null),[d,h]=w.useState({transaction_id:t.transaction.id,supplier_name:"",contact_number:"",goods_name:"",quantity:0,rate:0,total_cost:0,amount_paid:0,balance_due:0,payment_frequency:"one-time"}),{toast:f}=Xt(),m=k=>{const{name:A,value:W}=k.target;if(s&&c){const I={...c};if(A==="quantity"||A==="rate"){const F=A==="quantity"?parseFloat(W)||0:c.quantity,ee=A==="rate"?parseFloat(W)||0:c.rate,ae=F*ee;I[A]=parseFloat(W)||0,I.total_cost=ae,I.balance_due=ae-I.amount_paid}else if(A==="amount_paid"){const F=parseFloat(W)||0;I.amount_paid=F,I.balance_due=I.total_cost-F}else I[A]=W;u(I)}else if(A==="quantity"||A==="rate"){const I=A==="quantity"?parseFloat(W)||0:d.quantity,F=A==="rate"?parseFloat(W)||0:d.rate,ee=I*F;h(ae=>({...ae,[A]:parseFloat(W)||0,total_cost:ee,balance_due:ee-ae.amount_paid}))}else if(A==="amount_paid"){const I=parseFloat(W)||0;h(F=>({...F,amount_paid:I,balance_due:F.total_cost-I}))}else h(I=>({...I,[A]:W}))},g=k=>{s&&c?u(A=>({...A,payment_frequency:k})):h(A=>({...A,payment_frequency:k}))},v=async()=>{try{if(!d.supplier_name||!d.goods_name){f({title:"Validation Error",description:"Supplier name and goods name are required",variant:"destructive"});return}await Br.addPurchase(d),await e(),h({transaction_id:t.transaction.id,supplier_name:"",contact_number:"",goods_name:"",quantity:0,rate:0,total_cost:0,amount_paid:0,balance_due:0,payment_frequency:"one-time"}),n(!1),f({title:"Success",description:"Purchase added successfully"})}catch(k){console.error("Error adding purchase:",k),f({title:"Error",description:"Failed to add purchase",variant:"destructive"})}},b=async()=>{try{if(!c)return;if(!c.supplier_name||!c.goods_name){f({title:"Validation Error",description:"Supplier name and goods name are required",variant:"destructive"});return}await Br.updatePurchase(c),await e(),u(null),a(!1),f({title:"Success",description:"Purchase updated successfully"})}catch(k){console.error("Error updating purchase:",k),f({title:"Error",description:"Failed to update purchase",variant:"destructive"})}},_=async()=>{try{if(!c)return;await Br.deletePurchase(c.id),await e(),u(null),l(!1),f({title:"Success",description:"Purchase deleted successfully"})}catch(k){console.error("Error deleting purchase:",k),f({title:"Error",description:"Failed to delete purchase",variant:"destructive"})}},S=k=>{u(k),a(!0)},N=k=>{u(k),l(!0)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Purchases"}),o.jsxs(Kt,{open:r,onOpenChange:n,children:[o.jsx(xi,{asChild:!0,children:o.jsxs(me,{size:"sm",children:[o.jsx(Is,{className:"h-4 w-4 mr-2"}),"Add Purchase"]})}),o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add Purchase"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"supplier_name",className:"text-right",children:"Supplier Name"}),o.jsx(Ie,{id:"supplier_name",name:"supplier_name",value:d.supplier_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"contact_number",className:"text-right",children:"Contact Number"}),o.jsx(Ie,{id:"contact_number",name:"contact_number",value:d.contact_number,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"goods_name",className:"text-right",children:"Goods Name"}),o.jsx(Ie,{id:"goods_name",name:"goods_name",value:d.goods_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),o.jsx(Ie,{id:"quantity",name:"quantity",type:"number",value:d.quantity||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"rate",className:"text-right",children:"Rate"}),o.jsx(Ie,{id:"rate",name:"rate",type:"number",value:d.rate||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"total_cost",className:"text-right",children:"Total Cost"}),o.jsx(Ie,{id:"total_cost",name:"total_cost",type:"number",value:d.total_cost||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"amount_paid",className:"text-right",children:"Amount Paid"}),o.jsx(Ie,{id:"amount_paid",name:"amount_paid",type:"number",value:d.amount_paid||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"balance_due",className:"text-right",children:"Balance Due"}),o.jsx(Ie,{id:"balance_due",name:"balance_due",type:"number",value:d.balance_due||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"payment_due_date",className:"text-right",children:"Payment Due Date"}),o.jsx(Ie,{id:"payment_due_date",name:"payment_due_date",type:"date",value:d.payment_due_date||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"payment_frequency",className:"text-right",children:"Payment Frequency"}),o.jsxs(dn,{value:d.payment_frequency,onValueChange:g,children:[o.jsx(nn,{className:"col-span-3",children:o.jsx(hn,{placeholder:"Select frequency"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"one-time",children:"One Time"}),o.jsx(xt,{value:"weekly",children:"Weekly"}),o.jsx(xt,{value:"monthly",children:"Monthly"}),o.jsx(xt,{value:"quarterly",children:"Quarterly"})]})]})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(me,{onClick:v,children:"Add Purchase"})]})]})]})]}),t.purchases.length===0?o.jsx("div",{className:"text-center py-10 text-muted-foreground",children:'No purchases added yet. Click "Add Purchase" to add your first purchase.'}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.purchases.map(k=>o.jsxs(Wt,{className:"overflow-hidden",children:[o.jsxs(Jt,{className:"bg-muted/50 pb-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx(er,{className:"text-base",children:k.supplier_name}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>S(k),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>N(k),children:o.jsx(En,{className:"h-4 w-4"})})]})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.contact_number})]}),o.jsx(zt,{className:"pt-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Goods:"}),o.jsx("span",{className:"text-sm font-medium",children:k.goods_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),o.jsx("span",{className:"text-sm font-medium",children:k.quantity})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Rate:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.rate)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Cost:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.total_cost)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount Paid:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.amount_paid)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Balance Due:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.balance_due)})]}),k.payment_due_date&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Due Date:"}),o.jsx("span",{className:"text-sm font-medium",children:new Date(k.payment_due_date).toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment Frequency:"}),o.jsx("span",{className:"text-sm font-medium capitalize",children:k.payment_frequency})]})]})})]},k.id))}),o.jsx(Kt,{open:s,onOpenChange:a,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Purchase"})}),c&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_supplier_name",className:"text-right",children:"Supplier Name"}),o.jsx(Ie,{id:"edit_supplier_name",name:"supplier_name",value:c.supplier_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_contact_number",className:"text-right",children:"Contact Number"}),o.jsx(Ie,{id:"edit_contact_number",name:"contact_number",value:c.contact_number,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_goods_name",className:"text-right",children:"Goods Name"}),o.jsx(Ie,{id:"edit_goods_name",name:"goods_name",value:c.goods_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_quantity",className:"text-right",children:"Quantity"}),o.jsx(Ie,{id:"edit_quantity",name:"quantity",type:"number",value:c.quantity||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_rate",className:"text-right",children:"Rate"}),o.jsx(Ie,{id:"edit_rate",name:"rate",type:"number",value:c.rate||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_total_cost",className:"text-right",children:"Total Cost"}),o.jsx(Ie,{id:"edit_total_cost",name:"total_cost",type:"number",value:c.total_cost||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_amount_paid",className:"text-right",children:"Amount Paid"}),o.jsx(Ie,{id:"edit_amount_paid",name:"amount_paid",type:"number",value:c.amount_paid||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_balance_due",className:"text-right",children:"Balance Due"}),o.jsx(Ie,{id:"edit_balance_due",name:"balance_due",type:"number",value:c.balance_due||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_payment_due_date",className:"text-right",children:"Payment Due Date"}),o.jsx(Ie,{id:"edit_payment_due_date",name:"payment_due_date",type:"date",value:c.payment_due_date||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_payment_frequency",className:"text-right",children:"Payment Frequency"}),o.jsxs(dn,{value:c.payment_frequency||"one-time",onValueChange:g,children:[o.jsx(nn,{className:"col-span-3",children:o.jsx(hn,{placeholder:"Select frequency"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"one-time",children:"One Time"}),o.jsx(xt,{value:"weekly",children:"Weekly"}),o.jsx(xt,{value:"monthly",children:"Monthly"}),o.jsx(xt,{value:"quarterly",children:"Quarterly"})]})]})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(me,{onClick:b,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:i,onOpenChange:l,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Purchase"})}),o.jsx("p",{children:"Are you sure you want to delete this purchase? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:_,children:"Delete"})]})]})})]})},dV=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(!1),[s,a]=w.useState(!1),[i,l]=w.useState(!1),[c,u]=w.useState(null),[d,h]=w.useState({transaction_id:t.transaction.id,buyer_name:"",contact_number:"",quantity:0,rate:0,total_amount:0,amount_received:0,balance_due:0,payment_frequency:"one-time"}),{toast:f}=Xt(),m=k=>{const{name:A,value:W}=k.target;if(s&&c){const I={...c};if(A==="quantity"||A==="rate"){const F=A==="quantity"?parseFloat(W)||0:c.quantity,ee=A==="rate"?parseFloat(W)||0:c.rate,ae=F*ee;I[A]=parseFloat(W)||0,I.total_amount=ae,I.balance_due=ae-I.amount_received}else if(A==="amount_received"){const F=parseFloat(W)||0;I.amount_received=F,I.balance_due=I.total_amount-F}else I[A]=W;u(I)}else if(A==="quantity"||A==="rate"){const I=A==="quantity"?parseFloat(W)||0:d.quantity,F=A==="rate"?parseFloat(W)||0:d.rate,ee=I*F;h(ae=>({...ae,[A]:parseFloat(W)||0,total_amount:ee,balance_due:ee-ae.amount_received}))}else if(A==="amount_received"){const I=parseFloat(W)||0;h(F=>({...F,amount_received:I,balance_due:F.total_amount-I}))}else h(I=>({...I,[A]:W}))},g=k=>{s&&c?u(A=>({...A,payment_frequency:k})):h(A=>({...A,payment_frequency:k}))},v=async()=>{try{if(!d.buyer_name){f({title:"Validation Error",description:"Buyer name is required",variant:"destructive"});return}await Br.addSale(d),await e(),h({transaction_id:t.transaction.id,buyer_name:"",contact_number:"",quantity:0,rate:0,total_amount:0,amount_received:0,balance_due:0,payment_frequency:"one-time"}),n(!1),f({title:"Success",description:"Sale added successfully"})}catch(k){console.error("Error adding sale:",k),f({title:"Error",description:"Failed to add sale",variant:"destructive"})}},b=async()=>{try{if(!c)return;if(!c.buyer_name){f({title:"Validation Error",description:"Buyer name is required",variant:"destructive"});return}await Br.updateSale(c),await e(),u(null),a(!1),f({title:"Success",description:"Sale updated successfully"})}catch(k){console.error("Error updating sale:",k),f({title:"Error",description:"Failed to update sale",variant:"destructive"})}},_=async()=>{try{if(!c)return;await Br.deleteSale(c.id),await e(),u(null),l(!1),f({title:"Success",description:"Sale deleted successfully"})}catch(k){console.error("Error deleting sale:",k),f({title:"Error",description:"Failed to delete sale",variant:"destructive"})}},S=k=>{u(k),a(!0)},N=k=>{u(k),l(!0)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Sales"}),o.jsxs(Kt,{open:r,onOpenChange:n,children:[o.jsx(xi,{asChild:!0,children:o.jsxs(me,{size:"sm",children:[o.jsx(Is,{className:"h-4 w-4 mr-2"}),"Add Sale"]})}),o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add Sale"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"buyer_name",className:"text-right",children:"Buyer Name"}),o.jsx(Ie,{id:"buyer_name",name:"buyer_name",value:d.buyer_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"contact_number",className:"text-right",children:"Contact Number"}),o.jsx(Ie,{id:"contact_number",name:"contact_number",value:d.contact_number,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),o.jsx(Ie,{id:"quantity",name:"quantity",type:"number",value:d.quantity||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"rate",className:"text-right",children:"Rate"}),o.jsx(Ie,{id:"rate",name:"rate",type:"number",value:d.rate||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"total_amount",className:"text-right",children:"Total Amount"}),o.jsx(Ie,{id:"total_amount",name:"total_amount",type:"number",value:d.total_amount||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"amount_received",className:"text-right",children:"Amount Received"}),o.jsx(Ie,{id:"amount_received",name:"amount_received",type:"number",value:d.amount_received||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"balance_due",className:"text-right",children:"Balance Due"}),o.jsx(Ie,{id:"balance_due",name:"balance_due",type:"number",value:d.balance_due||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"payment_due_date",className:"text-right",children:"Payment Due Date"}),o.jsx(Ie,{id:"payment_due_date",name:"payment_due_date",type:"date",value:d.payment_due_date||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"payment_frequency",className:"text-right",children:"Payment Frequency"}),o.jsxs(dn,{value:d.payment_frequency,onValueChange:g,children:[o.jsx(nn,{className:"col-span-3",children:o.jsx(hn,{placeholder:"Select frequency"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"one-time",children:"One Time"}),o.jsx(xt,{value:"weekly",children:"Weekly"}),o.jsx(xt,{value:"monthly",children:"Monthly"}),o.jsx(xt,{value:"quarterly",children:"Quarterly"})]})]})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(me,{onClick:v,children:"Add Sale"})]})]})]})]}),t.sales.length===0?o.jsx("div",{className:"text-center py-10 text-muted-foreground",children:'No sales added yet. Click "Add Sale" to add your first sale.'}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.sales.map(k=>o.jsxs(Wt,{className:"overflow-hidden",children:[o.jsxs(Jt,{className:"bg-muted/50 pb-2",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx(er,{className:"text-base",children:k.buyer_name}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>S(k),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>N(k),children:o.jsx(En,{className:"h-4 w-4"})})]})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.contact_number})]}),o.jsx(zt,{className:"pt-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),o.jsx("span",{className:"text-sm font-medium",children:k.quantity})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Rate:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.rate)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Amount:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.total_amount)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount Received:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.amount_received)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Balance Due:"}),o.jsx("span",{className:"text-sm font-medium",children:la(k.balance_due)})]}),k.payment_due_date&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Due Date:"}),o.jsx("span",{className:"text-sm font-medium",children:new Date(k.payment_due_date).toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment Frequency:"}),o.jsx("span",{className:"text-sm font-medium capitalize",children:k.payment_frequency})]})]})})]},k.id))}),o.jsx(Kt,{open:s,onOpenChange:a,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Sale"})}),c&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_buyer_name",className:"text-right",children:"Buyer Name"}),o.jsx(Ie,{id:"edit_buyer_name",name:"buyer_name",value:c.buyer_name,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_contact_number",className:"text-right",children:"Contact Number"}),o.jsx(Ie,{id:"edit_contact_number",name:"contact_number",value:c.contact_number,onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_quantity",className:"text-right",children:"Quantity"}),o.jsx(Ie,{id:"edit_quantity",name:"quantity",type:"number",value:c.quantity||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_rate",className:"text-right",children:"Rate"}),o.jsx(Ie,{id:"edit_rate",name:"rate",type:"number",value:c.rate||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_total_amount",className:"text-right",children:"Total Amount"}),o.jsx(Ie,{id:"edit_total_amount",name:"total_amount",type:"number",value:c.total_amount||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_amount_received",className:"text-right",children:"Amount Received"}),o.jsx(Ie,{id:"edit_amount_received",name:"amount_received",type:"number",value:c.amount_received||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_balance_due",className:"text-right",children:"Balance Due"}),o.jsx(Ie,{id:"edit_balance_due",name:"balance_due",type:"number",value:c.balance_due||"",readOnly:!0,className:"col-span-3 bg-muted"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_payment_due_date",className:"text-right",children:"Payment Due Date"}),o.jsx(Ie,{id:"edit_payment_due_date",name:"payment_due_date",type:"date",value:c.payment_due_date||"",onChange:m,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_payment_frequency",className:"text-right",children:"Payment Frequency"}),o.jsxs(dn,{value:c.payment_frequency||"one-time",onValueChange:g,children:[o.jsx(nn,{className:"col-span-3",children:o.jsx(hn,{placeholder:"Select frequency"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"one-time",children:"One Time"}),o.jsx(xt,{value:"weekly",children:"Weekly"}),o.jsx(xt,{value:"monthly",children:"Monthly"}),o.jsx(xt,{value:"quarterly",children:"Quarterly"})]})]})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(me,{onClick:b,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:i,onOpenChange:l,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Sale"})}),o.jsx("p",{children:"Are you sure you want to delete this sale? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:_,children:"Delete"})]})]})})]})};var Kx="Switch",[hV,cG]=Ya(Kx),[fV,pV]=hV(Kx),gk=w.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=w.useState(null),g=Sr(e,N=>m(N)),v=w.useRef(!1),b=f?d||!!f.closest("form"):!0,[_=!1,S]=za({prop:s,defaultProp:a,onChange:u});return o.jsxs(fV,{scope:r,checked:_,disabled:l,children:[o.jsx(Ut.button,{type:"button",role:"switch","aria-checked":_,"aria-required":i,"data-state":xk(_),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:ht(t.onClick,N=>{S(k=>!k),b&&(v.current=N.isPropagationStopped(),v.current||N.stopPropagation())})}),b&&o.jsx(mV,{control:f,bubbles:!v.current,name:n,value:c,checked:_,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});gk.displayName=Kx;var yk="SwitchThumb",vk=w.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=pV(yk,r);return o.jsx(Ut.span,{"data-state":xk(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});vk.displayName=yk;var mV=t=>{const{control:e,checked:r,bubbles:n=!0,...s}=t,a=w.useRef(null),i=Bx(r),l=B0(e);return w.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==r&&h){const f=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(f)}},[i,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function xk(t){return t?"checked":"unchecked"}var bk=gk,gV=vk;const lo=w.forwardRef(({className:t,...e},r)=>o.jsx(bk,{className:Ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:o.jsx(gV,{className:Ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));lo.displayName=bk.displayName;var Nt=function(){return Nt=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Nt.apply(this,arguments)};function yV(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function wk(t,e,r){for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function Eh(t){return t.mode==="multiple"}function Th(t){return t.mode==="range"}function Um(t){return t.mode==="single"}var vV={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function xV(t,e){return ma(t,"LLLL y",e)}function bV(t,e){return ma(t,"d",e)}function wV(t,e){return ma(t,"LLLL",e)}function SV(t){return"".concat(t)}function _V(t,e){return ma(t,"cccccc",e)}function jV(t,e){return ma(t,"yyyy",e)}var NV=Object.freeze({__proto__:null,formatCaption:xV,formatDay:bV,formatMonthCaption:wV,formatWeekNumber:SV,formatWeekdayName:_V,formatYearCaption:jV}),CV=function(t,e,r){return ma(t,"do MMMM (EEEE)",r)},kV=function(){return"Month: "},AV=function(){return"Go to next month"},PV=function(){return"Go to previous month"},EV=function(t,e){return ma(t,"cccc",e)},TV=function(t){return"Week n. ".concat(t)},LV=function(){return"Year: "},DV=Object.freeze({__proto__:null,labelDay:CV,labelMonthDropdown:kV,labelNext:AV,labelPrevious:PV,labelWeekNumber:TV,labelWeekday:EV,labelYearDropdown:LV});function RV(){var t="buttons",e=vV,r=qC,n={},s={},a=1,i={},l=new Date;return{captionLayout:t,classNames:e,formatters:NV,labels:DV,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:a,styles:i,today:l,mode:"default"}}function OV(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,a=t.fromDate,i=t.toDate;return n?a=rs(n):e&&(a=new Date(e,0,1)),s?i=Gx(s):r&&(i=new Date(r,11,31)),{fromDate:a?Yc(a):void 0,toDate:i?Yc(i):void 0}}var Sk=w.createContext(void 0);function IV(t){var e,r=t.initialProps,n=RV(),s=OV(r),a=s.fromDate,i=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!a||!i)&&(l="buttons");var c;(Um(r)||Eh(r)||Th(r))&&(c=r.onSelect);var u=Nt(Nt(Nt({},n),r),{captionLayout:l,classNames:Nt(Nt({},n.classNames),r.classNames),components:Nt({},r.components),formatters:Nt(Nt({},n.formatters),r.formatters),fromDate:a,labels:Nt(Nt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Nt(Nt({},n.modifiers),r.modifiers),modifiersClassNames:Nt(Nt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Nt(Nt({},n.styles),r.styles),toDate:i});return o.jsx(Sk.Provider,{value:u,children:t.children})}function jr(){var t=w.useContext(Sk);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function _k(t){var e=jr(),r=e.locale,n=e.classNames,s=e.styles,a=e.formatters.formatCaption;return o.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function MV(t){return o.jsx("svg",Nt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function jk(t){var e,r,n=t.onChange,s=t.value,a=t.children,i=t.caption,l=t.className,c=t.style,u=jr(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:MV;return o.jsxs("div",{className:l,style:c,children:[o.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),o.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:a}),o.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,o.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function FV(t){var e,r=jr(),n=r.fromDate,s=r.toDate,a=r.styles,i=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return o.jsx(o.Fragment,{});if(!s)return o.jsx(o.Fragment,{});var h=[];if(jU(n,s))for(var f=rs(n),m=n.getMonth();m<=s.getMonth();m++)h.push(Cy(f,m));else for(var f=rs(new Date),m=0;m<=11;m++)h.push(Cy(f,m));var g=function(b){var _=Number(b.target.value),S=Cy(rs(t.displayMonth),_);t.onChange(S)},v=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:jk;return o.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:i}),children:h.map(function(b){return o.jsx("option",{value:b.getMonth(),children:l(b,{locale:i})},b.getMonth())})})}function BV(t){var e,r=t.displayMonth,n=jr(),s=n.fromDate,a=n.toDate,i=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,f=[];if(!s)return o.jsx(o.Fragment,{});if(!a)return o.jsx(o.Fragment,{});for(var m=s.getFullYear(),g=a.getFullYear(),v=m;v<=g;v++)f.push(qw(UC(new Date),v));var b=function(S){var N=qw(rs(r),Number(S.target.value));t.onChange(N)},_=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:jk;return o.jsx(_,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:r.getFullYear(),caption:d(r,{locale:i}),children:f.map(function(S){return o.jsx("option",{value:S.getFullYear(),children:d(S,{locale:i})},S.getFullYear())})})}function $V(t,e){var r=w.useState(t),n=r[0],s=r[1],a=e===void 0?n:e;return[a,s]}function UV(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,a=t.toDate,i=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Vd(a,s)<0){var u=-1*(c-1);s=pa(a,u)}return i&&Vd(s,i)<0&&(s=i),rs(s)}function VV(){var t=jr(),e=UV(t),r=$V(e,t.month),n=r[0],s=r[1],a=function(i){var l;if(!t.disableNavigation){var c=rs(i);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,a]}function qV(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=rs(t),a=rs(pa(s,n)),i=Vd(a,s),l=[],c=0;c<i;c++){var u=pa(s,c);l.push(u)}return r&&(l=l.reverse()),l}function zV(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,i=n?a:1,l=rs(t);if(!r)return pa(l,i);var c=Vd(r,t);if(!(c<a))return pa(l,i)}}function WV(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,a=s===void 0?1:s,i=n?a:1,l=rs(t);if(!r)return pa(l,-i);var c=Vd(l,r);if(!(c<=0))return pa(l,-i)}}var Nk=w.createContext(void 0);function HV(t){var e=jr(),r=VV(),n=r[0],s=r[1],a=qV(n,e),i=zV(n,e),l=WV(n,e),c=function(h){return a.some(function(f){return $m(h,f)})},u=function(h,f){c(h)||(f&&YC(h,f)?s(pa(h,1+e.numberOfMonths*-1)):s(h))},d={currentMonth:n,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return o.jsx(Nk.Provider,{value:d,children:t.children})}function Lh(){var t=w.useContext(Nk);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Ww(t){var e,r=jr(),n=r.classNames,s=r.styles,a=r.components,i=Lh().goToMonth,l=function(d){i(pa(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:_k,u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth});return o.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[o.jsx("div",{className:n.vhidden,children:u}),o.jsx(FV,{onChange:l,displayMonth:t.displayMonth}),o.jsx(BV,{onChange:l,displayMonth:t.displayMonth})]})}function GV(t){return o.jsx("svg",Nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function YV(t){return o.jsx("svg",Nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ip=w.forwardRef(function(t,e){var r=jr(),n=r.classNames,s=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var i=a.join(" "),l=Nt(Nt({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),o.jsx("button",Nt({},t,{ref:e,type:"button",className:i,style:l}))});function KV(t){var e,r,n=jr(),s=n.dir,a=n.locale,i=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return o.jsx(o.Fragment,{});var f=u(t.previousMonth,{locale:a}),m=[i.nav_button,i.nav_button_previous].join(" "),g=d(t.nextMonth,{locale:a}),v=[i.nav_button,i.nav_button_next].join(" "),b=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:YV,_=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:GV;return o.jsxs("div",{className:i.nav,style:l.nav,children:[!t.hidePrevious&&o.jsx(Ip,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?o.jsx(b,{className:i.nav_icon,style:l.nav_icon}):o.jsx(_,{className:i.nav_icon,style:l.nav_icon})}),!t.hideNext&&o.jsx(Ip,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?o.jsx(_,{className:i.nav_icon,style:l.nav_icon}):o.jsx(b,{className:i.nav_icon,style:l.nav_icon})})]})}function Hw(t){var e=jr().numberOfMonths,r=Lh(),n=r.previousMonth,s=r.nextMonth,a=r.goToMonth,i=r.displayMonths,l=i.findIndex(function(g){return $m(t.displayMonth,g)}),c=l===0,u=l===i.length-1,d=e>1&&(c||!u),h=e>1&&(u||!c),f=function(){n&&a(n)},m=function(){s&&a(s)};return o.jsx(KV,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:n,onPreviousClick:f,onNextClick:m})}function JV(t){var e,r=jr(),n=r.classNames,s=r.disableNavigation,a=r.styles,i=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:_k,u;return s?u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=o.jsx(Ww,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=o.jsxs(o.Fragment,{children:[o.jsx(Ww,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),o.jsx(Hw,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=o.jsxs(o.Fragment,{children:[o.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(Hw,{displayMonth:t.displayMonth,id:t.id})]}),o.jsx("div",{className:n.caption,style:a.caption,children:u})}function ZV(t){var e=jr(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?o.jsx("tfoot",{className:s,style:n.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:r})})}):o.jsx(o.Fragment,{})}function XV(t,e,r){for(var n=r?fl(new Date):Bs(new Date,{locale:t,weekStartsOn:e}),s=[],a=0;a<7;a++){var i=Mn(n,a);s.push(i)}return s}function QV(){var t=jr(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,a=t.weekStartsOn,i=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=XV(s,a,i);return o.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&o.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,h){return o.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},h)})]})}function eq(){var t,e=jr(),r=e.classNames,n=e.styles,s=e.components,a=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:QV;return o.jsx("thead",{style:n.head,className:r.head,children:o.jsx(a,{})})}function tq(t){var e=jr(),r=e.locale,n=e.formatters.formatDay;return o.jsx(o.Fragment,{children:n(t.date,{locale:r})})}var Jx=w.createContext(void 0);function rq(t){if(!Eh(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return o.jsx(Jx.Provider,{value:e,children:t.children})}return o.jsx(nq,{initialProps:t.initialProps,children:t.children})}function nq(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,a=e.max,i=function(u,d,h){var f,m;(f=e.onDayClick)===null||f===void 0||f.call(e,u,d,h);var g=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!g){var v=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!v){var b=n?wk([],n):[];if(d.selected){var _=b.findIndex(function(S){return Pn(u,S)});b.splice(_,1)}else b.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,b,u,d,h)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=a&&n.length>a-1,h=n.some(function(f){return Pn(f,u)});return!!(d&&!h)});var c={selected:n,onDayClick:i,modifiers:l};return o.jsx(Jx.Provider,{value:c,children:r})}function Zx(){var t=w.useContext(Jx);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function sq(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?Pn(s,t)&&Pn(n,t)?void 0:Pn(s,t)?{from:s,to:void 0}:Pn(n,t)?void 0:r0(n,t)?{from:t,to:s}:{from:n,to:t}:s?r0(t,s)?{from:s,to:t}:{from:t,to:s}:n?YC(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Xx=w.createContext(void 0);function aq(t){if(!Th(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(Xx.Provider,{value:e,children:t.children})}return o.jsx(iq,{initialProps:t.initialProps,children:t.children})}function iq(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},a=s.from,i=s.to,l=e.min,c=e.max,u=function(m,g,v){var b,_;(b=e.onDayClick)===null||b===void 0||b.call(e,m,g,v);var S=sq(m,n);(_=e.onSelect)===null||_===void 0||_.call(e,S,m,g,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],i?(d.range_end=[i],Pn(a,i)||(d.range_middle=[{after:a,before:i}])):d.range_end=[a]):i&&(d.range_start=[i],d.range_end=[i]),l&&(a&&!i&&d.disabled.push({after:ip(a,l-1),before:Mn(a,l-1)}),a&&i&&d.disabled.push({after:a,before:Mn(a,l-1)}),!a&&i&&d.disabled.push({after:ip(i,l-1),before:Mn(i,l-1)})),c){if(a&&!i&&(d.disabled.push({before:Mn(a,-c+1)}),d.disabled.push({after:Mn(a,c-1)})),a&&i){var h=Fa(i,a)+1,f=c-h;d.disabled.push({before:ip(a,f)}),d.disabled.push({after:Mn(i,f)})}!a&&i&&(d.disabled.push({before:Mn(i,-c+1)}),d.disabled.push({after:Mn(i,c-1)}))}return o.jsx(Xx.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function Qx(){var t=w.useContext(Xx);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function op(t){return Array.isArray(t)?wk([],t):t!==void 0?[t]:[]}function oq(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=op(s)}),e}var ga;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ga||(ga={}));var lq=ga.Selected,ci=ga.Disabled,cq=ga.Hidden,uq=ga.Today,ky=ga.RangeEnd,Ay=ga.RangeMiddle,Py=ga.RangeStart,dq=ga.Outside;function hq(t,e,r){var n,s=(n={},n[lq]=op(t.selected),n[ci]=op(t.disabled),n[cq]=op(t.hidden),n[uq]=[t.today],n[ky]=[],n[Ay]=[],n[Py]=[],n[dq]=[],n);return t.fromDate&&s[ci].push({before:t.fromDate}),t.toDate&&s[ci].push({after:t.toDate}),Eh(t)?s[ci]=s[ci].concat(e.modifiers[ci]):Th(t)&&(s[ci]=s[ci].concat(r.modifiers[ci]),s[Py]=r.modifiers[Py],s[Ay]=r.modifiers[Ay],s[ky]=r.modifiers[ky]),s}var Ck=w.createContext(void 0);function fq(t){var e=jr(),r=Zx(),n=Qx(),s=hq(e,r,n),a=oq(e.modifiers),i=Nt(Nt({},s),a);return o.jsx(Ck.Provider,{value:i,children:t.children})}function kk(){var t=w.useContext(Ck);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function pq(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function mq(t){return!!(t&&typeof t=="object"&&"from"in t)}function gq(t){return!!(t&&typeof t=="object"&&"after"in t)}function yq(t){return!!(t&&typeof t=="object"&&"before"in t)}function vq(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function xq(t,e){var r,n=e.from,s=e.to;if(n&&s){var a=Fa(s,n)<0;a&&(r=[s,n],n=r[0],s=r[1]);var i=Fa(t,n)>=0&&Fa(s,t)>=0;return i}return s?Pn(s,t):n?Pn(n,t):!1}function bq(t){return Hx(t)}function wq(t){return Array.isArray(t)&&t.every(Hx)}function Sq(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(bq(r))return Pn(t,r);if(wq(r))return r.includes(t);if(mq(r))return xq(t,r);if(vq(r))return r.dayOfWeek.includes(t.getDay());if(pq(r)){var n=Fa(r.before,t),s=Fa(r.after,t),a=n>0,i=s<0,l=r0(r.before,r.after);return l?i&&a:a||i}return gq(r)?Fa(t,r.after)>0:yq(r)?Fa(r.before,t)>0:typeof r=="function"?r(t):!1})}function e1(t,e,r){var n=Object.keys(e).reduce(function(a,i){var l=e[i];return Sq(t,l)&&a.push(i),a},[]),s={};return n.forEach(function(a){return s[a]=!0}),r&&!$m(t,r)&&(s.outside=!0),s}function _q(t,e){for(var r=rs(t[0]),n=Gx(t[t.length-1]),s,a,i=r;i<=n;){var l=e1(i,e),c=!l.disabled&&!l.hidden;if(!c){i=Mn(i,1);continue}if(l.selected)return i;l.today&&!a&&(a=i),s||(s=i),i=Mn(i,1)}return a||s}var jq=365;function Ak(t,e){var r=e.moveBy,n=e.direction,s=e.context,a=e.modifiers,i=e.retry,l=i===void 0?{count:0,lastFocused:t}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,f={day:Mn,week:t0,month:pa,year:b$,startOfWeek:function(b){return s.ISOWeek?fl(b):Bs(b,{locale:h,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?VC(b):Yx(b,{locale:h,weekStartsOn:c})}},m=f[r](t,n==="after"?1:-1);n==="before"&&u?m=w$([u,m]):n==="after"&&d&&(m=S$([d,m]));var g=!0;if(a){var v=e1(m,a);g=!v.disabled&&!v.hidden}return g?m:l.count>jq?l.lastFocused:Ak(m,{moveBy:r,direction:n,context:s,modifiers:a,retry:Nt(Nt({},l),{count:l.count+1})})}var Pk=w.createContext(void 0);function Nq(t){var e=Lh(),r=kk(),n=w.useState(),s=n[0],a=n[1],i=w.useState(),l=i[0],c=i[1],u=_q(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,h=function(){c(s),a(void 0)},f=function(b){a(b)},m=jr(),g=function(b,_){if(s){var S=Ak(s,{moveBy:b,direction:_,context:m,modifiers:r});Pn(s,S)||(e.goToDate(S,s),f(S))}},v={focusedDay:s,focusTarget:d,blur:h,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return o.jsx(Pk.Provider,{value:v,children:t.children})}function t1(){var t=w.useContext(Pk);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Cq(t,e){var r=kk(),n=e1(t,r,e);return n}var r1=w.createContext(void 0);function kq(t){if(!Um(t.initialProps)){var e={selected:void 0};return o.jsx(r1.Provider,{value:e,children:t.children})}return o.jsx(Aq,{initialProps:t.initialProps,children:t.children})}function Aq(t){var e=t.initialProps,r=t.children,n=function(a,i,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,i,l),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,i,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,i,l)},s={selected:e.selected,onDayClick:n};return o.jsx(r1.Provider,{value:s,children:r})}function Ek(){var t=w.useContext(r1);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Pq(t,e){var r=jr(),n=Ek(),s=Zx(),a=Qx(),i=t1(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,h=i.blur,f=i.focus,m=i.focusMonthBefore,g=i.focusMonthAfter,v=i.focusYearBefore,b=i.focusYearAfter,_=i.focusStartOfWeek,S=i.focusEndOfWeek,N=function($){var V,X,he,je;Um(r)?(V=n.onDayClick)===null||V===void 0||V.call(n,t,e,$):Eh(r)?(X=s.onDayClick)===null||X===void 0||X.call(s,t,e,$):Th(r)?(he=a.onDayClick)===null||he===void 0||he.call(a,t,e,$):(je=r.onDayClick)===null||je===void 0||je.call(r,t,e,$)},k=function($){var V;f(t),(V=r.onDayFocus)===null||V===void 0||V.call(r,t,e,$)},A=function($){var V;h(),(V=r.onDayBlur)===null||V===void 0||V.call(r,t,e,$)},W=function($){var V;(V=r.onDayMouseEnter)===null||V===void 0||V.call(r,t,e,$)},I=function($){var V;(V=r.onDayMouseLeave)===null||V===void 0||V.call(r,t,e,$)},F=function($){var V;(V=r.onDayPointerEnter)===null||V===void 0||V.call(r,t,e,$)},ee=function($){var V;(V=r.onDayPointerLeave)===null||V===void 0||V.call(r,t,e,$)},ae=function($){var V;(V=r.onDayTouchCancel)===null||V===void 0||V.call(r,t,e,$)},R=function($){var V;(V=r.onDayTouchEnd)===null||V===void 0||V.call(r,t,e,$)},D=function($){var V;(V=r.onDayTouchMove)===null||V===void 0||V.call(r,t,e,$)},T=function($){var V;(V=r.onDayTouchStart)===null||V===void 0||V.call(r,t,e,$)},B=function($){var V;(V=r.onDayKeyUp)===null||V===void 0||V.call(r,t,e,$)},z=function($){var V;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),u();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),d();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?v():m();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?b():g();break;case"Home":$.preventDefault(),$.stopPropagation(),_();break;case"End":$.preventDefault(),$.stopPropagation(),S();break}(V=r.onDayKeyDown)===null||V===void 0||V.call(r,t,e,$)},re={onClick:N,onFocus:k,onBlur:A,onKeyDown:z,onKeyUp:B,onMouseEnter:W,onMouseLeave:I,onPointerEnter:F,onPointerLeave:ee,onTouchCancel:ae,onTouchEnd:R,onTouchMove:D,onTouchStart:T};return re}function Eq(){var t=jr(),e=Ek(),r=Zx(),n=Qx(),s=Um(t)?e.selected:Eh(t)?r.selected:Th(t)?n.selected:void 0;return s}function Tq(t){return Object.values(ga).includes(t)}function Lq(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(Tq(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function Dq(t,e){var r=Nt({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=Nt(Nt({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function Rq(t,e,r){var n,s,a,i=jr(),l=t1(),c=Cq(t,e),u=Pq(t,c),d=Eq(),h=!!(i.onDayClick||i.mode!=="default");w.useEffect(function(){var W;c.outside||l.focusedDay&&h&&Pn(l.focusedDay,t)&&((W=r.current)===null||W===void 0||W.focus())},[l.focusedDay,t,r,h,c.outside]);var f=Lq(i,c).join(" "),m=Dq(i,c),g=!!(c.outside&&!i.showOutsideDays||c.hidden),v=(a=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:tq,b=o.jsx(v,{date:t,displayMonth:e,activeModifiers:c}),_={style:m,className:f,children:b,role:"gridcell"},S=l.focusTarget&&Pn(l.focusTarget,t)&&!c.outside,N=l.focusedDay&&Pn(l.focusedDay,t),k=Nt(Nt(Nt({},_),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=N||S?0:-1,n)),u),A={isButton:h,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:k,divProps:_};return A}function Oq(t){var e=w.useRef(null),r=Rq(t.date,t.displayMonth,e);return r.isHidden?o.jsx("div",{role:"gridcell"}):r.isButton?o.jsx(Ip,Nt({name:"day",ref:e},r.buttonProps)):o.jsx("div",Nt({},r.divProps))}function Iq(t){var e=t.number,r=t.dates,n=jr(),s=n.onWeekNumberClick,a=n.styles,i=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return o.jsx("span",{className:i.weeknumber,style:a.weeknumber,children:d});var h=c(Number(e),{locale:l}),f=function(m){s(e,r,m)};return o.jsx(Ip,{name:"week-number","aria-label":h,className:i.weeknumber,style:a.weeknumber,onClick:f,children:d})}function Mq(t){var e,r,n=jr(),s=n.styles,a=n.classNames,i=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Oq,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:Iq,d;return i&&(d=o.jsx("td",{className:a.cell,style:s.cell,children:o.jsx(u,{number:t.weekNumber,dates:t.dates})})),o.jsxs("tr",{className:a.row,style:s.row,children:[d,t.dates.map(function(h){return o.jsx("td",{className:a.cell,style:s.cell,role:"presentation",children:o.jsx(c,{displayMonth:t.displayMonth,date:h})},bU(h))})]})}function Gw(t,e,r){for(var n=r!=null&&r.ISOWeek?VC(e):Yx(e,r),s=r!=null&&r.ISOWeek?fl(t):Bs(t,r),a=Fa(n,s),i=[],l=0;l<=a;l++)i.push(Mn(s,l));var c=i.reduce(function(u,d){var h=r!=null&&r.ISOWeek?zC(d):HC(d,r),f=u.find(function(m){return m.weekNumber===h});return f?(f.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Fq(t,e){var r=Gw(rs(t),Gx(t),e);if(e!=null&&e.useFixedWeeks){var n=SU(t,e);if(n<6){var s=r[r.length-1],a=s.dates[s.dates.length-1],i=t0(a,6-n),l=Gw(t0(a,1),i,e);r.push.apply(r,l)}}return r}function Bq(t){var e,r,n,s=jr(),a=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,f=s.firstWeekContainsDate,m=s.ISOWeek,g=Fq(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:a,weekStartsOn:h,firstWeekContainsDate:f}),v=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:eq,b=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:Mq,_=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:ZV;return o.jsxs("table",{id:t.id,className:i.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&o.jsx(v,{}),o.jsx("tbody",{className:i.tbody,style:l.tbody,children:g.map(function(S){return o.jsx(b,{displayMonth:t.displayMonth,dates:S.dates,weekNumber:S.weekNumber},S.weekNumber)})}),o.jsx(_,{displayMonth:t.displayMonth})]})}function $q(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Uq=$q()?w.useLayoutEffect:w.useEffect,Ey=!1,Vq=0;function Yw(){return"react-day-picker-".concat(++Vq)}function qq(t){var e,r=t??(Ey?Yw():null),n=w.useState(r),s=n[0],a=n[1];return Uq(function(){s===null&&a(Yw())},[]),w.useEffect(function(){Ey===!1&&(Ey=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function zq(t){var e,r,n=jr(),s=n.dir,a=n.classNames,i=n.styles,l=n.components,c=Lh().displayMonths,u=qq(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[a.month],f=i.month,m=t.displayIndex===0,g=t.displayIndex===c.length-1,v=!m&&!g;s==="rtl"&&(e=[m,g],g=e[0],m=e[1]),m&&(h.push(a.caption_start),f=Nt(Nt({},f),i.caption_start)),g&&(h.push(a.caption_end),f=Nt(Nt({},f),i.caption_end)),v&&(h.push(a.caption_between),f=Nt(Nt({},f),i.caption_between));var b=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:JV;return o.jsxs("div",{className:h.join(" "),style:f,children:[o.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(Bq,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Wq(t){var e=jr(),r=e.classNames,n=e.styles;return o.jsx("div",{className:r.months,style:n.months,children:t.children})}function Hq(t){var e,r,n=t.initialProps,s=jr(),a=t1(),i=Lh(),l=w.useState(!1),c=l[0],u=l[1];w.useEffect(function(){s.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[s.initialFocus,c,a.focus,a.focusTarget,a]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=Nt(Nt({},s.styles.root),s.style),f=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var b;return Nt(Nt({},g),(b={},b[v]=n[v],b))},{}),m=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:Wq;return o.jsx("div",Nt({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:o.jsx(m,{children:i.displayMonths.map(function(g,v){return o.jsx(zq,{displayIndex:v,displayMonth:g},v)})})}))}function Gq(t){var e=t.children,r=yV(t,["children"]);return o.jsx(IV,{initialProps:r,children:o.jsx(HV,{children:o.jsx(kq,{initialProps:r,children:o.jsx(rq,{initialProps:r,children:o.jsx(aq,{initialProps:r,children:o.jsx(fq,{children:o.jsx(Nq,{children:e})})})})})})})}function Yq(t){return o.jsx(Gq,Nt({},t,{children:o.jsx(Hq,{initialProps:t})}))}function Jd({className:t,classNames:e,showOutsideDays:r=!0,...n}){return o.jsx(Yq,{showOutsideDays:r,className:Ve("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ve(Dd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ve(Dd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>o.jsx(cS,{className:"h-4 w-4"}),IconRight:({...s})=>o.jsx(uS,{className:"h-4 w-4"})},...n})}Jd.displayName="Calendar";var n1="Popover",[Tk,uG]=Ya(n1,[jo]),Dh=jo(),[Kq,Ao]=Tk(n1),Lk=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!1}=t,l=Dh(e),c=w.useRef(null),[u,d]=w.useState(!1),[h=!1,f]=za({prop:n,defaultProp:s,onChange:a});return o.jsx(fm,{...l,children:o.jsx(Kq,{scope:e,contentId:ul(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:w.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:u,onCustomAnchorAdd:w.useCallback(()=>d(!0),[]),onCustomAnchorRemove:w.useCallback(()=>d(!1),[]),modal:i,children:r})})};Lk.displayName=n1;var Dk="PopoverAnchor",Jq=w.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ao(Dk,r),a=Dh(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return w.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(bh,{...a,...n,ref:e})});Jq.displayName=Dk;var Rk="PopoverTrigger",Ok=w.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ao(Rk,r),a=Dh(r),i=Sr(e,s.triggerRef),l=o.jsx(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$k(s.open),...n,ref:i,onClick:ht(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(bh,{asChild:!0,...a,children:l})});Ok.displayName=Rk;var s1="PopoverPortal",[Zq,Xq]=Tk(s1,{forceMount:void 0}),Ik=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,a=Ao(s1,e);return o.jsx(Zq,{scope:e,forceMount:r,children:o.jsx(So,{present:r||a.open,children:o.jsx(g0,{asChild:!0,container:s,children:n})})})};Ik.displayName=s1;var Jc="PopoverContent",Mk=w.forwardRef((t,e)=>{const r=Xq(Jc,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,a=Ao(Jc,t.__scopePopover);return o.jsx(So,{present:n||a.open,children:a.modal?o.jsx(Qq,{...s,ref:e}):o.jsx(ez,{...s,ref:e})})});Mk.displayName=Jc;var Qq=w.forwardRef((t,e)=>{const r=Ao(Jc,t.__scopePopover),n=w.useRef(null),s=Sr(e,n),a=w.useRef(!1);return w.useEffect(()=>{const i=n.current;if(i)return u0(i)},[]),o.jsx(m0,{as:mh,allowPinchZoom:!0,children:o.jsx(Fk,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ht(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ht(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ht(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),ez=w.forwardRef((t,e)=>{const r=Ao(Jc,t.__scopePopover),n=w.useRef(!1),s=w.useRef(!1);return o.jsx(Fk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Fk=w.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,f=Ao(Jc,r),m=Dh(r);return d0(),o.jsx(h0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Xp,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:o.jsx(pm,{"data-state":$k(f.open),role:"dialog",id:f.contentId,...m,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Bk="PopoverClose",tz=w.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ao(Bk,r);return o.jsx(Ut.button,{type:"button",...n,ref:e,onClick:ht(t.onClick,()=>s.onOpenChange(!1))})});tz.displayName=Bk;var rz="PopoverArrow",nz=w.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Dh(r);return o.jsx(mm,{...s,...n,ref:e})});nz.displayName=rz;function $k(t){return t?"open":"closed"}var sz=Lk,az=Ok,iz=Ik,Uk=Mk;const Mp=sz,Fp=az,Zd=w.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>o.jsx(iz,{children:o.jsx(Uk,{ref:s,align:e,sideOffset:r,className:Ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Zd.displayName=Uk.displayName;const oz=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(!1),[s,a]=w.useState(!1),[i,l]=w.useState(!1),[c,u]=w.useState(null),[d,h]=w.useState({transaction_id:t.transaction.id,amount:0,payment_mode:"cash",counterparty:"",direction:"outgoing",payment_date:new Date().toISOString(),notes:""}),{toast:f}=Xt(),m=W=>{const{name:I,value:F,type:ee}=W.target;s&&c?u({...c,[I]:ee==="number"?parseFloat(F):F}):h({...d,[I]:ee==="number"?parseFloat(F):F})},g=W=>{s&&c?u({...c,payment_mode:W}):h({...d,payment_mode:W})},v=W=>{s&&c?u({...c,direction:W?"incoming":"outgoing"}):h({...d,direction:W?"incoming":"outgoing"})},b=W=>{W&&(s&&c?u({...c,payment_date:W.toISOString()}):h({...d,payment_date:W.toISOString()}))},_=async()=>{try{if(!d.amount||!d.counterparty){f({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}await Br.addPayment(d),f({title:"Success",description:"Payment added successfully"}),n(!1),h({transaction_id:t.transaction.id,amount:0,payment_mode:"cash",counterparty:"",direction:"outgoing",payment_date:new Date().toISOString(),notes:""}),await e()}catch(W){console.error("Error adding payment:",W),f({title:"Error",description:"Failed to add payment",variant:"destructive"})}},S=async()=>{try{if(!c)return;if(!c.amount||!c.counterparty){f({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}await Br.updatePayment(c),f({title:"Success",description:"Payment updated successfully"}),a(!1),u(null),await e()}catch(W){console.error("Error updating payment:",W),f({title:"Error",description:"Failed to update payment",variant:"destructive"})}},N=async()=>{try{if(!c)return;await Br.deletePayment(c.id),f({title:"Success",description:"Payment deleted successfully"}),l(!1),u(null),await e()}catch(W){console.error("Error deleting payment:",W),f({title:"Error",description:"Failed to delete payment",variant:"destructive"})}},k=W=>{u(W),a(!0)},A=W=>{u(W),l(!0)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Payments"}),o.jsxs(me,{onClick:()=>n(!0),variant:"default",size:"sm",children:[o.jsx(Is,{className:"h-4 w-4 mr-1"}),"Add Payment"]})]}),t.payments.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No payments recorded yet. Add your first payment."}):o.jsx("div",{className:"space-y-4",children:t.payments.map(W=>o.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[o.jsxs("div",{className:"mb-2 md:mb-0",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:`mr-2 font-medium ${W.direction==="incoming"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[W.direction==="incoming"?"+":"-"," ",la(W.amount)]}),o.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",W.payment_mode,")"]})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["To/From: ",W.counterparty]})]}),o.jsxs("div",{className:"text-right flex items-center gap-2",children:[o.jsx("div",{children:o.jsx("div",{className:"text-sm",children:W.payment_date?new Date(W.payment_date).toLocaleDateString():"No date"})}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>k(W),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>A(W),children:o.jsx(En,{className:"h-4 w-4"})})]})]})]}),W.notes&&o.jsx("div",{className:"mt-2 text-sm border-t pt-2",children:o.jsx("p",{className:"text-muted-foreground",children:W.notes})})]},W.id))}),o.jsx(Kt,{open:r,onOpenChange:n,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add New Payment"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"amount",children:"Amount"}),o.jsx(Ie,{id:"amount",name:"amount",type:"number",placeholder:"Enter amount",value:d.amount||"",onChange:m})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"paymentMode",children:"Payment Mode"}),o.jsxs(dn,{onValueChange:g,defaultValue:d.payment_mode,children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select payment mode"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"cash",children:"Cash"}),o.jsx(xt,{value:"cheque",children:"Cheque"}),o.jsx(xt,{value:"upi",children:"UPI"}),o.jsx(xt,{value:"bank",children:"Bank Transfer"})]})]})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"counterparty",children:"Counterparty"}),o.jsx(Ie,{id:"counterparty",name:"counterparty",placeholder:"Enter counterparty name",value:d.counterparty||"",onChange:m})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{children:"Payment Date"}),o.jsxs(Mp,{children:[o.jsx(Fp,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:Ve("justify-start text-left font-normal",!d.date&&"text-muted-foreground"),children:[o.jsx(up,{className:"mr-2 h-4 w-4"}),d.date?ma(new Date(d.date),"PPP"):o.jsx("span",{children:"Pick a date"})]})}),o.jsx(Zd,{className:"w-auto p-0",children:o.jsx(Jd,{mode:"single",selected:d.date?new Date(d.date):void 0,onSelect:b,initialFocus:!0})})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lo,{id:"direction",checked:d.direction==="incoming",onCheckedChange:v}),o.jsx(Ne,{htmlFor:"direction",children:d.direction==="incoming"?"Incoming Payment (Received)":"Outgoing Payment (Paid)"})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"notes",children:"Notes (Optional)"}),o.jsx(Ie,{id:"notes",name:"notes",placeholder:"Add payment notes",value:d.notes||"",onChange:m})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(me,{onClick:_,children:"Add Payment"})]})]})}),o.jsx(Kt,{open:s,onOpenChange:a,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Payment"})}),c&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"edit_amount",children:"Amount"}),o.jsx(Ie,{id:"edit_amount",name:"amount",type:"number",placeholder:"Enter amount",value:c.amount||"",onChange:m})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"edit_payment_mode",children:"Payment Mode"}),o.jsxs(dn,{onValueChange:g,value:c.payment_mode,children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select payment mode"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"cash",children:"Cash"}),o.jsx(xt,{value:"cheque",children:"Cheque"}),o.jsx(xt,{value:"upi",children:"UPI"}),o.jsx(xt,{value:"bank",children:"Bank Transfer"})]})]})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"edit_counterparty",children:"Counterparty"}),o.jsx(Ie,{id:"edit_counterparty",name:"counterparty",placeholder:"Enter counterparty name",value:c.counterparty||"",onChange:m})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{children:"Payment Date"}),o.jsxs(Mp,{children:[o.jsx(Fp,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:Ve("justify-start text-left font-normal",!c.payment_date&&"text-muted-foreground"),children:[o.jsx(up,{className:"mr-2 h-4 w-4"}),c.payment_date?ma(new Date(c.payment_date),"PPP"):o.jsx("span",{children:"Pick a date"})]})}),o.jsx(Zd,{className:"w-auto p-0",children:o.jsx(Jd,{mode:"single",selected:c.payment_date?new Date(c.payment_date):void 0,onSelect:b,initialFocus:!0})})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lo,{id:"edit_direction",checked:c.direction==="incoming",onCheckedChange:v}),o.jsx(Ne,{htmlFor:"edit_direction",children:c.direction==="incoming"?"Incoming Payment (Received)":"Outgoing Payment (Paid)"})]}),o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"edit_notes",children:"Notes (Optional)"}),o.jsx(Ie,{id:"edit_notes",name:"notes",placeholder:"Add payment notes",value:c.notes||"",onChange:m})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(me,{onClick:S,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:i,onOpenChange:l,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Payment"})}),o.jsx("p",{children:"Are you sure you want to delete this payment? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:N,children:"Delete"})]})]})})]})},lz=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(!1),[s,a]=w.useState(null),[i,l]=w.useState(null),[c,u]=w.useState(""),[d,h]=w.useState(""),{toast:f}=Xt(),m=async()=>{try{if(!c.trim()){f({title:"Error",description:"Note content cannot be empty",variant:"destructive"});return}await Br.addNote(t.transaction.id,c.trim()),f({title:"Success",description:"Note added successfully"}),n(!1),u(""),await e()}catch(S){console.error("Error adding note:",S),f({title:"Error",description:"Failed to add note",variant:"destructive"})}},g=S=>{a(S.id),h(S.note)},v=()=>{a(null),h("")},b=async S=>{try{if(!d.trim()){f({title:"Error",description:"Note content cannot be empty",variant:"destructive"});return}const N=t.notes.find(k=>k.id===S);if(!N)throw new Error("Note not found");await Br.updateNote({...N,note:d.trim()}),f({title:"Success",description:"Note updated successfully"}),a(null),h(""),await e()}catch(N){console.error("Error updating note:",N),f({title:"Error",description:"Failed to update note",variant:"destructive"})}},_=async S=>{try{await Br.deleteNote(S),f({title:"Success",description:"Note deleted successfully"}),l(null),await e()}catch(N){console.error("Error deleting note:",N),f({title:"Error",description:"Failed to delete note",variant:"destructive"})}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Notes"}),o.jsxs(me,{onClick:()=>n(!0),variant:"default",size:"sm",children:[o.jsx(Is,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),t.notes.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No notes added yet. Add your first note."}):o.jsx("div",{className:"space-y-4",children:t.notes.map(S=>o.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:S.created_at?new Date(S.created_at).toLocaleDateString()+" "+new Date(S.created_at).toLocaleTimeString():"No date"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(me,{variant:"ghost",size:"sm",onClick:()=>g(S),className:"h-7 px-2",children:o.jsx(ws,{className:"h-3.5 w-3.5"})}),o.jsx(me,{variant:"ghost",size:"sm",onClick:()=>l(S.id),className:"h-7 px-2 text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-3.5 w-3.5"})})]})]}),s===S.id?o.jsxs("div",{className:"mt-2 space-y-3",children:[o.jsx(Kc,{value:d,onChange:N=>h(N.target.value),rows:3,className:"w-full"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(me,{variant:"outline",size:"sm",onClick:v,children:"Cancel"}),o.jsxs(me,{variant:"default",size:"sm",onClick:()=>b(S.id),children:[o.jsx(ET,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"whitespace-pre-wrap",children:S.note})]},S.id))}),o.jsx(Kt,{open:r,onOpenChange:n,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add New Note"})}),o.jsx("div",{className:"grid gap-4 py-4",children:o.jsxs("div",{className:"flex flex-col space-y-2",children:[o.jsx(Ne,{htmlFor:"noteContent",children:"Note Content"}),o.jsx(Kc,{id:"noteContent",placeholder:"Enter note content",value:c,onChange:S=>u(S.target.value),rows:5})]})}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),o.jsx(me,{onClick:m,children:"Add Note"})]})]})}),o.jsx(Kt,{open:!!i,onOpenChange:S=>!S&&l(null),children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Note"})}),o.jsx("p",{className:"py-4",children:"Are you sure you want to delete this note? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:()=>i&&_(i),children:"Delete"})]})]})})]})},cz=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(!1),s=w.useRef(null),{toast:a}=Xt(),{user:i}=_r(),l=g=>{g.preventDefault(),n(!0)},c=()=>{n(!1)},u=g=>{g.preventDefault(),n(!1),g.dataTransfer.files&&g.dataTransfer.files.length>0&&h(g.dataTransfer.files)},d=g=>{g.target.files&&g.target.files.length>0&&h(g.target.files)},h=async g=>{try{if(!i){a({title:"Error",description:"You must be logged in to upload files",variant:"destructive"});return}for(let v=0;v<g.length;v++){const b=g[v];await Br.addAttachment(t.transaction.id,i.id,b,b.name,b.type)}await e(),a({title:"Success",description:`${g.length} ${g.length===1?"file":"files"} uploaded successfully`})}catch(v){console.error("Error uploading files:",v),a({title:"Error",description:"Failed to upload files",variant:"destructive"})}},f=async g=>{try{await Br.deleteAttachment(g),await e(),a({title:"Success",description:"Attachment deleted successfully"})}catch(v){console.error("Error deleting attachment:",v),a({title:"Error",description:"Failed to delete attachment",variant:"destructive"})}},m=g=>g.startsWith("image/")?o.jsx(xT,{className:"h-6 w-6 text-blue-500"}):o.jsx(E0,{className:"h-6 w-6 text-amber-500"});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Attachments"}),o.jsxs(me,{onClick:()=>{var g;return(g=s.current)==null?void 0:g.click()},variant:"default",size:"sm",children:[o.jsx(Is,{className:"h-4 w-4 mr-1"}),"Add Attachment"]}),o.jsx("input",{type:"file",ref:s,onChange:d,style:{display:"none"},multiple:!0})]}),o.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${r?"border-primary bg-primary/10":"border-muted-foreground/20"}`,onDragOver:l,onDragLeave:c,onDrop:u,children:[o.jsx(hS,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),o.jsx("p",{className:"text-muted-foreground mb-2",children:"Drag and drop files here or"}),o.jsx(me,{variant:"outline",onClick:()=>{var g;return(g=s.current)==null?void 0:g.click()},children:"Browse Files"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Supported file types: Images, PDFs, Documents"})]}),t.attachments.length===0?o.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No attachments added yet."}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:t.attachments.map(g=>o.jsxs("div",{className:"border rounded-lg p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m(g.file_type),o.jsx("span",{className:"font-medium truncate max-w-[150px]",children:g.name})]}),o.jsx(me,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-destructive",onClick:()=>f(g.id),children:o.jsx(cm,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"flex-grow flex items-center justify-center my-2",children:g.file_type.startsWith("image/")?o.jsx("img",{src:g.uri,alt:g.name,className:"max-h-[100px] object-contain"}):o.jsx("div",{className:"text-muted-foreground text-sm px-2 py-1 bg-muted rounded",children:g.file_type.split("/")[1]||"File"})}),o.jsxs("div",{className:"mt-auto pt-2 flex justify-between items-center text-xs text-muted-foreground",children:[o.jsx("span",{children:g.created_at?new Date(g.created_at).toLocaleDateString():"No date"}),o.jsx(me,{variant:"ghost",size:"sm",className:"h-6 p-0 text-primary",asChild:!0,children:o.jsx("a",{href:g.uri,download:g.name,children:o.jsx(lc,{className:"h-4 w-4"})})})]})]},g.id))})]})},uz=({activeTab:t,transaction:e,refreshTransaction:r})=>{const n=()=>{switch(t){case es.PURCHASES:case"purchases":return o.jsx(uV,{transaction:e,refreshTransaction:r});case es.TRANSPORTATION:case"transportation":return o.jsx(cV,{transaction:e,refreshTransaction:r});case es.SALES:case"sales":return o.jsx(dV,{transaction:e,refreshTransaction:r});case es.PAYMENTS:case"payments":return o.jsx(oz,{transaction:e,refreshTransaction:r});case es.NOTES:case"notes":return o.jsx(lz,{transaction:e,refreshTransaction:r});case es.ATTACHMENTS:case"attachments":return o.jsx(cz,{transaction:e,refreshTransaction:r});default:return null}};return o.jsx("div",{className:"mt-6",children:o.jsx(K0,{mode:"wait",children:o.jsx(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"bg-card text-card-foreground rounded-lg p-6 shadow-sm border border-border",children:n()},t)})})},dz=({transaction:t,refreshTransaction:e})=>{const[r,n]=w.useState(()=>{const g=localStorage.getItem(`transaction_${t.transaction.id}_activeTab`);return g||es.PURCHASES}),[s,a]=w.useState(t),[i,l]=w.useState(!1);w.useEffect(()=>{a(t)},[t]),w.useEffect(()=>{localStorage.setItem(`transaction_${t.transaction.id}_activeTab`,r)},[r,t.transaction.id]);const c=Ss(),{toast:u}=Xt();_r();const d=Om(),h=w.useCallback(async()=>{try{const g=await Br.getCompleteTransaction(t.transaction.id);g&&a(g)}catch(g){console.error("Error refreshing transaction:",g)}},[t.transaction.id]),f=async()=>{const g=r;e?await e():await h();const v=localStorage.getItem(`transaction_${t.transaction.id}_activeTab`);n(v||g)};w.useEffect(()=>{(async()=>{if(s.purchases.length>0&&s.sales.length>0){const v=s.purchases.reduce((N,k)=>N+k.total_cost,0),b=s.purchases.reduce((N,k)=>N+k.amount_paid,0),_=s.sales.reduce((N,k)=>N+k.total_amount,0),S=s.sales.reduce((N,k)=>N+k.amount_received,0);if(b>=v&&S>=_&&s.transaction.status!=="completed"){const N={...s.transaction,status:"completed"};await Br.updateTransaction(N),await f(),u({title:"Status Updated",description:"Transaction has been marked as completed automatically."})}}})()},[s,f,u]);const m=async()=>{try{await Br.deleteTransaction(s.transaction.id),u({title:"Success",description:"Transaction deleted successfully"}),c("/")}catch(g){console.error("Error deleting transaction:",g),u({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}};return o.jsxs("div",{className:"flex flex-col h-full w-full overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-background text-foreground",children:[o.jsxs("h2",{className:"text-lg font-medium",children:[s.transaction.name,o.jsx("span",{className:`ml-2 text-sm px-2 py-0.5 rounded-full ${s.transaction.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":s.transaction.status==="cancelled"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}`,children:s.transaction.status.charAt(0).toUpperCase()+s.transaction.status.slice(1)})]}),o.jsxs(Kt,{open:i,onOpenChange:l,children:[d?o.jsxs(Fd,{children:[o.jsx(Bd,{asChild:!0,children:o.jsxs(me,{variant:"ghost",size:"icon",className:"text-foreground",children:[o.jsx(gT,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"More options"})]})}),o.jsx(Gc,{align:"end",className:"bg-popover border border-border text-foreground",children:o.jsx(xi,{asChild:!0,children:o.jsxs(ia,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[o.jsx(En,{className:"h-4 w-4 mr-2"}),"Delete Transaction"]})})})]}):o.jsx(xi,{asChild:!0,children:o.jsxs(me,{variant:"destructive",size:"sm",children:[o.jsx(En,{className:"h-4 w-4 mr-2"}),"Delete Transaction"]})}),o.jsxs(tr,{className:"bg-background border border-border text-foreground",children:[o.jsx(ar,{children:o.jsx(ir,{children:"Are you sure?"})}),o.jsx("p",{className:"py-4",children:"This action cannot be undone. This will permanently delete this transaction and all its data."}),o.jsxs(ur,{className:"flex space-x-2 justify-end",children:[o.jsx(j7,{asChild:!0,children:o.jsx(me,{variant:"outline",className:"bg-background hover:bg-secondary border border-border text-foreground",children:"Cancel"})}),o.jsx(me,{variant:"destructive",onClick:m,children:"Delete"})]})]})]})]}),o.jsx("div",{className:`w-full border-b border-border bg-background ${d?"px-2 py-1":""}`,children:o.jsx(lV,{activeTab:r,onTabChange:g=>{n(g),localStorage.setItem(`transaction_${t.transaction.id}_activeTab`,g)},disabledTabs:[],isMobile:d})}),o.jsx("div",{className:`flex-1 overflow-auto bg-background ${d?"p-2":"px-4"}`,children:o.jsx(uz,{transaction:s,activeTab:r,refreshTransaction:f})})]})},hz=()=>{const{id:t}=LA(),[e,r]=w.useState(null),[n,s]=w.useState(!0),a=Ss(),{toast:i}=Xt(),l=w.useCallback(async()=>{if(!t){a("/");return}try{s(!0);const u=await Br.getCompleteTransaction(t);u?r(u):(i({title:"Error",description:"Transaction not found",variant:"destructive"}),a("/"))}catch(u){console.error("Failed to load transaction:",u),i({title:"Error",description:"Failed to load transaction details",variant:"destructive"})}finally{s(!1)}},[t,a,i]),c=async()=>{console.log("Refreshing transaction data from TransactionDetail page...");try{await l(),console.log("Transaction data refreshed successfully")}catch(u){console.error("Error refreshing transaction data:",u)}};return w.useEffect(()=>{l()},[l]),o.jsxs(ns.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex flex-col bg-background text-foreground",children:[o.jsx("header",{className:"glass border-b sticky top-0 z-10 bg-background/80 backdrop-blur-sm border-border",children:o.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(BN,{variant:"ghost",onClick:()=>a("/"),"aria-label":"Go back",className:"text-foreground hover:bg-secondary",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19 12H5"}),o.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),o.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Transaction Details"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($N,{}),o.jsx($d,{})]})]})}),o.jsx("main",{className:"flex-1 flex overflow-hidden bg-background",children:n?o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx("div",{className:"animate-pulse-subtle",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-muted-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),o.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),o.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),o.jsx("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),o.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),o.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),o.jsx("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})})}):e?o.jsx(dz,{transaction:e,refreshTransaction:c}):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 text-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-muted-foreground mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),o.jsx("h3",{className:"text-lg font-medium mb-2 text-foreground",children:"Transaction Not Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"The transaction you're looking for doesn't exist or has been deleted."}),o.jsx(me,{onClick:()=>a("/"),className:"inline-flex items-center justify-center px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Return to Dashboard"})]})})]})},fz=()=>{const t=DA();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var Rh=t=>t.type==="checkbox",tl=t=>t instanceof Date,Fn=t=>t==null;const Vk=t=>typeof t=="object";var Gr=t=>!Fn(t)&&!Array.isArray(t)&&Vk(t)&&!tl(t),qk=t=>Gr(t)&&t.target?Rh(t.target)?t.target.checked:t.target.value:t,pz=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,zk=(t,e)=>t.has(pz(e)),mz=t=>{const e=t.constructor&&t.constructor.prototype;return Gr(e)&&e.hasOwnProperty("isPrototypeOf")},a1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Zn(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(a1&&(t instanceof Blob||t instanceof FileList))&&(r||Gr(t)))if(e=r?[]:{},!r&&!mz(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=Zn(t[n]));else return t;return e}var Vm=t=>Array.isArray(t)?t.filter(Boolean):[],Mr=t=>t===void 0,Ze=(t,e,r)=>{if(!e||!Gr(t))return r;const n=Vm(e.split(/[,[\].]+?/)).reduce((s,a)=>Fn(s)?s:s[a],t);return Mr(n)||n===t?Mr(t[e])?r:t[e]:n},Os=t=>typeof t=="boolean",i1=t=>/^\w*$/.test(t),Wk=t=>Vm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),sr=(t,e,r)=>{let n=-1;const s=i1(e)?[e]:Wk(e),a=s.length,i=a-1;for(;++n<a;){const l=s[n];let c=r;if(n!==i){const u=t[l];c=Gr(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const Bp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},oa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ui={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Hk=Le.createContext(null),qm=()=>Le.useContext(Hk),gz=t=>{const{children:e,...r}=t;return Le.createElement(Hk.Provider,{value:r},e)};var Gk=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const i=a;return e._proxyFormState[i]!==oa.all&&(e._proxyFormState[i]=!n||oa.all),r&&(r[i]=!0),t[i]}});return s},Xn=t=>Gr(t)&&!Object.keys(t).length,Yk=(t,e,r,n)=>{r(t);const{name:s,...a}=t;return Xn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(i=>e[i]===(!n||oa.all))},yd=t=>Array.isArray(t)?t:[t],Kk=(t,e,r)=>!t||!e||t===e||yd(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function o1(t){const e=Le.useRef(t);e.current=t,Le.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function yz(t){const e=qm(),{control:r=e.control,disabled:n,name:s,exact:a}=t||{},[i,l]=Le.useState(r._formState),c=Le.useRef(!0),u=Le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Le.useRef(s);return d.current=s,o1({disabled:n,next:h=>c.current&&Kk(d.current,h.name,a)&&Yk(h,u.current,r._updateFormState)&&l({...r._formState,...h}),subject:r._subjects.state}),Le.useEffect(()=>(c.current=!0,u.current.isValid&&r._updateValid(!0),()=>{c.current=!1}),[r]),Gk(i,r,u.current,!1)}var Ba=t=>typeof t=="string",Jk=(t,e,r,n,s)=>Ba(t)?(n&&e.watch.add(t),Ze(r,t,s)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Ze(r,a))):(n&&(e.watchAll=!0),r);function vz(t){const e=qm(),{control:r=e.control,name:n,defaultValue:s,disabled:a,exact:i}=t||{},l=Le.useRef(n);l.current=n,o1({disabled:a,subject:r._subjects.values,next:d=>{Kk(l.current,d.name,i)&&u(Zn(Jk(l.current,r._names,d.values||r._formValues,!1,s)))}});const[c,u]=Le.useState(r._getWatch(n,s));return Le.useEffect(()=>r._removeUnmounted()),c}function xz(t){const e=qm(),{name:r,disabled:n,control:s=e.control,shouldUnregister:a}=t,i=zk(s._names.array,r),l=vz({control:s,name:r,defaultValue:Ze(s._formValues,r,Ze(s._defaultValues,r,t.defaultValue)),exact:!0}),c=yz({control:s,name:r,exact:!0}),u=Le.useRef(s.register(r,{...t.rules,value:l,...Os(t.disabled)?{disabled:t.disabled}:{}}));return Le.useEffect(()=>{const d=s._options.shouldUnregister||a,h=(f,m)=>{const g=Ze(s._fields,f);g&&g._f&&(g._f.mount=m)};if(h(r,!0),d){const f=Zn(Ze(s._options.defaultValues,r));sr(s._defaultValues,r,f),Mr(Ze(s._formValues,r))&&sr(s._formValues,r,f)}return()=>{(i?d&&!s._state.action:d)?s.unregister(r):h(r,!1)}},[r,s,i,a]),Le.useEffect(()=>{Ze(s._fields,r)&&s._updateDisabledField({disabled:n,fields:s._fields,name:r,value:Ze(s._fields,r)._f.value})},[n,r,s]),{field:{name:r,value:l,...Os(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:Le.useCallback(d=>u.current.onChange({target:{value:qk(d),name:r},type:Bp.CHANGE}),[r]),onBlur:Le.useCallback(()=>u.current.onBlur({target:{value:Ze(s._formValues,r),name:r},type:Bp.BLUR}),[r,s]),ref:Le.useCallback(d=>{const h=Ze(s._fields,r);h&&d&&(h._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:f=>d.setCustomValidity(f),reportValidity:()=>d.reportValidity()})},[s._fields,r])},formState:c,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ze(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ze(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ze(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ze(c.validatingFields,r)},error:{enumerable:!0,get:()=>Ze(c.errors,r)}})}}const bz=t=>t.render(xz(t));var Zk=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},Kw=t=>({isOnSubmit:!t||t===oa.onSubmit,isOnBlur:t===oa.onBlur,isOnChange:t===oa.onChange,isOnAll:t===oa.all,isOnTouch:t===oa.onTouched}),Jw=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const vd=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const a=Ze(t,s);if(a){const{_f:i,...l}=a;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],s)&&!n)return!0;if(i.ref&&e(i.ref,i.name)&&!n)return!0;if(vd(l,e))break}else if(Gr(l)&&vd(l,e))break}}};var wz=(t,e,r)=>{const n=yd(Ze(t,r));return sr(n,"root",e[r]),sr(t,r,n),t},l1=t=>t.type==="file",gi=t=>typeof t=="function",$p=t=>{if(!a1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},lp=t=>Ba(t),c1=t=>t.type==="radio",Up=t=>t instanceof RegExp;const Zw={value:!1,isValid:!1},Xw={value:!0,isValid:!0};var Xk=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Mr(t[0].attributes.value)?Mr(t[0].value)||t[0].value===""?Xw:{value:t[0].value,isValid:!0}:Xw:Zw}return Zw};const Qw={isValid:!1,value:null};var Qk=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Qw):Qw;function e5(t,e,r="validate"){if(lp(t)||Array.isArray(t)&&t.every(lp)||Os(t)&&!t)return{type:r,message:lp(t)?t:"",ref:e}}var nc=t=>Gr(t)&&!Up(t)?t:{value:t,message:""},t5=async(t,e,r,n,s)=>{const{ref:a,refs:i,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:m,name:g,valueAsNumber:v,mount:b,disabled:_}=t._f,S=Ze(e,g);if(!b||_)return{};const N=i?i[0]:a,k=D=>{n&&N.reportValidity&&(N.setCustomValidity(Os(D)?"":D||""),N.reportValidity())},A={},W=c1(a),I=Rh(a),F=W||I,ee=(v||l1(a))&&Mr(a.value)&&Mr(S)||$p(a)&&a.value===""||S===""||Array.isArray(S)&&!S.length,ae=Zk.bind(null,g,r,A),R=(D,T,B,z=ui.maxLength,re=ui.minLength)=>{const $=D?T:B;A[g]={type:D?z:re,message:$,ref:a,...ae(D?z:re,$)}};if(s?!Array.isArray(S)||!S.length:l&&(!F&&(ee||Fn(S))||Os(S)&&!S||I&&!Xk(i).isValid||W&&!Qk(i).isValid)){const{value:D,message:T}=lp(l)?{value:!!l,message:l}:nc(l);if(D&&(A[g]={type:ui.required,message:T,ref:N,...ae(ui.required,T)},!r))return k(T),A}if(!ee&&(!Fn(d)||!Fn(h))){let D,T;const B=nc(h),z=nc(d);if(!Fn(S)&&!isNaN(S)){const re=a.valueAsNumber||S&&+S;Fn(B.value)||(D=re>B.value),Fn(z.value)||(T=re<z.value)}else{const re=a.valueAsDate||new Date(S),$=he=>new Date(new Date().toDateString()+" "+he),V=a.type=="time",X=a.type=="week";Ba(B.value)&&S&&(D=V?$(S)>$(B.value):X?S>B.value:re>new Date(B.value)),Ba(z.value)&&S&&(T=V?$(S)<$(z.value):X?S<z.value:re<new Date(z.value))}if((D||T)&&(R(!!D,B.message,z.message,ui.max,ui.min),!r))return k(A[g].message),A}if((c||u)&&!ee&&(Ba(S)||s&&Array.isArray(S))){const D=nc(c),T=nc(u),B=!Fn(D.value)&&S.length>+D.value,z=!Fn(T.value)&&S.length<+T.value;if((B||z)&&(R(B,D.message,T.message),!r))return k(A[g].message),A}if(f&&!ee&&Ba(S)){const{value:D,message:T}=nc(f);if(Up(D)&&!S.match(D)&&(A[g]={type:ui.pattern,message:T,ref:a,...ae(ui.pattern,T)},!r))return k(T),A}if(m){if(gi(m)){const D=await m(S,e),T=e5(D,N);if(T&&(A[g]={...T,...ae(ui.validate,T.message)},!r))return k(T.message),A}else if(Gr(m)){let D={};for(const T in m){if(!Xn(D)&&!r)break;const B=e5(await m[T](S,e),N,T);B&&(D={...B,...ae(T,B.message)},k(B.message),r&&(A[g]=D))}if(!Xn(D)&&(A[g]={ref:N,...D},!r))return A}}return k(!0),A};function Sz(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Mr(t)?n++:t[e[n++]];return t}function _z(t){for(const e in t)if(t.hasOwnProperty(e)&&!Mr(t[e]))return!1;return!0}function rn(t,e){const r=Array.isArray(e)?e:i1(e)?[e]:Wk(e),n=r.length===1?t:Sz(t,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(Gr(n)&&Xn(n)||Array.isArray(n)&&_z(n))&&rn(t,r.slice(0,-1)),t}var Ty=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},s0=t=>Fn(t)||!Vk(t);function eo(t,e){if(s0(t)||s0(e))return t===e;if(tl(t)&&tl(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const a=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const i=e[s];if(tl(a)&&tl(i)||Gr(a)&&Gr(i)||Array.isArray(a)&&Array.isArray(i)?!eo(a,i):a!==i)return!1}}return!0}var e3=t=>t.type==="select-multiple",jz=t=>c1(t)||Rh(t),Ly=t=>$p(t)&&t.isConnected,t3=t=>{for(const e in t)if(gi(t[e]))return!0;return!1};function Vp(t,e={}){const r=Array.isArray(t);if(Gr(t)||r)for(const n in t)Array.isArray(t[n])||Gr(t[n])&&!t3(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Vp(t[n],e[n])):Fn(t[n])||(e[n]=!0);return e}function r3(t,e,r){const n=Array.isArray(t);if(Gr(t)||n)for(const s in t)Array.isArray(t[s])||Gr(t[s])&&!t3(t[s])?Mr(e)||s0(r[s])?r[s]=Array.isArray(t[s])?Vp(t[s],[]):{...Vp(t[s])}:r3(t[s],Fn(e)?{}:e[s],r[s]):r[s]=!eo(t[s],e[s]);return r}var Ku=(t,e)=>r3(t,e,Vp(e)),n3=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Mr(t)?t:e?t===""?NaN:t&&+t:r&&Ba(t)?new Date(t):n?n(t):t;function Dy(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return l1(e)?e.files:c1(e)?Qk(t.refs).value:e3(e)?[...e.selectedOptions].map(({value:r})=>r):Rh(e)?Xk(t.refs).value:n3(Mr(e.value)?t.ref.value:e.value,t)}var Nz=(t,e,r,n)=>{const s={};for(const a of t){const i=Ze(e,a);i&&sr(s,a,i._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Ju=t=>Mr(t)?t:Up(t)?t.source:Gr(t)?Up(t.value)?t.value.source:t.value:t;const r5="AsyncFunction";var Cz=t=>(!t||!t.validate)&&!!(gi(t.validate)&&t.validate.constructor.name===r5||Gr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===r5)),kz=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function n5(t,e,r){const n=Ze(t,r);if(n||i1(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),i=Ze(e,a),l=Ze(t,a);if(i&&!Array.isArray(i)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};s.pop()}return{name:r}}var Az=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,Pz=(t,e)=>!Vm(Ze(t,e)).length&&rn(t,e);const Ez={mode:oa.onSubmit,reValidateMode:oa.onChange,shouldFocusError:!0};function Tz(t={}){let e={...Ez,...t},r={submitCount:0,isDirty:!1,isLoading:gi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Gr(e.defaultValues)||Gr(e.values)?Zn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Zn(s),i={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Ty(),array:Ty(),state:Ty()},f=Kw(e.mode),m=Kw(e.reValidateMode),g=e.criteriaMode===oa.all,v=Y=>J=>{clearTimeout(u),u=setTimeout(Y,J)},b=async Y=>{if(!t.disabled&&(d.isValid||Y)){const J=e.resolver?Xn((await F()).errors):await ae(n,!0);J!==r.isValid&&h.state.next({isValid:J})}},_=(Y,J)=>{!t.disabled&&(d.isValidating||d.validatingFields)&&((Y||Array.from(l.mount)).forEach(ie=>{ie&&(J?sr(r.validatingFields,ie,J):rn(r.validatingFields,ie))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Xn(r.validatingFields)}))},S=(Y,J=[],ie,_e,ye=!0,Se=!0)=>{if(_e&&ie&&!t.disabled){if(i.action=!0,Se&&Array.isArray(Ze(n,Y))){const Be=ie(Ze(n,Y),_e.argA,_e.argB);ye&&sr(n,Y,Be)}if(Se&&Array.isArray(Ze(r.errors,Y))){const Be=ie(Ze(r.errors,Y),_e.argA,_e.argB);ye&&sr(r.errors,Y,Be),Pz(r.errors,Y)}if(d.touchedFields&&Se&&Array.isArray(Ze(r.touchedFields,Y))){const Be=ie(Ze(r.touchedFields,Y),_e.argA,_e.argB);ye&&sr(r.touchedFields,Y,Be)}d.dirtyFields&&(r.dirtyFields=Ku(s,a)),h.state.next({name:Y,isDirty:D(Y,J),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else sr(a,Y,J)},N=(Y,J)=>{sr(r.errors,Y,J),h.state.next({errors:r.errors})},k=Y=>{r.errors=Y,h.state.next({errors:r.errors,isValid:!1})},A=(Y,J,ie,_e)=>{const ye=Ze(n,Y);if(ye){const Se=Ze(a,Y,Mr(ie)?Ze(s,Y):ie);Mr(Se)||_e&&_e.defaultChecked||J?sr(a,Y,J?Se:Dy(ye._f)):z(Y,Se),i.mount&&b()}},W=(Y,J,ie,_e,ye)=>{let Se=!1,Be=!1;const qe={name:Y};if(!t.disabled){const at=!!(Ze(n,Y)&&Ze(n,Y)._f&&Ze(n,Y)._f.disabled);if(!ie||_e){d.isDirty&&(Be=r.isDirty,r.isDirty=qe.isDirty=D(),Se=Be!==qe.isDirty);const ot=at||eo(Ze(s,Y),J);Be=!!(!at&&Ze(r.dirtyFields,Y)),ot||at?rn(r.dirtyFields,Y):sr(r.dirtyFields,Y,!0),qe.dirtyFields=r.dirtyFields,Se=Se||d.dirtyFields&&Be!==!ot}if(ie){const ot=Ze(r.touchedFields,Y);ot||(sr(r.touchedFields,Y,ie),qe.touchedFields=r.touchedFields,Se=Se||d.touchedFields&&ot!==ie)}Se&&ye&&h.state.next(qe)}return Se?qe:{}},I=(Y,J,ie,_e)=>{const ye=Ze(r.errors,Y),Se=d.isValid&&Os(J)&&r.isValid!==J;if(t.delayError&&ie?(c=v(()=>N(Y,ie)),c(t.delayError)):(clearTimeout(u),c=null,ie?sr(r.errors,Y,ie):rn(r.errors,Y)),(ie?!eo(ye,ie):ye)||!Xn(_e)||Se){const Be={..._e,...Se&&Os(J)?{isValid:J}:{},errors:r.errors,name:Y};r={...r,...Be},h.state.next(Be)}},F=async Y=>{_(Y,!0);const J=await e.resolver(a,e.context,Nz(Y||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return _(Y),J},ee=async Y=>{const{errors:J}=await F(Y);if(Y)for(const ie of Y){const _e=Ze(J,ie);_e?sr(r.errors,ie,_e):rn(r.errors,ie)}else r.errors=J;return J},ae=async(Y,J,ie={valid:!0})=>{for(const _e in Y){const ye=Y[_e];if(ye){const{_f:Se,...Be}=ye;if(Se){const qe=l.array.has(Se.name),at=ye._f&&Cz(ye._f);at&&d.validatingFields&&_([_e],!0);const ot=await t5(ye,a,g,e.shouldUseNativeValidation&&!J,qe);if(at&&d.validatingFields&&_([_e]),ot[Se.name]&&(ie.valid=!1,J))break;!J&&(Ze(ot,Se.name)?qe?wz(r.errors,ot,Se.name):sr(r.errors,Se.name,ot[Se.name]):rn(r.errors,Se.name))}!Xn(Be)&&await ae(Be,J,ie)}}return ie.valid},R=()=>{for(const Y of l.unMount){const J=Ze(n,Y);J&&(J._f.refs?J._f.refs.every(ie=>!Ly(ie)):!Ly(J._f.ref))&&H(Y)}l.unMount=new Set},D=(Y,J)=>!t.disabled&&(Y&&J&&sr(a,Y,J),!eo(je(),s)),T=(Y,J,ie)=>Jk(Y,l,{...i.mount?a:Mr(J)?s:Ba(Y)?{[Y]:J}:J},ie,J),B=Y=>Vm(Ze(i.mount?a:s,Y,t.shouldUnregister?Ze(s,Y,[]):[])),z=(Y,J,ie={})=>{const _e=Ze(n,Y);let ye=J;if(_e){const Se=_e._f;Se&&(!Se.disabled&&sr(a,Y,n3(J,Se)),ye=$p(Se.ref)&&Fn(J)?"":J,e3(Se.ref)?[...Se.ref.options].forEach(Be=>Be.selected=ye.includes(Be.value)):Se.refs?Rh(Se.ref)?Se.refs.length>1?Se.refs.forEach(Be=>(!Be.defaultChecked||!Be.disabled)&&(Be.checked=Array.isArray(ye)?!!ye.find(qe=>qe===Be.value):ye===Be.value)):Se.refs[0]&&(Se.refs[0].checked=!!ye):Se.refs.forEach(Be=>Be.checked=Be.value===ye):l1(Se.ref)?Se.ref.value="":(Se.ref.value=ye,Se.ref.type||h.values.next({name:Y,values:{...a}})))}(ie.shouldDirty||ie.shouldTouch)&&W(Y,ye,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&he(Y)},re=(Y,J,ie)=>{for(const _e in J){const ye=J[_e],Se=`${Y}.${_e}`,Be=Ze(n,Se);(l.array.has(Y)||Gr(ye)||Be&&!Be._f)&&!tl(ye)?re(Se,ye,ie):z(Se,ye,ie)}},$=(Y,J,ie={})=>{const _e=Ze(n,Y),ye=l.array.has(Y),Se=Zn(J);sr(a,Y,Se),ye?(h.array.next({name:Y,values:{...a}}),(d.isDirty||d.dirtyFields)&&ie.shouldDirty&&h.state.next({name:Y,dirtyFields:Ku(s,a),isDirty:D(Y,Se)})):_e&&!_e._f&&!Fn(Se)?re(Y,Se,ie):z(Y,Se,ie),Jw(Y,l)&&h.state.next({...r}),h.values.next({name:i.mount?Y:void 0,values:{...a}})},V=async Y=>{i.mount=!0;const J=Y.target;let ie=J.name,_e=!0;const ye=Ze(n,ie),Se=()=>J.type?Dy(ye._f):qk(Y),Be=qe=>{_e=Number.isNaN(qe)||tl(qe)&&isNaN(qe.getTime())||eo(qe,Ze(a,ie,qe))};if(ye){let qe,at;const ot=Se(),Lt=Y.type===Bp.BLUR||Y.type===Bp.FOCUS_OUT,ut=!kz(ye._f)&&!e.resolver&&!Ze(r.errors,ie)&&!ye._f.deps||Az(Lt,Ze(r.touchedFields,ie),r.isSubmitted,m,f),_t=Jw(ie,l,Lt);sr(a,ie,ot),Lt?(ye._f.onBlur&&ye._f.onBlur(Y),c&&c(0)):ye._f.onChange&&ye._f.onChange(Y);const He=W(ie,ot,Lt,!1),De=!Xn(He)||_t;if(!Lt&&h.values.next({name:ie,type:Y.type,values:{...a}}),ut)return d.isValid&&(t.mode==="onBlur"?Lt&&b():b()),De&&h.state.next({name:ie,..._t?{}:He});if(!Lt&&_t&&h.state.next({...r}),e.resolver){const{errors:rt}=await F([ie]);if(Be(ot),_e){const At=n5(r.errors,n,ie),jt=n5(rt,n,At.name||ie);qe=jt.error,ie=jt.name,at=Xn(rt)}}else _([ie],!0),qe=(await t5(ye,a,g,e.shouldUseNativeValidation))[ie],_([ie]),Be(ot),_e&&(qe?at=!1:d.isValid&&(at=await ae(n,!0)));_e&&(ye._f.deps&&he(ye._f.deps),I(ie,at,qe,He))}},X=(Y,J)=>{if(Ze(r.errors,J)&&Y.focus)return Y.focus(),1},he=async(Y,J={})=>{let ie,_e;const ye=yd(Y);if(e.resolver){const Se=await ee(Mr(Y)?Y:ye);ie=Xn(Se),_e=Y?!ye.some(Be=>Ze(Se,Be)):ie}else Y?(_e=(await Promise.all(ye.map(async Se=>{const Be=Ze(n,Se);return await ae(Be&&Be._f?{[Se]:Be}:Be)}))).every(Boolean),!(!_e&&!r.isValid)&&b()):_e=ie=await ae(n);return h.state.next({...!Ba(Y)||d.isValid&&ie!==r.isValid?{}:{name:Y},...e.resolver||!Y?{isValid:ie}:{},errors:r.errors}),J.shouldFocus&&!_e&&vd(n,X,Y?ye:l.mount),_e},je=Y=>{const J={...i.mount?a:s};return Mr(Y)?J:Ba(Y)?Ze(J,Y):Y.map(ie=>Ze(J,ie))},L=(Y,J)=>({invalid:!!Ze((J||r).errors,Y),isDirty:!!Ze((J||r).dirtyFields,Y),error:Ze((J||r).errors,Y),isValidating:!!Ze(r.validatingFields,Y),isTouched:!!Ze((J||r).touchedFields,Y)}),G=Y=>{Y&&yd(Y).forEach(J=>rn(r.errors,J)),h.state.next({errors:Y?r.errors:{}})},Z=(Y,J,ie)=>{const _e=(Ze(n,Y,{_f:{}})._f||{}).ref,ye=Ze(r.errors,Y)||{},{ref:Se,message:Be,type:qe,...at}=ye;sr(r.errors,Y,{...at,...J,ref:_e}),h.state.next({name:Y,errors:r.errors,isValid:!1}),ie&&ie.shouldFocus&&_e&&_e.focus&&_e.focus()},se=(Y,J)=>gi(Y)?h.values.subscribe({next:ie=>Y(T(void 0,J),ie)}):T(Y,J,!0),H=(Y,J={})=>{for(const ie of Y?yd(Y):l.mount)l.mount.delete(ie),l.array.delete(ie),J.keepValue||(rn(n,ie),rn(a,ie)),!J.keepError&&rn(r.errors,ie),!J.keepDirty&&rn(r.dirtyFields,ie),!J.keepTouched&&rn(r.touchedFields,ie),!J.keepIsValidating&&rn(r.validatingFields,ie),!e.shouldUnregister&&!J.keepDefaultValue&&rn(s,ie);h.values.next({values:{...a}}),h.state.next({...r,...J.keepDirty?{isDirty:D()}:{}}),!J.keepIsValid&&b()},ne=({disabled:Y,name:J,field:ie,fields:_e,value:ye})=>{if(Os(Y)&&i.mount||Y){const Se=Y?void 0:Mr(ye)?Dy(ie?ie._f:Ze(_e,J)._f):ye;sr(a,J,Se),W(J,Se,!1,!1,!0)}},oe=(Y,J={})=>{let ie=Ze(n,Y);const _e=Os(J.disabled)||Os(t.disabled);return sr(n,Y,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:Y}},name:Y,mount:!0,...J}}),l.mount.add(Y),ie?ne({field:ie,disabled:Os(J.disabled)?J.disabled:t.disabled,name:Y,value:J.value}):A(Y,!0,J.value),{..._e?{disabled:J.disabled||t.disabled}:{},...e.progressive?{required:!!J.required,min:Ju(J.min),max:Ju(J.max),minLength:Ju(J.minLength),maxLength:Ju(J.maxLength),pattern:Ju(J.pattern)}:{},name:Y,onChange:V,onBlur:V,ref:ye=>{if(ye){oe(Y,J),ie=Ze(n,Y);const Se=Mr(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,Be=jz(Se),qe=ie._f.refs||[];if(Be?qe.find(at=>at===Se):Se===ie._f.ref)return;sr(n,Y,{_f:{...ie._f,...Be?{refs:[...qe.filter(Ly),Se,...Array.isArray(Ze(s,Y))?[{}]:[]],ref:{type:Se.type,name:Y}}:{ref:Se}}}),A(Y,!1,void 0,Se)}else ie=Ze(n,Y,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||J.shouldUnregister)&&!(zk(l.array,Y)&&i.action)&&l.unMount.add(Y)}}},ce=()=>e.shouldFocusError&&vd(n,X,l.mount),ve=Y=>{Os(Y)&&(h.state.next({disabled:Y}),vd(n,(J,ie)=>{const _e=Ze(n,ie);_e&&(J.disabled=_e._f.disabled||Y,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(ye=>{ye.disabled=_e._f.disabled||Y}))},0,!1))},Ae=(Y,J)=>async ie=>{let _e;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let ye=Zn(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:Be}=await F();r.errors=Se,ye=Be}else await ae(n);if(rn(r.errors,"root"),Xn(r.errors)){h.state.next({errors:{}});try{await Y(ye,ie)}catch(Se){_e=Se}}else J&&await J({...r.errors},ie),ce(),setTimeout(ce);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xn(r.errors)&&!_e,submitCount:r.submitCount+1,errors:r.errors}),_e)throw _e},we=(Y,J={})=>{Ze(n,Y)&&(Mr(J.defaultValue)?$(Y,Zn(Ze(s,Y))):($(Y,J.defaultValue),sr(s,Y,Zn(J.defaultValue))),J.keepTouched||rn(r.touchedFields,Y),J.keepDirty||(rn(r.dirtyFields,Y),r.isDirty=J.defaultValue?D(Y,Zn(Ze(s,Y))):D()),J.keepError||(rn(r.errors,Y),d.isValid&&b()),h.state.next({...r}))},ke=(Y,J={})=>{const ie=Y?Zn(Y):s,_e=Zn(ie),ye=Xn(Y),Se=ye?s:_e;if(J.keepDefaultValues||(s=ie),!J.keepValues){if(J.keepDirtyValues){const Be=new Set([...l.mount,...Object.keys(Ku(s,a))]);for(const qe of Array.from(Be))Ze(r.dirtyFields,qe)?sr(Se,qe,Ze(a,qe)):$(qe,Ze(Se,qe))}else{if(a1&&Mr(Y))for(const Be of l.mount){const qe=Ze(n,Be);if(qe&&qe._f){const at=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if($p(at)){const ot=at.closest("form");if(ot){ot.reset();break}}}}n={}}a=t.shouldUnregister?J.keepDefaultValues?Zn(s):{}:Zn(Se),h.array.next({values:{...Se}}),h.values.next({values:{...Se}})}l={mount:J.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!J.keepIsValid||!!J.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:J.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:J.keepDirty?r.isDirty:!!(J.keepDefaultValues&&!eo(Y,s)),isSubmitted:J.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:J.keepDirtyValues?J.keepDefaultValues&&a?Ku(s,a):r.dirtyFields:J.keepDefaultValues&&Y?Ku(s,Y):J.keepDirty?r.dirtyFields:{},touchedFields:J.keepTouched?r.touchedFields:{},errors:J.keepErrors?r.errors:{},isSubmitSuccessful:J.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ke=(Y,J)=>ke(gi(Y)?Y(a):Y,J);return{control:{register:oe,unregister:H,getFieldState:L,handleSubmit:Ae,setError:Z,_executeSchema:F,_getWatch:T,_getDirty:D,_updateValid:b,_removeUnmounted:R,_updateFieldArray:S,_updateDisabledField:ne,_getFieldArray:B,_reset:ke,_resetDefaultValues:()=>gi(e.defaultValues)&&e.defaultValues().then(Y=>{Ke(Y,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:Y=>{r={...r,...Y}},_disableForm:ve,_subjects:h,_proxyFormState:d,_setErrors:k,get _fields(){return n},get _formValues(){return a},get _state(){return i},set _state(Y){i=Y},get _defaultValues(){return s},get _names(){return l},set _names(Y){l=Y},get _formState(){return r},set _formState(Y){r=Y},get _options(){return e},set _options(Y){e={...e,...Y}}},trigger:he,register:oe,handleSubmit:Ae,watch:se,setValue:$,getValues:je,reset:Ke,resetField:we,clearErrors:G,unregister:H,setError:Z,setFocus:(Y,J={})=>{const ie=Ze(n,Y),_e=ie&&ie._f;if(_e){const ye=_e.refs?_e.refs[0]:_e.ref;ye.focus&&(ye.focus(),J.shouldSelect&&ye.select())}},getFieldState:L}}function s3(t={}){const e=Le.useRef(),r=Le.useRef(),[n,s]=Le.useState({isDirty:!1,isValidating:!1,isLoading:gi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:gi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Tz(t),formState:n});const a=e.current.control;return a._options=t,o1({subject:a._subjects.state,next:i=>{Yk(i,a._proxyFormState,a._updateFormState,!0)&&s({...a._formState})}}),Le.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Le.useEffect(()=>{if(a._proxyFormState.isDirty){const i=a._getDirty();i!==n.isDirty&&a._subjects.state.next({isDirty:i})}},[a,n.isDirty]),Le.useEffect(()=>{t.values&&!eo(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,s(i=>({...i}))):a._resetDefaultValues()},[t.values,a]),Le.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Le.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Le.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),Le.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[n]),e.current.formState=Gk(n,a),e.current}const a3=gz,i3=w.createContext({}),xd=({...t})=>o.jsx(i3.Provider,{value:{name:t.name},children:o.jsx(bz,{...t})}),zm=()=>{const t=w.useContext(i3),e=w.useContext(o3),{getFieldState:r,formState:n}=qm(),s=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},o3=w.createContext({}),kc=w.forwardRef(({className:t,...e},r)=>{const n=w.useId();return o.jsx(o3.Provider,{value:{id:n},children:o.jsx("div",{ref:r,className:Ve("space-y-2",t),...e})})});kc.displayName="FormItem";const Ac=w.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:s}=zm();return o.jsx(Ne,{ref:r,className:Ve(n&&"text-destructive",t),htmlFor:s,...e})});Ac.displayName="FormLabel";const Pc=w.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:a}=zm();return o.jsx(mh,{ref:e,id:n,"aria-describedby":r?`${s} ${a}`:`${s}`,"aria-invalid":!!r,...t})});Pc.displayName="FormControl";const Lz=w.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=zm();return o.jsx("p",{ref:r,id:n,className:Ve("text-sm text-muted-foreground",t),...e})});Lz.displayName="FormDescription";const Ec=w.forwardRef(({className:t,children:e,...r},n)=>{const{error:s,formMessageId:a}=zm(),i=s?String(s==null?void 0:s.message):e;return i?o.jsx("p",{ref:n,id:a,className:Ve("text-sm font-medium text-destructive",t),...r,children:i}):null});Ec.displayName="FormMessage";const Dz="transactly-db",Rz=1,Oh=async()=>Am(Dz,Rz,{upgrade(t){t.objectStoreNames.contains("transactions")||t.createObjectStore("transactions",{keyPath:"id"})}}),Oz=async t=>{const e=await Oh(),r=e.transaction("transactions","readwrite");await r.objectStore("transactions").add(t),await r.done,e.close()},Iz=async t=>{const e=await Oh(),s=await e.transaction("transactions","readonly").objectStore("transactions").get(t);return e.close(),s||null},Mz=async()=>{const t=await Oh(),n=await t.transaction("transactions","readonly").objectStore("transactions").getAll();return t.close(),n},Fz=async t=>{const e=await Oh(),r=e.transaction("transactions","readwrite");await r.objectStore("transactions").put(t),await r.done,e.close()},Bz=async t=>{const e=await Oh(),r=e.transaction("transactions","readwrite");await r.objectStore("transactions").delete(t),await r.done,e.close()},l3={getAllTransactions:async t=>{try{const e=await Mz();return t?e.filter(r=>r.user_id===t):e}catch(e){return console.error("Error getting all transactions:",e),[]}},getTransaction:async t=>{try{return await Iz(t)}catch(e){return console.error("Error getting transaction:",e),null}},addTransaction:async t=>{try{const e={...t,payments:t.payments||[],notes:t.notes||[],attachments:t.attachments||[],suppliers:t.suppliers||[],buyers:t.buyers||[],updatedAt:new Date().toISOString()};await Oz(e)}catch(e){throw console.error("Error adding transaction:",e),e}},updateTransaction:async t=>{try{const e={...t,payments:t.payments||[],notes:t.notes||[],attachments:t.attachments||[],suppliers:t.suppliers||[],buyers:t.buyers||[],updatedAt:new Date().toISOString()};await Fz(e)}catch(e){throw console.error("Error updating transaction:",e),e}},deleteTransaction:async t=>{try{await Bz(t)}catch(e){throw console.error("Error deleting transaction:",e),e}}};var Gt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),i={};for(const l of a)i[l]=s[l];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},t.find=(s,a)=>{for(const i of s)if(a(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Gt||(Gt={}));var a0;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(a0||(a0={}));const st=Gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),to=t=>{switch(typeof t){case"undefined":return st.undefined;case"string":return st.string;case"number":return isNaN(t)?st.nan:st.number;case"boolean":return st.boolean;case"function":return st.function;case"bigint":return st.bigint;case"symbol":return st.symbol;case"object":return Array.isArray(t)?st.array:t===null?st.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?st.promise:typeof Map<"u"&&t instanceof Map?st.map:typeof Set<"u"&&t instanceof Set?st.set:typeof Date<"u"&&t instanceof Date?st.date:st.object;default:return st.unknown}},ze=Gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$z=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class xs extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let l=n,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(i))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof xs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}xs.create=t=>new xs(t);const Zc=(t,e)=>{let r;switch(t.code){case ze.invalid_type:t.received===st.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ze.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Gt.jsonStringifyReplacer)}`;break;case ze.unrecognized_keys:r=`Unrecognized key(s) in object: ${Gt.joinValues(t.keys,", ")}`;break;case ze.invalid_union:r="Invalid input";break;case ze.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Gt.joinValues(t.options)}`;break;case ze.invalid_enum_value:r=`Invalid enum value. Expected ${Gt.joinValues(t.options)}, received '${t.received}'`;break;case ze.invalid_arguments:r="Invalid function arguments";break;case ze.invalid_return_type:r="Invalid function return type";break;case ze.invalid_date:r="Invalid date";break;case ze.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Gt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ze.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ze.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ze.custom:r="Invalid input";break;case ze.invalid_intersection_types:r="Intersection results could not be merged";break;case ze.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ze.not_finite:r="Number must be finite";break;default:r=e.defaultError,Gt.assertNever(t)}return{message:r}};let c3=Zc;function Uz(t){c3=t}function qp(){return c3}const zp=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(i,{data:e,defaultError:l}).message;return{...s,path:a,message:l}},Vz=[];function et(t,e){const r=qp(),n=zp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Zc?void 0:Zc].filter(s=>!!s)});t.common.issues.push(n)}class Tn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Ct;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,i=await s.value;n.push({key:a,value:i})}return Tn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return Ct;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const Ct=Object.freeze({status:"aborted"}),mc=t=>({status:"dirty",value:t}),Vn=t=>({status:"valid",value:t}),i0=t=>t.status==="aborted",o0=t=>t.status==="dirty",Xd=t=>t.status==="valid",Qd=t=>typeof Promise<"u"&&t instanceof Promise;function Wp(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function u3(t,e,r,n,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ft||(ft={}));var sd,ad;class Ha{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const s5=(t,e)=>{if(Xd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new xs(t.common.issues);return this._error=r,this._error}}};function Ot(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,l)=>{var c,u;const{message:d}=t;return i.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:s}}class $t{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return to(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:to(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tn,ctx:{common:e.parent.common,data:e.data,parsedType:to(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Qd(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:to(e)},a=this._parseSync({data:e,path:s.path,parent:s});return s5(s,a)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:to(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Qd(s)?s:Promise.resolve(s));return s5(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const i=e(s),l=()=>a.addIssue({code:ze.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ya({schema:this,typeName:St.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qa.create(this,this._def)}nullable(){return wo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return da.create(this,this._def)}promise(){return Qc.create(this,this._def)}or(e){return nh.create([this,e],this._def)}and(e){return sh.create(this,e,this._def)}transform(e){return new ya({...Ot(this._def),schema:this,typeName:St.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ch({...Ot(this._def),innerType:this,defaultValue:r,typeName:St.ZodDefault})}brand(){return new u1({typeName:St.ZodBranded,type:this,...Ot(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new uh({...Ot(this._def),innerType:this,catchValue:r,typeName:St.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ih.create(this,e)}readonly(){return dh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qz=/^c[^\s-]{8,}$/i,zz=/^[0-9a-z]+$/,Wz=/^[0-9A-HJKMNP-TV-Z]{26}$/,Hz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Gz=/^[a-z0-9_-]{21}$/i,Yz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Kz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Jz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ry;const Zz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Xz=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Qz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,d3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eW=new RegExp(`^${d3}$`);function h3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function tW(t){return new RegExp(`^${h3(t)}$`)}function f3(t){let e=`${d3}T${h3(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function rW(t,e){return!!((e==="v4"||!e)&&Zz.test(t)||(e==="v6"||!e)&&Xz.test(t))}class ca extends $t{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==st.string){const a=this._getOrReturnCtx(e);return et(a,{code:ze.invalid_type,expected:st.string,received:a.parsedType}),Ct}const n=new Tn;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),et(s,{code:ze.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),et(s,{code:ze.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,l=e.data.length<a.value;(i||l)&&(s=this._getOrReturnCtx(e,s),i?et(s,{code:ze.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&et(s,{code:ze.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Kz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"email",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Ry||(Ry=new RegExp(Jz,"u")),Ry.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"emoji",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Hz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"uuid",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Gz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"nanoid",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")qz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"cuid",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")zz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"cuid2",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Wz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"ulid",code:ze.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),et(s,{validation:"url",code:ze.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"regex",code:ze.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?f3(a).test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?eW.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?tW(a).test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{code:ze.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Yz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"duration",code:ze.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?rW(e.data,a.version)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"ip",code:ze.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?Qz.test(e.data)||(s=this._getOrReturnCtx(e,s),et(s,{validation:"base64",code:ze.invalid_string,message:a.message}),n.dirty()):Gt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:ze.invalid_string,...ft.errToObj(n)})}_addCheck(e){return new ca({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ft.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ft.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ft.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ft.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ft.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ft.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ft.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ft.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ft.errToObj(r)})}nonempty(e){return this.min(1,ft.errToObj(e))}trim(){return new ca({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ca({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ca({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ca.create=t=>{var e;return new ca({checks:[],typeName:St.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};function nW(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),i=parseInt(e.toFixed(s).replace(".",""));return a%i/Math.pow(10,s)}class vo extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==st.number){const a=this._getOrReturnCtx(e);return et(a,{code:ze.invalid_type,expected:st.number,received:a.parsedType}),Ct}let n;const s=new Tn;for(const a of this._def.checks)a.kind==="int"?Gt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),et(n,{code:ze.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?nW(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),et(n,{code:ze.not_finite,message:a.message}),s.dirty()):Gt.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ft.toString(r))}setLimit(e,r,n,s){return new vo({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ft.toString(s)}]})}_addCheck(e){return new vo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ft.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Gt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}vo.create=t=>new vo({checks:[],typeName:St.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class xo extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==st.bigint){const a=this._getOrReturnCtx(e);return et(a,{code:ze.invalid_type,expected:st.bigint,received:a.parsedType}),Ct}let n;const s=new Tn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),et(n,{code:ze.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Gt.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ft.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ft.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ft.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ft.toString(r))}setLimit(e,r,n,s){return new xo({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ft.toString(s)}]})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}xo.create=t=>{var e;return new xo({checks:[],typeName:St.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};class eh extends $t{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==st.boolean){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.boolean,received:n.parsedType}),Ct}return Vn(e.data)}}eh.create=t=>new eh({typeName:St.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class pl extends $t{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==st.date){const a=this._getOrReturnCtx(e);return et(a,{code:ze.invalid_type,expected:st.date,received:a.parsedType}),Ct}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return et(a,{code:ze.invalid_date}),Ct}const n=new Tn;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),et(s,{code:ze.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),et(s,{code:ze.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Gt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pl({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ft.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ft.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}pl.create=t=>new pl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:St.ZodDate,...Ot(t)});class Hp extends $t{_parse(e){if(this._getType(e)!==st.symbol){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.symbol,received:n.parsedType}),Ct}return Vn(e.data)}}Hp.create=t=>new Hp({typeName:St.ZodSymbol,...Ot(t)});class th extends $t{_parse(e){if(this._getType(e)!==st.undefined){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.undefined,received:n.parsedType}),Ct}return Vn(e.data)}}th.create=t=>new th({typeName:St.ZodUndefined,...Ot(t)});class rh extends $t{_parse(e){if(this._getType(e)!==st.null){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.null,received:n.parsedType}),Ct}return Vn(e.data)}}rh.create=t=>new rh({typeName:St.ZodNull,...Ot(t)});class Xc extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return Vn(e.data)}}Xc.create=t=>new Xc({typeName:St.ZodAny,...Ot(t)});class cl extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Vn(e.data)}}cl.create=t=>new cl({typeName:St.ZodUnknown,...Ot(t)});class Ni extends $t{_parse(e){const r=this._getOrReturnCtx(e);return et(r,{code:ze.invalid_type,expected:st.never,received:r.parsedType}),Ct}}Ni.create=t=>new Ni({typeName:St.ZodNever,...Ot(t)});class Gp extends $t{_parse(e){if(this._getType(e)!==st.undefined){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.void,received:n.parsedType}),Ct}return Vn(e.data)}}Gp.create=t=>new Gp({typeName:St.ZodVoid,...Ot(t)});class da extends $t{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==st.array)return et(r,{code:ze.invalid_type,expected:st.array,received:r.parsedType}),Ct;if(s.exactLength!==null){const i=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(i||l)&&(et(r,{code:i?ze.too_big:ze.too_small,minimum:l?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(et(r,{code:ze.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(et(r,{code:ze.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,l)=>s.type._parseAsync(new Ha(r,i,r.path,l)))).then(i=>Tn.mergeArray(n,i));const a=[...r.data].map((i,l)=>s.type._parseSync(new Ha(r,i,r.path,l)));return Tn.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new da({...this._def,minLength:{value:e,message:ft.toString(r)}})}max(e,r){return new da({...this._def,maxLength:{value:e,message:ft.toString(r)}})}length(e,r){return new da({...this._def,exactLength:{value:e,message:ft.toString(r)}})}nonempty(e){return this.min(1,e)}}da.create=(t,e)=>new da({type:t,minLength:null,maxLength:null,exactLength:null,typeName:St.ZodArray,...Ot(e)});function oc(t){if(t instanceof Er){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=qa.create(oc(n))}return new Er({...t._def,shape:()=>e})}else return t instanceof da?new da({...t._def,type:oc(t.element)}):t instanceof qa?qa.create(oc(t.unwrap())):t instanceof wo?wo.create(oc(t.unwrap())):t instanceof Ga?Ga.create(t.items.map(e=>oc(e))):t}class Er extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Gt.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==st.object){const u=this._getOrReturnCtx(e);return et(u,{code:ze.invalid_type,expected:st.object,received:u.parsedType}),Ct}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ni&&this._def.unknownKeys==="strip"))for(const u in s.data)i.includes(u)||l.push(u);const c=[];for(const u of i){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ha(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Ni){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(et(s,{code:ze.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ha(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Tn.mergeObjectSync(n,u)):Tn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ft.errToObj,new Er({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a,i,l;const c=(i=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&i!==void 0?i:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ft.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Er({...this._def,unknownKeys:"strip"})}passthrough(){return new Er({...this._def,unknownKeys:"passthrough"})}extend(e){return new Er({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Er({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:St.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Er({...this._def,catchall:e})}pick(e){const r={};return Gt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Er({...this._def,shape:()=>r})}omit(e){const r={};return Gt.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Er({...this._def,shape:()=>r})}deepPartial(){return oc(this)}partial(e){const r={};return Gt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new Er({...this._def,shape:()=>r})}required(e){const r={};return Gt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof qa;)a=a._def.innerType;r[n]=a}}),new Er({...this._def,shape:()=>r})}keyof(){return p3(Gt.objectKeys(this.shape))}}Er.create=(t,e)=>new Er({shape:()=>t,unknownKeys:"strip",catchall:Ni.create(),typeName:St.ZodObject,...Ot(e)});Er.strictCreate=(t,e)=>new Er({shape:()=>t,unknownKeys:"strict",catchall:Ni.create(),typeName:St.ZodObject,...Ot(e)});Er.lazycreate=(t,e)=>new Er({shape:t,unknownKeys:"strip",catchall:Ni.create(),typeName:St.ZodObject,...Ot(e)});class nh extends $t{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const i=a.map(l=>new xs(l.ctx.common.issues));return et(r,{code:ze.invalid_union,unionErrors:i}),Ct}if(r.common.async)return Promise.all(n.map(async a=>{const i={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=i.map(c=>new xs(c));return et(r,{code:ze.invalid_union,unionErrors:l}),Ct}}get options(){return this._def.options}}nh.create=(t,e)=>new nh({options:t,typeName:St.ZodUnion,...Ot(e)});const hi=t=>t instanceof ih?hi(t.schema):t instanceof ya?hi(t.innerType()):t instanceof oh?[t.value]:t instanceof bo?t.options:t instanceof lh?Gt.objectValues(t.enum):t instanceof ch?hi(t._def.innerType):t instanceof th?[void 0]:t instanceof rh?[null]:t instanceof qa?[void 0,...hi(t.unwrap())]:t instanceof wo?[null,...hi(t.unwrap())]:t instanceof u1||t instanceof dh?hi(t.unwrap()):t instanceof uh?hi(t._def.innerType):[];class Wm extends $t{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==st.object)return et(r,{code:ze.invalid_type,expected:st.object,received:r.parsedType}),Ct;const n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(et(r,{code:ze.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ct)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const a of r){const i=hi(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of i){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,a)}}return new Wm({typeName:St.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Ot(n)})}}function l0(t,e){const r=to(t),n=to(e);if(t===e)return{valid:!0,data:t};if(r===st.object&&n===st.object){const s=Gt.objectKeys(e),a=Gt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),i={...t,...e};for(const l of a){const c=l0(t[l],e[l]);if(!c.valid)return{valid:!1};i[l]=c.data}return{valid:!0,data:i}}else if(r===st.array&&n===st.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const i=t[a],l=e[a],c=l0(i,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===st.date&&n===st.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class sh extends $t{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,i)=>{if(i0(a)||i0(i))return Ct;const l=l0(a.value,i.value);return l.valid?((o0(a)||o0(i))&&r.dirty(),{status:r.value,value:l.data}):(et(n,{code:ze.invalid_intersection_types}),Ct)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}sh.create=(t,e,r)=>new sh({left:t,right:e,typeName:St.ZodIntersection,...Ot(r)});class Ga extends $t{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==st.array)return et(n,{code:ze.invalid_type,expected:st.array,received:n.parsedType}),Ct;if(n.data.length<this._def.items.length)return et(n,{code:ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ct;!this._def.rest&&n.data.length>this._def.items.length&&(et(n,{code:ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((i,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ha(n,i,n.path,l)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>Tn.mergeArray(r,i)):Tn.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Ga({...this._def,rest:e})}}Ga.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ga({items:t,typeName:St.ZodTuple,rest:null,...Ot(e)})};class ah extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==st.object)return et(n,{code:ze.invalid_type,expected:st.object,received:n.parsedType}),Ct;const s=[],a=this._def.keyType,i=this._def.valueType;for(const l in n.data)s.push({key:a._parse(new Ha(n,l,n.path,l)),value:i._parse(new Ha(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Tn.mergeObjectAsync(r,s):Tn.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof $t?new ah({keyType:e,valueType:r,typeName:St.ZodRecord,...Ot(n)}):new ah({keyType:ca.create(),valueType:e,typeName:St.ZodRecord,...Ot(r)})}}class Yp extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==st.map)return et(n,{code:ze.invalid_type,expected:st.map,received:n.parsedType}),Ct;const s=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([l,c],u)=>({key:s._parse(new Ha(n,l,n.path,[u,"key"])),value:a._parse(new Ha(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of i){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ct;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of i){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ct;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}Yp.create=(t,e,r)=>new Yp({valueType:e,keyType:t,typeName:St.ZodMap,...Ot(r)});class ml extends $t{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==st.set)return et(n,{code:ze.invalid_type,expected:st.set,received:n.parsedType}),Ct;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(et(n,{code:ze.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(et(n,{code:ze.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function i(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ct;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>a._parse(new Ha(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>i(c)):i(l)}min(e,r){return new ml({...this._def,minSize:{value:e,message:ft.toString(r)}})}max(e,r){return new ml({...this._def,maxSize:{value:e,message:ft.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ml.create=(t,e)=>new ml({valueType:t,minSize:null,maxSize:null,typeName:St.ZodSet,...Ot(e)});class Tc extends $t{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==st.function)return et(r,{code:ze.invalid_type,expected:st.function,received:r.parsedType}),Ct;function n(l,c){return zp({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qp(),Zc].filter(u=>!!u),issueData:{code:ze.invalid_arguments,argumentsError:c}})}function s(l,c){return zp({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qp(),Zc].filter(u=>!!u),issueData:{code:ze.invalid_return_type,returnTypeError:c}})}const a={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof Qc){const l=this;return Vn(async function(...c){const u=new xs([]),d=await l._def.args.parseAsync(c,a).catch(m=>{throw u.addIssue(n(c,m)),u}),h=await Reflect.apply(i,this,d);return await l._def.returns._def.type.parseAsync(h,a).catch(m=>{throw u.addIssue(s(h,m)),u})})}else{const l=this;return Vn(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new xs([n(c,u.error)]);const d=Reflect.apply(i,this,u.data),h=l._def.returns.safeParse(d,a);if(!h.success)throw new xs([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Tc({...this._def,args:Ga.create(e).rest(cl.create())})}returns(e){return new Tc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Tc({args:e||Ga.create([]).rest(cl.create()),returns:r||cl.create(),typeName:St.ZodFunction,...Ot(n)})}}class ih extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ih.create=(t,e)=>new ih({getter:t,typeName:St.ZodLazy,...Ot(e)});class oh extends $t{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return et(r,{received:r.data,code:ze.invalid_literal,expected:this._def.value}),Ct}return{status:"valid",value:e.data}}get value(){return this._def.value}}oh.create=(t,e)=>new oh({value:t,typeName:St.ZodLiteral,...Ot(e)});function p3(t,e){return new bo({values:t,typeName:St.ZodEnum,...Ot(e)})}class bo extends $t{constructor(){super(...arguments),sd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return et(r,{expected:Gt.joinValues(n),received:r.parsedType,code:ze.invalid_type}),Ct}if(Wp(this,sd)||u3(this,sd,new Set(this._def.values)),!Wp(this,sd).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return et(r,{received:r.data,code:ze.invalid_enum_value,options:n}),Ct}return Vn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return bo.create(e,{...this._def,...r})}exclude(e,r=this._def){return bo.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}sd=new WeakMap;bo.create=p3;class lh extends $t{constructor(){super(...arguments),ad.set(this,void 0)}_parse(e){const r=Gt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==st.string&&n.parsedType!==st.number){const s=Gt.objectValues(r);return et(n,{expected:Gt.joinValues(s),received:n.parsedType,code:ze.invalid_type}),Ct}if(Wp(this,ad)||u3(this,ad,new Set(Gt.getValidEnumValues(this._def.values))),!Wp(this,ad).has(e.data)){const s=Gt.objectValues(r);return et(n,{received:n.data,code:ze.invalid_enum_value,options:s}),Ct}return Vn(e.data)}get enum(){return this._def.values}}ad=new WeakMap;lh.create=(t,e)=>new lh({values:t,typeName:St.ZodNativeEnum,...Ot(e)});class Qc extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==st.promise&&r.common.async===!1)return et(r,{code:ze.invalid_type,expected:st.promise,received:r.parsedType}),Ct;const n=r.parsedType===st.promise?r.data:Promise.resolve(r.data);return Vn(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Qc.create=(t,e)=>new Qc({type:t,typeName:St.ZodPromise,...Ot(e)});class ya extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===St.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{et(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async l=>{if(r.value==="aborted")return Ct;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Ct:c.status==="dirty"||r.value==="dirty"?mc(c.value):c});{if(r.value==="aborted")return Ct;const l=this._def.schema._parseSync({data:i,path:n.path,parent:n});return l.status==="aborted"?Ct:l.status==="dirty"||r.value==="dirty"?mc(l.value):l}}if(s.type==="refinement"){const i=l=>{const c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Ct:(l.status==="dirty"&&r.dirty(),i(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Ct:(l.status==="dirty"&&r.dirty(),i(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Xd(i))return i;const l=s.transform(i.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Xd(i)?Promise.resolve(s.transform(i.value,a)).then(l=>({status:r.value,value:l})):i);Gt.assertNever(s)}}ya.create=(t,e,r)=>new ya({schema:t,typeName:St.ZodEffects,effect:e,...Ot(r)});ya.createWithPreprocess=(t,e,r)=>new ya({schema:e,effect:{type:"preprocess",transform:t},typeName:St.ZodEffects,...Ot(r)});class qa extends $t{_parse(e){return this._getType(e)===st.undefined?Vn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qa.create=(t,e)=>new qa({innerType:t,typeName:St.ZodOptional,...Ot(e)});class wo extends $t{_parse(e){return this._getType(e)===st.null?Vn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wo.create=(t,e)=>new wo({innerType:t,typeName:St.ZodNullable,...Ot(e)});class ch extends $t{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===st.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ch.create=(t,e)=>new ch({innerType:t,typeName:St.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ot(e)});class uh extends $t{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Qd(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xs(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new xs(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}uh.create=(t,e)=>new uh({innerType:t,typeName:St.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ot(e)});class Kp extends $t{_parse(e){if(this._getType(e)!==st.nan){const n=this._getOrReturnCtx(e);return et(n,{code:ze.invalid_type,expected:st.nan,received:n.parsedType}),Ct}return{status:"valid",value:e.data}}}Kp.create=t=>new Kp({typeName:St.ZodNaN,...Ot(t)});const sW=Symbol("zod_brand");class u1 extends $t{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ih extends $t{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Ct:a.status==="dirty"?(r.dirty(),mc(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ct:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Ih({in:e,out:r,typeName:St.ZodPipeline})}}class dh extends $t{_parse(e){const r=this._def.innerType._parse(e),n=s=>(Xd(s)&&(s.value=Object.freeze(s.value)),s);return Qd(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}dh.create=(t,e)=>new dh({innerType:t,typeName:St.ZodReadonly,...Ot(e)});function m3(t,e={},r){return t?Xc.create().superRefine((n,s)=>{var a,i;if(!t(n)){const l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(i=(a=l.fatal)!==null&&a!==void 0?a:r)!==null&&i!==void 0?i:!0,u=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...u,fatal:c})}}):Xc.create()}const aW={object:Er.lazycreate};var St;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(St||(St={}));const iW=(t,e={message:`Input not instance of ${t.name}`})=>m3(r=>r instanceof t,e),bd=ca.create,g3=vo.create,oW=Kp.create,lW=xo.create,y3=eh.create,cW=pl.create,uW=Hp.create,dW=th.create,hW=rh.create,fW=Xc.create,pW=cl.create,mW=Ni.create,gW=Gp.create,yW=da.create,v3=Er.create,vW=Er.strictCreate,xW=nh.create,bW=Wm.create,wW=sh.create,SW=Ga.create,_W=ah.create,jW=Yp.create,NW=ml.create,CW=Tc.create,kW=ih.create,AW=oh.create,PW=bo.create,EW=lh.create,TW=Qc.create,a5=ya.create,LW=qa.create,DW=wo.create,RW=ya.createWithPreprocess,OW=Ih.create,IW=()=>bd().optional(),MW=()=>g3().optional(),FW=()=>y3().optional(),BW={string:t=>ca.create({...t,coerce:!0}),number:t=>vo.create({...t,coerce:!0}),boolean:t=>eh.create({...t,coerce:!0}),bigint:t=>xo.create({...t,coerce:!0}),date:t=>pl.create({...t,coerce:!0})},$W=Ct;var Oy=Object.freeze({__proto__:null,defaultErrorMap:Zc,setErrorMap:Uz,getErrorMap:qp,makeIssue:zp,EMPTY_PATH:Vz,addIssueToContext:et,ParseStatus:Tn,INVALID:Ct,DIRTY:mc,OK:Vn,isAborted:i0,isDirty:o0,isValid:Xd,isAsync:Qd,get util(){return Gt},get objectUtil(){return a0},ZodParsedType:st,getParsedType:to,ZodType:$t,datetimeRegex:f3,ZodString:ca,ZodNumber:vo,ZodBigInt:xo,ZodBoolean:eh,ZodDate:pl,ZodSymbol:Hp,ZodUndefined:th,ZodNull:rh,ZodAny:Xc,ZodUnknown:cl,ZodNever:Ni,ZodVoid:Gp,ZodArray:da,ZodObject:Er,ZodUnion:nh,ZodDiscriminatedUnion:Wm,ZodIntersection:sh,ZodTuple:Ga,ZodRecord:ah,ZodMap:Yp,ZodSet:ml,ZodFunction:Tc,ZodLazy:ih,ZodLiteral:oh,ZodEnum:bo,ZodNativeEnum:lh,ZodPromise:Qc,ZodEffects:ya,ZodTransformer:ya,ZodOptional:qa,ZodNullable:wo,ZodDefault:ch,ZodCatch:uh,ZodNaN:Kp,BRAND:sW,ZodBranded:u1,ZodPipeline:Ih,ZodReadonly:dh,custom:m3,Schema:$t,ZodSchema:$t,late:aW,get ZodFirstPartyTypeKind(){return St},coerce:BW,any:fW,array:yW,bigint:lW,boolean:y3,date:cW,discriminatedUnion:bW,effect:a5,enum:PW,function:CW,instanceof:iW,intersection:wW,lazy:kW,literal:AW,map:jW,nan:oW,nativeEnum:EW,never:mW,null:hW,nullable:DW,number:g3,object:v3,oboolean:FW,onumber:MW,optional:LW,ostring:IW,pipeline:OW,preprocess:RW,promise:TW,record:_W,set:NW,strictObject:vW,string:bd,symbol:uW,transformer:a5,tuple:SW,undefined:dW,union:xW,unknown:pW,void:gW,NEVER:$W,ZodIssueCode:ze,quotelessJson:$z,ZodError:xs});const i5=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Ze(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},x3=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?i5(n.ref,r,t):n.refs&&n.refs.forEach(s=>i5(s,r,t))}},UW=(t,e)=>{e.shouldUseNativeValidation&&x3(t,e);const r={};for(const n in t){const s=Ze(e.fields,n),a=Object.assign(t[n]||{},{ref:s&&s.ref});if(VW(e.names||Object.keys(t),n)){const i=Object.assign({},Ze(r,n));sr(i,"root",a),sr(r,n,i)}else sr(r,n,a)}return r},VW=(t,e)=>t.some(r=>r.startsWith(e+"."));var qW=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,a=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[i]={message:l.message,type:l.code}}else r[i]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=r[i].types,u=c&&c[n.code];r[i]=Zk(i,e,r,s,u?[].concat(u,n.message):n.message)}t.shift()}return r},b3=function(t,e,r){return r===void 0&&(r={}),function(n,s,a){try{return Promise.resolve(function(i,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&x3({},a),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(i))return{values:{},errors:UW(qW(i.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}}};const zW=Oy.object({transactionName:Oy.string().min(1,"Transaction name is required"),businessName:Oy.string().optional()}),WW=({onTransactionCreated:t})=>{const[e,r]=w.useState(!1),n=Ss(),{toast:s}=Xt(),{user:a}=_r(),i=s3({resolver:b3(zW),defaultValues:{transactionName:"",businessName:""}}),l=async c=>{r(!0);try{const u={id:mL("txn"),name:c.transactionName,date:new Date().toISOString(),totalAmount:0,status:"pending",loadBuy:void 0,transportation:void 0,loadSold:void 0,payments:[],notes:[],attachments:[],businessName:c.businessName||void 0,updatedAt:new Date().toISOString(),user_id:a==null?void 0:a.id};await l3.addTransaction(u),i.reset(),s({title:"Transaction Created",description:"Your new transaction has been created successfully."}),t&&t(),n(`/transaction/${u.id}`)}catch(u){console.error("Error creating transaction:",u),s({title:"Error",description:"Failed to create transaction. Please try again.",variant:"destructive"})}finally{r(!1)}};return o.jsx(a3,{...i,children:o.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[o.jsx(xd,{control:i.control,name:"transactionName",render:({field:c})=>o.jsxs(kc,{children:[o.jsx(Ac,{children:"Transaction Name"}),o.jsx(Pc,{children:o.jsx(Ie,{...c,placeholder:"Enter transaction name"})}),o.jsx(Ec,{})]})}),o.jsx(xd,{control:i.control,name:"businessName",render:({field:c})=>o.jsxs(kc,{children:[o.jsx(Ac,{children:"Business Name"}),o.jsx(Pc,{children:o.jsx(Ie,{...c,placeholder:"Enter business name"})}),o.jsx(Ec,{})]})}),o.jsx(me,{type:"submit",disabled:e,children:e?"Creating...":"Create Transaction"})]})})},HW=()=>o.jsx("div",{className:"container mx-auto py-8",children:o.jsxs(Wt,{className:"max-w-2xl mx-auto",children:[o.jsx(Jt,{children:o.jsx(er,{className:"text-2xl",children:"Create New Transaction"})}),o.jsx(zt,{children:o.jsx(WW,{})})]})}),GW=[{code:"en",name:"English",nativeName:"English"},{code:"hi",name:"Hindi",nativeName:"हिन्दी"},{code:"bn",name:"Bengali",nativeName:"বাংলা"},{code:"te",name:"Telugu",nativeName:"తెలుగు"},{code:"ta",name:"Tamil",nativeName:"தமிழ்"},{code:"pa",name:"Punjabi",nativeName:"ਪੰਜਾਬੀ"}],Iy={en:{sign_in:"Sign In",sign_up:"Create Account",email:"Email",phone:"Phone Number",password:"Password",confirm_password:"Confirm Password",name:"Full Name",forgot_password:"Forgot password?",reset_password:"Reset Password",verify_otp:"Verify OTP",send_otp:"Send OTP",resend_otp:"Resend OTP",dont_have_account:"Don't have an account? Sign up",already_have_account:"Already have an account? Sign in",settings:"Settings",profile:"Profile",change_password:"Change Password",language:"Language",currency:"Currency",date_format:"Date Format",default_view:"Default View",theme:"Theme",font_size:"Font Size",save:"Save",cancel:"Cancel",old_password:"Old Password",new_password:"New Password",calculations:"Calculations",tax_calculator:"Tax Calculator",interest_calculator:"Interest Calculator",currency_converter:"Currency Converter",calculate:"Calculate",result:"Result"},hi:{sign_in:"साइन इन करें",sign_up:"खाता बनाएं",email:"ईमेल",phone:"फ़ोन नंबर",password:"पासवर्ड",confirm_password:"पासवर्ड की पुष्टि करें",name:"पूरा नाम",forgot_password:"पासवर्ड भूल गए?",reset_password:"पासवर्ड रीसेट करें",verify_otp:"OTP सत्यापित करें",send_otp:"OTP भेजें",resend_otp:"OTP पुनः भेजें",dont_have_account:"खाता नहीं है? साइन अप करें",already_have_account:"पहले से ही खाता है? साइन इन करें",settings:"सेटिंग्स",profile:"प्रोफ़ाइल",change_password:"पासवर्ड बदलें",language:"भाषा",currency:"मुद्रा",date_format:"दिनांक प्रारूप",default_view:"डिफ़ॉल्ट दृश्य",theme:"थीम",font_size:"फ़ॉन्ट आकार",save:"सेव करें",cancel:"रद्द करें",old_password:"पुराना पासवर्ड",new_password:"नया पासवर्ड",calculations:"गणना",tax_calculator:"कर कैलकुलेटर",interest_calculator:"ब्याज कैलकुलेटर",currency_converter:"मुद्रा परिवर्तक",calculate:"गणना करें",result:"परिणाम"},bn:{sign_in:"সাইন ইন",sign_up:"অ্যাকাউন্ট তৈরি করুন",email:"ইমেইল",phone:"ফোন নম্বর",password:"পাসওয়ার্ড",confirm_password:"পাসওয়ার্ড নিশ্চিত করুন",name:"পুরো নাম",forgot_password:"পাসওয়ার্ড ভুলে গেছেন?",reset_password:"পাসওয়ার্ড রিসেট",verify_otp:"OTP যাচাই করুন",send_otp:"OTP পাঠান",resend_otp:"OTP আবার পাঠান",dont_have_account:"অ্যাকাউন্ট নেই? সাইন আপ করুন",already_have_account:"ইতিমধ্যে একটি অ্যাকাউন্ট আছে? সাইন ইন করুন",settings:"সেটিংস",profile:"প্রোফাইল",change_password:"পাসওয়ার্ড পরিবর্তন করুন",language:"ভাষা",currency:"মুদ্রা",date_format:"তারিখ ফরম্যাট",default_view:"ডিফল্ট ভিউ",theme:"থিম",font_size:"ফন্ট সাইজ",save:"সংরক্ষণ করুন",cancel:"বাতিল করুন",old_password:"পুরানো পাসওয়ার্ড",new_password:"নতুন পাসওয়ার্ড",calculations:"গণনা",tax_calculator:"ট্যাক্স ক্যালকুলেটর",interest_calculator:"সুদ ক্যালকুলেটর",currency_converter:"মুদ্রা কনভার্টার",calculate:"গণনা করুন",result:"ফলাফল"},te:{sign_in:"సైన్ ఇన్",sign_up:"ఖాతా సృష్టించండి",email:"ఇమెయిల్",phone:"ఫోన్ నంబర్",password:"పాస్‌వర్డ్",confirm_password:"పాస్‌వర్డ్ నిర్ధారించండి",name:"పూర్తి పేరు",forgot_password:"పాస్‌వర్డ్ మర్చిపోయారా?",reset_password:"పాస్‌వర్డ్ రీసెట్ చేయండి",verify_otp:"OTP ధృవీకరించండి",send_otp:"OTP పంపండి",resend_otp:"OTP మళ్ళీ పంపండి",dont_have_account:"ఖాతా లేదా? సైన్ అప్ చేయండి",already_have_account:"ఇప్పటికే ఖాతా ఉందా? సైన్ ఇన్ చేయండి",settings:"సెట్టింగ్‌లు",profile:"ప్రొఫైల్",change_password:"పాస్‌వర్డ్ మార్చండి",language:"భాష",currency:"కరెన్సీ",date_format:"తేదీ ఫార్మాట్",default_view:"డిఫాల్ట్ వీక్షణ",theme:"థీమ్",font_size:"ఫాంట్ సైజు",save:"సేవ్ చేయండి",cancel:"రద్దు చేయండి",old_password:"పాత పాస్‌వర్డ్",new_password:"కొత్త పాస్‌వర్డ్",calculations:"లెక్కింపులు",tax_calculator:"పన్ను క్యాల్క్యులేటర్",interest_calculator:"వడ్డీ క్యాల్క్యులేటర్",currency_converter:"కరెన్సీ కన్వర్టర్",calculate:"లెక్కించండి",result:"ఫలితం"},ta:{sign_in:"உள்நுழைக",sign_up:"கணக்கை உருவாக்குக",email:"மின்னஞ்சல்",phone:"தொலைபேசி எண்",password:"கடவுச்சொல்",confirm_password:"கடவுச்சொல்லை உறுதிப்படுத்துக",name:"முழு பெயர்",forgot_password:"கடவுச்சொல் மறந்துவிட்டீர்களா?",reset_password:"கடவுச்சொல்லை மீட்டமைக்க",verify_otp:"OTP ஐ சரிபார்க்கவும்",send_otp:"OTP அனுப்பு",resend_otp:"OTP ஐ மீண்டும் அனுப்பு",dont_have_account:"கணக்கு இல்லையா? பதிவு செய்யுங்கள்",already_have_account:"ஏற்கனவே கணக்கு உள்ளதா? உள்நுழைக",settings:"அமைப்புகள்",profile:"சுயவிவரம்",change_password:"கடவுச்சொல்லை மாற்று",language:"மொழி",currency:"நாணயம்",date_format:"தேதி வடிவம்",default_view:"இயல்புநிலை காட்சி",theme:"தீம்",font_size:"எழுத்துரு அளவு",save:"சேமி",cancel:"ரத்து செய்",old_password:"பழைய கடவுச்சொல்",new_password:"புதிய கடவுச்சொல்",calculations:"கணக்கீடுகள்",tax_calculator:"வரி கால்குலேட்டர்",interest_calculator:"வட்டி கால்குலேட்டர்",currency_converter:"நாணய மாற்றி",calculate:"கணக்கிடு",result:"முடிவு"},pa:{sign_in:"ਸਾਈਨ ਇਨ",sign_up:"ਖਾਤਾ ਬਣਾਓ",email:"ਈਮੇਲ",phone:"ਫੋਨ ਨੰਬਰ",password:"ਪਾਸਵਰਡ",confirm_password:"ਪਾਸਵਰਡ ਦੀ ਪੁਸ਼ਟੀ ਕਰੋ",name:"ਪੂਰਾ ਨਾਮ",forgot_password:"ਪਾਸਵਰਡ ਭੁੱਲ ਗਏ?",reset_password:"ਪਾਸਵਰਡ ਰੀਸੈਟ ਕਰੋ",verify_otp:"OTP ਦੀ ਪੁਸ਼ਟੀ ਕਰੋ",send_otp:"OTP ਭੇਜੋ",resend_otp:"OTP ਦੁਬਾਰਾ ਭੇਜੋ",dont_have_account:"ਖਾਤਾ ਨਹੀਂ ਹੈ? ਸਾਈਨ ਅੱਪ ਕਰੋ",already_have_account:"ਪਹਿਲਾਂ ਤੋਂ ਹੀ ਖਾਤਾ ਹੈ? ਸਾਈਨ ਇਨ ਕਰੋ",settings:"ਸੈਟਿੰਗਾਂ",profile:"ਪ੍ਰੋਫਾਈਲ",change_password:"ਪਾਸਵਰਡ ਬਦਲੋ",language:"ਭਾਸ਼ਾ",currency:"ਮੁਦਰਾ",date_format:"ਤਾਰੀਖ ਫਾਰਮੈਟ",default_view:"ਡਿਫੌਲਟ ਵਿਊ",theme:"ਥੀਮ",font_size:"ਫੋਂਟ ਆਕਾਰ",save:"ਸੰਭਾਲੋ",cancel:"ਰੱਦ ਕਰੋ",old_password:"ਪੁਰਾਣਾ ਪਾਸਵਰਡ",new_password:"ਨਵਾਂ ਪਾਸਵਰਡ",calculations:"ਗਣਨਾ",tax_calculator:"ਟੈਕਸ ਕੈਲਕੁਲੇਟਰ",interest_calculator:"ਵਿਆਜ ਕੈਲਕੁਲੇਟਰ",currency_converter:"ਮੁਦਰਾ ਕਨਵਰਟਰ",calculate:"ਗਣਨਾ ਕਰੋ",result:"ਨਤੀਜਾ"}},c0="en",w3=w.createContext({language:c0,setLanguage:()=>{},t:t=>t}),S3=({children:t})=>{const[e,r]=w.useState(()=>{const a=localStorage.getItem("language");return a&&Iy[a]?a:c0}),n=a=>{r(a),localStorage.setItem("language",a)},s=a=>{var i;return((i=Iy[e])==null?void 0:i[a])||Iy[c0][a]||a};return o.jsx(w3.Provider,{value:{language:e,setLanguage:n,t:s},children:t})},d1=()=>w.useContext(w3),YW=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(!0),[s,a]=w.useState(null),{user:i}=_r(),{toast:l}=Xt(),c=()=>navigator.onLine;w.useEffect(()=>{if(i){const h=localStorage.getItem(`lastSyncTime_${i.id}`);h&&a(parseInt(h,10)),u()}},[i]),w.useEffect(()=>{const h=()=>{r||d()};return window.addEventListener("online",h),window.addEventListener("offline",()=>u()),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",()=>u())}},[r]);const u=w.useCallback(async()=>{if(i)try{const f=(await l3.getAllTransactions()).filter(b=>!b.syncedAt||new Date(b.syncedAt).getTime()<new Date(b.updatedAt||b.date).getTime()),{dbService:m}=await Un(async()=>{const{dbService:b}=await Promise.resolve().then(()=>WM);return{dbService:b}},void 0),{syncService:g}=await Un(async()=>{const{syncService:b}=await Promise.resolve().then(()=>lw);return{syncService:b}},void 0);let v=!1;try{(await g.getSyncStatus()).isAllSynced||(v=!0)}catch(b){console.error("Error checking sync status:",b),v=!0}n(f.length===0&&!v)}catch(h){console.error("Error checking unsynced changes:",h),n(!1)}},[i]),d=w.useCallback(async()=>{if(!i||!c()){l({title:"Sync failed",description:"You are offline. Please connect to the internet and try again.",variant:"destructive"});return}e(!0);try{const{syncService:h}=await Un(async()=>{const{syncService:m}=await Promise.resolve().then(()=>lw);return{syncService:m}},void 0);if(await h.syncAll(i.id)){const m=Date.now();a(m),localStorage.setItem(`lastSyncTime_${i.id}`,m.toString()),n(!0),l({title:"Sync successful",description:"All your data has been synced to the cloud."})}else n(!1),l({title:"Sync partially failed",description:"Some of your data may not have been synced. Please try again.",variant:"destructive"})}catch(h){console.error("Sync error:",h),n(!1),l({title:"Sync failed",description:"There was an error syncing your data. Please try again.",variant:"destructive"})}finally{e(!1)}},[i,l]);return{isSyncing:t,isAllSynced:r,lastSyncTime:s,sync:d,checkUnsyncedChanges:u}},h1=({businessName:t="TransactLy",pageTitle:e,onEditName:r,children:n,onExport:s})=>{const{user:a,signOut:i}=_r(),l=Ss(),{isSyncing:c,isAllSynced:u,sync:d,lastSyncTime:h}=YW(),f=async()=>{await i(),l("/auth")},m=a!=null&&a.email?a.email[0].toUpperCase():"U",g=e||t;return o.jsxs("header",{className:"bg-background sticky top-0 z-10 border-b border-border",children:[o.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(RA,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-primary flex items-center justify-center",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"}),o.jsx("path",{d:"M4 6v12c0 1.1.9 2 2 2h14v-4"}),o.jsx("path",{d:"M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"})]})}),o.jsx("span",{className:"font-semibold text-lg",children:g})]})}),o.jsxs("div",{className:"flex items-center gap-3",children:[n,a&&o.jsxs(o.Fragment,{children:[o.jsxs(me,{variant:u?"outline":"default",size:"sm",className:`gap-2 ${u?"":"animate-pulse"}`,onClick:d,disabled:c,children:[o.jsx(ua,{className:`h-4 w-4 ${c?"animate-spin":""}`}),c?"Syncing...":u?"Synced":"Sync Now"]}),o.jsxs(Fd,{children:[o.jsx(Bd,{asChild:!0,children:o.jsx(me,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8 p-0",children:o.jsx(Rd,{className:"h-8 w-8",children:o.jsx(Od,{children:m})})})}),o.jsxs(Gc,{align:"end",children:[o.jsx("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:a==null?void 0:a.email}),o.jsx(xc,{}),o.jsxs(ia,{onClick:()=>l("/profile"),children:[o.jsx(Jy,{className:"h-4 w-4 mr-2"}),"Profile"]}),o.jsx(xc,{}),o.jsxs(ia,{onClick:f,children:[o.jsx(Ky,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})]}),o.jsx($d,{})]})]}),h&&o.jsxs("div",{className:"container mx-auto px-4 py-1 text-xs text-muted-foreground",children:["Last synced: ",new Date(h).toLocaleString()]})]})},My=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),o5=t=>/^\+?[0-9]{10,15}$/.test(t),KW=()=>{const t=Ss(),{user:e,signIn:r,signUp:n,signInWithPhone:s}=_r(),{t:a}=d1(),{toast:i}=Xt(),[l,c]=w.useState("signin"),[u,d]=w.useState(""),[h,f]=w.useState(null),[m,g]=w.useState(""),[v,b]=w.useState(""),[_,S]=w.useState(!1),[N,k]=w.useState(""),[A,W]=w.useState(""),[I,F]=w.useState(""),[ee,ae]=w.useState(!1);w.useEffect(()=>{My(u)?f("email"):o5(u)?f("phone"):f(null)},[u]),w.useEffect(()=>{k(""),W(""),S(!1),ae(!1),l==="signin"?(F(""),g(""),b("")):(d(""),f(null))},[l]),w.useEffect(()=>{e&&t("/")},[e,t]);const R=async B=>{B.preventDefault(),ae(!0);try{if(!u)throw new Error("Please enter an email or phone number");if(h==="email"){if(!N)throw new Error("Please enter your password");await r(u,N)}else if(h==="phone")await s(u),sessionStorage.setItem("verifyPhone",u),t("/verify-otp");else throw new Error("Please enter a valid email or phone number")}catch(z){i({title:"Sign In Failed",description:z.message||"An error occurred during sign in.",variant:"destructive"})}finally{ae(!1)}},D=async B=>{B.preventDefault(),ae(!0);try{if(!I)throw new Error("Please enter your name");if(!m)throw new Error("Please enter your email address");if(!My(m))throw new Error("Please enter a valid email address");if(!v)throw new Error("Please enter your phone number");if(!o5(v))throw new Error("Please enter a valid phone number (e.g., +1234567890)");if(!N)throw new Error("Please enter a password");if(N.length<6)throw new Error("Password must be at least 6 characters");if(N!==A)throw new Error("Passwords do not match");await n(m,N,I,v),F(""),g(""),b(""),k(""),W(""),c("signin"),i({title:"Account Created",description:"Your account has been created successfully. Please check your email for verification and then sign in."})}catch(z){i({title:"Sign Up Failed",description:z.message||"An error occurred during registration.",variant:"destructive"})}finally{ae(!1)}},T=()=>{if(!u||!My(u)){i({title:"Valid Email Required",description:"Please enter the email address associated with your account to reset your password.",variant:"destructive"});return}t("/reset-password",{state:{email:u}})};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(h1,{businessName:"TransactLy"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:o.jsx(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md",children:o.jsxs(Wt,{className:"border shadow-lg",children:[o.jsxs(Jt,{className:"space-y-1",children:[o.jsx(er,{className:"text-2xl text-center",children:a(l==="signin"?"sign_in":"sign_up")}),o.jsx(Fr,{className:"text-center",children:l==="signin"?"Enter your email/phone to sign in to your account":"Create a new account to get started"})]}),o.jsx(zt,{children:o.jsxs(Nc,{value:l,onValueChange:c,className:"w-full",children:[o.jsxs(kh,{className:"grid w-full grid-cols-2 mb-6",children:[o.jsx(gs,{value:"signin",children:a("sign_in")}),o.jsx(gs,{value:"signup",children:a("sign_up")})]}),o.jsx(ts,{value:"signin",children:o.jsxs("form",{onSubmit:R,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"signin-identifier",children:"Email or Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{id:"signin-identifier",type:"text",placeholder:"Enter email or phone number",value:u,onChange:B=>d(B.target.value),className:"pl-10",required:!0}),o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:h==="email"?o.jsx(qg,{size:16}):h==="phone"?o.jsx(kT,{size:16}):o.jsx(qg,{size:16})})]})]}),h==="email"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ne,{htmlFor:"signin-password",children:a("password")}),o.jsx(me,{type:"button",variant:"link",className:"px-0 text-xs",onClick:T,children:a("forgot_password")})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{id:"signin-password",type:_?"text":"password",placeholder:"Enter your password",value:N,onChange:B=>k(B.target.value),className:"pr-10"}),o.jsx(me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>S(!_),children:_?o.jsx(db,{size:16}):o.jsx(hb,{size:16})})]})]}),o.jsx(me,{type:"submit",className:"w-full",disabled:ee,children:ee?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," Processing..."]}):o.jsxs(o.Fragment,{children:[h==="phone"?"Continue with OTP":a("sign_in"),o.jsx(ub,{className:"ml-2 h-4 w-4"})]})})]})}),o.jsx(ts,{value:"signup",children:o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"signup-name",children:a("name")}),o.jsx(Ie,{id:"signup-name",placeholder:"Enter your full name",value:I,onChange:B=>F(B.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"signup-email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{id:"signup-email",type:"email",placeholder:"Enter your email address",value:m,onChange:B=>g(B.target.value),className:"pl-10",required:!0}),o.jsx(qg,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:16})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"signup-phone",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{id:"signup-phone",type:"tel",placeholder:"Enter your phone number (e.g., +1234567890)",value:v,onChange:B=>b(B.target.value),className:"pl-10",required:!0}),o.jsx(AT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:16})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"signup-password",children:a("password")}),o.jsxs("div",{className:"relative",children:[o.jsx(Ie,{id:"signup-password",type:_?"text":"password",placeholder:"Create a password (min. 6 characters)",value:N,onChange:B=>k(B.target.value),className:"pr-10",required:!0}),o.jsx(me,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>S(!_),children:_?o.jsx(db,{size:16}):o.jsx(hb,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirm-password",children:a("confirm_password")}),o.jsx(Ie,{id:"confirm-password",type:_?"text":"password",placeholder:"Confirm your password",value:A,onChange:B=>W(B.target.value),required:!0})]}),o.jsx(me,{type:"submit",className:"w-full",disabled:ee,children:ee?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," Processing..."]}):o.jsxs(o.Fragment,{children:[a("sign_up"),o.jsx(ub,{className:"ml-2 h-4 w-4"})]})})]})})]})}),o.jsxs(_i,{className:"flex flex-col space-y-4 mt-4",children:[l==="signin"&&o.jsxs("div",{className:"w-full border border-dashed border-primary/50 rounded-md p-3 mb-2 bg-primary/5",children:[o.jsx("h3",{className:"text-sm font-medium text-center mb-2",children:"Demo Login Credentials"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-semibold mr-1",children:"Email:"}),o.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"admin@gmail.com"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-semibold mr-1",children:"Password:"}),o.jsx("code",{className:"bg-background px-1 py-0.5 rounded",children:"123456"})]})]}),o.jsx(me,{type:"button",variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>{d("admin@gmail.com"),k("123456")},children:"Use Demo Credentials"})]}),o.jsx("div",{className:"text-sm text-center text-muted-foreground w-full",children:l==="signin"?o.jsxs("span",{children:[a("dont_have_account")," ",o.jsx(me,{variant:"link",className:"p-0",onClick:()=>c("signup"),children:a("sign_up")})]}):o.jsxs("span",{children:[a("already_have_account")," ",o.jsx(me,{variant:"link",className:"p-0",onClick:()=>c("signin"),children:a("sign_in")})]})})]})]})})})]})};var JW=Object.defineProperty,ZW=Object.defineProperties,XW=Object.getOwnPropertyDescriptors,Jp=Object.getOwnPropertySymbols,_3=Object.prototype.hasOwnProperty,j3=Object.prototype.propertyIsEnumerable,l5=(t,e,r)=>e in t?JW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,QW=(t,e)=>{for(var r in e||(e={}))_3.call(e,r)&&l5(t,r,e[r]);if(Jp)for(var r of Jp(e))j3.call(e,r)&&l5(t,r,e[r]);return t},eH=(t,e)=>ZW(t,XW(e)),tH=(t,e)=>{var r={};for(var n in t)_3.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Jp)for(var n of Jp(t))e.indexOf(n)<0&&j3.call(t,n)&&(r[n]=t[n]);return r},rH="^\\d+$";function nH(t){let e=setTimeout(t,0),r=setTimeout(t,10),n=setTimeout(t,50);return[e,r,n]}function sH(t){let e=w.useRef();return w.useEffect(()=>{e.current=t}),e.current}var aH=18,N3=40,iH=`${N3}px`,oH=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function lH({containerRef:t,inputRef:e,pushPasswordManagerStrategy:r,isFocused:n}){let s=w.useRef({done:!1,refocused:!1}),[a,i]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState(!1),h=w.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&a&&l,[a,l,r]),f=w.useCallback(()=>{let m=t.current,g=e.current;if(!m||!g||u||r==="none")return;let v=m,b=v.getBoundingClientRect().left+v.offsetWidth,_=v.getBoundingClientRect().top+v.offsetHeight/2,S=b-aH,N=_;if(!(document.querySelectorAll(oH).length===0&&document.elementFromPoint(S,N)===m)&&(i(!0),d(!0),!s.current.refocused&&document.activeElement===g)){let k=[g.selectionStart,g.selectionEnd];g.blur(),g.focus(),g.setSelectionRange(k[0],k[1]),s.current.refocused=!0}},[t,e,u,r]);return w.useEffect(()=>{let m=t.current;if(!m||r==="none")return;function g(){let b=window.innerWidth-m.getBoundingClientRect().right;c(b>=N3)}g();let v=setInterval(g,1e3);return()=>{clearInterval(v)}},[t,r]),w.useEffect(()=>{let m=n||document.activeElement===e.current;if(r==="none"||!m)return;let g=setTimeout(f,0),v=setTimeout(f,2e3),b=setTimeout(f,5e3),_=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(g),clearTimeout(v),clearTimeout(b),clearTimeout(_)}},[e,n,r,f]),{hasPWMBadge:a,willPushPWMBadge:h,PWM_BADGE_SPACE_WIDTH:iH}}var C3=w.createContext({}),k3=w.forwardRef((t,e)=>{var r=t,{value:n,onChange:s,maxLength:a,textAlign:i="left",pattern:l=rH,inputMode:c="numeric",onComplete:u,pushPasswordManagerStrategy:d="increase-width",containerClassName:h,noScriptCSSFallback:f=cH,render:m,children:g}=r,v=tH(r,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),b,_,S,N,k;let[A,W]=w.useState(typeof v.defaultValue=="string"?v.defaultValue:""),I=n??A,F=sH(I),ee=w.useCallback(we=>{s==null||s(we),W(we)},[s]),ae=w.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),R=w.useRef(null),D=w.useRef(null),T=w.useRef({value:I,onChange:ee,isIOS:typeof window<"u"&&((_=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:_.call(b,"-webkit-touch-callout","none"))}),B=w.useRef({prev:[(S=R.current)==null?void 0:S.selectionStart,(N=R.current)==null?void 0:N.selectionEnd,(k=R.current)==null?void 0:k.selectionDirection]});w.useImperativeHandle(e,()=>R.current,[]),w.useEffect(()=>{let we=R.current,ke=D.current;if(!we||!ke)return;T.current.value!==we.value&&T.current.onChange(we.value),B.current.prev=[we.selectionStart,we.selectionEnd,we.selectionDirection];function Ke(){if(document.activeElement!==we){he(null),L(null);return}let Ye=we.selectionStart,Y=we.selectionEnd,J=we.selectionDirection,ie=we.maxLength,_e=we.value,ye=B.current.prev,Se=-1,Be=-1,qe;if(_e.length!==0&&Ye!==null&&Y!==null){let ut=Ye===Y,_t=Ye===_e.length&&_e.length<ie;if(ut&&!_t){let He=Ye;if(He===0)Se=0,Be=1,qe="forward";else if(He===ie)Se=He-1,Be=He,qe="backward";else if(ie>1&&_e.length>1){let De=0;if(ye[0]!==null&&ye[1]!==null){qe=He<ye[1]?"backward":"forward";let rt=ye[0]===ye[1]&&ye[0]<ie;qe==="backward"&&!rt&&(De=-1)}Se=De+He,Be=De+He+1}}Se!==-1&&Be!==-1&&Se!==Be&&R.current.setSelectionRange(Se,Be,qe)}let at=Se!==-1?Se:Ye,ot=Be!==-1?Be:Y,Lt=qe??J;he(at),L(ot),B.current.prev=[at,ot,Lt]}if(document.addEventListener("selectionchange",Ke,{capture:!0}),Ke(),document.activeElement===we&&V(!0),!document.getElementById("input-otp-style")){let Ye=document.createElement("style");if(Ye.id="input-otp-style",document.head.appendChild(Ye),Ye.sheet){let Y="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Zu(Ye.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Zu(Ye.sheet,`[data-input-otp]:autofill { ${Y} }`),Zu(Ye.sheet,`[data-input-otp]:-webkit-autofill { ${Y} }`),Zu(Ye.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Zu(Ye.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Ce=()=>{ke&&ke.style.setProperty("--root-height",`${we.clientHeight}px`)};Ce();let Q=new ResizeObserver(Ce);return Q.observe(we),()=>{document.removeEventListener("selectionchange",Ke,{capture:!0}),Q.disconnect()}},[]);let[z,re]=w.useState(!1),[$,V]=w.useState(!1),[X,he]=w.useState(null),[je,L]=w.useState(null);w.useEffect(()=>{nH(()=>{var we,ke,Ke,Ce;(we=R.current)==null||we.dispatchEvent(new Event("input"));let Q=(ke=R.current)==null?void 0:ke.selectionStart,Ye=(Ke=R.current)==null?void 0:Ke.selectionEnd,Y=(Ce=R.current)==null?void 0:Ce.selectionDirection;Q!==null&&Ye!==null&&(he(Q),L(Ye),B.current.prev=[Q,Ye,Y])})},[I,$]),w.useEffect(()=>{F!==void 0&&I!==F&&F.length<a&&I.length===a&&(u==null||u(I))},[a,u,F,I]);let G=lH({containerRef:D,inputRef:R,pushPasswordManagerStrategy:d,isFocused:$}),Z=w.useCallback(we=>{let ke=we.currentTarget.value.slice(0,a);if(ke.length>0&&ae&&!ae.test(ke)){we.preventDefault();return}typeof F=="string"&&ke.length<F.length&&document.dispatchEvent(new Event("selectionchange")),ee(ke)},[a,ee,F,ae]),se=w.useCallback(()=>{var we;if(R.current){let ke=Math.min(R.current.value.length,a-1),Ke=R.current.value.length;(we=R.current)==null||we.setSelectionRange(ke,Ke),he(ke),L(Ke)}V(!0)},[a]),H=w.useCallback(we=>{var ke,Ke;let Ce=R.current;if(!T.current.isIOS||!we.clipboardData||!Ce)return;let Q=we.clipboardData.getData("text/plain");we.preventDefault();let Ye=(ke=R.current)==null?void 0:ke.selectionStart,Y=(Ke=R.current)==null?void 0:Ke.selectionEnd,J=(Ye!==Y?I.slice(0,Ye)+Q+I.slice(Y):I.slice(0,Ye)+Q+I.slice(Ye)).slice(0,a);if(J.length>0&&ae&&!ae.test(J))return;Ce.value=J,ee(J);let ie=Math.min(J.length,a-1),_e=J.length;Ce.setSelectionRange(ie,_e),he(ie),L(_e)},[a,ee,ae,I]),ne=w.useMemo(()=>({position:"relative",cursor:v.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[v.disabled]),oe=w.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:i,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,i]),ce=w.useMemo(()=>w.createElement("input",eH(QW({autoComplete:v.autoComplete||"one-time-code"},v),{"data-input-otp":!0,"data-input-otp-mss":X,"data-input-otp-mse":je,inputMode:c,pattern:ae==null?void 0:ae.source,style:oe,maxLength:a,value:I,ref:R,onPaste:we=>{var ke;H(we),(ke=v.onPaste)==null||ke.call(v,we)},onChange:Z,onMouseOver:we=>{var ke;re(!0),(ke=v.onMouseOver)==null||ke.call(v,we)},onMouseLeave:we=>{var ke;re(!1),(ke=v.onMouseLeave)==null||ke.call(v,we)},onFocus:we=>{var ke;se(),(ke=v.onFocus)==null||ke.call(v,we)},onBlur:we=>{var ke;V(!1),(ke=v.onBlur)==null||ke.call(v,we)}})),[Z,se,H,c,oe,a,je,X,v,ae==null?void 0:ae.source,I]),ve=w.useMemo(()=>({slots:Array.from({length:a}).map((we,ke)=>{let Ke=$&&X!==null&&je!==null&&(X===je&&ke===X||ke>=X&&ke<je),Ce=I[ke]!==void 0?I[ke]:null;return{char:Ce,isActive:Ke,hasFakeCaret:Ke&&Ce===null}}),isFocused:$,isHovering:!v.disabled&&z}),[$,z,a,je,X,v.disabled,I]),Ae=w.useMemo(()=>m?m(ve):w.createElement(C3.Provider,{value:ve},g),[g,ve,m]);return w.createElement(w.Fragment,null,f!==null&&w.createElement("noscript",null,w.createElement("style",null,f)),w.createElement("div",{ref:D,"data-input-otp-container":!0,style:ne,className:h},Ae,w.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ce)))});k3.displayName="Input";function Zu(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var cH=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const A3=w.forwardRef(({className:t,containerClassName:e,...r},n)=>o.jsx(k3,{ref:n,containerClassName:Ve("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:Ve("disabled:cursor-not-allowed",t),...r}));A3.displayName="InputOTP";const P3=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("flex items-center",t),...e}));P3.displayName="InputOTPGroup";const Jo=w.forwardRef(({index:t,className:e,...r},n)=>{const s=w.useContext(C3),{char:a,hasFakeCaret:i,isActive:l}=s.slots[t];return o.jsxs("div",{ref:n,className:Ve("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",e),...r,children:[a,i&&o.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Jo.displayName="InputOTPSlot";const uH=w.forwardRef(({...t},e)=>o.jsx("div",{ref:e,role:"separator",...t,children:o.jsx(mT,{})}));uH.displayName="InputOTPSeparator";const dH=()=>{const t=Ss(),{verifyOTP:e,resendOTP:r,user:n}=_r(),{toast:s}=Xt(),{t:a}=d1(),[i,l]=w.useState(""),[c,u]=w.useState(""),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[g,v]=w.useState(30);w.useEffect(()=>{if(n){t("/");return}const S=sessionStorage.getItem("verifyPhone");if(!S){t("/auth");return}u(S);const N=setInterval(()=>{v(k=>k<=1?(clearInterval(N),0):k-1)},1e3);return()=>clearInterval(N)},[t,n]);const b=async()=>{if(i.length!==6){s({title:"Invalid OTP",description:"Please enter a valid 6-digit OTP.",variant:"destructive"});return}h(!0);try{await e(c,i),s({title:"Verification Successful",description:"You have been successfully signed in."}),sessionStorage.removeItem("verifyPhone"),t("/")}catch(S){s({title:"Verification Failed",description:S.message||"Could not verify OTP. Please try again.",variant:"destructive"})}finally{h(!1)}},_=async()=>{if(!(g>0)){m(!0);try{await r(c),v(30);const S=setInterval(()=>{v(N=>N<=1?(clearInterval(S),0):N-1)},1e3);s({title:"OTP Resent",description:"A new verification code has been sent to your phone."})}catch(S){s({title:"Failed to Resend OTP",description:S.message||"Could not resend verification code. Please try again.",variant:"destructive"})}finally{m(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(h1,{businessName:"TransactLy"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:o.jsx(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-md",children:o.jsxs(Wt,{className:"border shadow-lg",children:[o.jsxs(Jt,{className:"space-y-1",children:[o.jsx(er,{className:"text-2xl text-center",children:a("verify_otp")}),o.jsxs(Fr,{className:"text-center",children:["Enter the verification code sent to ",c]})]}),o.jsxs(zt,{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(A3,{maxLength:6,value:i,onChange:l,className:"gap-2",children:o.jsxs(P3,{children:[o.jsx(Jo,{index:0}),o.jsx(Jo,{index:1}),o.jsx(Jo,{index:2}),o.jsx(Jo,{index:3}),o.jsx(Jo,{index:4}),o.jsx(Jo,{index:5})]})})}),o.jsx(me,{onClick:b,className:"w-full",disabled:d||i.length!==6,children:d?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," Verifying..."]}):a("verify_otp")}),o.jsx("div",{className:"text-center",children:o.jsx(me,{variant:"link",disabled:g>0||f,onClick:_,children:g>0?`${a("resend_otp")} (${g}s)`:f?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin mr-2",children:"⏳"})," Sending..."]}):a("resend_otp")})})]}),o.jsx(_i,{className:"flex flex-col space-y-4 mt-2",children:o.jsxs(me,{variant:"outline",className:"w-full",onClick:()=>t("/auth"),children:[o.jsx(lS,{className:"mr-2 h-4 w-4"}),"Back to Sign In"]})})]})})})]})},hH=vh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),E3=w.forwardRef(({className:t,variant:e,...r},n)=>o.jsx("div",{ref:n,role:"alert",className:Ve(hH({variant:e}),t),...r}));E3.displayName="Alert";const T3=w.forwardRef(({className:t,...e},r)=>o.jsx("h5",{ref:r,className:Ve("mb-1 font-medium leading-none tracking-tight",t),...e}));T3.displayName="AlertTitle";const L3=w.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:Ve("text-sm [&_p]:leading-relaxed",t),...e}));L3.displayName="AlertDescription";const fH=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(""),[s,a]=w.useState(!1),{updatePassword:i,isLoading:l}=_r(),c=Ss(),{toast:u}=Xt(),d=async h=>{if(h.preventDefault(),t!==r){u({title:"Passwords don't match",description:"Please make sure your passwords match.",variant:"destructive"});return}if(t.length<6){u({title:"Password too short",description:"Password should be at least 6 characters long.",variant:"destructive"});return}try{await i(t),a(!0),u({title:"Password updated",description:"Your password has been successfully reset."}),setTimeout(()=>{c("/")},3e3)}catch(f){u({title:"Password reset failed",description:f.message||"Could not update password. Please try again.",variant:"destructive"})}};return o.jsxs(ns.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex flex-col items-center justify-center p-4 bg-background",children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx($d,{})}),o.jsxs("div",{className:"w-full max-w-md",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary flex items-center justify-center",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-foreground",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"}),o.jsx("path",{d:"M4 6v12c0 1.1.9 2 2 2h14v-4"}),o.jsx("path",{d:"M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"})]})})}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Reset Password"}),o.jsx(Fr,{children:"Create a new password for your account"})]}),s?o.jsxs(zt,{className:"space-y-4",children:[o.jsxs(E3,{className:"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-900",children:[o.jsx(A0,{className:"h-4 w-4 text-green-500"}),o.jsx(T3,{children:"Success!"}),o.jsx(L3,{children:"Your password has been successfully reset. You will be redirected to login shortly."})]}),o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx(me,{onClick:()=>c("/auth"),variant:"outline",children:"Return to login"})})]}):o.jsxs("form",{onSubmit:d,children:[o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"new-password",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(pb,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ie,{id:"new-password",type:"password",value:t,onChange:h=>e(h.target.value),placeholder:"New password",required:!0,className:"pl-10"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirm-password",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(pb,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ie,{id:"confirm-password",type:"password",value:r,onChange:h=>n(h.target.value),placeholder:"Confirm new password",required:!0,className:"pl-10"})]})]})]}),o.jsxs(_i,{className:"flex flex-col space-y-4",children:[o.jsx(me,{type:"submit",className:"w-full",disabled:l,children:l?"Updating...":"Reset Password"}),o.jsx(me,{variant:"ghost",className:"w-full",onClick:()=>c("/auth"),type:"button",children:"Cancel"})]})]})]})]})]})},pH=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(""),[s,a]=w.useState(!1),{user:i,updatePassword:l}=_r(),{toast:c}=Xt(),u=Ss(),d=async h=>{if(h.preventDefault(),t!==r){c({title:"Passwords do not match",description:"Please make sure your passwords match.",variant:"destructive"});return}if(t.length<6){c({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}a(!0);try{await l(t),e(""),n("")}finally{a(!1)}};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(h1,{businessName:"TransactLy",onEditName:()=>{}}),o.jsx("div",{className:"container max-w-4xl mx-auto flex-1 p-4",children:o.jsxs(ns.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[o.jsxs(me,{variant:"ghost",size:"sm",className:"mb-4",onClick:()=>u("/"),children:[o.jsx(lS,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),o.jsxs(Wt,{children:[o.jsx(Jt,{children:o.jsx(er,{className:"text-2xl",children:"Profile Settings"})}),o.jsxs(zt,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(Ne,{children:"Email"}),o.jsx("div",{className:"p-2 border rounded-md bg-muted/20",children:i==null?void 0:i.email})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Change Password"}),o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"new-password",children:"New Password"}),o.jsx(Ie,{id:"new-password",type:"password",value:t,onChange:h=>e(h.target.value),placeholder:"Enter new password",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"confirm-password",children:"Confirm New Password"}),o.jsx(Ie,{id:"confirm-password",type:"password",value:r,onChange:h=>n(h.target.value),placeholder:"Confirm new password",required:!0})]}),o.jsx(me,{type:"submit",disabled:s,className:"w-full",children:s?"Updating...":"Update Password"})]})]})]})]})]})})]})},mH=()=>{const t=Ss();return o.jsxs("div",{className:"flex items-center mb-6 border-b pb-4",children:[o.jsxs(me,{variant:"ghost",size:"icon",className:"mr-4",onClick:()=>t("/"),children:[o.jsx(cS,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"Back"})]}),o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"TransactLy Settings"})]})};var gH="Separator",c5="horizontal",yH=["horizontal","vertical"],D3=w.forwardRef((t,e)=>{const{decorative:r,orientation:n=c5,...s}=t,a=vH(n)?n:c5,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(Ut.div,{"data-orientation":a,...l,...s,ref:e})});D3.displayName=gH;function vH(t){return yH.includes(t)}var R3=D3;const Zp=w.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>o.jsx(R3,{ref:s,decorative:r,orientation:e,className:Ve("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Zp.displayName=R3.displayName;const xH=v3({currentPassword:bd().min(1,{message:"Current password is required."}),newPassword:bd().min(8,{message:"New password must be at least 8 characters long."}),confirmNewPassword:bd().min(1,{message:"Please confirm your new password."})}).refine(t=>t.newPassword===t.confirmNewPassword,{message:"New passwords don't match.",path:["confirmNewPassword"]}),bH=({onPasswordChange:t})=>{const{user:e,updatePassword:r}=_r(),{toast:n}=Xt(),[s,a]=w.useState(!1),i=s3({resolver:b3(xH),defaultValues:{currentPassword:"",newPassword:"",confirmNewPassword:""}}),l=async c=>{if(!(e!=null&&e.email)){n({title:"Error",description:"User email not found.",variant:"destructive"});return}a(!0);try{if(t)await t(c.currentPassword,c.newPassword);else{const{error:u}=await We.auth.signInWithPassword({email:e.email,password:c.currentPassword});if(u){u.message.includes("Invalid login credentials")?n({title:"Verification Failed",description:"Incorrect current password.",variant:"destructive"}):n({title:"Verification Failed",description:u.message,variant:"destructive"});return}await r(c.newPassword)}i.reset()}catch(u){n({title:"Error",description:u.message||"An unexpected error occurred.",variant:"destructive"})}finally{a(!1)}};return o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Change Password"}),o.jsx(Fr,{children:"Update your account security."})]}),o.jsx(a3,{...i,children:o.jsxs("form",{onSubmit:i.handleSubmit(l),children:[o.jsxs(zt,{className:"space-y-4",children:[o.jsx(xd,{control:i.control,name:"currentPassword",render:({field:c})=>o.jsxs(kc,{children:[o.jsx(Ac,{children:"Current Password"}),o.jsx(Pc,{children:o.jsx(Ie,{...c,type:"password",placeholder:"Enter your current password"})}),o.jsx(Ec,{})]})}),o.jsx(xd,{control:i.control,name:"newPassword",render:({field:c})=>o.jsxs(kc,{children:[o.jsx(Ac,{children:"New Password"}),o.jsx(Pc,{children:o.jsx(Ie,{...c,type:"password",placeholder:"Enter your new password"})}),o.jsx(Ec,{})]})}),o.jsx(xd,{control:i.control,name:"confirmNewPassword",render:({field:c})=>o.jsxs(kc,{children:[o.jsx(Ac,{children:"Confirm New Password"}),o.jsx(Pc,{children:o.jsx(Ie,{...c,type:"password",placeholder:"Confirm your new password"})}),o.jsx(Ec,{})]})})]}),o.jsx(_i,{children:o.jsxs(me,{type:"submit",disabled:s,children:[s&&o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})})]})})]})},wH=({user:t,onUpdate:e,onPasswordChange:r})=>{var m;const[n,s]=w.useState(""),[a,i]=w.useState(""),[l,c]=w.useState(""),[u,d]=w.useState(!1);w.useEffect(()=>{var g,v,b;t&&(s(((g=t.user_metadata)==null?void 0:g.full_name)||((v=t.user_metadata)==null?void 0:v.name)||""),i(t.email||""),c(((b=t.user_metadata)==null?void 0:b.phone)||""))},[t]);const h=async g=>{g.preventDefault(),d(!0);try{await e({name:n,phone:l})}catch(v){console.error("Error updating profile:",v)}finally{d(!1)}},f=g=>g.split(" ").map(v=>v.charAt(0)).join("").toUpperCase().slice(0,2);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Profile"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your personal information."})]}),o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[o.jsxs(Rd,{className:"h-16 w-16",children:[o.jsx(jp,{src:((m=t==null?void 0:t.user_metadata)==null?void 0:m.avatar_url)||"",alt:n}),o.jsx(Od,{className:"text-lg",children:f(n)})]}),o.jsxs("div",{className:"space-y-1 flex-1",children:[o.jsx("h3",{className:"font-medium",children:n||"Your Name"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:a})]}),o.jsx(me,{variant:"outline",size:"sm",className:"mt-2 md:mt-0",children:"Change Avatar"})]}),o.jsx(Zp,{}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"name",children:"Full Name"}),o.jsx(Ie,{id:"name",value:n,onChange:g=>s(g.target.value),placeholder:"Enter your full name"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"email",children:"Email"}),o.jsx(Ie,{id:"email",type:"email",value:a,disabled:!0,className:"bg-muted"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Your email cannot be changed."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{htmlFor:"phone",children:"Phone Number"}),o.jsx(Ie,{id:"phone",value:l,onChange:g=>c(g.target.value),placeholder:"Enter your phone number"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Kt,{children:[o.jsx(xi,{asChild:!0,children:o.jsx(me,{variant:"outline",type:"button",children:"Change Password"})}),o.jsxs(tr,{children:[o.jsxs(ar,{children:[o.jsx(ir,{children:"Change Password"}),o.jsx(Xi,{children:"Update your password to keep your account secure."})]}),o.jsx(bH,{onPasswordChange:r})]})]}),o.jsx(me,{type:"submit",disabled:u,children:u?"Saving...":"Save Changes"})]})})]})]})},O3=w.createContext(void 0),I3=({children:t})=>{const[e,r]=w.useState(()=>{const u=localStorage.getItem("theme");return u&&["light","dark","system"].includes(u)?u:"system"}),[n,s]=w.useState(()=>{const u=localStorage.getItem("fontSize");return u&&["small","medium","large"].includes(u)?u:"medium"}),[a,i]=w.useState(!1);w.useEffect(()=>{const u=document.documentElement;localStorage.setItem("theme",e);const d=h=>{h?(u.classList.add("dark"),i(!0)):(u.classList.remove("dark"),i(!1))};if(e==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches;d(h);const f=window.matchMedia("(prefers-color-scheme: dark)"),m=g=>d(g.matches);return f.addEventListener("change",m),()=>f.removeEventListener("change",m)}else d(e==="dark")},[e]),w.useEffect(()=>{const u=document.documentElement;switch(localStorage.setItem("fontSize",n),u.classList.remove("text-sm","text-base","text-lg"),n){case"small":u.classList.add("text-sm");break;case"medium":u.classList.add("text-base");break;case"large":u.classList.add("text-lg");break}},[n]);const l=u=>{r(u)},c=u=>{s(u)};return o.jsx(O3.Provider,{value:{theme:e,setTheme:l,fontSize:n,setFontSize:c,isDarkMode:a},children:t})},SH=()=>{const t=w.useContext(O3);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},_H=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"€",name:"Euro"},{code:"GBP",symbol:"£",name:"British Pound"},{code:"JPY",symbol:"¥",name:"Japanese Yen"},{code:"INR",symbol:"₹",name:"Indian Rupee"},{code:"CNY",symbol:"¥",name:"Chinese Yuan"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"AUD",symbol:"A$",name:"Australian Dollar"}],jH=[{value:"MM/DD/YYYY",label:"MM/DD/YYYY (e.g., 12/31/2023)"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY (e.g., 31/12/2023)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (e.g., 2023-12-31)"},{value:"DD-MMM-YYYY",label:"DD-MMM-YYYY (e.g., 31-Dec-2023)"}],NH=[{value:"dashboard",label:"Dashboard View"},{value:"list",label:"List View"}],CH=({businessName:t="TransactLy",onBusinessNameChange:e})=>{const{theme:r,setTheme:n,fontSize:s,setFontSize:a}=SH(),{language:i,setLanguage:l}=d1(),{toast:c}=Xt(),[u,d]=w.useState(t),[h,f]=w.useState(!1),[m,g]=w.useState(()=>localStorage.getItem("currency")||"USD"),[v,b]=w.useState(()=>localStorage.getItem("dateFormat")||"MM/DD/YYYY"),[_,S]=w.useState(()=>localStorage.getItem("defaultView")||"dashboard"),N=async()=>{if(e&&u!==t){f(!0);try{await e(u)}catch(I){console.error("Error saving business name:",I)}finally{f(!1)}}},k=async I=>{g(I),localStorage.setItem("currency",I),c({title:"Currency Updated",description:"Your currency preference has been updated."})},A=async I=>{b(I),localStorage.setItem("dateFormat",I),c({title:"Date Format Updated",description:"Your date format preference has been updated."})},W=async I=>{S(I),localStorage.setItem("defaultView",I),c({title:"Default View Updated",description:"Your default view preference has been updated."})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Appearance"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize how the application appears and functions for you."})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Theme"}),o.jsx(Fr,{children:"Choose your preferred theme."})]}),o.jsx(zt,{children:o.jsxs(gd,{value:r,onValueChange:I=>n(I),className:"flex flex-col space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"light",id:"theme-light"}),o.jsx(Ne,{htmlFor:"theme-light",children:"Light"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"dark",id:"theme-dark"}),o.jsx(Ne,{htmlFor:"theme-dark",children:"Dark"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"system",id:"theme-system"}),o.jsx(Ne,{htmlFor:"theme-system",children:"System"})]})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Font Size"}),o.jsx(Fr,{children:"Adjust the text size throughout the application."})]}),o.jsx(zt,{children:o.jsxs(gd,{value:s,onValueChange:I=>a(I),className:"flex flex-col space-y-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"small",id:"font-small"}),o.jsx(Ne,{htmlFor:"font-small",className:"text-sm",children:"Small"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"medium",id:"font-medium"}),o.jsx(Ne,{htmlFor:"font-medium",className:"text-base",children:"Medium"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:"large",id:"font-large"}),o.jsx(Ne,{htmlFor:"font-large",className:"text-lg",children:"Large"})]})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Business Name"}),o.jsx(Fr,{children:"Set your business name to be displayed throughout the application."})]}),o.jsx(zt,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ie,{id:"business-name",value:u,onChange:I=>d(I.target.value),placeholder:"Enter your business name",className:"flex-1"}),o.jsx(me,{onClick:N,disabled:h||u===t,size:"sm",children:h?"Saving...":"Save"})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Language"}),o.jsx(Fr,{children:"Choose your preferred language for the application."})]}),o.jsx(zt,{children:o.jsxs(dn,{value:i,onValueChange:I=>l(I),children:[o.jsx(nn,{className:"w-full md:w-[280px]",children:o.jsx(hn,{placeholder:"Select Language"})}),o.jsx(sn,{children:GW.map(I=>o.jsxs(xt,{value:I.code,children:[I.nativeName," (",I.name,")"]},I.code))})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Currency"}),o.jsx(Fr,{children:"Choose your preferred currency for transactions."})]}),o.jsx(zt,{children:o.jsxs(dn,{value:m,onValueChange:k,children:[o.jsx(nn,{className:"w-full md:w-[280px]",children:o.jsx(hn,{placeholder:"Select Currency"})}),o.jsx(sn,{children:_H.map(I=>o.jsxs(xt,{value:I.code,children:[I.symbol," - ",I.name," (",I.code,")"]},I.code))})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Date Format"}),o.jsx(Fr,{children:"Choose how dates are displayed throughout the application."})]}),o.jsx(zt,{children:o.jsxs(dn,{value:v,onValueChange:A,children:[o.jsx(nn,{className:"w-full md:w-[280px]",children:o.jsx(hn,{placeholder:"Select Date Format"})}),o.jsx(sn,{children:jH.map(I=>o.jsx(xt,{value:I.value,children:I.label},I.value))})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{className:"pb-3",children:[o.jsx(er,{className:"text-base",children:"Default View"}),o.jsx(Fr,{children:"Choose your preferred default view for the application."})]}),o.jsx(zt,{children:o.jsx(gd,{value:_,onValueChange:W,className:"flex flex-col space-y-1",children:NH.map(I=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(La,{value:I.value,id:`view-${I.value}`}),o.jsx(Ne,{htmlFor:`view-${I.value}`,children:I.label})]},I.value))})})]})]})},kH=({userId:t})=>{const{toast:e}=Xt(),[r,n]=w.useState(!1),[s,a]=w.useState({transactionDetails:!0,businessTransactions:!0,clients:!0});w.useEffect(()=>{(()=>{const g=localStorage.getItem("syncSettings");g&&a(JSON.parse(g))})()},[]);const i=m=>{localStorage.setItem("syncSettings",JSON.stringify(m)),a(m)},l=m=>{const g={...s,[m]:!s[m]};i(g),e({title:"Sync Settings Updated",description:`${m} sync has been ${g[m]?"enabled":"disabled"}.`})},c=async()=>{if(!t){e({title:"Sync Failed",description:"You must be logged in to sync data.",variant:"destructive"});return}n(!0);try{await new Promise(m=>setTimeout(m,2e3)),e({title:"Sync Complete",description:"Your data has been synchronized with the cloud."})}catch(m){console.error("Sync error:",m),e({title:"Sync Failed",description:"There was an error synchronizing your data. Please try again.",variant:"destructive"})}finally{n(!1)}},u=async()=>{try{const m=["transactions","clients","dailyLogs"];for(const g of m){const v=indexedDB.deleteDatabase(g);await new Promise((b,_)=>{v.onsuccess=b,v.onerror=_})}e({title:"Local Data Cleared",description:"All local data has been cleared successfully."})}catch(m){console.error("Error clearing local data:",m),e({title:"Operation Failed",description:"Failed to clear local data. Please try again.",variant:"destructive"})}},d=async()=>{try{const m=localStorage.getItem("supabase.auth.token");localStorage.clear(),m&&localStorage.setItem("supabase.auth.token",m);const g=["transactions","clients","dailyLogs"];for(const v of g){const b=indexedDB.deleteDatabase(v);await new Promise((_,S)=>{b.onsuccess=_,b.onerror=S})}e({title:"Application Reset",description:"The application has been reset to its default state."}),window.location.reload()}catch(m){console.error("Error resetting application:",m),e({title:"Reset Failed",description:"Failed to reset the application. Please try again.",variant:"destructive"})}},h=async()=>{try{const m={},g=["transactions","clients","dailyLogs"];m.timestamp=new Date().toISOString(),m.userId=t,m.settings={syncSettings:s,theme:localStorage.getItem("theme"),fontSize:localStorage.getItem("fontSize"),businessName:localStorage.getItem("businessName"),language:localStorage.getItem("language"),currency:localStorage.getItem("currency"),dateFormat:localStorage.getItem("dateFormat"),defaultView:localStorage.getItem("defaultView")};const v=JSON.stringify(m,null,2),b="data:application/json;charset=utf-8,"+encodeURIComponent(v),_=`transactly-backup-${new Date().toISOString().slice(0,10)}.json`,S=document.createElement("a");S.setAttribute("href",b),S.setAttribute("download",_),S.click(),e({title:"Backup Created",description:"Your data has been backed up successfully."})}catch(m){console.error("Error creating backup:",m),e({title:"Backup Failed",description:"Failed to create backup. Please try again.",variant:"destructive"})}},f=async m=>{var v;const g=(v=m.target.files)==null?void 0:v[0];if(g){try{const b=new FileReader;b.onload=async _=>{var S;try{const N=JSON.parse((S=_.target)==null?void 0:S.result);if(!N||!N.timestamp)throw new Error("Invalid backup file");if(N.settings)for(const[k,A]of Object.entries(N.settings))k==="syncSettings"?i(A):A&&localStorage.setItem(k,A);e({title:"Restore Complete",description:`Data from ${new Date(N.timestamp).toLocaleString()} has been restored.`}),window.location.reload()}catch(N){console.error("Error parsing backup:",N),e({title:"Restore Failed",description:"The backup file is invalid or corrupted.",variant:"destructive"})}},b.readAsText(g)}catch(b){console.error("Error reading backup file:",b),e({title:"Restore Failed",description:"Failed to read the backup file. Please try again.",variant:"destructive"})}m.target.value=""}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Data Management"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your data synchronization and storage options."})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Synchronization"}),o.jsx(Fr,{children:"Control how your data syncs with the cloud database."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Ne,{htmlFor:"transaction-sync",children:"Transaction Details"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Sync transaction details with the cloud"})]}),o.jsx(lo,{id:"transaction-sync",checked:s.transactionDetails,onCheckedChange:()=>l("transactionDetails")})]}),o.jsx(Zp,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Ne,{htmlFor:"business-sync",children:"Business Transactions"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Sync business transactions with the cloud"})]}),o.jsx(lo,{id:"business-sync",checked:s.businessTransactions,onCheckedChange:()=>l("businessTransactions")})]}),o.jsx(Zp,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Ne,{htmlFor:"clients-sync",children:"Clients"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Sync client information with the cloud"})]}),o.jsx(lo,{id:"clients-sync",checked:s.clients,onCheckedChange:()=>l("clients")})]})]}),o.jsx(me,{onClick:c,disabled:r,className:"w-full mt-4",children:r?o.jsxs(o.Fragment,{children:[o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}),"Syncing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ua,{className:"mr-2 h-4 w-4"}),"Sync Now"]})})]})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Backup & Restore"}),o.jsx(Fr,{children:"Create backups of your data or restore from a previous backup."})]}),o.jsx(zt,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(me,{variant:"outline",onClick:h,className:"w-full",children:[o.jsx(hp,{className:"mr-2 h-4 w-4"}),"Backup Data"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",id:"restore-file",accept:".json",onChange:f,className:"absolute inset-0 opacity-0 cursor-pointer"}),o.jsxs(me,{variant:"outline",className:"w-full pointer-events-none",children:[o.jsx(hp,{className:"mr-2 h-4 w-4"}),"Restore from Backup"]})]})]})})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Data Cleanup"}),o.jsx(Fr,{children:"Clear local data or reset the application to its default state."})]}),o.jsx(zt,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(Rp,{children:[o.jsx(n0,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:"w-full",children:[o.jsx(En,{className:"mr-2 h-4 w-4"}),"Clear Local Data"]})}),o.jsxs(qd,{children:[o.jsxs(zd,{children:[o.jsx(Hd,{children:"Clear Local Data?"}),o.jsx(Gd,{children:"This will delete all locally stored data. This action cannot be undone. Your cloud data will remain intact."})]}),o.jsxs(Wd,{children:[o.jsx(Kd,{children:"Cancel"}),o.jsx(Yd,{onClick:u,children:"Clear Data"})]})]})]}),o.jsxs(Rp,{children:[o.jsx(n0,{asChild:!0,children:o.jsxs(me,{variant:"destructive",className:"w-full",children:[o.jsx(En,{className:"mr-2 h-4 w-4"}),"Reset Application"]})}),o.jsxs(qd,{children:[o.jsxs(zd,{children:[o.jsx(Hd,{children:"Reset Application?"}),o.jsx(Gd,{children:"This will reset the application to its default state, clearing all local data and settings. This action cannot be undone. Your cloud data will remain intact."})]}),o.jsxs(Wd,{children:[o.jsx(Kd,{children:"Cancel"}),o.jsx(Yd,{onClick:d,children:"Reset"})]})]})]})]})})]})]})},AH=({userId:t})=>{const{toast:e}=Xt(),[r,n]=w.useState(null),[s,a]=w.useState(!1),i=async c=>{if(!t){e({title:"Export Failed",description:"You must be logged in to export data.",variant:"destructive"});return}n(c);try{await new Promise(d=>setTimeout(d,2e3));const u=`transactly-export-${new Date().toISOString().slice(0,10)}.${c}`;if(c==="csv"||c==="excel"){const d=`id,date,description,amount
1,2023-01-01,Sample transaction,100.00`,h=new Blob([d],{type:c==="csv"?"text/csv":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),f=URL.createObjectURL(h),m=document.createElement("a");m.href=f,m.download=u,m.click(),URL.revokeObjectURL(f)}else c==="pdf"&&e({title:"PDF Export",description:"PDF export functionality would be implemented here."});e({title:"Export Complete",description:`Your data has been exported as ${c.toUpperCase()}.`})}catch(u){console.error(`Error exporting as ${c}:`,u),e({title:"Export Failed",description:`There was an error exporting your data as ${c.toUpperCase()}. Please try again.`,variant:"destructive"})}finally{n(null)}},l=async c=>{var d,h;const u=(d=c.target.files)==null?void 0:d[0];if(u){if(!t){e({title:"Import Failed",description:"You must be logged in to import data.",variant:"destructive"});return}a(!0);try{const f=(h=u.name.split(".").pop())==null?void 0:h.toLowerCase();if(!["csv","xlsx","json"].includes(f||""))throw new Error("Unsupported file format. Please use CSV, Excel, or JSON files.");await new Promise(m=>setTimeout(m,2e3)),e({title:"Import Complete",description:"Your data has been imported successfully."})}catch(f){console.error("Error importing data:",f),e({title:"Import Failed",description:f.message||"There was an error importing your data. Please try again.",variant:"destructive"})}finally{a(!1),c.target.value=""}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Import & Export"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Export your data in various formats or import data from external sources."})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Export Data"}),o.jsx(Fr,{children:"Export your transaction data in various formats."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs(me,{variant:"outline",onClick:()=>i("csv"),disabled:r!==null,className:"w-full",children:[r==="csv"?o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}):o.jsx(fb,{className:"mr-2 h-4 w-4"}),"Export as CSV"]}),o.jsxs(me,{variant:"outline",onClick:()=>i("excel"),disabled:r!==null,className:"w-full",children:[r==="excel"?o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}):o.jsx(fb,{className:"mr-2 h-4 w-4"}),"Export as Excel"]}),o.jsxs(me,{variant:"outline",onClick:()=>i("pdf"),disabled:r!==null,className:"w-full",children:[r==="pdf"?o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}):o.jsx(lc,{className:"mr-2 h-4 w-4"}),"Export as PDF"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Exports include all your transaction data, client information, and daily logs."})]})]}),o.jsxs(Wt,{children:[o.jsxs(Jt,{children:[o.jsx(er,{children:"Import Data"}),o.jsx(Fr,{children:"Import data from external sources."})]}),o.jsxs(zt,{className:"space-y-4",children:[o.jsxs(Rp,{children:[o.jsx(n0,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:"w-full",disabled:s,children:[s?o.jsx(pi,{className:"mr-2 h-4 w-4 animate-spin"}):o.jsx(yT,{className:"mr-2 h-4 w-4"}),"Import Data"]})}),o.jsxs(qd,{children:[o.jsxs(zd,{children:[o.jsx(Hd,{children:"Import Data"}),o.jsxs(Gd,{children:["This will import data from an external file. Supported formats are CSV, Excel, and JSON.",o.jsx("br",{}),o.jsx("br",{}),o.jsx("strong",{children:"Note:"})," Importing data may overwrite existing records if they have the same identifiers."]})]}),o.jsxs(Wd,{className:"flex items-center justify-between",children:[o.jsx(Kd,{children:"Cancel"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",id:"import-file",accept:".csv,.xlsx,.json",onChange:l,className:"absolute inset-0 opacity-0 cursor-pointer",disabled:s}),o.jsx(Yd,{className:"pointer-events-none",children:"Select File"})]})]})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported formats: CSV, Excel (.xlsx), and JSON. Make sure your data follows the expected format."})]})]})]})},PH=()=>{const[t,e]=w.useState(()=>{const m=window.location.hash.replace("#","");return["profile","appearance","data-management","import-export"].includes(m)?m:"profile"}),{user:r,updateProfile:n,updatePassword:s}=_r(),{toast:a}=Xt(),[i,l]=w.useState("TransactLy"),[c,u]=w.useState("en");w.useEffect(()=>{(async()=>{try{const g=await localStorage.getItem("businessName"),v=await localStorage.getItem("language");g&&l(g),v&&u(v)}catch(g){console.error("Failed to load settings:",g)}})()},[]),w.useEffect(()=>{window.location.hash=t},[t]);const d=async m=>{try{await n({name:m.name,phone:m.phone}),a({title:"Profile Updated",description:"Your profile has been updated successfully."})}catch(g){console.error("Error updating profile:",g),a({title:"Update Failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}},h=async(m,g)=>{try{await s(g),a({title:"Password Updated",description:"Your password has been changed successfully."})}catch(v){console.error("Error changing password:",v),a({title:"Change Failed",description:"Failed to change password. Please try again.",variant:"destructive"})}},f=async m=>{try{l(m),await localStorage.setItem("businessName",m),a({title:"Business Name Updated",description:"Your business name has been updated successfully."})}catch(g){console.error("Error saving business name:",g),a({title:"Update Failed",description:"Failed to update business name. Please try again.",variant:"destructive"})}};return o.jsxs("div",{className:"container mx-auto py-6 px-4 md:px-6 max-w-6xl",children:[o.jsx(mH,{}),o.jsxs(Wt,{className:"mt-6",children:[o.jsxs(Jt,{className:"pb-4",children:[o.jsx(er,{children:"Settings"}),o.jsx(Fr,{children:"Manage your account settings and preferences."})]}),o.jsx(zt,{className:"p-0",children:o.jsxs(Nc,{defaultValue:"profile",value:t,onValueChange:e,className:"w-full",children:[o.jsxs(kh,{className:"flex border-b rounded-none w-full h-auto py-0 px-2 overflow-x-auto scrollbar-hide settings-tabs","data-force-show-text":"true",children:[o.jsx(gs,{value:"profile",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:font-medium rounded-none py-2 text-sm whitespace-nowrap settings-tab",icon:o.jsx(RT,{className:"h-5 w-5"}),children:"Profile"}),o.jsx(gs,{value:"appearance",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:font-medium rounded-none py-2 text-sm whitespace-nowrap settings-tab",icon:o.jsx(NT,{className:"h-5 w-5"}),children:"Appearance"}),o.jsx(gs,{value:"data-management",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:font-medium rounded-none py-2 text-sm whitespace-nowrap settings-tab",icon:o.jsx(hp,{className:"h-5 w-5"}),children:"Data Management"}),o.jsx(gs,{value:"import-export",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:font-medium rounded-none py-2 text-sm whitespace-nowrap settings-tab",icon:o.jsx(bT,{className:"h-5 w-5"}),children:"Import/Export"})]}),o.jsxs("div",{className:"p-4 md:p-6",children:[o.jsx(ts,{value:"profile",className:"mt-0",children:o.jsx(wH,{user:r,onUpdate:d,onPasswordChange:h})}),o.jsx(ts,{value:"appearance",className:"mt-0",children:o.jsx(CH,{businessName:i,onBusinessNameChange:f})}),o.jsx(ts,{value:"data-management",className:"mt-0",children:o.jsx(kH,{userId:r==null?void 0:r.id})}),o.jsx(ts,{value:"import-export",className:"mt-0",children:o.jsx(AH,{userId:r==null?void 0:r.id})})]})]})})]})]})},M3=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState("unchecked"),[s,a]=w.useState(null),[i,l]=w.useState({}),c=async()=>{e(!0),n("unchecked"),a(null),l({});try{const{supabaseSimple:u}=await Un(async()=>{const{supabaseSimple:g}=await Promise.resolve().then(()=>k0);return{supabaseSimple:g}},void 0),{error:d}=await u.from("_fake_table_for_connection_test").select("*").limit(1).catch(()=>({error:{message:"Connection test failed"}}));if(d&&!d.message.includes("does not exist")){n("error"),a(`Connection error: ${d.message}`);return}const h=["buyers","sellers","transactions","users"],f={};for(const g of h)try{const{error:v}=await u.from(g).select("count").limit(1);f[g]=!v||!v.message.includes("does not exist")}catch{f[g]=!1}l(f),n("success");const m=Object.entries(f).filter(([g,v])=>!v).map(([g])=>g);m.length>0&&a(`Connected, but missing tables: ${m.join(", ")}`)}catch(u){n("error"),a(`Error: ${u.message}`)}finally{e(!1)}};return o.jsxs("div",{className:"flex flex-col items-center p-4 border rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Supabase Connection Status"}),o.jsxs("div",{className:"flex items-center mb-4",children:[r==="unchecked"?o.jsx(hp,{className:"h-8 w-8 text-gray-400"}):r==="success"?o.jsx(dp,{className:"h-8 w-8 text-green-500"}):o.jsx(Yy,{className:"h-8 w-8 text-red-500"}),o.jsx("span",{className:"ml-2",children:r==="unchecked"?"Connection not checked":r==="success"?"Connected to Supabase":"Connection error"})]}),s&&o.jsx("div",{className:"text-red-500 mb-4 text-sm",children:s}),Object.keys(i).length>0&&o.jsxs("div",{className:"mb-4 w-full",children:[o.jsx("h4",{className:"text-sm font-medium mb-2",children:"Table Status:"}),o.jsx("ul",{className:"text-sm",children:Object.entries(i).map(([u,d])=>o.jsxs("li",{className:"flex items-center",children:[d?o.jsx(dp,{className:"h-4 w-4 text-green-500 mr-2"}):o.jsx(Yy,{className:"h-4 w-4 text-red-500 mr-2"}),u,": ",d?"Exists":"Missing"]},u))})]}),o.jsx(me,{onClick:c,disabled:t,variant:"outline",size:"sm",children:t?"Checking...":"Check Connection"})]})},EH=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[s,a]=w.useState(""),[i,l]=w.useState([]),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[g,v]=w.useState(null),[b,_]=w.useState({user_id:"",name:"",email:"",phone:""}),{user:S}=_r(),{toast:N}=Xt();w.useEffect(()=>{A()},[S]),w.useEffect(()=>{t.length>0?W():l([])},[t,s]);const k=T=>{console.log("Deduplicating buyers, initial count:",T.length);const B=new Map;T.forEach($=>{B.set($.id,$)});const z=[],re=new Set;return Array.from(B.values()).forEach($=>{const V=$.name.toLowerCase().trim(),X=($.email||"").toLowerCase().trim(),he=($.phone||"").toLowerCase().trim(),je=`${V}-${X}-${he}`;re.has(je)?console.log(`Found duplicate buyer: ${$.name} (${$.id})`):(re.add(je),z.push($))}),console.log("After deduplication, buyer count:",z.length),z},A=async()=>{if(S!=null&&S.id){console.log("Loading buyers for user:",S.id);try{n(!0);const T=await Ee.getBuyersByUser(S.id);console.log("Loaded buyers from local database:",T.length);const B=k(T);if(e(B),B.length<T.length){console.log(`Found ${T.length-B.length} duplicate buyers, cleaning up database`);try{const z=await Ee.cleanupDuplicateBuyers(S.id);console.log(`Successfully removed ${z} duplicate buyers from database`),z>0&&N({title:"Database Cleanup",description:`Removed ${z} duplicate buyer records`})}catch(z){console.error("Error cleaning up duplicate buyers:",z)}}}catch(T){console.error("Failed to load buyers:",T),N({title:"Error",description:"Failed to load buyers",variant:"destructive"})}finally{n(!1)}}},W=()=>{if(!s.trim()){l(t);return}const T=s.toLowerCase(),B=t.filter(z=>z.name.toLowerCase().includes(T)||z.email&&z.email.toLowerCase().includes(T)||z.phone&&z.phone.toLowerCase().includes(T));l(B)},I=T=>{const{name:B,value:z}=T.target;d&&g?v({...g,[B]:z}):_({...b,[B]:z})},F=async()=>{if(console.log("handleAddBuyer called"),!(S!=null&&S.id)){console.log("No user ID, returning");return}try{if(console.log("Adding new buyer:",b),!b.name){N({title:"Validation Error",description:"Buyer name is required",variant:"destructive"});return}const T={...b,user_id:S.id};console.log("Checking for duplicate buyers...");const z=(await Ee.getBuyersByUser(S.id)).filter($=>$.name.toLowerCase()===T.name.toLowerCase()&&($.phone===T.phone||!$.phone&&!T.phone)&&($.email===T.email||!$.email&&!T.email));if(z.length>0){console.log("Found potential duplicate buyer:",z[0]),N({title:"Duplicate Detected",description:"A buyer with this name and contact information already exists.",variant:"destructive"});return}const re=await Ee.addBuyer(T);if(console.log("Added buyer to local database:",re),navigator.onLine)try{console.log("Automatically syncing new buyer to Supabase:",re);const $=await Ge.createBuyer(re);$?console.log("Successfully synced buyer to Supabase:",$):(console.error("Failed to sync buyer to Supabase, trying fallback methods"),console.log("Trying syncBuyers as fallback..."),await mt.syncBuyers(S.id)||(console.log("Trying forceSyncContacts as final fallback..."),await mt.forceSyncContacts(S.id)))}catch($){console.error("Error syncing buyer to Supabase:",$)}await A(),u(!1),_({user_id:S.id,name:"",email:"",phone:""}),N({title:"Success",description:"Buyer added successfully"})}catch(T){console.error("Error adding buyer:",T),N({title:"Error",description:"Failed to add buyer",variant:"destructive"})}},ee=async()=>{if(g){console.log("handleEditBuyer called for buyer:",g);try{if(!g.name){N({title:"Validation Error",description:"Buyer name is required",variant:"destructive"});return}if(await Ee.updateBuyer(g),console.log("Updated buyer in local database:",g),navigator.onLine)try{console.log("Automatically syncing updated buyer to Supabase:",g);const T=await Ge.updateBuyer(g);T?console.log("Successfully updated buyer in Supabase:",T):(console.error("Failed to update buyer in Supabase, trying fallback methods"),console.log("Trying syncBuyers as fallback..."),await mt.syncBuyers(S.id)||(console.log("Trying forceSyncContacts as final fallback..."),await mt.forceSyncContacts(S.id)))}catch(T){console.error("Error syncing updated buyer to Supabase:",T)}await A(),h(!1),v(null),N({title:"Success",description:"Buyer updated successfully"})}catch(T){console.error("Error updating buyer:",T),N({title:"Error",description:"Failed to update buyer",variant:"destructive"})}}},ae=async()=>{if(g){console.log("handleDeleteBuyer called for buyer:",g.id);try{if(await Ee.deleteBuyer(g.id),console.log("Deleted buyer from local database:",g.id),navigator.onLine)try{console.log("Automatically deleting buyer from Supabase:",g.id),await Ge.deleteBuyer(g.id)?console.log("Successfully deleted buyer from Supabase:",g.id):console.error("Failed to delete buyer from Supabase")}catch(T){console.error("Error deleting buyer from Supabase:",T)}await A(),m(!1),v(null),N({title:"Success",description:"Buyer deleted successfully"})}catch(T){console.error("Error deleting buyer:",T),N({title:"Error",description:"Failed to delete buyer",variant:"destructive"})}}},R=T=>{v(T),h(!0)},D=T=>{v(T),m(!0)};return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):o.jsxs("div",{className:"space-y-6 relative",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Buyers"}),o.jsx(Op,{type:"buyers",onSyncComplete:A,className:"ml-2"}),o.jsxs(me,{variant:"outline",size:"sm",onClick:async()=>{alert("Attempting direct sync to Supabase...");try{if(!(S!=null&&S.id)){alert("No user ID found");return}const T=await Ee.getBuyersByUser(S.id);alert(`Found ${T.length} local buyers to sync`);const{supabaseSimple:B}=await Un(async()=>{const{supabaseSimple:$}=await Promise.resolve().then(()=>k0);return{supabaseSimple:$}},void 0);let z=0,re=0;for(const $ of T)try{const V={...$,created_at:$.created_at||new Date().toISOString()},{error:X}=await B.from("buyers").upsert(V).select();X?(console.error(`Error syncing buyer ${$.id}:`,X),re++):(console.log(`Successfully synced buyer ${$.id}`),z++)}catch(V){console.error(`Error processing buyer ${$.id}:`,V),re++}alert(`Sync complete: ${z} succeeded, ${re} failed`),await A()}catch(T){console.error("Error in direct sync:",T),alert("Error in direct sync: "+T.message)}},className:"ml-2",children:[o.jsx(ua,{className:"h-4 w-4 mr-2"}),"Direct Sync"]})]}),o.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:o.jsxs("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[o.jsx(T0,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Ie,{placeholder:"Search buyers...",className:"pl-8",value:s,onChange:T=>a(T.target.value)})]})})]}),o.jsx("div",{className:"mb-6",children:o.jsx(M3,{})}),i.length===0?o.jsx("div",{className:"text-center py-10 text-muted-foreground",children:t.length===0?"You haven't added any buyers yet. Click 'Add Buyer' to get started.":"No buyers match your search criteria."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(T=>o.jsxs(Wt,{children:[o.jsx(Jt,{className:"pb-2",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[o.jsx(er,{className:"text-lg mb-2 sm:mb-0",children:T.name}),o.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto justify-end",children:[o.jsxs(me,{variant:"outline",size:"sm",className:"h-8 px-2 text-blue-600",onClick:()=>R(T),children:[o.jsx(ws,{className:"h-4 w-4 mr-1"}),"Edit"]}),o.jsxs(me,{variant:"outline",size:"sm",className:"h-8 px-2 text-red-600",onClick:()=>D(T),children:[o.jsx(En,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})}),o.jsx(zt,{children:o.jsxs("div",{className:"space-y-2",children:[T.phone&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Phone:"}),o.jsx("span",{className:"text-sm font-medium",children:T.phone})]}),T.email&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Email:"}),o.jsx("span",{className:"text-sm font-medium",children:T.email})]})]})})]},T.id))}),o.jsx("div",{className:"floating-add-button",onClick:()=>u(!0),title:"Add New Buyer",children:o.jsx(Is,{size:28})}),o.jsx(Kt,{open:c,onOpenChange:u,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add New Buyer"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"name",name:"name",value:b.name,onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"phone",name:"phone",value:b.phone||"",onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"email",name:"email",type:"email",value:b.email||"",onChange:I,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),o.jsx(me,{onClick:F,children:"Add Buyer"})]})]})}),o.jsx(Kt,{open:d,onOpenChange:h,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Buyer"})}),g&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"edit_name",name:"name",value:g.name,onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"edit_phone",name:"phone",value:g.phone||"",onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"edit_email",name:"email",type:"email",value:g.email||"",onChange:I,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),o.jsx(me,{onClick:ee,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:f,onOpenChange:m,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Buyer"})}),o.jsx("p",{children:"Are you sure you want to delete this buyer? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:ae,children:"Delete"})]})]})})]})},TH=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[s,a]=w.useState(""),[i,l]=w.useState([]),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[g,v]=w.useState(null),[b,_]=w.useState({user_id:"",name:"",email:"",phone:""}),{user:S}=_r(),{toast:N}=Xt();w.useEffect(()=>{A()},[S]),w.useEffect(()=>{t.length>0?W():l([])},[t,s]);const k=T=>{console.log("Deduplicating sellers, initial count:",T.length);const B=new Map;T.forEach($=>{B.set($.id,$)});const z=[],re=new Set;return Array.from(B.values()).forEach($=>{const V=$.name.toLowerCase().trim(),X=($.email||"").toLowerCase().trim(),he=($.phone||"").toLowerCase().trim(),je=`${V}-${X}-${he}`;re.has(je)?console.log(`Found duplicate seller: ${$.name} (${$.id})`):(re.add(je),z.push($))}),console.log("After deduplication, seller count:",z.length),z},A=async()=>{if(S!=null&&S.id){console.log("Loading sellers for user:",S.id);try{n(!0);const T=await Ee.getSellersByUser(S.id);console.log("Loaded sellers from local database:",T.length);const B=k(T);if(e(B),B.length<T.length){console.log(`Found ${T.length-B.length} duplicate sellers, cleaning up database`);try{const z=await Ee.cleanupDuplicateSellers(S.id);console.log(`Successfully removed ${z} duplicate sellers from database`),z>0&&N({title:"Database Cleanup",description:`Removed ${z} duplicate seller records`})}catch(z){console.error("Error cleaning up duplicate sellers:",z)}}}catch(T){console.error("Failed to load sellers:",T),N({title:"Error",description:"Failed to load sellers",variant:"destructive"})}finally{n(!1)}}},W=()=>{if(!s.trim()){l(t);return}const T=s.toLowerCase(),B=t.filter(z=>z.name.toLowerCase().includes(T)||z.email&&z.email.toLowerCase().includes(T)||z.phone&&z.phone.toLowerCase().includes(T));l(B)},I=T=>{const{name:B,value:z}=T.target;d&&g?v({...g,[B]:z}):_({...b,[B]:z})},F=async()=>{if(S!=null&&S.id)try{if(!b.name){N({title:"Validation Error",description:"Seller name is required",variant:"destructive"});return}const T={...b,user_id:S.id};console.log("Checking for duplicate sellers...");const z=(await Ee.getSellersByUser(S.id)).filter($=>$.name.toLowerCase()===T.name.toLowerCase()&&($.phone===T.phone||!$.phone&&!T.phone)&&($.email===T.email||!$.email&&!T.email));if(z.length>0){console.log("Found potential duplicate seller:",z[0]),N({title:"Duplicate Detected",description:"A seller with this name and contact information already exists.",variant:"destructive"});return}const re=await Ee.addSeller(T);if(console.log("Added seller to local database:",re),navigator.onLine)try{console.log("Automatically syncing new seller to Supabase:",re);const $=await Ge.createSeller(re);$?console.log("Successfully synced seller to Supabase:",$):(console.error("Failed to sync seller to Supabase, trying fallback methods"),console.log("Trying syncSellers as fallback..."),await mt.syncSellers(S.id)||(console.log("Trying forceSyncContacts as final fallback..."),await mt.forceSyncContacts(S.id)))}catch($){console.error("Error syncing seller to Supabase:",$)}await A(),u(!1),_({user_id:S.id,name:"",email:"",phone:""}),N({title:"Success",description:"Seller added successfully"})}catch(T){console.error("Error adding seller:",T),N({title:"Error",description:"Failed to add seller",variant:"destructive"})}},ee=async()=>{if(g){console.log("handleEditSeller called for seller:",g);try{if(!g.name){N({title:"Validation Error",description:"Seller name is required",variant:"destructive"});return}if(await Ee.updateSeller(g),console.log("Updated seller in local database:",g),navigator.onLine)try{console.log("Automatically syncing updated seller to Supabase:",g);const T=await Ge.updateSeller(g);T?console.log("Successfully updated seller in Supabase:",T):(console.error("Failed to update seller in Supabase, trying fallback methods"),console.log("Trying syncSellers as fallback..."),await mt.syncSellers(S.id)||(console.log("Trying forceSyncContacts as final fallback..."),await mt.forceSyncContacts(S.id)))}catch(T){console.error("Error syncing updated seller to Supabase:",T)}await A(),h(!1),v(null),N({title:"Success",description:"Seller updated successfully"})}catch(T){console.error("Error updating seller:",T),N({title:"Error",description:"Failed to update seller",variant:"destructive"})}}},ae=async()=>{if(g){console.log("handleDeleteSeller called for seller:",g.id);try{if(await Ee.deleteSeller(g.id),console.log("Deleted seller from local database:",g.id),navigator.onLine)try{console.log("Automatically deleting seller from Supabase:",g.id),await Ge.deleteSeller(g.id)?console.log("Successfully deleted seller from Supabase:",g.id):console.error("Failed to delete seller from Supabase")}catch(T){console.error("Error deleting seller from Supabase:",T)}await A(),m(!1),v(null),N({title:"Success",description:"Seller deleted successfully"})}catch(T){console.error("Error deleting seller:",T),N({title:"Error",description:"Failed to delete seller",variant:"destructive"})}}},R=T=>{v(T),h(!0)},D=T=>{v(T),m(!0)};return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):o.jsxs("div",{className:"space-y-6 relative",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Sellers"}),o.jsx(Op,{type:"sellers",onSyncComplete:A,className:"ml-2"}),o.jsxs(me,{variant:"outline",size:"sm",onClick:async()=>{alert("Attempting direct sync to Supabase...");try{if(!(S!=null&&S.id)){alert("No user ID found");return}const T=await Ee.getSellersByUser(S.id);alert(`Found ${T.length} local sellers to sync`);const{supabaseSimple:B}=await Un(async()=>{const{supabaseSimple:$}=await Promise.resolve().then(()=>k0);return{supabaseSimple:$}},void 0);let z=0,re=0;for(const $ of T)try{const V={...$,created_at:$.created_at||new Date().toISOString()},{error:X}=await B.from("sellers").upsert(V).select();X?(console.error(`Error syncing seller ${$.id}:`,X),re++):(console.log(`Successfully synced seller ${$.id}`),z++)}catch(V){console.error(`Error processing seller ${$.id}:`,V),re++}alert(`Sync complete: ${z} succeeded, ${re} failed`),await A()}catch(T){console.error("Error in direct sync:",T),alert("Error in direct sync: "+T.message)}},className:"ml-2",children:[o.jsx(ua,{className:"h-4 w-4 mr-2"}),"Direct Sync"]})]}),o.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:o.jsxs("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[o.jsx(T0,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Ie,{placeholder:"Search sellers...",className:"pl-8",value:s,onChange:T=>a(T.target.value)})]})})]}),o.jsx("div",{className:"mb-6",children:o.jsx(M3,{})}),i.length===0?o.jsx("div",{className:"text-center py-10 text-muted-foreground",children:t.length===0?"You haven't added any sellers yet. Click 'Add Seller' to get started.":"No sellers match your search criteria."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(T=>o.jsxs(Wt,{children:[o.jsx(Jt,{className:"pb-2",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-2",children:[o.jsx(er,{className:"text-lg mb-2 sm:mb-0",children:T.name}),o.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto justify-end",children:[o.jsxs(me,{variant:"outline",size:"sm",className:"h-8 px-2 text-blue-600",onClick:()=>R(T),children:[o.jsx(ws,{className:"h-4 w-4 mr-1"}),"Edit"]}),o.jsxs(me,{variant:"outline",size:"sm",className:"h-8 px-2 text-red-600",onClick:()=>D(T),children:[o.jsx(En,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})}),o.jsx(zt,{children:o.jsxs("div",{className:"space-y-2",children:[T.phone&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Phone:"}),o.jsx("span",{className:"text-sm font-medium",children:T.phone})]}),T.email&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Email:"}),o.jsx("span",{className:"text-sm font-medium",children:T.email})]})]})})]},T.id))}),o.jsx("div",{className:"floating-add-button",onClick:()=>u(!0),title:"Add New Seller",children:o.jsx(Is,{size:28})}),o.jsx(Kt,{open:c,onOpenChange:u,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add New Seller"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"name",name:"name",value:b.name,onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"phone",name:"phone",value:b.phone||"",onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"email",name:"email",type:"email",value:b.email||"",onChange:I,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),o.jsx(me,{onClick:F,children:"Add Seller"})]})]})}),o.jsx(Kt,{open:d,onOpenChange:h,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Seller"})}),g&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_name",className:"text-right",children:"Name"}),o.jsx(Ie,{id:"edit_name",name:"name",value:g.name,onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_phone",className:"text-right",children:"Phone"}),o.jsx(Ie,{id:"edit_phone",name:"phone",value:g.phone||"",onChange:I,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_email",className:"text-right",children:"Email"}),o.jsx(Ie,{id:"edit_email",name:"email",type:"email",value:g.email||"",onChange:I,className:"col-span-3"})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),o.jsx(me,{onClick:ee,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:f,onOpenChange:m,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Seller"})}),o.jsx("p",{children:"Are you sure you want to delete this seller? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:ae,children:"Delete"})]})]})})]})},F3=({onSyncComplete:t,className:e=""})=>{const[r,n]=w.useState(!1),{toast:s}=Xt(),{user:a}=_r(),i=async()=>{if(!(!(a!=null&&a.id)||r))try{n(!0);const l=await mt.forceSyncContacts(a.id);s(l?{title:"Sync Successful",description:"Your data has been synchronized with the cloud."}:{title:"Sync Failed",description:"Please check your internet connection and try again.",variant:"destructive"}),t&&await t()}catch(l){console.error("Error syncing data:",l),s({title:"Sync Error",description:"An error occurred while syncing your data.",variant:"destructive"})}finally{n(!1)}};return o.jsxs(me,{variant:"outline",size:"sm",onClick:i,disabled:r||!navigator.onLine,className:e,children:[o.jsx(ua,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Force Sync"]})},LH=()=>{const[t,e]=w.useState("buyers"),[r,n]=w.useState(0),{user:s}=_r(),a=w.useCallback(async()=>{n(i=>i+1)},[]);return s?o.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6",children:[o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Contacts Management"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your buyers and sellers in one place"})]}),o.jsx(F3,{onSyncComplete:a,className:"self-end"})]}),o.jsxs(Nc,{defaultValue:"buyers",value:t,onValueChange:e,children:[o.jsxs(kh,{className:"grid w-full grid-cols-2 mb-8",children:[o.jsx(gs,{value:"buyers",children:"Buyers"}),o.jsx(gs,{value:"sellers",children:"Sellers"})]}),o.jsx(ts,{value:"buyers",children:o.jsx(EH,{},`buyers-${r}`)}),o.jsx(ts,{value:"sellers",children:o.jsx(TH,{},`sellers-${r}`)})]})]}):o.jsx(w0,{to:"/login"})},DH=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[s,a]=w.useState(""),[i,l]=w.useState([]),[c,u]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[g,v]=w.useState(null),[b,_]=w.useState({user_id:"",direction:"paid",payment_type:"cash",date:new Date().toISOString(),recipient_name:"",amount:0,is_third_party:!1,third_party_name:"",notes:""}),{user:S}=_r(),{toast:N}=Xt();w.useEffect(()=>{k()},[S]),w.useEffect(()=>{t.length>0?A():l([])},[t,s]);const k=async()=>{if(S!=null&&S.id)try{n(!0);const re=[...await Ee.getDailyLogsByUser(S.id)].sort(($,V)=>new Date(V.date).getTime()-new Date($.date).getTime());e(re)}catch(z){console.error("Failed to load daily logs:",z),N({title:"Error",description:"Failed to load daily logs",variant:"destructive"})}finally{n(!1)}},A=()=>{if(!s.trim()){l(t);return}const z=s.toLowerCase(),re=t.filter($=>$.recipient_name.toLowerCase().includes(z)||$.third_party_name&&$.third_party_name.toLowerCase().includes(z)||$.notes&&$.notes.toLowerCase().includes(z));l(re)},W=z=>{const{name:re,value:$,type:V}=z.target,X=V==="number"?parseFloat($):$;d&&g?v({...g,[re]:X}):_({...b,[re]:X})},I=(z,re)=>{d&&g?v({...g,[z]:re}):_({...b,[z]:re})},F=(z,re)=>{d&&g?v({...g,[z]:re}):_({...b,[z]:re})},ee=z=>{z&&(d&&g?v({...g,date:z.toISOString()}):_({...b,date:z.toISOString()}))},ae=async()=>{if(!(S!=null&&S.id)){console.error("Cannot add log: User ID is missing");return}try{if(console.log("Adding new daily log..."),!b.recipient_name||!b.amount){console.log("Validation error: Recipient name or amount is missing"),N({title:"Validation Error",description:"Recipient name and amount are required",variant:"destructive"});return}if(b.is_third_party&&!b.third_party_name){console.log("Validation error: Third party name is required when third party is enabled"),N({title:"Validation Error",description:"Third party name is required when third party is enabled",variant:"destructive"});return}const z={...b,user_id:S.id};console.log("Adding daily log to local database:",z);const re=await Ee.addDailyLog(z);if(console.log("Successfully added daily log to local database:",re),navigator.onLine){console.log("Online, syncing daily log to Supabase...");try{const $=await Ge.createDailyLog(re);$?console.log("Successfully synced daily log to Supabase:",$):console.error("Failed to sync daily log to Supabase: result was null")}catch($){console.error("Error syncing daily log to Supabase:",$)}}else console.log("Offline, skipping Supabase sync");if(console.log("Reloading logs..."),await k(),u(!1),_({user_id:S.id,direction:"paid",payment_type:"cash",date:new Date().toISOString(),recipient_name:"",amount:0,is_third_party:!1,third_party_name:"",notes:""}),N({title:"Success",description:"Daily log added successfully"}),navigator.onLine){console.log("Forcing sync of all data...");try{await mt.forceSyncContacts(S.id),console.log("Force sync completed successfully")}catch($){console.error("Error during force sync:",$)}}}catch(z){console.error("Error adding daily log:",z),N({title:"Error",description:"Failed to add daily log",variant:"destructive"})}},R=async()=>{if(g)try{if(!g.recipient_name||!g.amount){N({title:"Validation Error",description:"Recipient name and amount are required",variant:"destructive"});return}if(g.is_third_party&&!g.third_party_name){N({title:"Validation Error",description:"Third party name is required when third party is enabled",variant:"destructive"});return}if(await Ee.updateDailyLog(g),navigator.onLine)try{await Ge.updateDailyLog(g)}catch(z){console.error("Error syncing updated daily log to Supabase:",z)}await k(),h(!1),v(null),N({title:"Success",description:"Daily log updated successfully"})}catch(z){console.error("Error updating daily log:",z),N({title:"Error",description:"Failed to update daily log",variant:"destructive"})}},D=async()=>{if(g)try{if(await Ee.deleteDailyLog(g.id),navigator.onLine)try{await Ge.deleteDailyLog(g.id)}catch(z){console.error("Error syncing deleted daily log to Supabase:",z)}await k(),m(!1),v(null),N({title:"Success",description:"Daily log deleted successfully"})}catch(z){console.error("Error deleting daily log:",z),N({title:"Error",description:"Failed to delete daily log",variant:"destructive"})}},T=z=>{v(z),h(!0)},B=z=>{v(z),m(!0)};return r?o.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Daily Logs"}),o.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:o.jsxs("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[o.jsx(T0,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Ie,{placeholder:"Search logs...",className:"pl-8",value:s,onChange:z=>a(z.target.value)})]})})]}),i.length===0?o.jsx("div",{className:"text-center py-10 text-muted-foreground",children:t.length===0?"You haven't added any daily logs yet. Click 'Add Log' to get started.":"No logs match your search criteria."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(z=>o.jsxs(Wt,{className:Ve("overflow-hidden",z.direction==="received"?"border-green-200 dark:border-green-900":"border-red-200 dark:border-red-900"),children:[o.jsxs(Jt,{className:Ve("pb-2",z.direction==="received"?"bg-green-50 dark:bg-green-950/30":"bg-red-50 dark:bg-red-950/30"),children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center",children:[z.direction==="received"?o.jsx(hT,{className:"h-5 w-5 mr-2 text-green-600 dark:text-green-400"}):o.jsx(dT,{className:"h-5 w-5 mr-2 text-red-600 dark:text-red-400"}),o.jsx(er,{className:"text-lg",children:z.direction==="received"?"Received":"Paid"})]}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>T(z),children:o.jsx(ws,{className:"h-4 w-4"})}),o.jsx(me,{variant:"ghost",size:"icon",onClick:()=>B(z),children:o.jsx(En,{className:"h-4 w-4"})})]})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(z.date).toLocaleDateString()})]}),o.jsx(zt,{className:"pt-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:z.direction==="received"?"From:":"To:"}),o.jsx("span",{className:"text-sm font-medium",children:z.recipient_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),o.jsx("span",{className:Ve("text-sm font-medium",z.direction==="received"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:la(z.amount)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment Type:"}),o.jsx("span",{className:"text-sm font-medium capitalize",children:z.payment_type})]}),z.is_third_party&&z.third_party_name&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Third Party:"}),o.jsx("span",{className:"text-sm font-medium",children:z.third_party_name})]})]})}),z.notes&&o.jsx(_i,{className:"border-t pt-4 pb-4 bg-muted/30",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:z.notes})})]},z.id))}),o.jsx("div",{className:"floating-add-button",onClick:()=>u(!0),title:"Add New Log",children:o.jsx(Is,{size:32})}),o.jsx(Kt,{open:c,onOpenChange:u,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Add New Daily Log"})}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"direction",className:"text-right",children:"Direction"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(dn,{value:b.direction,onValueChange:z=>I("direction",z),children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select direction"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"paid",children:"Paid (Outgoing)"}),o.jsx(xt,{value:"received",children:"Received (Incoming)"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"date",className:"text-right",children:"Date"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(Mp,{children:[o.jsx(Fp,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:Ve("w-full justify-start text-left font-normal",!b.date&&"text-muted-foreground"),children:[o.jsx(up,{className:"mr-2 h-4 w-4"}),b.date?ma(new Date(b.date),"PPP"):o.jsx("span",{children:"Pick a date"})]})}),o.jsx(Zd,{className:"w-auto p-0",children:o.jsx(Jd,{mode:"single",selected:b.date?new Date(b.date):void 0,onSelect:ee,initialFocus:!0})})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"recipient_name",className:"text-right",children:b.direction==="received"?"From":"To"}),o.jsx(Ie,{id:"recipient_name",name:"recipient_name",value:b.recipient_name,onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"amount",className:"text-right",children:"Amount"}),o.jsx(Ie,{id:"amount",name:"amount",type:"number",value:b.amount||"",onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"payment_type",className:"text-right",children:"Payment Type"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(dn,{value:b.payment_type,onValueChange:z=>I("payment_type",z),children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select payment type"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"cash",children:"Cash"}),o.jsx(xt,{value:"upi",children:"UPI"}),o.jsx(xt,{value:"bank",children:"Bank Transfer"}),o.jsx(xt,{value:"others",children:"Others"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"is_third_party",className:"text-right",children:"Third Party"}),o.jsxs("div",{className:"flex items-center space-x-2 col-span-3",children:[o.jsx(lo,{id:"is_third_party",checked:b.is_third_party,onCheckedChange:z=>F("is_third_party",z)}),o.jsx(Ne,{htmlFor:"is_third_party",children:b.is_third_party?"Yes":"No"})]})]}),b.is_third_party&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"third_party_name",className:"text-right",children:"Third Party Name"}),o.jsx(Ie,{id:"third_party_name",name:"third_party_name",value:b.third_party_name||"",onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"notes",className:"text-right",children:"Notes"}),o.jsx(Kc,{id:"notes",name:"notes",value:b.notes||"",onChange:W,className:"col-span-3",rows:3})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),o.jsx(me,{onClick:ae,children:"Add Log"})]})]})}),o.jsx(Kt,{open:d,onOpenChange:h,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Edit Daily Log"})}),g&&o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_direction",className:"text-right",children:"Direction"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(dn,{value:g.direction,onValueChange:z=>I("direction",z),children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select direction"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"paid",children:"Paid (Outgoing)"}),o.jsx(xt,{value:"received",children:"Received (Incoming)"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_date",className:"text-right",children:"Date"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(Mp,{children:[o.jsx(Fp,{asChild:!0,children:o.jsxs(me,{variant:"outline",className:Ve("w-full justify-start text-left font-normal",!g.date&&"text-muted-foreground"),children:[o.jsx(up,{className:"mr-2 h-4 w-4"}),g.date?ma(new Date(g.date),"PPP"):o.jsx("span",{children:"Pick a date"})]})}),o.jsx(Zd,{className:"w-auto p-0",children:o.jsx(Jd,{mode:"single",selected:g.date?new Date(g.date):void 0,onSelect:ee,initialFocus:!0})})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_recipient_name",className:"text-right",children:g.direction==="received"?"From":"To"}),o.jsx(Ie,{id:"edit_recipient_name",name:"recipient_name",value:g.recipient_name,onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_amount",className:"text-right",children:"Amount"}),o.jsx(Ie,{id:"edit_amount",name:"amount",type:"number",value:g.amount||"",onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_payment_type",className:"text-right",children:"Payment Type"}),o.jsx("div",{className:"col-span-3",children:o.jsxs(dn,{value:g.payment_type,onValueChange:z=>I("payment_type",z),children:[o.jsx(nn,{children:o.jsx(hn,{placeholder:"Select payment type"})}),o.jsxs(sn,{children:[o.jsx(xt,{value:"cash",children:"Cash"}),o.jsx(xt,{value:"upi",children:"UPI"}),o.jsx(xt,{value:"bank",children:"Bank Transfer"}),o.jsx(xt,{value:"others",children:"Others"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_is_third_party",className:"text-right",children:"Third Party"}),o.jsxs("div",{className:"flex items-center space-x-2 col-span-3",children:[o.jsx(lo,{id:"edit_is_third_party",checked:g.is_third_party,onCheckedChange:z=>F("is_third_party",z)}),o.jsx(Ne,{htmlFor:"edit_is_third_party",children:g.is_third_party?"Yes":"No"})]})]}),g.is_third_party&&o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_third_party_name",className:"text-right",children:"Third Party Name"}),o.jsx(Ie,{id:"edit_third_party_name",name:"third_party_name",value:g.third_party_name||"",onChange:W,className:"col-span-3"})]}),o.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[o.jsx(Ne,{htmlFor:"edit_notes",className:"text-right",children:"Notes"}),o.jsx(Kc,{id:"edit_notes",name:"notes",value:g.notes||"",onChange:W,className:"col-span-3",rows:3})]})]}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),o.jsx(me,{onClick:R,children:"Save Changes"})]})]})}),o.jsx(Kt,{open:f,onOpenChange:m,children:o.jsxs(tr,{children:[o.jsx(ar,{children:o.jsx(ir,{children:"Delete Daily Log"})}),o.jsx("p",{children:"Are you sure you want to delete this daily log? This action cannot be undone."}),o.jsxs(ur,{children:[o.jsx(me,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),o.jsx(me,{variant:"destructive",onClick:D,children:"Delete"})]})]})})]})},RH=()=>{const[t,e]=w.useState(0),{user:r}=_r(),n=w.useCallback(async()=>{e(s=>s+1)},[]);return r?o.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6",children:[o.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Daily Logs"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Track your daily income and expenses"})]}),o.jsx(F3,{onSyncComplete:n,className:"self-end"})]}),o.jsx(DH,{},`daily-logs-${t}`)]}):o.jsx(w0,{to:"/login"})},OH=new U6,qo=({children:t})=>{const{user:e,isLoading:r}=_r();return r?o.jsx(bM,{message:"Loading your account..."}):e?o.jsx(o.Fragment,{children:t}):o.jsx(w0,{to:"/auth",replace:!0})},IH=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(!1);w.useEffect(()=>{const l=new URLSearchParams(window.location.search),c=l.get("fallback")==="true",u=l.get("safe")==="true";if(n(u),c)return;u&&console.log("Running in safe mode - limited functionality"),ZE().then(f=>{f?console.log("Supabase storage initialized successfully"):console.warn("Failed to initialize Supabase storage, some features may not work properly")}).catch(f=>{console.error("Error initializing Supabase storage:",f)});const d=window.onerror;window.onerror=(f,m,g,v,b)=>{if(console.error("Global error:",{message:f,source:m,lineno:g,colno:v,error:b}),f&&(f.toString().includes("ChunkLoadError")||f.toString().includes("Loading chunk")||f.toString().includes("Loading CSS chunk")||f.toString().includes("Unexpected token")||f.toString().includes("SyntaxError")||f.toString().includes("Cannot read property")||f.toString().includes("undefined is not an object")||f.toString().includes("null is not an object"))){e(!0);try{sessionStorage.setItem("app_error",JSON.stringify({message:f.toString(),source:m,lineno:g,colno:v,stack:b==null?void 0:b.stack,time:new Date().toISOString()}))}catch(_){console.error("Failed to store error info:",_)}}return typeof d=="function"?d(f,m,g,v,b):!1};const h=window.onunhandledrejection;return window.onunhandledrejection=function(f){if(console.error("Unhandled promise rejection:",f.reason),f.reason&&(f.reason.message&&(f.reason.message.includes("ChunkLoadError")||f.reason.message.includes("Loading chunk")||f.reason.message.includes("Network Error")||f.reason.message.includes("Failed to fetch")||f.reason.message.includes("NetworkError")||f.reason.message.includes("AbortError"))||f.reason.toString&&(f.reason.toString().includes("SyntaxError")||f.reason.toString().includes("Cannot read properties of undefined")))){e(!0);try{sessionStorage.setItem("app_error",JSON.stringify({message:f.reason.message||f.reason.toString(),stack:f.reason.stack,time:new Date().toISOString()}))}catch(m){console.error("Failed to store error info:",m)}}if(typeof h=="function")return h.call(window,f)},()=>{window.onerror=d,window.onunhandledrejection=h}},[]),w.useEffect(()=>{t&&(console.log("Critical error detected, redirecting to fallback app..."),window.location.href="/?fallback=true")},[t]);const s=new URLSearchParams(window.location.search),a=s.get("fallback")==="true",i=s.get("safe")==="true";return a?o.jsx(sF,{}):i||r?o.jsx(Le.StrictMode,{children:o.jsx(S3,{children:o.jsx(I3,{children:o.jsx(Ij,{children:o.jsx(HN,{children:o.jsx(nF,{})})})})})}):o.jsx(Le.StrictMode,{children:o.jsx(SM,{children:o.jsx(wM,{children:o.jsx(q6,{client:OH,children:o.jsxs(av,{children:[o.jsx(xL,{}),o.jsx(YL,{}),o.jsx(OA,{basename:"/Trade-Book-Ledge",children:o.jsx(K0,{mode:"wait",children:o.jsxs(IA,{children:[o.jsx(Ks,{path:"/auth",element:o.jsx(KW,{})}),o.jsx(Ks,{path:"/verify-otp",element:o.jsx(dH,{})}),o.jsx(Ks,{path:"/reset-password",element:o.jsx(fH,{})}),o.jsx(Ks,{path:"/",element:o.jsx(qo,{children:o.jsx(oV,{})})}),o.jsx(Ks,{path:"/transaction/:id",element:o.jsx(qo,{children:o.jsx(hz,{})})}),o.jsx(Ks,{path:"/new-transaction",element:o.jsx(qo,{children:o.jsx(HW,{})})}),o.jsx(Ks,{path:"/profile",element:o.jsx(qo,{children:o.jsx(pH,{})})}),o.jsx(Ks,{path:"/settings",element:o.jsx(qo,{children:o.jsx(PH,{})})}),o.jsx(Ks,{path:"/contacts",element:o.jsx(qo,{children:o.jsx(LH,{})})}),o.jsx(Ks,{path:"/daily-logs",element:o.jsx(qo,{children:o.jsx(RH,{})})}),o.jsx(Ks,{path:"*",element:o.jsx(fz,{})})]})})})]})})})})})},MH=R5(document.getElementById("root"));MH.render(o.jsx(Le.StrictMode,{children:o.jsx(S3,{children:o.jsx(I3,{children:o.jsx(Ij,{children:o.jsxs(HN,{children:[" ",o.jsx(IH,{})]})})})})}));window.clearAppLoadTimeout&&window.clearAppLoadTimeout();export{dr as _};
